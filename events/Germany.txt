###########################
# German Events R56
###########################

add_namespace = germany

# Austrian Anschluss Completed
country_event = {
	id = germany.4
	title = germany.4.t
	desc = germany.4.d
	picture = GFX_report_event_german_speech
	
	is_triggered_only = yes
	
 	immediate = {
 		hidden_effect = {
 			add_named_threat = { threat = 12 name = germany.4.t }
 		}
 	}

	option = {
		name = germany.4.a
		4 = {
			if = {
				limit = { is_owned_by = AUS }
				add_core_of = GER
			}
		}
		152 = {
			if = {
				limit = { is_owned_by = AUS }
				add_core_of = GER
			}
		}
		153 = {
			if = {
				limit = { is_owned_by = AUS }
				add_core_of = GER
			}
		}
		AUS = {
			every_unit_leader = {
				limit = {
					OR = {
						has_id = 1224
						has_id = 1226
						has_id = 1227
						has_id = 1228
						has_id = 1234	
					}
					
				}
				set_nationality = GER
			}
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				every_operative = {
					turn_operative = { turned_by = GER }
					# ensure the operative has the nationality of the country he is coming from
					add_nationality = GER				
				}				
			}
		}
		annex_country = { target = AUS transfer_troops = yes }
		#Change ruling party to democracy to ease post war things as fascists and communists puppet anyway, also load generic FT for the same reason creating a post war Austria
		hidden_effect = {
			AUS = {
				set_politics = { ruling_party = democratic elections_allowed = yes }
				add_popularity = {
					ideology = democratic
					popularity = 0.45
				}
				load_focus_tree = generic_focus
				if = {
					limit = {
						NOT = {
							has_idea = AUS_austrian_neutrality
						}
					}
					add_ideas = AUS_austrian_neutrality
				}
			}
		}
		add_political_power = 75
		add_war_support = 0.1
		add_stability = 0.05
		USA = {
			set_country_flag = { flag = USA_anschluss_window days = 60 value = 1 }
		}
		custom_effect_tooltip = anschluss_mefo_bills_tt
		hidden_effect = { # Having it appear twice might be confusing
			GER_mefo_bills_level_down = yes
			GER_mefo_bills_level_down = yes
		}
		custom_effect_tooltip = anschluss_mefo_bills_double_reduction
		add_to_variable = { var = GER_mefo_bill_counter value = -10 }
		
		if = {
			limit = {
				has_dlc = "Death or Dishonor"
				country_exists = YUG
				YUG = { has_war = no }
			}
			country_event = {
				id = DOD_yugoslavia.30
				days = 4
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.36 }
		}
	}
}

#anti_comintern_pact
# nations are asked to join pact, agreeing = relations with GER and hit with SOV 

country_event = {
	id = germany.5
	title = germany.5.t
	desc = germany.5.d
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes
	
	option = {
		name = germany.5.a		#join
		ai_chance = {
			factor = 75
			modifier = {
				factor = 2
				has_opinion = {
					target = SOV
					value < -10
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = GER
					value < -10
				}
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				tag = JAP
				has_completed_focus = JAP_the_unthinkable_option
			}
			modifier = {
				factor = 0
				is_literally_china = yes
				JAP = { has_completed_focus = JAP_purge_the_kodoha_faction }
			}
			modifier = {
				factor = 0
				tag = JAP
				has_completed_focus = JAP_purge_the_kodoha_faction
				date < 1938.1.1
			}
		}
		set_country_flag = anti_comintern_member
		GER = { add_opinion_modifier = { target = ROOT modifier = anti_comintern_pact_opinion } }
		add_opinion_modifier = { target = GER modifier = anti_comintern_pact_opinion }
		SOV  = { add_opinion_modifier = { target = ROOT modifier = pact_against_us } }
	}
	
	option = {
		name = germany.5.b		#refuse
		trigger = { NOT = { is_puppet_of = GER } }
		ai_chance = { 
			factor = 25 
		}
		GER =  { add_opinion_modifier = { target = ROOT modifier = refused_anti_comintern_pact_opinion } }
	}

}

# tripartite_pact
# anti_comintern_pact nations are asked to join pact, agreeing = relations with GER and hit with SOV

country_event = {
	id = germany.6
	title = germany.6.t
	desc = germany.6.d
	picture = GFX_report_event_hitler_croatia_handshake
	

	is_triggered_only = yes
	
	option = {
		name = germany.6.a		#join	
		remove_opinion_modifier = { target = GER modifier = anti_comintern_pact_opinion }
		add_opinion_modifier = { target = GER modifier = tripartite_pact_opinion }
		remove_opinion_modifier = { target = SOV modifier = pact_against_us }
		add_opinion_modifier = { target = SOV modifier = worse_pact_against_us }
	}
	
	option = {
		name = germany.6.b		#refuse
		trigger = { NOT = { is_puppet_of = GER } }
		add_opinion_modifier = { target = GER modifier = refused_tripartite_pact_opinion }
	}

}

#molotov_ribbentrop_pact
# fire event to SOV to accept or not. adds claims
# SOV events sends reply to GER, adds claims if they said yes, hurts relations if they say no

# Molotov-Ribbentrop Pact (Soviets)
country_event = {
	id = germany.11
	title = germany.11.t
	desc = germany.11.d
	picture = GFX_report_event_molotov_ribentrop_handshake
	
	is_triggered_only = yes
	
	option = {
		name = germany.11.a	#sounds good
		ai_chance = { 
			factor = 90 
			modifier = {
				factor = 0
				GER = {
					OR = { 
						has_wargoal_against = SOV
						is_justifying_wargoal_against = SOV
					}
					NOT = {
						is_in_faction_with = SOV
					}
				}
			}
		}
		add_opinion_modifier = { target = GER modifier = MR_pact }# pact		
		custom_effect_tooltip = germany.11.a.tt
		add_state_claim = 96
		add_state_claim = 11
		add_state_claim = 12
		add_state_claim = 13
		add_state_claim = 190
		add_state_claim = 191
		add_state_claim = 146
		add_state_claim = 147
		add_state_claim = 722
		add_state_claim = 189
		add_state_claim = 78
		add_state_claim = 89
		add_state_claim = 91
		add_state_claim = 93
		add_state_claim = 94
		add_state_claim = 95
		add_state_claim = 96
		add_state_claim = 97
		add_state_claim = 80
		add_state_claim = 784
		add_state_claim = 766
		add_state_claim = 935
		add_state_claim = 936
		if = {
			limit = {
				NOT = { owns_state = 808 }
			}
			add_state_claim = 808 #RIGA (LAT)
		}
		if = {
			limit = {
				NOT = { owns_state = 809 }
			}
			add_state_claim = 809 #ZEMGALE (LAT)
		}
		if = {
			limit = {
				NOT = { owns_state = 810 }
			}
			add_state_claim = 810 #LATGALE (LAT)
		}		
		if = {
			limit = {
				NOT = { owns_state = 811 }
			}
			add_state_claim = 811 #SAAREMAA (EST)
		}
		if = {
			limit = {
				NOT = { owns_state = 813 }
			}
			add_state_claim = 813 #VIRUMAA (EST)
		}
		if = {
			limit = {
				NOT = { owns_state = 812 }
			}
			add_state_claim = 812 #TALLIN (EST)
		}
		if = {
			limit = {
				NOT = { owns_state = 814 }
			}
			add_state_claim = 814 #SUDUVA (LIT)
		}
		if = {
			limit = {
				NOT = { owns_state = 815 }
			}
			add_state_claim = 815 #AUKSTAITIJA (LIT)
		}				
		hidden_effect =  { add_timed_idea = { idea = SOV_molotov_ribbentrop_pact days = 730 } }
		GER = {
			country_event = { days = 1 id = germany.12 }
			effect_tooltip = {
				add_opinion_modifier = { target = SOV modifier = MR_pact }# pact
			}
		}
		set_global_flag = sov_yes_pact
	}
	
	option = {
		name = germany.11.b	#no way 
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				GER = {
					NOT = { has_wargoal_against = SOV }
					NOT = { is_justifying_wargoal_against = SOV }
				}
			}
			modifier = {
				factor = 0
				is_in_faction_with = GER
			}
		}
		add_political_power = -50	
		add_opinion_modifier = { target = GER modifier = refused_MR_pact }# no pact 
		GER = {
			country_event = { days = 1 id = germany.13 }
		}
		set_global_flag = sov_no_pact
	}
}

# Soviets Sign MR Pact
country_event = {
	id = germany.12
	title = germany.12.t
	desc = germany.12.d
	picture = GFX_report_event_molotov_signing_pact
	
	is_triggered_only = yes
	
	option = {
		name = germany.12.a	#neat
		if = {
			limit = {
				SOV = {
					has_government = communism
				}
			}
			every_other_country = {
				limit = {
					NOT = { tag = GER }
					has_government = fascism 
				}
				add_opinion_modifier = { target = GER modifier = MR_pact_fascists }
			}
		}
		diplomatic_relation = { country = SOV relation = non_aggression_pact }
		add_opinion_modifier = { target = SOV modifier = MR_pact }# pact
		USA = {
			set_country_flag = { flag = USA_MR_window days = 60 value = 1 }
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.32 }
		}
	}
}

# Soviets Reject MR Pact
country_event = {
	id = germany.13
	title = germany.13.t
	desc = germany.13.d
	picture = GFX_report_event_stalin_01

	is_triggered_only = yes
	
	option = {
		name = germany.13.a	#bah
		add_opinion_modifier = { target = SOV modifier = refused_MR_pact }# no pact
	}
}

# Poland conquered... honor MR Pact?
country_event = {
	id = germany.14
	title = germany.14.t
	desc = germany.14.desc
	picture = GFX_report_event_german_troops
	
	fire_only_once = yes

	trigger = {
		tag = GER
		has_global_flag = sov_yes_pact
		date < 1943.01.01
		SOV = { 
			exists = yes 
			is_puppet = no
		}
		NOT =  { has_war_with = SOV }
		OR = {
			AND = {
				OR = {
					owns_state = 96
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 96
					}
				}
				OR = {
					owns_state = 95
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 95
					}
				}
				OR = {
					owns_state = 94
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 94
					}
				}
				OR = {
					owns_state = 93
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 93
					}
				}
				OR = {
					owns_state = 91
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 91
					}
				}
				OR = {
					owns_state = 97
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 97
					}
				}
				OR = {
					owns_state = 935
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 935
					}
				}
				OR = {
					owns_state = 936
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 936
					}
				}
				OR = {
					owns_state = 89
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 89
					}
				}
				OR = {
					owns_state = 784
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 784
					}
				}
				OR = {
					owns_state = 762
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 762
					}
				}
				OR = {
					owns_state = 807
					any_other_country = {
						is_in_faction_with = GER
						GER = {
							is_faction_leader = yes
						}
						owns_state = 807
					}
				}
			}
			AND = {
				POL = { has_capitulated = yes }
				AND = {
					OR = {
						controls_state = 96
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 96
						}
					}
					OR = {
						controls_state = 95
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 95
						}
					}
					OR = {
						controls_state = 94
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 94
						}
					}
					OR = {
						controls_state = 93
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 93
						}
					}
					OR = {
						controls_state = 91
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 91
						}
					}
					OR = {
						controls_state = 97
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 97
						}
					}
					OR = {
						controls_state = 935
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 935
						}
					}
					OR = {
						controls_state = 936
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 936
						}
					}
					OR = {
						controls_state = 89
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 89
						}
					}
					OR = {
						controls_state = 784
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 784
						}
					}
					OR = {
						controls_state = 762
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 762
						}
					}
					OR = {
						controls_state = 807
						any_other_country = {
							OR = {
								AND = {
									is_in_faction_with = GER
									GER = {
										is_faction_leader = yes
									}
								}
								AND = {
									has_global_flag = SOV_complied_MR
									is_in_faction_with = SOV
									SOV = {
										is_faction_leader = yes
									}
								}
							}
							controls_state = 807
						}
					}
				}
			}			
		}
		AND = {
			SOV = { 
				has_capitulated = no 
				AND = {
					OR = {
						controls_state = 207
						any_other_country = {
							is_puppet_of = SOV
							controls_state = 207
						}
					}
					OR = {
						controls_state = 206
						any_other_country = {
							is_puppet_of = SOV
							controls_state = 206
						}
					}
					OR = {
						controls_state = 204
						any_other_country = {
							is_puppet_of = SOV
							controls_state = 204
						}
					}
					OR = {
						controls_state = 194
						any_other_country = {
							is_puppet_of = SOV
							controls_state = 194
						}
					}
					OR = {
						controls_state = 201
						any_other_country = {
							is_puppet_of = SOV
							controls_state = 201
						}
					}
					OR = {
						controls_state = 199
						any_other_country = {
							is_puppet_of = SOV
							controls_state = 199
						}
					}
				}
			}
		}		
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {	#standard option - Soviets are likely not at war with Poland, state OWNERship is tranferred based on historical events
		trigger = {
			OR = {
				NOT = {
					has_global_flag = SOV_complied_MR
				}
				NOT = {
					SOU = {
						has_war_with = POL
					}
				}
			}
		}
		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				POL = {
					is_ai = no
					has_civil_war = no
				}
				is_in_faction_with = POL
			}
		}
		name = germany.14.a
		if = {
			limit = {
				GEO = {
					exists = no
				}
			}
			set_global_flag = kill_GEO_alexandre_chkheidze
		}
		if = { #MR Pact if ally has taken some of Poland
			limit = {
				GER = { is_faction_leader = yes }
				any_allied_country = {
					NOT = { is_subject_of = GER }
					NOT = { tag = SOU }
					OR = {
						controls_state = 96
						controls_state = 95
						controls_state = 94
						controls_state = 93
						controls_state = 91
						controls_state = 97
						controls_state = 89
						controls_state = 784
					}
				}
			}
			random_country = {
				limit = {
					is_in_faction_with = ROOT
					NOT = { is_subject_of = GER }
					NOT = { tag = SOU }
					OR = {
						controls_state = 96
						controls_state = 95
						controls_state = 94
						controls_state = 93
						controls_state = 91
						controls_state = 97
						controls_state = 89
						controls_state = 784
					}
				}
				if = {
					limit = {
						is_subject = yes
					}
					OVERLORD = { country_event = germany.1002 }
				}
				else = {
					country_event = { id = germany.1002 hours = 3 }
				}
			}
		}
		else = { #MR Pact as normal
			MR_pact_transfer_state_effect = yes
			SOU = { country_event = { id = germany.15 hours = 3 } }
		}

		if = {
			limit = {
				96 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 96
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					BLR = {
						is_puppet_of = SOV
					}
				}
			}
			SOV = { transfer_state = 96 }
		}
		if = {
			limit = {
				96 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 96
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				
				BLR = {
					is_puppet_of = SOV
				}
			}
			BLR = { transfer_state = 96 }
		}		
		if = {
			limit = {
				95 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 95
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					BLR = {
						is_puppet_of = SOV
					}
				}				
			}
			SOV = { transfer_state = 95 }
		}
		if = {
			limit = {
				95 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 95
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				
				BLR = {
					is_puppet_of = SOV
				}
			}
			BLR = { transfer_state = 95 }
		}		
		if = {
			limit = {
				94 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 94
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					BLR = {
						is_puppet_of = SOV
					}
				}				
			}
			SOV = { transfer_state = 94 }
		}
		if = {
			limit = {
				94 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 94
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				
				BLR = {
					is_puppet_of = SOV
				}
								
			}
			BLR = { transfer_state = 94 }
		}		
		if = {
			limit = {
				93 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 93
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					UKR = {
						is_puppet_of = SOV
					}					
				}
			}
			SOV = { transfer_state = 93 }
		}
		if = {
			limit = {
				93 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 93
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				UKR = {
					is_puppet_of = SOV
				}
								
			}
			UKR = { transfer_state = 93 }
		}		
		if = {
			limit = {
				91 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 91
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					UKR = {
						is_puppet_of = SOV
					}					
				}				
			}
			SOV = { transfer_state = 91 }
		}
		if = {
			limit = {
				91 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 91
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				UKR = {
					is_puppet_of = SOV
				}
								
			}
			UKR = { transfer_state = 91 }
		}
		if = {
			limit = {
				97 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 97
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				BLR = {
					is_puppet_of = SOV
				}
								
			}
			BLR = { transfer_state = 97 }
		}				
		if = {
			limit = {
				97 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 97
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					BLR = {
						is_puppet_of = SOV
					}					
				}				
			}
			SOV = { transfer_state = 97 }
		}
		if = {
			limit = {
				935 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 935
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				BLR = {
					is_puppet_of = SOV
				}
								
			}
			BLR = { transfer_state = 935 }
		}				
		if = {
			limit = {
				935 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 935
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					BLR = {
						is_puppet_of = SOV
					}					
				}				
			}
			SOV = { transfer_state = 935 }
		}
		if = {
			limit = {
				935 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 936
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				BLR = {
					is_puppet_of = SOV
				}
								
			}
			BLR = { transfer_state = 936 }
		}				
		if = {
			limit = {
				936 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 936
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					BLR = {
						is_puppet_of = SOV
					}					
				}				
			}
			SOV = { transfer_state = 936 }
		}
		if = {
			limit = {
				89 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 89
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				NOT = {
					UKR = {
						is_puppet_of = SOV
					}					
				}				
			}
			SOV = { transfer_state = 89 }
		}
		if = {
			limit = {
				89 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 89
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				UKR = {
					is_puppet_of = SOV
				}
								
			}
			UKR = { transfer_state = 89 }
		}		
		if = {
			limit = {
				784 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 784
							NOT = {
								original_tag = LIT
							}
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				LIT = {
					OR = {
						exists = no
						has_war_with = SOV
					}
				}				
			}

			SOV = { transfer_state = 784 }
		}
		if = {
			limit = {
				784 = {
					OR = {
						is_controlled_by = GER
						any_other_country = {
							controls_state = 784
							NOT = {
								original_tag = LIT
							}							
							is_in_faction_with = GER
							GER = { is_faction_leader = yes }
						}
					}
				}
				LIT = {
					exists = yes
					NOT = {
						has_war_with = SOV
					}
				}				
			}
			LIT = { 
				transfer_state = 784
				news_event = LIT_event.2
			}
		}
		SOV = { country_event = germany.15 }
	}

	option = {	#Polish-Soviet war, state CONTROL is tranferred based on historical events
		name = germany.14.c
		trigger = {
			has_global_flag = SOV_complied_MR
			#the Soviets can NOT have taken all intended land, then use original MR
			NOT = {
				SOU = {
					controls_state = 92
					controls_state = 97
					controls_state = 91
					controls_state = 89
					controls_state = 93
					controls_state = 94
					controls_state = 95
					controls_state = 936
					controls_state = 96
				}
			}
			SOU = {
				has_war_with = POL
			}
		}
		ai_chance = {
			base = 2
		}
		every_state = {
			limit = {
				controller = {
					OR = {
						has_war_with = SOU
						original_tag = ROOT
						is_in_faction_with = ROOT
						is_in_faction_with = SOV
						original_tag = SOV
					}
				}
				owner = {
					original_tag = POL
				}
			}
			if = {
				limit = {
					OR = {
						state = 935
						state = 97
						state = 91
						state = 89
						state = 93
						state = 94
						state = 95
						state = 936
						state = 96
						state = 784	#Lithuania
					}
				}
				set_state_controller_to = SOU
			}
			else = {
				if = {
					limit = {
						controller = { #dont transfer Polish lands occupied by German allies
							is_in_faction_with = SOV
							original_tag = SOV
						}
					}
					set_state_controller_to = GER
				}
			}
		}
	}

	option = {	#Polish-Soviet war alternate scenario: original MR pact followed, Germany to receive Lithuania but the Soviets more Poland, state CONTROL is tranferred
		name = germany.14.d
		trigger = {
			has_global_flag = SOV_complied_MR
			SOU = {
				has_war_with = POL
			}
			NOT = {	#if Lithuania can not be in Germany's zone, dont do this MR
				LIT = {
					OR = {
						exists = no
						is_in_faction_with = SOV
						is_subject_of = SOV
					}
				}
			}
		}
		ai_chance = {
			base = 1
			modifier = {
				add = -1
				is_historical_focus_on = yes
			}
		}
		every_state = {
			limit = {
				controller = {
					OR = {
						has_war_with = SOU
						original_tag = ROOT
						is_in_faction_with = ROOT
						is_in_faction_with = SOV
						original_tag = SOV
					}
				}
				owner = {
					original_tag = POL
				}
			}
			if = {
				limit = {
					OR = {
						state = 935
						state = 97
						state = 91
						state = 89
						state = 93
						state = 94
						state = 95
						state = 936
						state = 96
						state = 92		#Lublin, extra
						state = 934		#Suwalki, extra - the treaty doesnt specify this area, only rivers for the more southern border, most not on the game map
					}
				}
				set_state_controller_to = SOU
			}
			else = {
				if = {
					limit = {
						controller = { #dont transfer Polish lands occupied by German allies
							is_in_faction_with = SOV
							original_tag = SOV
						}
					}
					set_state_controller_to = GER
				}
			}
		}
		SOU = {	#east of the river at Warsaw
			set_province_controller = 402
			set_province_controller = 12562
			set_province_controller = 524
		}
		create_wargoal = {
			type = annex_everything
			target = LIT
		}
	}

	option = {
		name = germany.14.b
		ai_chance = {
			base = 1
			modifier = {
				add = -1
				is_historical_focus_on = yes
				NOT = {
					AND = {
						POL = {
							is_ai = no
							has_civil_war = no
						}
						is_in_faction_with = POL
					}
				}
			}
		}
		SOV = { country_event = germany.16 }
		clr_global_flag = sov_yes_pact
		diplomatic_relation = {
			country = SOV
			relation = non_aggression_pact
			active = no
		}		
		SOV = {
			add_state_claim = 96
			add_state_claim = 95
			add_state_claim = 94
			add_state_claim = 93
			add_state_claim = 91
			add_state_claim = 97
			add_state_claim = 89
			add_state_claim = 784
			add_state_claim = 934
			add_state_claim = 935
			add_state_claim = 936
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = GER
				}
			}
		}
	}
}
#Event for allies signing MR pact
country_event = {
	id = germany.1002
	title = germany.1002.t
	desc = germany.1002.desc
	picture = GFX_report_event_molotov_signing_pact

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = responded_to_MR_allied_pact
			every_other_country = {
				limit = {
					is_subject_of = ROOT
				}
				set_country_flag = responded_to_MR_allied_pact
			}
		}
	}

	option = { #Agree to honor the pact
		name = germany.14.a
		ai_chance = {
			base = 100 #ai should always say yes if Germany said yes
		}
		effect_tooltip = {
			MR_pact_transfer_state_effect = yes
		}
		hidden_effect = { #Keep going around all of Germany's allies who own parts of Poland until they have all made a decision
			if = {
				limit = {
					any_allied_country = {
						NOT = { is_subject_of = ROOT }
						NOT = { has_country_flag = responded_to_MR_allied_pact }
						OR = {
							controls_state = 96
							controls_state = 95
							controls_state = 94
							controls_state = 93
							controls_state = 91
							controls_state = 97
							controls_state = 89
							controls_state = 784
						}
					}
				}
				random_country = {
					limit = {
						is_in_faction_with = ROOT
						NOT = { is_subject_of = ROOT }
						NOT = { has_country_flag = responded_to_MR_allied_pact }
						OR = {
							controls_state = 96
							controls_state = 95
							controls_state = 94
							controls_state = 93
							controls_state = 91
							controls_state = 97
							controls_state = 89
							controls_state = 784
						}
					}
					if = {
						limit = {
							is_subject = yes
						}
						OVERLORD = { country_event = germany.1002 }
					}
					else = {
						country_event = germany.1002
					}
				}
			}
			else = { #No more allies left to ask, actually do the MR pact
				MR_pact_transfer_faction_state_effect = yes
				SOU = { country_event = germany.15 }
			}
		}
	}
	option = {
		name = germany.1002.b
		ai_chance = {
			base = 0 #AI should never refuse
		}
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				is_in_faction_with = ROOT
			}
			country_event = germany.1003
		}
		SOU = { country_event = germany.16 }
		clr_global_flag = sov_yes_pact
		GER = {
			diplomatic_relation = {
				country = SOV
				relation = non_aggression_pact
				active = no
			}
		}
		SOU = {
			if = {
				limit = {
					NOT = { owns_state = 146 }
				}
				add_state_claim = 146 #KARELIA (FIN)
			}
			if = {
				limit = {
					NOT = { owns_state = 147 }
				}
				add_state_claim = 147 #SALLA (FIN)
			}
			if = {
				limit = {
					NOT = { owns_state = 722 }
				}
				add_state_claim = 722 #PETSAMO (FIN)
			}
			if = {
				limit = {
					NOT = { owns_state = 13 }
				}
				add_state_claim = 13 #PÄRNU (EST)
			}
			if = {
				limit = {
					NOT = { owns_state = 191 }
				}
				add_state_claim = 191 #TARTU (EST)
			}
			if = {
				limit = {
					NOT = { owns_state = 811 }
				}
				add_state_claim = 811 #SAAREMAA (EST)
			}
			if = {
				limit = {
					NOT = { owns_state = 813 }
				}
				add_state_claim = 813 #VIRUMAA (EST)
			}
			if = {
				limit = {
					NOT = { owns_state = 812 }
				}
				add_state_claim = 812 #TALLIN (EST)
			}
			if = {
				limit = {
					NOT = { owns_state = 12 }
				}
				add_state_claim = 12 #VIDZEME (LAT)
			}
			if = {
				limit = {
					NOT = { owns_state = 190 }
				}
				add_state_claim = 190 #KURZEME (LAT)
			}
			if = {
				limit = {
					NOT = { owns_state = 808 }
				}
				add_state_claim = 808 #RIGA (LAT)
			}
			if = {
				limit = {
					NOT = { owns_state = 809 }
				}
				add_state_claim = 809 #ZEMGALE (LAT)
			}
			if = {
				limit = {
					NOT = { owns_state = 810 }
				}
				add_state_claim = 810 #LATGALE (LAT)
			}
			if = {
				limit = {
					NOT = { owns_state = 11 }
				}
				add_state_claim = 11 #KAUNAS (LIT)
			}
			if = {
				limit = {
					NOT = { owns_state = 784 }
				}
				add_state_claim = 784 #WILNO (LIT)
			}
			if = {
				limit = {
					NOT = { owns_state = 189 }
				}
				add_state_claim = 189 #ZEMAITIJA (LIT)
			}
			if = {
				limit = {
					NOT = { owns_state = 814 }
				}
				add_state_claim = 814 #SUDUVA (LIT)
			}
			if = {
				limit = {
					NOT = { owns_state = 815 }
				}
				add_state_claim = 815 #AUKSTAITIJA (LIT)
			}
			if = {
				limit = {
					NOT = { owns_state = 89 }
				}
				add_state_claim = 89 #STANISLAWOW (POL)
			}
			if = {
				limit = {
					NOT = { owns_state = 91 }
				}
				add_state_claim = 91 #LWOW (POL)
			}
			if = {
				limit = {
					NOT = { owns_state = 93 }
				}
				add_state_claim = 93 #WOLYN (POL)
			}
			if = {
				limit = {
					NOT = { owns_state = 94 }
				}
				add_state_claim = 94 #POLESIE (POL)
			}
			if = {
				limit = {
					NOT = { owns_state = 95 }
				}
				add_state_claim = 95 #NOWOGRODEK (POL)
			}
			if = {
				limit = {
					NOT = { owns_state = 96 }
				}
				add_state_claim = 96 #WILEJKA (POL)
			}
			if = {
				limit = {
					NOT = { owns_state = 97 }
				}
				add_state_claim = 97 #BIALYSTOK (POL)
			}
			if = {
				limit = {
					NOT = { owns_state = 78 }
				}
				add_state_claim = 78 #BESSARABIA (ROM)
			}
			if = {
				limit = {
					NOT = { owns_state = 80 }
				}
				add_state_claim = 80 #BUCOVINA (ROM)
			}
			if = {
				limit = {
					NOT = { owns_state = 766 }
				}
				add_state_claim = 766 #SOUTHERN BESSARABIA (ROM)
			}
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = GER
				}
			}
		}
	}
}

#Event telling Germany their ally broke the pact
country_event = {
	id = germany.1003
	title = germany.1003.t
	desc = germany.1003.desc
	picture = GFX_report_event_molotov_signing_pact

	is_triggered_only = yes

	option = {
		name = germany.1003.a
		ai_chance = {
			base = 1
		}
		effect_tooltip = {
			GER = {
				diplomatic_relation = {
					country = SOV
					relation = non_aggression_pact
					active = no
				}
			}
			SOU = {
				if = {
					limit = {
						NOT = { owns_state = 146 }
					}
					add_state_claim = 146 #KARELIA (FIN)
				}
				if = {
					limit = {
						NOT = { owns_state = 147 }
					}
					add_state_claim = 147 #SALLA (FIN)
				}
				if = {
					limit = {
						NOT = { owns_state = 722 }
					}
					add_state_claim = 722 #PETSAMO (FIN)
				}
				if = {
					limit = {
						NOT = { owns_state = 13 }
					}
					add_state_claim = 13 #PÄRNU (EST)
				}
				if = {
					limit = {
						NOT = { owns_state = 191 }
					}
					add_state_claim = 191 #TARTU (EST)
				}
				if = {
					limit = {
						NOT = { owns_state = 811 }
					}
					add_state_claim = 811 #SAAREMAA (EST)
				}
				if = {
					limit = {
						NOT = { owns_state = 813 }
					}
					add_state_claim = 813 #VIRUMAA (EST)
				}
				if = {
					limit = {
						NOT = { owns_state = 812 }
					}
					add_state_claim = 812 #TALLIN (EST)
				}
				if = {
					limit = {
						NOT = { owns_state = 12 }
					}
					add_state_claim = 12 #VIDZEME (LAT)
				}
				if = {
					limit = {
						NOT = { owns_state = 190 }
					}
					add_state_claim = 190 #KURZEME (LAT)
				}
				if = {
					limit = {
						NOT = { owns_state = 808 }
					}
					add_state_claim = 808 #RIGA (LAT)
				}
				if = {
					limit = {
						NOT = { owns_state = 809 }
					}
					add_state_claim = 809 #ZEMGALE (LAT)
				}
				if = {
					limit = {
						NOT = { owns_state = 810 }
					}
					add_state_claim = 810 #LATGALE (LAT)
				}
				if = {
					limit = {
						NOT = { owns_state = 11 }
					}
					add_state_claim = 11 #KAUNAS (LIT)
				}
				if = {
					limit = {
						NOT = { owns_state = 784 }
					}
					add_state_claim = 784 #WILNO (LIT)
				}
				if = {
					limit = {
						NOT = { owns_state = 189 }
					}
					add_state_claim = 189 #ZEMAITIJA (LIT)
				}
				if = {
					limit = {
						NOT = { owns_state = 814 }
					}
					add_state_claim = 814 #SUDUVA (LIT)
				}
				if = {
					limit = {
						NOT = { owns_state = 815 }
					}
					add_state_claim = 815 #AUKSTAITIJA (LIT)
				}
				if = {
					limit = {
						NOT = { owns_state = 89 }
					}
					add_state_claim = 89 #STANISLAWOW (POL)
				}
				if = {
					limit = {
						NOT = { owns_state = 91 }
					}
					add_state_claim = 91 #LWOW (POL)
				}
				if = {
					limit = {
						NOT = { owns_state = 93 }
					}
					add_state_claim = 93 #WOLYN (POL)
				}
				if = {
					limit = {
						NOT = { owns_state = 94 }
					}
					add_state_claim = 94 #POLESIE (POL)
				}
				if = {
					limit = {
						NOT = { owns_state = 95 }
					}
					add_state_claim = 95 #NOWOGRODEK (POL)
				}
				if = {
					limit = {
						NOT = { owns_state = 96 }
					}
					add_state_claim = 96 #WILEJKA (POL)
				}
				if = {
					limit = {
						NOT = { owns_state = 97 }
					}
					add_state_claim = 97 #BIALYSTOK (POL)
				}
				if = {
					limit = {
						NOT = { owns_state = 78 }
					}
					add_state_claim = 78 #BESSARABIA (ROM)
				}
				if = {
					limit = {
						NOT = { owns_state = 80 }
					}
					add_state_claim = 80 #BUCOVINA (ROM)
				}
				if = {
					limit = {
						NOT = { owns_state = 766 }
					}
					add_state_claim = 766 #SOUTHERN BESSARABIA (ROM)
				}
				effect_tooltip = {
					create_wargoal = {
						type = annex_everything
						target = GER
					}
				}
			}
		}
	}
}
# Germany honors MR Pact (Soviets)
country_event = {
	id = germany.15
	title = germany.15.t
	desc = germany.15.d
	picture = GFX_report_event_soviet_german_soldier_handshake

	is_triggered_only = yes
	
	option = {
		name = germany.12.a
		if = {
			limit = {
				SOV = {
					controls_state = 93
					controls_state = 94
				}
			}
			hidden_effect = {
				news_event = { hours = 6 id = news.33 }
			}
		}
	}
}

# Germany betrays MR Pact (Soviets)
country_event = {
	id = germany.16
	title = germany.16.t
	desc = germany.16.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes
	
	option = {
		name = germany.16.a
		create_wargoal = {
			type = annex_everything
			target = GER
		}
	}
}

# Second Vienna Award
country_event = {
	id = germany.20
	title = germany.20.t
	desc = germany.20.d
	picture = GFX_report_event_vienna_award_hungary
	
	is_triggered_only = yes
	
	option = { # Give Hungary Northern Transylvania
		name = germany.20.a
		ai_chance = { factor = 80 }
		add_named_threat = { threat = 2 name = GER_second_vienna_award_HUN_north }
		HUN = {
			set_country_flag = GER_second_vienna_award_HUN_north
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_HUN_north } 
		}
		ROM = {
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_ROM_north }
			country_event = { id = romania.2 }
		}
	}
	option = { # Give Hungary all of Transylvania
		trigger = {
			ROM = {
				controls_state = 77
				controls_state = 83
				controls_state = 84
			}
		}
		name = germany.20.b
		ai_chance = { 
			factor = 10 
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		add_named_threat = { threat = 3 name = GER_second_vienna_award_HUN_all }
		HUN = { 
			set_country_flag = GER_second_vienna_award_HUN_all
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_HUN_all } 
		}
		ROM = {
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_ROM_all }
			country_event = { id = romania.3 }
		}
	}
	option = { # Give Hungary nothing
		name = germany.20.c
		ai_chance = { 
			factor = 10 
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		ROM = {
			country_event = { id = romania.4 }
		}
		HUN = {
			set_country_flag = GER_second_vienna_award_noland
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_noland }
			country_event = { id = hungary.1 }
		}
	}
}

# Romania Rejects Decision!
country_event = {
	id = germany.21
	title = germany.21.t
	desc = germany.21.d
	picture = GFX_report_event_vienna_award_hungary
	
	is_triggered_only = yes
	
	option = {
		name = germany.21.a
		create_wargoal = {
			type = take_state_focus
			target = ROM
			generator = { 76 }
		}
	}
}

# Claim Memel - 188.controller Folds
country_event = {
	id = germany.22
	title = germany.22.t
	desc = germany.22.d
	picture = GFX_report_event_vienna_award_hungary
	
	is_triggered_only = yes
	
	option = {
		name = germany.22.a
		hidden_effect = {
			news_event = { id = news.19 }
		}
		GER = {
			transfer_state = 188
			add_state_core = 188
		}
	}
}

# Claim Memel - 188.controller Rejects Demand
country_event = {
	id = germany.23
	title = germany.23.t
	desc = germany.23.d
	picture = GFX_report_event_lithuania_army

	is_triggered_only = yes

	option = {
		name = germany.23.a
		hidden_effect = {
			news_event = { id = news.20 }
		}
		create_wargoal = {
			target = FROM
			type = take_state_focus
			generator = { 188 }
			expire = 0
		}
	}
}

# Japan Demands Withdrawal of Falkenhausen
country_event = {
	id = germany.24
	title = germany.24.t
	desc = germany.24.d
	picture = GFX_report_event_hitler_china

	is_triggered_only = yes

	option = { # Agree
		name = germany.24.a
		trigger = {
			NOT = { has_country_flag = GER_von_falkenhausen_promise_to_china }
		}
		JAP = {
			country_event = { days = 1 id = japan.8 }
		}
		CHI = {
			country_event = { days = 1 id = china.2 }
			effect_tooltip = {
				remove_ideas = german_advisors
				show_ideas_tooltip = german_advisors
			}
		}
	}
	option = { # Refuse
		name = germany.24.b
		trigger = {
			NOT = { has_country_flag = GER_von_falkenhausen_promise_to_china }
		}
		JAP = {
			country_event = { days = 1 id = japan.9 }
		}
	}

	option = { # Refuse, promised the Chinese in return for Tsingtao
		name = germany.24.c
		trigger = {
			has_country_flag = GER_von_falkenhausen_promise_to_china
		}
		JAP = {
			country_event = { days = 1 id = japan.9 }
		}
	}
}

# German - Chinese Relations Poor, Mission Recalled
country_event = {
	id = germany.25
	title = germany.25.t
	desc = germany.25.d
	picture = GFX_report_event_chinese_army_training

	fire_only_once = yes

	trigger = {
		tag = GER
		CHI = { has_idea = german_advisors }
		has_opinion = { target = CHI value < -20 }
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		CHI = { remove_ideas = german_advisors }
	}

	option = {
		name = germany.25.a
		CHI = {
			country_event = { id = china.3 }
		}
	}
}

# Germany at war with China, Advisors Detained
country_event = {
	id = germany.26
	title = germany.26.t
	desc = germany.26.d
	picture = GFX_report_event_german_detained_china

	fire_only_once = yes

	trigger = {
		tag = GER
		CHI = { has_idea = german_advisors }
		has_war_with = CHI
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		CHI = { remove_ideas = german_advisors }
	}

	option = {
		name = germany.26.a
		CHI = {
			country_event = { id = china.4 }
		}
	}
}

# Fortifying the Westwall
country_event = {
	id = germany.27
	title = germany.27.t
	desc = germany.27.d
	picture = GFX_report_event_bunker_01

	is_triggered_only = yes

	option = {
		name = germany.27.a
		923 = {
			add_building_construction = {
				type = bunker
				province = 11640
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 6712
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 6542
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 3530
				level = 5
			}
		}
		42 = {
			add_building_construction = {
				type = bunker
				province = 3558
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 563
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 11531
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 9575
				level = 5
			}
		}
	}
}

# Austria asked about Anschluss
country_event = {
	id = germany.28
	title = germany.28.t
	desc = germany.28.d
	picture = GFX_report_event_hitler_parade

	is_triggered_only = yes

	option = { # Accept
		name = germany.28.a
		ai_chance = {
			base = 30
			modifier = {
				add = -25
				GER = { has_army_size = { size < 40 } }
			}
			modifier = {
				add = 100
				GER = { has_army_size = { size > 39 } }
			}
			modifier = {
				add = 20
				is_in_faction_with = GER
			}
			modifier = {
				factor = 0.05
				has_global_flag = CZE_anschluss_sabotage_flag
			}				
		}
		GER = {
			country_event = { hours = 2 id = germany.4 }
		}
		custom_effect_tooltip = GAME_OVER_TT
	}
	option = { # Refuse
		name = germany.28.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0					##### CHANGED FOR CZKE - CZECHOSLOVAKIA EXPANDED MOD (from factor = 0 to add = 0 )
				is_historical_focus_on = yes
				NOT = { HUN = { has_completed_focus = HUN_protect_austria } }
			}
			modifier = {
				GER = { has_army_size = { size > 39 } }
				factor = 0.5
			}
			modifier = {
				add = 20
				GER = { has_army_size = { size < 30 } }
			}
			modifier = {																							##### ADDED FOR CZKE - CZECHOSLOVAKIA EXPANDED MOD
				factor = 100																						##### ADDED FOR CZKE - CZECHOSLOVAKIA EXPANDED MOD
				CZE = {	has_completed_focus = CZKE_sabotage_anchluss } 												##### ADDED FOR CZKE - CZECHOSLOVAKIA EXPANDED MOD
			}																										##### ADDED FOR CZKE - CZECHOSLOVAKIA EXPANDED MOD
			modifier = {
				add = 100
				HUN = {
					OR = {
						has_completed_focus = HUN_protect_austria
						is_in_faction_with = AUS
					}
				}
			}
			modifier = {
				factor = 2
				is_in_faction = yes
				NOT = { is_in_faction_with = GER }
			}
			modifier = {
				any_other_country = {
					has_guaranteed = AUS
				}
				factor = 5 #i've got friends
			}
			modifier = {
				any_other_country = {
					is_major = yes
					has_guaranteed = AUS
				}
				factor = 5 #i've got big friends
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = GER_anschluss_rejected }
			country_event = { hours = 2 id = germany.29 }
			if = { limit = { is_in_faction_with = AUS }
				remove_from_faction = AUS
			}
		}
	}
}

# Austria refuses Anschluss
country_event = {
	id = germany.29
	title = germany.29.t
	desc = germany.29.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = {
		name = germany.29.a
		add_state_claim = 4
		add_state_claim = 152
		add_state_claim = 153
		create_wargoal = {
			type = take_state_focus
			target = AUS
			generator = { 4 152 153 }
		}
	}
}

### Munich Conference

# Britain
country_event = {
	id = germany.40
	title = germany.40.t
	desc = {
		text = germany.40.d
		trigger = { NOT = { has_war_with = GER } }
	}
	desc = {
		text = germany.40.d_2
		trigger = { has_war_with = GER }
	}
	desc = {
		text = germany.40.d_3
		trigger = {
			NOT = { has_war_with = GER }
			tag = HOL
		}
	}
	picture = GFX_report_event_german_politician_speech

	is_triggered_only = yes

	option = { # Abandon the Czechs
		name = germany.40.a
		trigger = {
			NOT = { has_war_with = GER }
			is_puppet = no # can't do anything if puppet
		}
		ai_chance = {
		 	factor = 90
			modifier = {																									###### Change made for CZKE mod  line added
				add = 100																									###### Change made for CZKE mod  line added
				CZE = {	NOT = { has_completed_focus = CZKE_petition_league_of_nations }										###### Change made for CZKE mod  line added
				}																											###### Change made for CZKE mod  line added
			}
			modifier = {
				factor = 0.3
				has_government = communism
				CZE = { has_government = communism }
			}
			modifier = {
				has_global_flag = GER_has_started_war
				NOT = { is_in_faction_with = GER }
				factor = 0
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = ENG_ai_behavior
						option = DEMOCRATIC_HISTORICAL
					}
					has_game_rule = {
						rule = ENG_ai_behavior
						option = DEMOCRATIC_ALTERNATE
					}
					has_game_rule = {
						rule = ENG_ai_behavior
						option = FASCIST
					}
					has_war_with = GER
					is_in_faction_with = CZE
				}
			}
		}
		if = {
			limit = {
				has_completed_focus = ENG_no_further_appeasement
			}
			add_political_power = -200
		}
		if = {
			limit = {
				tag = HOL
			}
			ENG = { country_event = germany.40 }
		}
		if = {
			limit = {
				tag = ENG
			}
			FRA = { country_event = germany.41 }
		}
		CZE = {
			add_opinion_modifier = { target = ROOT modifier = western_betrayal }
		}
		if = {
			limit = {
				tag = HOL
				CZE = { is_guaranteed_by = HOL }
			}
			HOL = {
				diplomatic_relation = {
   					country = CZE
   					relation = guarantee
   					active = no
  				}
  				add_ai_strategy = {
					type = ignore
					id = "CZE"
					value = 100
				}
			}
		}
		if = {
			limit = {
				tag = ENG
				CZE = { is_guaranteed_by = ENG }
			}
			ENG = {
				diplomatic_relation = {
   					country = CZE
   					relation = guarantee
   					active = no
  				}
  				add_ai_strategy = {
					type = ignore
					id = "CZE"
					value = 100
				}
			}
		}
		if = {
			limit = {
				CZE = { is_in_faction_with = ROOT }
				is_faction_leader = yes
			}
			remove_from_faction = CZE
		}
	}
	option = { # Support the Czechs
		name = germany.40.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_in_faction_with = GER
			}
			modifier = {																								###### Change made for CZKE mod  line added
				factor = 100																							###### Change made for CZKE mod  line added
				CZE = {	has_completed_focus = CZKE_petition_league_of_nations } 										###### Change made for CZKE mod  line added
			}																											###### Change made for CZKE mod  line added
			modifier = {											#if Czechs haven't appealed to the League, this will make a factor 0
				add = -10
				ENG_is_on_historical_plan_trigger = yes
				NOT = { 
					is_in_faction_with = CZE
					has_war_with = GER
					has_global_flag = GER_has_started_war			#you attacked somebody, so why should we appease you, really?!
				}
			}
			modifier = {
				factor = 3
				has_government = communism
				CZE = { has_government = communism }
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = ENG_ai_behavior 
						option = NEUTRALITY
					}
					has_game_rule = {
						rule = ENG_ai_behavior 
						option = COMMUNIST
					}
				}
				NOT = { 
					is_in_faction_with = CZE
					has_war_with = GER
				}
			}
		}
		if = {
			limit = {
				is_in_faction_with = GER
				is_faction_leader = yes
			}
			remove_from_faction = GER
		}
		if = {
			limit = {
				is_in_faction_with = GER
				is_faction_leader = no
			}
			GER = { remove_from_faction = ENG }
		}
		if = {
			limit = {
				NOT = { has_completed_focus = ENG_no_further_appeasement }
			}
			add_political_power = -200
		}
		add_opinion_modifier = { target = GER modifier = condemn_aggression }
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 }
				}
			}
		}
		if = {
			limit = { 
				is_in_faction = yes
				CZE = { is_in_faction = no }	   
			}
			random_country = {
				limit = {
					is_faction_leader = yes
					is_in_faction_with = ROOT #this may in fact be ROOT, since countries are in a faction with themselves!
				}
				add_to_faction = CZE
			}							   
		}
		if = {
			limit = {
				tag = HOL
			}
			CZE = {
				add_ai_strategy = {
					type = alliance
					id = "HOL"
					value = 200
				}
			}
		}
		if = {
			limit = {
				tag = HOL
			}
			CZE = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"
					value = 200
				}
			}
		}
		if = {
			limit = {
				NOT = { tag = HOL }
				FRA = {
					NOT = { has_war_with = CZE }
				}
			}
			FRA = { country_event = germany.42 }
		}
		CZE = {
			add_opinion_modifier = { target = ROOT modifier = offered_support }
		}
	}
}

# France (Britain Backs Down)
country_event = {
	id = germany.41
	title = germany.40.t
	desc = germany.41.d
	picture = GFX_report_event_chamberlain_announce

	is_triggered_only = yes

	option = { # Follow Britain's lead
		name = germany.41.a
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				is_in_faction_with = CZE
			}
			modifier = {
				factor = 0.3
				has_government = communism
				CZE = { has_government = communism }
			}
			modifier = {
				has_global_flag = GER_has_started_war
				factor = 0
			}
			modifier = {
				add = 100
				has_global_flag = FRA_GER_sphere_of_influence_agreement
			}
		}
		CZE = {
			country_event = germany.46
			add_opinion_modifier = { target = FRA modifier = western_betrayal }
		}
		if = {
			limit = {
				is_in_faction_with = CZE
				is_faction_leader = yes
			}
			if = {
				limit = {
					NOT = {
						any_other_country = { #check if CZE and FRA are the only countries in this faction
							NOT = { original_tag = CZE }
							is_in_faction_with = ROOT
						}
					}
				}
				dismantle_faction = yes 
			}			  
		}
		if = {
			limit = {
				is_in_faction_with = CZE
				is_faction_leader = no
			}
			random_other_country = {
				limit = {
					is_in_faction_with = FRA
					is_faction_leader = yes
				}
				remove_from_faction = FRA
			}
		}
		if = {
			limit = {
				CZE = { is_guaranteed_by = FRA }
			}
			FRA = {
				diplomatic_relation = {
   					country = CZE
   					relation = guarantee
   					active = no
  				}
  				add_ai_strategy = {
					type = ignore
					id = "CZE"
					value = 100
				}
			}
		}
		if = {
			limit = {
				YUG = { is_guaranteed_by = FRA }
			}
			FRA = {
				diplomatic_relation = {
   					country = YUG
   					relation = guarantee
   					active = no
  				}
  				add_ai_strategy = {
					type = ignore
					id = "YUG"
					value = 100
				}
			}
			YUG = {
				add_opinion_modifier = { target = FRA modifier = western_betrayal }
			}
		}
	}
	option = { # Support the Czechs alone
		name = germany.41.b 
		trigger = { is_puppet = no }
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				is_in_faction_with = GER
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				NOT = {
					is_in_faction_with = CZE
				}
			}
			modifier = {
				factor = 0
				has_global_flag = FRA_GER_sphere_of_influence_agreement
			}			
			modifier = {
				factor = 6
				has_government = communism
				CZE = { has_government = communism }
			}
		}
		if = {
			limit = {
				is_in_faction_with = CZE
				has_completed_focus = FRA_little_entente
			}
			add_political_power = -100
		}
		if = {
			limit = {
				OR = {
					NOT = { has_completed_focus = FRA_little_entente }
					NOT = { is_in_faction_with = CZE } 
				}
			}
			add_political_power = -200
		}
		add_opinion_modifier = { target = GER modifier = condemn_aggression }
		CZE = { 
			country_event = germany.45
			add_opinion_modifier = { target = FRA modifier = offered_support }
		}
		GER = {
			country_event = germany.48
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 }
				}
			}
		}
		if = {
			limit = { is_in_faction_with = ENG }
			ENG = { 
				country_event = germany.43 
				if = {
					limit = {
						is_faction_leader = yes
					}
					remove_from_faction = FRA
					else = {
						FRA = { remove_from_faction = ENG }
					}
				}
			}
		}
		if = {
			limit = { is_in_faction_with = GER }
			if = {
				limit = { GER = { is_faction_leader = yes } }
				GER = { 
					remove_from_faction = FRA
				}
				else = {
					remove_from_faction = GER
				}
			}
		}
		if = {
			limit = {
				is_in_faction = yes
				is_faction_leader = yes
				NOT = { is_in_faction_with = ENG }
				NOT = { is_in_faction_with = GER }
				NOT = { is_in_faction_with = CZE }
				CZE = { is_in_faction = no }
			}
			add_to_faction = CZE
			CZE = {
				add_ai_strategy = {
					type = alliance
					id = "FRA"
					value = 200
				}
			}
		}
		if = {
			limit = {
				OR = {
					is_in_faction = no
					AND = {
						is_faction_leader = no
						is_in_faction_with = ENG
					}
					is_in_faction_with = GER
				}
				CZE = { is_in_faction = no }
			}
			create_faction = "french_alliance"
			set_rule = { can_create_factions = yes }
			add_to_faction = CZE
			CZE = {
				add_ai_strategy = {
					type = alliance
					id = "FRA"
					value = 200
				}
			}
		}
		if = {
			limit = {
				is_in_faction = no
				CZE = { 
					is_faction_leader = yes 
					has_completed_focus = CZKE_revive_little_entente
				}
			}
			CZE = { add_to_faction = FRA }
			FRA = {
				add_ai_strategy = {
					type = alliance
					id = "CZE"
					value = 200
				}
			}
		}
		if = {
			limit = { NOT = { has_completed_focus = FRA_little_entente } }
			add_stability = 0.05
		}
	}
}

# France (Britain Supports the Czechs)
country_event = {
	id = germany.42
	title = germany.40.t
	desc = germany.42.d
	picture = GFX_report_event_czech_soldiers_01
	
	is_triggered_only = yes
	
	#Support
	option = {
		name = germany.42.a
		trigger = {
			is_subject = no
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				is_in_faction_with = GER
			}
			modifier = {
				factor = 0
				has_global_flag = FRA_GER_sphere_of_influence_agreement
			}			
		}
		if = {
			limit = {
				is_in_faction = yes
				NOT = { is_in_faction_with = ENG }
				NOT = { is_in_faction_with = CZE }
				NOT = { has_guaranteed = CZE }
			}
			give_guarantee = CZE
		}
		if = {
			limit = {				  
				is_in_faction = no
			}
			ENG = { add_to_faction = FRA }
			add_ai_strategy = {
				type = alliance
				id = "ENG"
				value = 200
			}
		}
		if = {
			limit = {
				is_in_faction_with = CZE
				has_completed_focus = FRA_little_entente
				is_faction_leader = yes
				NOT = { is_in_faction_with = ENG }
			}
			add_to_faction = ENG #Britain joins the little entente
			every_other_country = {
				limit = { is_subject_of = ENG }
				ROOT = { add_to_faction = PREV }
			}
		}
		add_opinion_modifier = { target = GER modifier = condemn_aggression }
		CZE = { 
			country_event = germany.44
			add_opinion_modifier = { target = FRA modifier = offered_support }
		}
		GER = {
			country_event = germany.47
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 }
				}
			}
		}
	}

	#Abandon
	option = {
		name = germany.42.b
		trigger = {
			NOT = { is_in_faction_with = ENG }
			NOT = { is_in_faction_with = CZE }
		}
		ai_chance = { 
			factor = 10
			modifier = {
				add = 100
				has_global_flag = FRA_GER_sphere_of_influence_agreement
			}			 
			modifier = {
				has_global_flag = GER_has_started_war
				NOT = { is_in_faction_with = GER } #FRA doesn't care if in faction
				factor = 0
			}
		}
		if = {
			limit = {
				CZE = { is_guaranteed_by = FRA }
			}
			FRA = {
				diplomatic_relation = {
   					country = CZE
   					relation = guarantee
   					active = no
  				}
  				add_ai_strategy = {
					type = ignore
					id = "CZE"
					value = 100
				}
			}
		}
		if = {
			limit = {
				YUG = { is_guaranteed_by = FRA }
			}
			FRA = {
				diplomatic_relation = {
   					country = YUG
   					relation = guarantee
   					active = no
  				}
  				add_ai_strategy = {
					type = ignore
					id = "YUG"
					value = 100
				}
			}
			YUG = {
				add_opinion_modifier = { target = FRA modifier = western_betrayal }
			}
		}
		CZE = {
			country_event = germany.44
			add_opinion_modifier = { target = FRA modifier = western_betrayal }
		}
		GER = {
			country_event = germany.47
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 }
				}
			}
		}		
	}
}

# France leaves the Allies
country_event = {
	id = germany.43
	title = germany.43.t
	desc = germany.43.d
	picture = GFX_report_event_french_british_officers

	is_triggered_only = yes

	option = {
		name = germany.43.a
		FRA = {
			add_opinion_modifier = { target = ENG modifier = abandoned_czechs }
		}
	}
}

# Czechoslovakia (British and (possibly) French Support)
country_event = {
	id = germany.44
	title = germany.40.t
	desc = germany.44.d
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.44.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 }
				}
			}
		}
	}
}

# Czechoslovakia (French Support)
country_event = {
	id = germany.45
	title = germany.40.t
	desc = germany.45.d
	picture = GFX_report_event_chamberlain_announce

	is_triggered_only = yes

	option = {
		name = germany.45.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 }
				}
			}
		}
	}
}

# Czechoslovakia (Abandoned)
country_event = {
	id = germany.46
	title = germany.46.t
	desc = germany.46.d
	picture = GFX_report_event_czech_soldiers_01

	is_triggered_only = yes

	option = { # Surrender the Sudetenland
		name = germany.46.a
		ai_chance = {
			factor = 90
			modifier = { # Decrease chance CZE resists if AUS isn't taken first
				AUS = { exists = yes }
				factor = 0.5
			}
			modifier = { # If they stand a chance they will fight
				factor = 0
				strength_ratio = {
					tag = GER
					ratio > 0.75
				}
				NOT = {
					any_neighbor_country = {
						NOT = { tag = GER }
						is_in_faction_with = GER
					}
				}
			}
			modifier = {
				factor = 0 #if you lead a faction, fight
				is_faction_leader = yes
			}
			modifier = {
				factor = 0.5 #if you are in a faction, maybe fight
				is_faction_leader = no
				is_in_faction = yes
			}
			modifier = {
				factor = 0.05 #if you are in a faction with a major, probably fight
				is_faction_leader = no
				is_in_faction = yes
				any_allied_country = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0
				is_puppet = yes
				NOT = { is_puppet_of = GER } #puppeted CZE wouldn't surrender Sudetenland otherwise
			}
			modifier = { # Increase it again if other bordering nations are in Axis
				any_neighbor_country = {
					NOT = { tag = GER }
					is_in_faction_with = GER
				}
				factor = 2.0
			}
		}
		GER = { country_event = germany.50 }
	}
	option = { # Refuse anyway
		name = germany.46.b
		ai_chance = {
			factor = 9.5
			modifier = {
				add = 0.5
				strength_ratio = {
					tag = GER
					ratio < 0.5
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = GER_demand_sudetenland_rejected }
			set_global_flag = CZE_refused_sudetenland
			country_event = germany.49
			effect_tooltip = {
				if = {
					limit = {
						CZE = {
							is_in_faction_with = GER
						}
					}
					GER = { remove_from_faction = CZE }
				}
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 74 }
				}
			}
		}
	}
}

# Germany (British and (possibly) French Support for Czechoslovakia)
country_event = {
	id = germany.47
	title = germany.40.t
	desc = germany.47.d
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.47.a
		create_wargoal = {
			type = take_state_focus
			target = CZE
			generator = { 69 74 }
		}
		add_state_claim = 69
		add_state_claim = 74
		hidden_effect = {
			news_event = { hours = 6 id = news.57 }
		}
		set_country_flag = allies_support_czechs
	}
}

# Germany (French Support for Czechoslovakia)
country_event = {
	id = germany.48
	title = germany.40.t
	desc = germany.48.d
	picture = GFX_report_event_chamberlain_announce

	is_triggered_only = yes

	option = {
		name = germany.48.a
		create_wargoal = {
			type = take_state_focus
			target = CZE
			generator = { 69 74 }
		}
		add_state_claim = 69
		add_state_claim = 74
		hidden_effect = {
			news_event = { hours = 6 id = news.58 }
		}
	}
}

# Germany (Czechoslovakia Refuses Demands)
country_event = {
	id = germany.49
	title = germany.40.t
	desc = germany.49.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		name = germany.49.a
		create_wargoal = {
			type = take_state_focus
			target = CZE
			generator = { 69 74 }
		}
		add_state_claim = 69
		add_state_claim = 74
		if = {
			limit = {
				CZE = {
					is_in_faction_with = GER
				}
			}
			GER = { remove_from_faction = CZE }
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.59 }
		}
	}
}

# Germany (Czechoslovakia Surrenders Sudetenland)
country_event = {
	id = germany.50
	title = germany.40.t
	desc = germany.50.d
	picture = GFX_report_event_german_politician_speech

	is_triggered_only = yes

	option = {
		name = germany.50.a
		69 = { add_core_of = GER }
		GER = { transfer_state = 69 }
		74 = { add_core_of = GER }
		GER = { transfer_state = 74 }
		add_war_support = 0.1
		add_stability = 0.05
		play_peace_in_our_time_effect = yes

		if = {
			limit = {
				88 = { is_owned_by = POL }
			}
			POL = {
				country_event = { hours = 6 id = germany.52 }
			}
		}
		set_country_flag = sudetenland_acquired
		hidden_effect = {
			news_event = { hours = 6 id = news.56 }
			CZE = { #benes goes to exile after Germany annexed Sudetenland
				country_event = { 
					id = czke.8
					days = 3
				}
			}
			if = {
				limit = {
					has_dlc = "Death or Dishonor"
					country_exists = YUG
					YUG = { has_war = no }
					ENG = { NOT = { has_war_with = YUG } }
					ENG = { has_government = democratic }
				}
				ENG = {
					country_event = {
						id = DOD_yugoslavia.42
						days = 3
					}
				}
			}
		}
	}
}

# Hungary (First Vienna Award)
country_event = {
	id = germany.51
	title = germany.51.t
	desc = germany.51.d
	picture = GFX_report_event_vienna_award_negotiations

	is_triggered_only = yes

	option = {
		name = germany.51.a
		HUN = {
			transfer_state = 664
			transfer_state = 996
		}
	}
}

# Poland (Zaolzie)
country_event = {
	id = germany.52
	title = germany.52.t
	desc = germany.52.d
	picture = GFX_report_event_polish_tanks_01

	is_triggered_only = yes

	option = {
		name = germany.52.a
		72 = { add_core_of = POL }
		POL = { transfer_state = 72 }
	}
}

# Czechoslovakia (The Fate of Czechoslovakia)
country_event = {
	id = germany.53
	title = germany.53.t
	desc = germany.53.d
	picture = GFX_report_event_german_politician_speech

	is_triggered_only = yes

	option = { # Agree
		name = germany.53.a
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					is_in_faction_with = ENG
					is_in_faction_with = FRA
					is_puppet = yes
					GER = {
						has_war_with = ENG
						has_war_with = FRA
					}
					GER = {
						has_war_with = SOV
						OR = {
							has_war_with = ENG
							has_war_with = FRA
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				GER = {
					OR = {
						AND = {
							has_war_with = ENG
							NOT = {
								has_war_with = FRA
							}
						}
						AND = {
							has_war_with = FRA
							NOT = {
								has_war_with = ENG
							}
						}
					}
				}
			}
		}
		GER = { country_event = germany.55 }
		USA = {
			set_country_flag = { flag = USA_munich_window days = 60 value = 1 }
		}		
		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = 0.1
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = 0.1
			}
		}
		if = {
			limit = {
				has_DLC = "Death or Dishonor"
				country_exists = YUG
				YUG = { has_war = no }
			}
			GER = {
				country_event = {
					id = DOD_yugoslavia.32
					hours = 6
				}
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
	}
	option = { # Refuse
		name = germany.53.b
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = ENG }
				NOT = { is_in_faction_with = FRA }
				is_puppet = no
				NOT = {
					GER = {
						has_war_with = ENG
						has_war_with = FRA
					}
				}
				NOT = {
					GER = {
						has_war_with = SOV
						OR = {
							has_war_with = ENG
							has_war_with = FRA
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				GER = {
					OR = {
						AND = {
							has_war_with = ENG
							NOT = {
								has_war_with = FRA
							}
						}
						AND = {
							has_war_with = FRA
							NOT = {
								has_war_with = ENG
							}
						}
					}
				}
			}
		}
		GER = {
			country_event = { id = germany.54 days = 1 }
		}
		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = 0.1
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = 0.1
			}
		}
	}
}

# The Czechs Resist
country_event = {
	id = germany.54
	title = germany.54.t
	desc = germany.54.d
	picture = GFX_report_event_czech_soldiers_01

	is_triggered_only = yes

	option = {
		name = germany.54.a
		if = {
			limit = {
				75 = {
					is_owned_and_controlled_by = CZE
				}
			}
			add_state_claim = 75
		}
		if = {
			limit = {
				9 = {
					is_owned_and_controlled_by = CZE
				}
			}
			add_state_claim = 9
		}
		create_wargoal = {
			type = annex_everything
			target = CZE
		}
	}
}

# The Fate of Czechoslovakia
country_event = {
	id = germany.55
	title = germany.53.t
	desc = {
		text = germany.55.d
		trigger = { has_global_flag = end_of_czechoslovakia }
	}
	desc = {
		text = germany.55.d_2
		trigger = { NOT = { has_global_flag = end_of_czechoslovakia } }
	}
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				has_dlc = "La Resistance"
				CZE = {
					has_government = democratic
				}
				ENG = {
					has_government = democratic
					NOT = {
						has_completed_focus = ENG_a_change_in_course
					}
					is_puppet = no
					is_major = yes
				}				
			}
			CZE = {
				every_operative = {
					turn_operative = { turned_by = ENG }
					# ensure the operative has the nationality of the country he is coming from
					add_nationality = ENG				
				}	
			}
		}
		else_if = {
			limit = {
				has_dlc = "La Resistance"
				CZE = {
					has_government = democratic
				}
				ENG = {
					OR = {
						NOT = {
							has_government = democratic
						}
						is_puppet = yes
						is_major = no
					}
				}
				any_other_country = {
					is_major = yes
					has_government = democratic
					NOT = {
						has_idea_with_trait = fascist_demagogue
						has_idea_with_trait = communist_revolutionary
					}
				}				
			}
			random_country = {
				limit = {
					is_major = yes
					has_government = democratic
					NOT = {
						has_idea_with_trait = fascist_demagogue
						has_idea_with_trait = communist_revolutionary
					}					
				}
			}			
			CZE = {
				every_operative = {
					turn_operative = { turned_by = PREV.PREV }
					# ensure the operative has the nationality of the country he is coming from
					add_nationality = PREV.PREV				
				}	
			}			
		}
	}

	option = {
		name = germany.55.a
		ai_chance = { 
			factor = 80
			modifier = {
				factor = 0
				country_exists = SLO
			}
		 }
		if = {
			limit = {
				70 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			SLO = { transfer_state = 70 }
		}
		if = {
			limit = {
				71 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			SLO = { transfer_state = 71 }
		}
		if = {
			limit = {
				154 = { is_owned_by = HUN }
				HUN = {
					is_friend_or_potential_friend_of_GER = yes
				}
				73 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
				country_exists = HUN
			}
			HUN = { transfer_state = 73 }
		}


		if = {
			limit = {
				OR = {
					NOT = { 154 = { is_owned_by = HUN } }
					HUN = {
						OR = {
							is_friend_or_potential_friend_of_GER = no
							exists = no
						}
					}
				}
				73 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			SLO = { transfer_state = 73 }
		}

		if = {
			limit = {
				664 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			SLO = { transfer_state = 664 }
		}
		if = {
			limit = { country_exists = CZE }
			SLO = {
				inherit_technology = CZE
			}
			annex_country = { target = CZE }
			add_war_support = 0.1
		}
		puppet = SLO
		every_state = {
			limit = {
				is_core_of = CZE
				is_controlled_by = ROOT
			}
			set_compliance = 50
		}
		if = {
			limit = {
				72 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
				country_exists = POL
			}
			POL = { transfer_state = 72 } # Give Poland Zaolzie
		}

		if = {
			limit = {
				72 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
				NOT = { country_exists = POL }
			}
			SLO = { transfer_state = 72 } # Give Slovakia Zaolzie
		}

		if = {
			limit = { 
				has_global_flag = GER_HUN_CZE_split
				country_exists = HUN 
			}
			
			HUN = { country_event = DOD_hungary.106 }
		}

		if = {
			limit = { 
				NOT = { 
					HUN = { 
						controls_state = 664
						controls_state = 996
					}
				} 
				country_exists = HUN
			}
			hidden_effect = { GER = { country_event = r56.ger.15 } } # r56.ger.15 - Giving Southern Slovakia to Hungary
		}

		custom_effect_tooltip = r56_GER_first_vienna_award_II_tt

		#if = {
		#	limit = {
		#		has_global_flag = ger_vanilla_focus_tree
		#	}
			custom_effect_tooltip = end_of_czechoslovakia_mefo_bills_tt
			add_to_variable = { var = GER_mefo_bill_counter value = -5 }
			GER_mefo_bills_level_down = yes
		#}
		
		USA = {	#USA can denounce the aggression
			set_country_flag = { flag = USA_prague_window days = 60 value = 1 }	#probably missing
		}

		hidden_effect = {
			news_event = { hours = 6 id = news.60 }
			every_state = {
				limit = {
					is_owned_by = SLO
				}
				add_core_of = SLO
			}
			SLO = {
				load_oob = SLO_1939
				add_manpower = 9876
			}
		}
	}
	option = {
		name = germany.55.b
		add_political_power = -20
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		trigger = {
			664 = { is_owned_by = HUN }
			HUN = {
				is_friend_or_potential_friend_of_GER = yes
			}
			NOT = { has_global_flag = GER_HUN_CZE_split }
		}
		HUN = { country_event = germany.56 }
		add_war_support = 0.1
		if = {
			limit = {
				72 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
				country_exists = POL
			}
			POL = { transfer_state = 72 } # Give Poland Zaolzie
		}
		#if = {
		#	limit = {
		#		has_global_flag = ger_vanilla_focus_tree
		#	}
			custom_effect_tooltip = end_of_czechoslovakia_mefo_bills_tt
			add_to_variable = { var = GER_mefo_bill_counter value = -5 }
			GER_mefo_bills_level_down = yes
		#}
	}
	option = {
		name = germany.55.c
		add_political_power = -50
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					is_historical_focus_on = yes
					country_exists = SLO
				}
				
			}
		}
		if = {
			limit = { country_exists = CZE }
			annex_country = { target = CZE }
			add_war_support = 0.1
		}
		if = {
			limit = { has_global_flag = GER_HUN_CZE_split }
			HUN = { country_event = DOD_hungary.106 }
		}
		if = {
			limit = { NOT = { HUN = { controls_state = 664 } } }
			hidden_effect = { GER = { country_event = r56.ger.15 } }
		}

		hidden_effect = {
			news_event = { hours = 6 id = news.62 }
		}

		custom_effect_tooltip = r56_GER_first_vienna_award_II_tt
		#if = {
		#	limit = {
		#		has_global_flag = ger_vanilla_focus_tree
		#	}
			custom_effect_tooltip = end_of_czechoslovakia_mefo_bills_tt
			add_to_variable = { var = GER_mefo_bill_counter value = -5 }
			GER_mefo_bills_level_down = yes
		#}
	}

	option = {
		name = germany.55.do
		trigger = {
			has_global_flag = GER_HUN_CZE_split #promised Hungary Slovakia in earlier event
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 10
				is_in_faction_with = HUN
			}
		}
		HUN = { country_event = DOD_hungary.101 }
		add_war_support = 0.1
		set_global_flag = GER_HUN_CZE_split_end
		#if = {
		#	limit = {
		#		has_global_flag = ger_vanilla_focus_tree
		#	}
			custom_effect_tooltip = end_of_czechoslovakia_mefo_bills_tt
			add_to_variable = { var = GER_mefo_bill_counter value = -5 }
			GER_mefo_bills_level_down = yes
		#}
	}
}

# Hungary asked to partition Czechoslovakia
country_event = {
	id = germany.56
	title = germany.56.t
	desc = {
		text = germany.56.d
		trigger = { has_global_flag = end_of_czechoslovakia }
	}
	desc = {
		text = germany.56.d_2
		trigger = { NOT = { has_global_flag = end_of_czechoslovakia } }
	}
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.56.a
		ai_chance = { factor = 100 }
		transfer_state = 70
		transfer_state = 71
		transfer_state = 73
		hidden_effect = {
			GER = {
				annex_country = { target = CZE }
				add_to_faction = HUN
			}
			HUN = {
				add_ai_strategy = {
					type = alliance
					id = "GER"
					value = 200
				}
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.61 }
		}
	}
	option = {
		name = germany.56.b
		ai_chance = { factor = 0 }
		trigger = {
			NOT = { is_puppet_of = GER }
		}
		GER = {
			country_event = { hours = 6 id = germany.57 }
		}
	}
}

# Hungary refuses partition!
country_event = {
	id = germany.57
	title = germany.57.t
	desc = germany.57.d
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.57.a
		add_political_power = -20
		ai_chance = { factor = 60 }
		if = {
			limit = {
				70 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			SLO = { transfer_state = 70 }
		}
		if = {
			limit = {
				71 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			SLO = { transfer_state = 71 }
		}
		if = {
			limit = {
				154 = { is_owned_by = HUN }
				73 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			HUN = { transfer_state = 73 }
		}
		if = {
			limit = {
				NOT = { 154 = { is_owned_by = HUN } }
				73 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			SLO = { transfer_state = 73 }
		}
		if = {
			limit = {
				664 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			SLO = { transfer_state = 664 }
		}
		if = {
			limit = { country_exists = CZE }
			annex_country = { target = CZE }
		}
		add_to_faction = SLO
		SLO = {
			add_ai_strategy = {
				type = alliance
				id = "GER"
				value = 200
			}
		}
		if = {
			limit = {
				72 = {
					OR = {
						is_owned_by = CZE
						is_owned_by = GER
					}
				}
			}
			POL = { transfer_state = 72 } # Give Poland Zaolzie
		}
		
		USA = {	#USA can denounce the aggression
			set_country_flag = { flag = USA_prague_window days = 60 value = 1 }	#probably missing
		}

		hidden_effect = {
			news_event = { hours = 6 id = news.60 }
		}
	}
	option = {
		name = germany.57.b
		add_political_power = -40
		ai_chance = { factor = 40 }
		if = {
			limit = { country_exists = CZE }
			annex_country = { target = CZE }
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.62 }
		}
	}
}

# Polish Question Completed
country_event = {
	id = germany.58
	title = germany.58.t
	desc = germany.58.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = {
		name = germany.58.a
		add_political_power = 150
	}

}

### Remilitarization of the Rhineland

# French Response
country_event = {
	id = germany.60
	title = germany.60.t
	desc = germany.60.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = { # This means war!
		name = germany.60.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 20
				strength_ratio = {
					tag = GER
					ratio > 0.7
				}
				NOT = { has_idea = FRA_disjointed_government }
			}

			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		add_political_power = -150
		add_stability = -0.1
		if = {
			limit = {
				ENG = {
					is_puppet = no
					NOT = { has_war_with = FRA }
				}
			}
			ENG = {
				country_event = germany.61
				custom_effect_tooltip = needs_approval
				effect_tooltip = { add_to_faction = FRA }
			}
		}
		if = {
			limit = {
				has_idea = FRA_disjointed_government
				NOT = { has_government = communism }
			}
			custom_effect_tooltip = germany.60.a.tt
			effect_tooltip = {
				start_civil_war = {
					ideology = communism
					size = 0.2
				}
			}
		}
		if = { #you're not getting around that, comrade
			limit = {
				has_idea = FRA_disjointed_government
				has_government = communism
			}
			custom_effect_tooltip = germany.60.a.tt
			effect_tooltip = {
				start_civil_war = {
					ideology = democratic
					size = 0.3
				}
			}
		}
	}

	option = { # Diplomatic response
		name = germany.60.b
		ai_chance = {
			factor = 99
			modifier = {
				has_global_flag = GER_has_started_war
				factor = 0
			}
		}
		ENG = { country_event = germany.62 }
		add_opinion_modifier = { target = GER modifier = protest_action }
	}
}

# British Response (French Press for War)
country_event = {
	id = germany.61
	title = germany.60.t
	desc = germany.61.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = { # War out of the question
		name = germany.61.a
		ai_chance = {
			factor = 90
			modifier = {
				has_global_flag = GER_has_started_war
				factor = 0
			}
			modifier = {
				factor = 0
				OR = {
					has_game_rule = {
						rule = ENG_ai_behavior
						option = DEMOCRATIC_ALTERNATE
					}
					has_game_rule = {
						rule = ENG_ai_behavior
						option = FASCIST
					}
				}
			}
		}
		FRA = {
			country_event = { hours = 6 id = germany.63 }
		}
	}
	option = { # Support France
		name = germany.61.b
		trigger = {
			NOT = {
				has_completed_focus = ENG_a_change_in_course
				has_completed_focus = ENG_visit_germany
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				strength_ratio = {
					tag = GER
					ratio > 0.7
				}
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ENG_ai_behavior
					option = NEUTRALITY
				}
			}
		}
		add_political_power = -150
		add_stability = -0.2
		add_popularity = {
			ideology = communism
			popularity = 0.25
		}
		if = {
			limit = {
				FRA = { is_faction_leader = yes }
			}
			every_other_country = {
				limit = { is_in_faction_with = FRA NOT = { has_war_with = ENG } }
				ENG = { add_to_faction = PREV }
				add_ai_strategy = {
					type = alliance
					id = "ENG"
					value = 200
				}
			}
		}
		if = {
			limit = { FRA = { is_in_faction = no } }
			add_to_faction = FRA
			FRA = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"
					value = 200
				}
			}
		}
		FRA = {
			country_event = { hours = 6 id = germany.64 }
		}
	}
}

# British Response (French Want Peace)
country_event = {
	id = germany.62
	title = germany.60.t
	desc = germany.62.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = {
		name = germany.62.a
		trigger = {
			NOT = {
				has_completed_focus = ENG_a_change_in_course
					has_completed_focus = ENG_visit_germany
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.25 }
		}
		add_opinion_modifier = { target = GER modifier = protest_action }
		GER = {
			add_war_support = 0.1
		}
	}

	option = {
		name = germany.62.b
		trigger = {
			OR = {
				has_completed_focus = ENG_a_change_in_course
				has_completed_focus = ENG_visit_germany
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.25 }
		}
	}

}

# France (Britain Refuses Support)
country_event = {
	id = germany.63
	title = germany.63.t
	desc = germany.63.d
	picture = GFX_report_event_chamberlain_announce

	is_triggered_only = yes

	option = { # Push Ahead
		name = germany.63.a
		ai_chance = {
			factor = 60
			modifier = {
				factor = 3
				strength_ratio = {
					tag = GER
					ratio > 1.0
				}
				NOT = { has_idea = FRA_disjointed_government }
			}
			modifier = {
				factor = 0
				has_idea = FRA_disjointed_government
			}
		}
		GER = { country_event = germany.66 }
		if = {
			limit = {
				has_idea = FRA_disjointed_government
				NOT = { has_government = communism }
				}
			custom_effect_tooltip = germany.60.a.tt
			effect_tooltip = {
				start_civil_war = {
					ideology = communism
					size = 0.2
				}
			}
		}
		if = {
			limit = {
				has_idea = FRA_disjointed_government
				has_government = communism
				}
			custom_effect_tooltip = germany.60.a.tt
			effect_tooltip = {
				start_civil_war = {
					ideology = democratic
					size = 0.3
				}
			}
		}
	}
	option = { # Back Down
		name = germany.63.b
		ai_chance = { factor = 40 }
		ENG = { country_event = germany.67 }
		add_opinion_modifier = { target = GER modifier = protest_action }
	}
}

# France (Britain Gives Support)
country_event = {
	id = germany.64
	title = germany.64.t
	desc = germany.64.d
	picture = GFX_report_event_british_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.64.a
		GER = { country_event = germany.65 }
		if = {
			limit = {
				has_idea = FRA_disjointed_government
				NOT = { has_government = communism }
			}
			custom_effect_tooltip = germany.60.a.tt
			effect_tooltip = {
				start_civil_war = {
					ideology = communism
					size = 0.2
				}
			}
		}
		if = {
			limit = {
				has_idea = FRA_disjointed_government
				has_government = communism
			}
			custom_effect_tooltip = germany.60.a.tt
			effect_tooltip = {
				start_civil_war = {
					ideology = democratic
					size = 0.3
				}
			}
		}
	}
}

# Germany (France and Britain go to war)
country_event = {
	id = germany.65
	title = germany.65.t
	desc = germany.65.d
	picture = GFX_report_event_british_artillery

	is_triggered_only = yes

	option = {
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FRA
					ratio < 1
				}
				strength_ratio = {
					tag = ENG
					ratio < 1
				}
			}
		}
		name = germany.65.a
		FRA = {
			declare_war_on = {
				target = GER
				type = take_state_focus
				generator = { 42 51 }
			}
			country_event = germany.92
			if = {
				limit = {
					has_idea = FRA_disjointed_government
					NOT = { has_government = communism }
				}
				start_civil_war = {
					ideology = communism
					size = 0.2
				}
			}
			if = {
				limit = {
					has_idea = FRA_disjointed_government
					has_government = communism
				}
				start_civil_war = {
					ideology = democratic
					size = 0.3
				}
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.26 }
		}
	}
	option = {
		name = germany.65.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				strength_ratio = {
					tag = FRA
					ratio > 1
				}
				strength_ratio = {
					tag = ENG
					ratio > 1
				}
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.151 }
		}
		set_country_flag = GER_rhineland_backed_down
		42 = { set_demilitarized_zone = yes }
		51 = { set_demilitarized_zone = yes }
		989 = { set_demilitarized_zone = yes }
		922 = { set_demilitarized_zone = yes }
		923 = { set_demilitarized_zone = yes }
		add_timed_idea = {
			idea = rhineland_challenge_met
			days = 183
		}
	}
}

# Germany (France goes to war)
country_event = {
	id = germany.66
	title = germany.66.t
	desc = germany.66.d
	picture = GFX_report_event_degaulle_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.65.a
		add_war_support = 0.1 #original German clay
		ENG = {
			country_event = germany.68
			if = {
				limit = {
					ENG = {
						is_in_faction_with = FRA
						is_faction_leader = yes
					}
				}
				remove_from_faction = FRA
			}
		}
		FRA = {
			declare_war_on = {
				target = GER
				type = take_state_focus
				generator = { 42 51 }
			}
			country_event = germany.92
			if = {
				limit = {
					has_idea = FRA_disjointed_government
					NOT = { has_government = communism }
				}
				start_civil_war = {
					ideology = communism
					size = 0.2
				}
			}
			if = {
				limit = {
					has_idea = FRA_disjointed_government
					has_government = communism
				}
				start_civil_war = {
					ideology = democratic
					size = 0.3
				}
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.27 }
		}
	}

	option = {
		name = germany.65.b
		hidden_effect = {
			news_event = { hours = 6 id = news.152 }
		}
		set_country_flag = GER_rhineland_backed_down
		add_war_support = -0.2 #That was scary for a moment there!
		42 = { set_demilitarized_zone = yes }
		51 = { set_demilitarized_zone = yes }
		989 = { set_demilitarized_zone = yes }
		922 = { set_demilitarized_zone = yes }
		923 = { set_demilitarized_zone = yes }
		add_timed_idea = {
			idea = rhineland_challenge_met
			days = 183
		}
	}
}

# Britain (France Backs Down)
country_event = {
	id = germany.67
	title = germany.67.t
	desc = germany.67.d
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.67.a
		hidden_effect = {
			news_event = { hours = 6 id = news.25 }
		}
		add_opinion_modifier = { target = GER modifier = protest_action }
		GER = {
			add_war_support = 0.1
		}
	}
}

# Britain (France Goes Ahead Anyway)
country_event = {
	id = germany.68
	title = germany.68.t
	desc = germany.68.d
	picture = GFX_report_event_french_liberation

	is_triggered_only = yes

	option = {
		name = germany.68.a
	}
}

### Oster Conspiracy

# Conspiracy Begins!
country_event = {
	id = germany.70
	title = germany.70.t
	desc = germany.70.d
	picture = GFX_report_event_german_reichstag_gathering

	fire_only_once = yes

	trigger = {
		has_country_leader = { character = GER_adolf_hitler }
		tag = GER
		AND = {
			CZE = { has_capitulated = no }
			country_exists = CZE # Should only trigger if CZE hasn't fallen
		}
		has_war_with = CZE
		has_war_with = FRA
		has_war_with = ENG
		has_country_flag = allies_support_czechs
	}

	mean_time_to_happen = {
		days = 150
	}

	option = {
		name = germany.70.a
		add_stability = -0.2
		hidden_effect = {
			if = {
				limit = { NOT = { any_war_score < 39 } }
				random_list = {
					20 = { country_event = { hours = 6 id = germany.71 } } # Conspiracy defeated, but Hitler dead
					75 = { country_event = { hours = 6 id = germany.72 } } # Conspiracy defeated, Hitler survives
					5 = { country_event = { hours = 6 id = germany.73 } } # Conspiracy successful, Civil War
				}
			}
			if = {
				limit = { any_war_score < 39 }
				random_list = {
					33 = { country_event = { hours = 6 id = germany.71 } } # Conspiracy defeated, but Hitler dead
					33 = { country_event = { hours = 6 id = germany.72 } } # Conspiracy defeated, Hitler survives
					33 = { country_event = { hours = 6 id = germany.73 } } # Conspiracy successful, Civil War
				}
			}
		}
	}
}

# Conspiracy defeated, but Hitler is dead
country_event = {
	id = germany.71
	title = germany.71.t
	desc = germany.71.d
	picture = GFX_report_event_europe_funeral

	is_triggered_only = yes

	option = { # Himmler
		name = germany.71.a
		# Himmler becomes the new Fascist leader of Germany
		kill_country_leader = yes
		add_stability = 0.05
		GER_heinrich_himmler = {
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = nazism
					expire = "1965.1.1"
					traits = {prince_of_terror}
				}
			}
		}
		hidden_effect = {
			random_list = {
				38 = { news_event = { hours = 4 id = r56.kill_hitler.1 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.2 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.4 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.5 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.6 } }
				9 = { news_event = { hours = 4 id = r56.kill_hitler.7 } }
				10 = { news_event = { hours = 4 id = r56.kill_hitler.8 } }
				1 = { news_event = { hours = 4 id = r56.kill_hitler.3 } }
			}
			news_event = { hours = 8 id = news.28 }
		}
	}
	option = { # Göring
		name = germany.71.b
		# Göring becomes the new Fascist leader of Germany
		kill_country_leader = yes
		add_stability = 0.1
		GER_hermann_goring = {
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = nazism
					expire = "1965.1.1"
					traits = {famous_aviator}
				}
			}
		}		
		hidden_effect = {
			random_list = {
				38 = { news_event = { hours = 4 id = r56.kill_hitler.1 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.2 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.4 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.5 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.6 } }
				9 = { news_event = { hours = 4 id = r56.kill_hitler.7 } }
				10 = { news_event = { hours = 4 id = r56.kill_hitler.8 } }
				1 = { news_event = { hours = 4 id = r56.kill_hitler.3 } }
			}
			news_event = { hours = 8 id = news.29 }
		}
	}
}

# Conspiracy defeated, Hitler survives
country_event = {
	id = germany.72
	title = germany.72.t
	desc = germany.72.d
	picture = GFX_report_event_hitler_parade

	is_triggered_only = yes

	option = {
		name = germany.72.a
		add_stability = 0.25
		hidden_effect = {
			news_event = { hours = 6 id = news.30 }
		}
	}
}

# Conspiracy successful, Civil War begins
country_event = {
	id = germany.73
	title = germany.73.t
	desc = germany.73.d
	picture = GFX_report_event_german_reichstag_bombed

	is_triggered_only = yes

	option = { # Side with the Rebels
		name = germany.73.a
		trigger = { is_ai = no }
		set_country_flag = german_rebels
		kill_country_leader = yes
		GER_heinrich_himmler = {
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = nazism
					expire = "1965.1.1"
					traits = {prince_of_terror}
				}
			}
		}
		if = {
			limit =  {
				OR = {
					any_war_score < 39
					has_stability < 60
				}
			}
			start_civil_war = {
				ruling_party = neutrality
				ideology = fascism
				size = 0.5
			}
			GER_ludwig_beck = {
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = moderatism
						expire = "1965.1.1"
						traits = {
							army_connections
						}
					}
				}
			}		
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.5
			}
			create_field_marshal = {
				name = "Werner von Blomberg"
				picture = "r56_portrait_GER_Werner_von_Blomberg.dds"
				traits = {  infantry_leader  }
				skill = 3
				attack_skill = 3
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 3
			}
			create_field_marshal = {
				name = "Werner von Fritsch"
				picture = "r56_portrait_GER_Werner_von_Fritsch.dds"
				traits = { infantry_leader skilled_staffer expert_delegator }
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 2
			}						
			add_popularity = {
				ideology = fascism
				popularity = -1
			}
			hidden_effect = { set_cosmetic_tag = GER_provisional_gvt }	
		}
		if = {
			limit =  {
				NOT = {
					any_war_score < 39
					has_stability < 60
				}
			}
			start_civil_war = {
				ruling_party = neutrality
				ideology = fascism
				size = 0.7
			}
			GER_ludwig_beck = {
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = moderatism
						expire = "1965.1.1"
						traits = {
							army_connections
						}
					}
				}
			}			
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.5
			}
			create_field_marshal = {
				name = "Werner von Blomberg"
				picture = "r56_portrait_GER_Werner_von_Blomberg.dds"
				traits = {  infantry_leader  }
				skill = 3
				attack_skill = 3
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 3
			}
			create_field_marshal = {
				name = "Werner von Fritsch"
				picture = "r56_portrait_GER_Werner_von_Fritsch.dds"
				traits = { infantry_leader skilled_staffer expert_delegator }
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 3
				logistics_skill = 2
			}						
			add_popularity = {
				ideology = fascism
				popularity = -1
			}
			hidden_effect = { set_cosmetic_tag = GER_provisional_gvt }			
		}
		hidden_effect = {
			random_list = {
				38 = { news_event = { hours = 4 id = r56.kill_hitler.1 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.2 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.4 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.5 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.6 } }
				9 = { news_event = { hours = 4 id = r56.kill_hitler.7 } }
				1 = { news_event = { hours = 4 id = r56.kill_hitler.3 } }
				10 = { news_event = { hours = 4 id = r56.kill_hitler.8 } }
			}
			news_event = { hours = 8 id = news.31 }
		}
	}
	option = { # Side with Himmler
		name = germany.73.b
		# Himmler becomes the new Fascist leader of Germany
		kill_country_leader = yes
		GER_heinrich_himmler = {
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = nazism
					expire = "1965.1.1"
					traits = {prince_of_terror}
				}
			}
		}
		if = {
			limit =  {
				OR = {
					any_war_score < 39
					has_stability < 60
				}
			}
			start_civil_war = {
				ideology = neutrality
				size = 0.5
			}
			random_other_country = {
				limit = {
					has_government = neutrality
					original_tag = ROOT
				}
				GER_ludwig_beck = {
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = moderatism
							expire = "1965.1.1"
							traits = {
								army_connections
							}
						}
					}
				}		
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.5
				}
				create_field_marshal = {
					name = "Werner von Blomberg"
					picture = "r56_portrait_GER_Werner_von_Blomberg.dds"
					traits = {  infantry_leader  }
					skill = 3
					attack_skill = 3
					defense_skill = 2
					planning_skill = 2
					logistics_skill = 3
				}
				create_field_marshal = {
					name = "Werner von Fritsch"
					picture = "r56_portrait_GER_Werner_von_Fritsch.dds"
					traits = { infantry_leader skilled_staffer expert_delegator }
					skill = 3
					attack_skill = 2
					defense_skill = 3
					planning_skill = 3
					logistics_skill = 2
				}						
				add_popularity = {
					ideology = fascism
					popularity = -1
				}
				hidden_effect = { set_cosmetic_tag = GER_provisional_gvt }				
			}
		}
		if = {
			limit =  {
				NOT = {
					any_war_score < 39
					has_stability < 60
				}
			}
			start_civil_war = {
				ideology = neutrality
				size = 0.3
			}
			random_other_country = {
				limit = {
					has_government = neutrality
				}
				GER_ludwig_beck = {
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = moderatism
							expire = "1965.1.1"
							traits = {
								army_connections
							}
						}
					}
				}		
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				add_popularity = {
					ideology = neutrality
					popularity = 0.5
				}
				create_field_marshal = {
					name = "Werner von Blomberg"
					picture = "r56_portrait_GER_Werner_von_Blomberg.dds"
					traits = {  infantry_leader  }
					skill = 3
					attack_skill = 3
					defense_skill = 2
					planning_skill = 2
					logistics_skill = 3
				}
				create_field_marshal = {
					name = "Werner von Fritsch"
					picture = "r56_portrait_GER_Werner_von_Fritsch.dds"
					traits = { infantry_leader skilled_staffer expert_delegator }
					skill = 3
					attack_skill = 2
					defense_skill = 3
					planning_skill = 3
					logistics_skill = 2
				}						
				add_popularity = {
					ideology = fascism
					popularity = -1
				}
				hidden_effect = { set_cosmetic_tag = GER_provisional_gvt }				
			}			
		}
		hidden_effect = {
			random_list = {
				38 = { news_event = { hours = 4 id = r56.kill_hitler.1 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.2 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.4 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.5 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.6 } }
				9 = { news_event = { hours = 4 id = r56.kill_hitler.7 } }
				1 = { news_event = { hours = 4 id = r56.kill_hitler.3 } }
				10 = { news_event = { hours = 4 id = r56.kill_hitler.8 } }
			}
			news_event = { hours = 8 id = news.31 }
		}
	}
	option = { # Side with Göring
		name = germany.73.c
		# Göring becomes the new Fascist leader of Germany
		kill_country_leader = yes
		GER_hermann_goring = {
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = nazism
					expire = "1965.1.1"
					traits = {
						famous_aviator
					}
				}
			}
		}
		if = {
			limit =  {
				OR = {
					any_war_score < 39
					has_stability < 60
				}
			}
			start_civil_war = {
				ideology = democratic
				size = 0.5
			}
		}
		if = {
			limit =  {
				NOT = {
					any_war_score < 39
					has_stability < 60
				}
			}
			start_civil_war = {
				ideology = democratic
				size = 0.3
			}
		}
		hidden_effect = {
			random_list = {
				38 = { news_event = { hours = 4 id = r56.kill_hitler.1 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.2 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.4 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.5 } }
				38 = { news_event = { hours = 4 id = r56.kill_hitler.6 } }
				9 = { news_event = { hours = 4 id = r56.kill_hitler.7 } }
				1 = { news_event = { hours = 4 id = r56.kill_hitler.3 } }
				10 = { news_event = { hours = 4 id = r56.kill_hitler.8 } }
			}
			news_event = { hours = 6 id = news.31 }
		}
	}
}

# Anschluss Preparations
country_event = {
	id = germany.74
	title = germany.74.t
	desc = germany.74.d
	picture = GFX_report_event_fascist_speech

	is_triggered_only = yes

	option = {
		name = germany.74.a
		#add_ideas = elyesa_bazna
	}
}

# German-Soviet Treaty (Soviets)
country_event = {
	id = germany.75
	title = germany.75.t
	desc = germany.75.d
	picture = GFX_report_event_physics_lab_01

	is_triggered_only = yes

	option = {
		name = germany.75.a	#sounds good
		GER = {
			country_event = { days = 1 id = germany.76 }
			add_opinion_modifier = {
				target = ROOT
				modifier = sov_ger_treaty
			}
			add_opinion_modifier = {
				target = ROOT
				modifier = sov_ger_treaty_trade
			}
		}
		# REVISIT Balance research bonus
		give_SOV_armor_research_bonuses = yes
	}

	option = {
		name = germany.75.b	#no way
		add_timed_idea = { idea = SOV_scientist_defect days = 365 }
		ai_chance = { factor = 0 }
		add_political_power = -10
		add_opinion_modifier = { target = GER modifier = refused_MR_pact }# no pact
		GER = {
			country_event = { days = 1 id = germany.77 }
		}
	}
}

# Soviets Accept German-Soviet Treaty
country_event = {
	id = germany.76
	title = germany.76.t
	desc = germany.76.d
	picture = GFX_report_event_physics_lab_02

	is_triggered_only = yes

	option = {
		name = germany.76.a	#bah
		# REVISIT Balance research bonus
		if = {
			limit = {
				NOT = {
					has_dlc = "No Step Back"
				}
			}
			add_tech_bonus = {
				name = med_armor_bonus
				ahead_reduction = 1
				category = cat_medium_armor
			}
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1.0
				uses = 2
				category = armor
			}
		}
		else = { #NO STEP BACK EFFECTS
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1.0
				uses = 2
				category = armor
			}
			if = {
				limit = {
					has_tech = basic_medium_tank_chassis
				}
				create_equipment_variant = {
					name = "Panzer III Ausf. A"
					type = medium_tank_chassis_1
					parent_version = 0
					modules = {
						main_armament_slot = tank_high_velocity_cannon
						turret_type_slot = tank_medium_three_man_tank_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_gasoline_engine
						special_type_slot_1 = tank_radio_1
						special_type_slot_2 = smoke_launchers
					}
					upgrades = {
						tank_nsb_engine_upgrade = 6
						tank_nsb_armor_upgrade = 3
					}
					icon = "GFX_GER_basic_medium_tank_medium"
				}
				create_equipment_variant = {
					name = "Panzer IV Ausf. A"
					type = medium_tank_chassis_1
					parent_version = 1
					modules = {
						main_armament_slot = tank_close_support_gun
						turret_type_slot = tank_medium_three_man_tank_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_gasoline_engine
						special_type_slot_1 = tank_radio_1
						special_type_slot_2 = smoke_launchers
					}
					upgrades = {
						tank_nsb_engine_upgrade = 6
						tank_nsb_armor_upgrade = 2
					}
					icon = "GFX_GER_basic_medium_tank_medium"
				}
			}
		}
		SOV = {
			add_opinion_modifier = { target = GER modifier = sov_ger_treaty }
			add_opinion_modifier = { target = GER modifier = sov_ger_treaty_trade }
		}
	}
}

# Soviets Reject German-Soviet Treaty
country_event = {
	id = germany.77
	title = germany.77.t
	desc = germany.77.d
	picture = GFX_report_event_physics_lab_02

	is_triggered_only = yes

	option = {
		name = germany.77.a
		#add_opinion_modifier = { target = SOV modifier = refused_MR_pact }# no pact
	}
}

# German Joint Air Research
country_event = {
	id = germany.78
	title = germany.78.t
	desc = germany.78.d
	picture = GFX_report_event_radar_01

	is_triggered_only = yes

	option = {
		name = germany.78.a
		add_ideas = GER_air_innovations_2_idea
		add_tech_bonus = {
				name = radar_tech_bonus
				bonus = 1.0
				uses = 1
				category = radar_tech
			}
	}
}

# Ultimatum from Germany (Turkey)
country_event = {
	id = germany.79
	title = germany.79.t
	desc = germany.79.d
	picture = GFX_report_event_german_turkish_pact

	is_triggered_only = yes

	option = {
		name = germany.79.a
		ai_chance = {
			factor = 70
			modifier = {
				NOT = { BUL = { is_in_faction_with = GER } }
				factor = 0.5
			}
		}
		GER = { puppet = TUR }
		SOV = {
			transfer_state = 354
			transfer_state = 353
			transfer_state = 352
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.201 }
		}
	}

	option = {
		name = germany.79.b
		ai_chance = {
			factor = 10
			modifier = {
				GER = { surrender_progress > 0.25 }
				factor = 5 #seems safe
			}
			modifier = {
				has_government = democratic
				factor = 5
			}
		}
		trigger = {
			TUR = {
				is_puppet = no
			}
			NOT = {
				has_war_with = ENG
			}
			NOT = {
				any_other_country = {
					is_in_faction_with = ENG
					has_war_with = TUR
				}
			}
			ENG = {
				is_faction_leader = yes
			}
		}
		ENG = { add_to_faction = TUR }
		TUR = {
			add_ai_strategy = {
				type = alliance
				id = "ENG"
				value = 200
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.217 }
		}
	}

	option = {
		name = germany.79.c
		ai_chance = {
			factor = 20
			modifier = {
				NOT = {
					has_government = fascism
				}
				factor = 5
			}
			modifier = {
				ENG = {
					has_capitulated = no
					has_war_with = GER
				}
				SOV = {
					has_capitulated = no
					has_war_with = GER
				}
				USA = {
					has_capitulated = no
					has_war_with = GER
				}

				factor = 5 #lol come at me bro
			}
		}
		GER = {
			create_wargoal = {
				target = TUR
				type = puppet_wargoal_focus
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.216 }
		}
	}
}

# Danzig for Slovakia (Poland)
country_event = {
	id = germany.80
	title = germany.80.t
	desc = germany.80.d
	picture = GFX_report_event_german_polish_border

	is_triggered_only = yes

	option = {
		name = germany.80.a

		ai_chance = {
			factor = 10
		}

		GER = { country_event = { id = germany.81 days = 1 } }
		effect_tooltip = {
			if = {
				limit = { SLO = { exists = yes } }
				annex_country = { target = SLO }
			}
			if = {
				limit = { GER = { owns_state = 70 } }
				transfer_state = 70
			}
			if = {
				limit = { GER = { owns_state = 71 } }
				transfer_state = 71
			}
			if = {
				limit = { GER = { owns_state = 73 } }
				transfer_state = 73
			}
			if = {
				limit = { GER = { owns_state = 664 } }
				transfer_state = 664
			}
			if = {
				limit = { POL = { owns_state = 85 } }
				GER = {
					transfer_state = 85
				}
			}

			#GER = { transfer_state = 85 }
			GER = { transfer_state = 807 }
		}
	}

	option = {
		name = germany.80.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_in_faction_with = GER
			}
		}
		GER = {
			country_event = { id = germany.82 days = 1 }
			if = {
				limit = {
					is_in_faction_with = POL
					is_faction_leader = yes
				}
				remove_from_faction = POL
			}
			if = {
				limit = {
					is_in_faction_with = POL
					is_faction_leader = no
				}
				random_other_country = {
					limit = {
						is_in_faction_with = GER
						is_faction_leader = yes
					}
					remove_from_faction = GER
				}
			}
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = POL
					generator = { 85 }
				}
			}
		}
	}
}

# Poland Accepts, Cedes Danzig
country_event = {
	id = germany.81
	title = germany.81.t
	desc = germany.81.d
	picture = GFX_report_event_german_polish_border

	is_triggered_only = yes

	option = {
		name = germany.81.a
		if = {
			limit = { SLO = { exists = yes } }
			POL = { annex_country = { target = SLO } }
		}
		if = {
			limit = { owns_state = 70 }
			POL = { transfer_state = 70 }
		}
		if = {
			limit = { owns_state = 71 }
			POL = { transfer_state = 71 }
		}
		if = {
			limit = { owns_state = 73 }
			POL = { transfer_state = 73 }
		}
		if = {
			limit = { owns_state = 664 }
			POL = { transfer_state = 664 }
		}

		if = {
			limit = {
				DNZ = {
					OR = {
						NOT = {
							has_government = fascism
							has_government = neutrality
						}
						has_completed_focus = DNZ_prussia_legacy
					}
				}
			}
			GER = { 
				create_wargoal = {
					type = take_state_focus
					target = DNZ
					generator = { 85 }
				}
			}
		}
		else_if = {
			limit = {
				DNZ = {
					is_puppet_of = POL
				}
			}
			GER = { transfer_state = 85 }
		}
		
		transfer_state = 807
		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = -0.1 #dodged a bullet there
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = -0.1 #dodged a bullet there
			}
		}

		hidden_effect = {
			news_event = { hours= 6 id = news.202 }
			set_global_flag = poland_swap_danzig
		}
	}
}

# Poland Refuses to give up Danzig
country_event = {
	id = germany.82
	title = germany.82.t
	desc = germany.82.d
	picture = GFX_report_event_polish_army

	is_triggered_only = yes

	option = {
		name = germany.82.a
		create_wargoal = {
			type = take_state_focus
			target = POL
			generator = { 85 }
		}
	}
}

# Anti-Soviet Pact
country_event = {
	id = germany.83
	title = germany.83.t
	desc = germany.83.d
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes

	option = {
		ai_chance = {
			factor = 10
		}
		name = germany.83.a		#join
		add_ideas = anti_soviet_pact
		SOV = {
			remove_opinion_modifier = { target = ROOT modifier = pact_against_us }
			add_opinion_modifier = { target = ROOT modifier = worse_pact_against_us }
		}
	}

	option = {
		name = germany.83.b		#refuse
		trigger = { NOT = { is_puppet_of = GER } }
		ai_chance = {
			factor = 2
		}
	}
}

# Call Pact Members to War (Instigator)
country_event = {
	id = germany.84
	title = germany.84.t
	desc = germany.84.d
	picture = GFX_report_event_soviet_tanks

	is_triggered_only = yes

	#immediate = {
	#	remove_ideas = anti_soviet_pact
	#}

	option = {
		name = germany.84.a
		every_other_country = {
			limit = {
				has_idea = anti_soviet_pact
				NOT = { has_war_with = SOV }
				is_subject = no
				any_other_country = {
					has_idea = anti_soviet_pact
					has_war_with = SOV
				}
			}
			country_event = { id = germany.85 days = 1 }
		}
		hidden_effect = {
			if = {
				limit = {
					original_tag = GER
					has_government = neutrality
				}
				country_event = { id = germany.127 days = 7 random_days = 7 }
			}
		}
	}
}

# [From.GetName] Calls Pact Members to War
country_event = {
	id = germany.85
	title = germany.85.t
	title = {
		text = germany.85.t.a
		trigger = {
			OR = {
				NOT = { FROM = { original_tag = POL } }
				NOT = { original_tag = GER }
				NOT = { has_completed_focus = GER_danzig_for_guarantees }
			}
		}
	}
	title = {
		text = germany.85.t.b
		trigger = {
			FROM = { original_tag = POL }
			original_tag = GER
			has_completed_focus = GER_danzig_for_guarantees
		}
	}
	desc = { 
		text = germany.85.desc.a
		trigger = {
			OR = {
				NOT = { FROM = { original_tag = POL } }
				NOT = { original_tag = GER }
				NOT = { has_completed_focus = GER_danzig_for_guarantees }
			}
		}
	}
	desc = { 
		text = germany.85.desc.b
		trigger = {
			FROM = { original_tag = POL }
			original_tag = GER
			has_completed_focus = GER_danzig_for_guarantees
		}
	}
	picture = GFX_report_event_soviet_tanks

	is_triggered_only = yes

	#immediate = {
	#	remove_ideas = anti_soviet_pact
	#}

	option = {
		name = germany.85.a
		ai_chance = {
			factor = 10
		}
		add_to_war = {
			targeted_alliance = FROM
			enemy = SOV
			hostility_reason = ally
		}
		hidden_effect = {
			if = {
				limit = {
					original_tag = GER
				}
				country_event = { id = germany.127 days = 7 random_days = 7 }
			}
		}
	}

	option = {
		name = germany.85.b
		trigger = {
			NOT = { FROM = { original_tag = POL } }
			NOT = { original_tag = GER }
			if = {
				limit = {
					has_global_flag = ger_vanilla_focus_tree
				}
				NOT = { has_completed_focus = GER_danzig_for_guarantees }
			}
		}
		ai_chance = {
			factor = 0
		}
		remove_ideas = anti_soviet_pact
		FROM = { add_opinion_modifier = { target = ROOT modifier = anti_soviet_pact_call_refused } }
		SOV = { remove_opinion_modifier = { target = SOV modifier = worse_pact_against_us } }
		add_timed_idea = {
			idea = anti_soviet_pact_refused_call
			days = 365
		}
		custom_effect_tooltip = germany.85.b_tt
		hidden_effect = {
			country_event = { id = germany.112 days = 3 }
		}
	}
}

# Danzig or War (Poland)
country_event = {
	id = germany.86
	title = germany.86.t
	desc = germany.86.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	trigger = {
		NOT = { has_war_with = GER }
	}

	option = {
		name = germany.86.a
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		GER = { country_event = { id = germany.87 days = 1 } }
		effect_tooltip = {
			GER = {
				transfer_state = 85
				transfer_state = 807
				add_state_core = 85
				remove_state_claim = 86
				remove_state_claim = 762
			}
		}
		country_event = { id = poland.1 days = 7 }
		hidden_effect = {
			news_event = { id = news.203 hours = 6 }
			remove_state_claim = 807
		}
	}

	option = {
		name = germany.86.b
		ai_chance = {
			factor = 80
			modifier = {
				factor = 3
				strength_ratio = {
					tag = GER
					ratio > 0.7
				}
			}
			modifier = {
				factor = 10
				any_other_country = {
					is_major = yes
					is_in_faction_with = POL
				}
			}
		}
		GER = { country_event = { id = germany.88 days = 1 }
			if = {
				limit = {
					is_in_faction_with = POL
					is_faction_leader = yes
				}
				remove_from_faction = POL
			}
			if = {
				limit = {
					is_in_faction_with = POL
					is_faction_leader = no
				}
				random_other_country = {
					limit = {
						is_in_faction_with = GER
						is_faction_leader = yes
					}
					remove_from_faction = GER
				}
			}
		}
		hidden_effect = {
			news_event = { hours = 1 id = news.204 }
		}
		effect_tooltip = {
			GER = {
				declare_war_on = {
					target = POL
					type = take_state
					generator = { 85 }
				}
			}
		}
	}
}

# Poland Cedes Danzig (Danzig or War)
country_event = {
	id = germany.87
	title = germany.87.t
	desc = germany.87.d
	picture = GFX_report_event_german_polish_border

	is_triggered_only = yes

	option = {
		name = germany.87.a
		if = {
			limit = {
				DNZ = {
					OR = {
						NOT = {
							
							has_government = fascism
							has_government = neutrality
							is_puppet = yes
						}
						has_completed_focus = DNZ_prussia_legacy
					}
				}
			}
			GER = { 
                create_wargoal = {
                    type = take_state_focus
                    target = DNZ
                    generator = { 85 }
                }
			}
		}
		else_if = {
			limit = {
				DNZ ={
					OR = {
						has_government = fascism
						has_government = neutrality
						NOT = {
							is_puppet = no
						}
					}
				}
			}
			GER = { transfer_state = 85 }
		}
		
		transfer_state = 807
		remove_state_claim = 86

		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = -0.1 #dodged a bullet there
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = -0.1 #dodged a bullet there
			}
		}
	}
}

# Poland Refuses to Cede Danzig (Danzig or War)
country_event = {
	id = germany.88
	title = germany.88.t
	desc = germany.88.d
	picture = GFX_report_event_polish_tanks_02

	is_triggered_only = yes

	option = {
		name = germany.88.a
		create_wargoal = {
			type = take_state
			generator = { 85 }
			target = POL
		}
		add_state_core = 85
		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = 0.1 #just not cricket
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = 0.1
			}
		}
		if = {
			limit = {
				CZE = {
					exists = yes
					is_subject = no
					has_government = democratic
					NOT = { is_in_faction_with = GER }
				}
			}
			CZE = {
				add_ai_strategy = {
					type = conquer
					id = "GER"
					value = 200
				}
				add_ai_strategy = {
					type = alliance
					id = "POL"
					value = 200
				}
			}
		}
	}
}

#sov-ger unholy alliance
country_event = {
	id = germany.89
	title = germany.89.t
	desc = germany.89.d
	picture = GFX_report_event_molotov_ribbentrop_stalin_pact

	is_triggered_only = yes

	option = {
		name = germany.89.a
		dismantle_faction = yes
		add_stability = -0.1
		every_other_country = {
			limit = {
				OR = {
					AND = {
						NOT = { tag = GER }
						has_government = fascism
					}
					has_government = democratic
				}
			}
			add_opinion_modifier = { target = SOV modifier = unholy_alliance }
		}
		GER = {
			if = {
					limit = {
						is_faction_leader = yes
					}
					dismantle_faction = yes
			}
			if = {
					limit = {
						is_in_faction  = yes
					}
					remove_from_faction = GER
			}
			add_stability = -0.2
			create_faction = "the_berlin_moscow_axis"
			add_to_faction = SOV
			add_named_threat = { threat = 10 name = germany.89.t }
			every_other_country = {
				limit = {
					has_government = fascism
				}
				add_opinion_modifier = { target = GER modifier = communist_collaborators }
			}
			every_other_country = {
				limit = {
					has_government = democratic
				}
				add_opinion_modifier = { target = GER modifier = unholy_alliance }
			}
		}
		hidden_effect = {
			# Britain can rally democracies
			ENG = {
				country_event = { days = 3 id = britain.11 }
			}
			# US drops communism/fascism
			USA = {
				country_event = { id = usa.14 }
				country_event = { id = usa.24 }
			}
		}
	}

	option = {
		name = germany.89.b
		ai_chance = { factor = 0 }
		GER = {
			country_event = germany.90
			effect_tooltip = {
				remove_ideas = soviet_german_friendship
				create_wargoal = {
					type = take_state_focus
					target = SOV
					generator = { 219 217 } # Moscow and Stalingrad
				}
			}
		}
		remove_opinion_modifier = { target = GER modifier = ger_sov_alliance_focus }
		remove_ideas = soviet_german_friendship
	}
}

country_event = {
	id = germany.90
	title = germany.90.t
	desc = germany.90.d
	picture = GFX_report_event_stalin_02

	is_triggered_only = yes

	option = {
		name = germany.90.a
		remove_ideas = soviet_german_friendship
		create_wargoal = {
			type = take_state_focus
			target = SOV
			generator = { 219 217 } # Moscow and Stalingrad
		}
	}
}

# France national focus -  requests to join germany
country_event = {
	id = germany.91
	title = germany.91.t
	desc = germany.91.d
	picture = GFX_report_event_fascist_gathering

	is_triggered_only = yes

	option = {
		name = germany.91.a
		GER = { add_to_faction = FRA }
		FRA = {
			add_ai_strategy = {
				type = alliance
				id = "GER"
				value = 200
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.182 }
		}
	}
	option = {
		name = germany.91.b
		ai_chance = { factor = 0 }
		FRA = {
			add_opinion_modifier = {
				target = GER
				modifier = GER_FRA_join_germany_reject
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.183 }
		}
	}
}

# France/England (Germany Refuses Ultimatum)
country_event = {
	id = germany.92
	title = germany.92.t
	desc = germany.92.d
	picture = GFX_report_event_worried_french

	is_triggered_only = yes

	option = {
		name = germany.92.a
	}
}

# Germany (British and (possibly) French Support for Yugoslavia)
country_event = {
	id = germany.93
	title = germany.93.t
	desc = {
		text = germany.93.d
		trigger = { NOT = { has_global_flag = FRA_abandoned_yugoslavia } }
	}
	desc = {
		text = germany.93.d_FRA_abandoned_yugoslavia
		trigger = { has_global_flag = FRA_abandoned_yugoslavia }
	}
	picture = GFX_report_event_bul_officers_burgas

	is_triggered_only = yes

	option = {
		name = germany.93.a
		create_wargoal = {
			type = take_state_focus
			target = YUG
			generator = { 102 956 853 }
		}
		hidden_effect = {
			news_event = { id = news.164 hours = 6 }
		}
		set_country_flag = allies_support_yugoslavia
	}

	option = {
		name = germany.93.b
		add_war_support = -0.1
		hidden_effect = {
			news_event = { id = news.164 hours = 6 }
		}
		set_country_flag = allies_support_yugoslavia
	}
}

# Germany (Yugoslavia Surrenders Slovenia)
country_event = {
	id = germany.94
	title = germany.94.t
	desc = germany.94.d
	picture = GFX_report_event_bul_soviet_army_sofia

	is_triggered_only = yes

	option = {
		name = germany.94.a
		ai_chance = { factor = 95 }
		if = {
			limit = {
				YUG = {
					owns_state = 102
					owns_state = 956
					owns_state = 853
				}
			}
			GER = {
				transfer_state = 102
				transfer_state = 956
				transfer_state = 853
			}
		}
		if = {
			limit = {
				SLV = {
					exists = yes
					is_puppet_of = YUG
					owns_state = 102
					owns_state = 956
					owns_state = 853
				}
			}
			GER = {
				annex_country = { target = SLV transfer_troops = yes }
			}
		}
		102 = {
			add_compliance = 25
		}
		956 = {
			add_compliance = 25
		}
		853 = {
			add_compliance = 25
		}
		set_country_flag = slovenia_acquired
		hidden_effect = {
			news_event = { id = news.163 hours = 6 }
		}
	}

	option = {
		name = germany.94.b
		ai_chance = { factor = 5 }
		if = {
			limit = {
				SLV = { exists = no }
			}
			GER = {
				SLV = {
					if = {
						limit = { YUG = { owns_state = 102 } }
						transfer_state = 102
					}
					if = {
						limit = { YUG = { owns_state = 956 } }
						transfer_state = 956
					}
					if = {
						limit = { YUG = { owns_state = 853 } }
						transfer_state = 853					
					}
				}
				puppet = SLV
			}
		}
		if = {
			limit = {
				SLV = {
					exists = yes
					is_puppet_of = YUG
					owns_state = 102
					owns_state = 956
					owns_state = 853
				}
			}
			GER = {
				puppet = SLV
			}
		}
		set_country_flag = slovenia_acquired
		hidden_effect = {
			news_event = { id = news.163 hours = 6 }
		}
	}
}

# Germany (Yugoslavia Refuses)
country_event = {
	id = germany.95
	title = germany.95.t
	desc = germany.95.d
	picture = GFX_report_event_chinese_army_training

	is_triggered_only = yes

	option = {
		name = germany.95.a
		ai_chance = { factor = 90 }
		create_wargoal = {
			type = take_state_focus
			target = YUG
			generator = { 102 956 853 }
		}
		hidden_effect = {
			news_event = { id = news.166 hours = 6 }
		}
	}

	option = {
		name = germany.95.b
		ai_chance = { factor = 10 }
		hidden_effect = {
			news_event = { id = news.166 hours = 6 }
		}
	}
}

# Germany (Italy protects Yugoslavia)
country_event = {
	id = germany.96
	title = germany.96.t
	desc = germany.96.d
	picture = GFX_report_event_fascist_speech

	is_triggered_only = yes

	option = {
		name = germany.96.a
		create_wargoal = {
			type = take_state_focus
			target = YUG
			generator = { 102 956 853 }
		}
		hidden_effect = {
			news_event = { id = news.167 hours = 6 }
		}
	}
}

# Germany (France protects Yugoslavia)
country_event = {
	id = germany.97
	title = germany.97.t
	desc = germany.97.d
	picture = GFX_report_event_french_liberation

	is_triggered_only = yes

	option = {
		name = germany.97.a
		create_wargoal = {
			type = take_state_focus
			target = YUG
			generator = { 102 956 853 }
		}
		hidden_effect = {
			news_event = { id = news.165 hours = 6 }
		}
	}
}

#Fate of Yugoslavia
country_event = {
	id = germany.98
	title = germany.98.t
	desc = germany.98.d
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.98.a
		ai_chance = { factor = 20 }

		if = {
			limit = {
				YUG = {
					OR = {
						is_in_faction = yes
						any_other_country = {
							has_guaranteed = YUG
						}
					}
				}
			}
			YUG = { country_event = yugoslavia.7 }
			custom_effect_tooltip = germany.98_tt
			effect_tooltip = {
				add_political_power = -75
				add_named_threat = { threat = 5 name = GER_fate_of_yugoslavia }
				every_other_country = {  #annex every puppet of Yugo tooltip
					limit = {
						capital_scope = {
							is_on_continent = europe
						}
						is_subject_of = YUG
						OR = {
							original_tag = CRO
							original_tag = SLV
							original_tag = MAC
							original_tag = SER
							original_tag = BOS
							original_tag = HRZ
							original_tag = TRA
							original_tag = MNT
							original_tag = KOS
							AND = {
								original_tag = HUN
								has_cosmetic_tag = vojvodina
							}
							original_tag = SER
						}
					}
					GER = {
						annex_country = {
							target = PREV
							transfer_troops = no
						}
					}
				}
				annex_country = { target = YUG transfer_troops = no }
			}
		}

		#If no guarantee or faction Yug has no choice
		if = {
			limit = {
				YUG = {
					is_in_faction = no
					NOT = {
						any_other_country = {
							has_guaranteed = YUG
						}
					}
				}
			}
			add_political_power = -75
			add_named_threat = { threat = 5 name = GER_fate_of_yugoslavia }
			every_other_country = {  #annex every puppet of Yugo
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject_of = YUG
					OR = {
						original_tag = CRO
						original_tag = SLV
						original_tag = MAC
						original_tag = SER
						original_tag = BOS
						original_tag = HRZ
						original_tag = TRA
						original_tag = MNT
						original_tag = KOS
						AND = {
							original_tag = HUN
							has_cosmetic_tag = vojvodina
						}
						original_tag = SER
					}
				}
				GER = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}
			annex_country = { target = YUG transfer_troops = no } #annex Yugo too if it still alive

			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_annex_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
		custom_effect_tooltip = yugoslavia_mefo_bills_tt
		add_to_variable = { var = GER_mefo_bill_counter value = -5 }
		GER_mefo_bills_level_down = yes
	}

	option = {
		name = germany.98.b
		ai_chance = { factor = 75 }

		trigger = {
			YUG = {
				OR = {
					owns_state = 103
					owns_state = 958
					owns_state = 104
					owns_state = 804
					owns_state = 961
					owns_state = 962
					owns_state = 109
					owns_state = 959
					owns_state = 952
					CRO = { is_puppet_of = YUG }
				}
			}
		}

		if = {
			limit = {
				YUG = {
					OR = {
						is_in_faction = yes
						any_other_country = {
							has_guaranteed = YUG
						}
					}
				}
			}
			YUG = { country_event = yugoslavia.8 }
			custom_effect_tooltip = germany.98_tt
			effect_tooltip = {
				add_political_power = -25
				add_named_threat = { threat = 3 name = GER_fate_of_yugoslavia }
				if = { 
					limit = {
						CRO = {
							exists = yes
							is_puppet_of = YUG
						}
					}
					GER = {
						puppet = CRO #transfer Croatia to be GER puppet if previously was Yugo one
					}
				}
				else = {
					CRO = {
						if = {
							limit = { YUG = { owns_state = 103 } }
							transfer_state = 103
						}
						if = {
							limit = { YUG = { owns_state = 958 } }
							transfer_state = 958
						}
						if = {
							limit = { YUG = { owns_state = 104 } }
							transfer_state = 104
						}
						if = {
							limit = { YUG = { owns_state = 804 } }
							transfer_state = 804
						}
						if = {
							limit = { YUG = { owns_state = 961 } }
							transfer_state = 961
						}
						if = {
							limit = { YUG = { owns_state = 962 } }
							transfer_state = 962
						}
						if = {
							limit = { YUG = { owns_state = 109 } }
							transfer_state = 109
						}
						if = {
							limit = { YUG = { owns_state = 959 } }
							transfer_state = 959
						}
						if = {
							limit = { YUG = { owns_state = 952 } }
							transfer_state = 952
						}
					puppet = CRO #in case Croatia doesn't exist it shall become German puppet
					}	
				}
				every_other_country = { #Making Croatian borders bigger to prevent bordergore 
					limit = {
						capital_scope = {
							is_on_continent = europe
						}
						is_subject_of = YUG
						OR = {
							original_tag = SLV
							original_tag = BOS
							original_tag = HRZ
						}
					}
					CRO = {
						annex_country = {
							target = PREV
							transfer_troops = no
						}
					}
				}
				every_other_country = { #Germany annexes the rest
					limit = {
						capital_scope = {
							is_on_continent = europe
						}
						is_subject_of = YUG
						OR = {
							original_tag = MAC
							original_tag = SER
							original_tag = TRA
							original_tag = MNT
							original_tag = KOS
							AND = {
								original_tag = HUN
								has_cosmetic_tag = vojvodina
							}
						}
					}
					GER = {
						annex_country = {
							target = PREV
							transfer_troops = no
						}
					}
				}
				annex_country = { target = YUG transfer_troops = no }
			}
		}

		#If no guarantee or faction Yug has no choice
		if = {
			limit = {
				YUG = {
					is_in_faction = no
					NOT = {
						any_other_country = {
							has_guaranteed = YUG
						}
					}
				}
			}
			add_political_power = -25
			add_named_threat = { threat = 3 name = GER_fate_of_yugoslavia }
			if = {
				limit = {
					CRO = {
						exists = yes
						is_puppet_of = YUG
					}
				}
				GER = {
					puppet = CRO #transfer Croatia to be GER puppet if previously was Yugo one
				}
			}
			else = {
				CRO = {
					if = {
						limit = { YUG = { owns_state = 103 } }
						transfer_state = 103
					}
					if = {
						limit = { YUG = { owns_state = 958 } }
						transfer_state = 958
					}
					if = {
						limit = { YUG = { owns_state = 104 } }
						transfer_state = 104
					}
					if = {
						limit = { YUG = { owns_state = 804 } }
						transfer_state = 804
					}
					if = {
						limit = { YUG = { owns_state = 961 } }
						transfer_state = 961
					}
					if = {
						limit = { YUG = { owns_state = 962 } }
						transfer_state = 962
					}
					if = {
						limit = { YUG = { owns_state = 109 } }
						transfer_state = 109
					}
					if = {
						limit = { YUG = { owns_state = 959 } }
						transfer_state = 959
					}
					if = {
						limit = { YUG = { owns_state = 952 } }
						transfer_state = 952
					}
				puppet = CRO #in case Croatia doesn't exist it shall become German puppet
				}	
			}
			every_other_country = { #Croatia takes that to prevent border gore
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject_of = YUG
					OR = {
						original_tag = SLV
						original_tag = BOS
						original_tag = HRZ
					}
				}
				CRO = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}
			every_other_country = { #annex the rest directly by Germany
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject_of = YUG
					OR = {
						original_tag = MAC
						original_tag = SER
						original_tag = TRA
						original_tag = MNT
						original_tag = KOS
						AND = {
							original_tag = HUN
							has_cosmetic_tag = vojvodina
						}
					}
				}
				GER = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}
			annex_country = { target = YUG transfer_troops = no }

			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_puppet_CRO_annex_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
		custom_effect_tooltip = yugoslavia_mefo_bills_tt
		add_to_variable = { var = GER_mefo_bill_counter value = -5 }
		GER_mefo_bills_level_down = yes

	}

	option = {
		name = germany.98.c
		ai_chance = { factor = 5 }

		if = {
			limit = {
				YUG = {
					OR = {
						is_in_faction = yes
						any_other_country = {
							has_guaranteed = YUG
						}
					}
				}
			}
			YUG = { country_event = yugoslavia.9 }
			custom_effect_tooltip = germany.98_tt
			effect_tooltip = {
				add_named_threat = { threat = 2 name = GER_fate_of_yugoslavia }
				if = {
					limit = {
						CRO = {
							exists = yes
							is_puppet_of = YUG
						}
					}
					GER = {
						puppet = CRO #again, transfer Croatia if it was a puppet
					}
				}
				else = {
					CRO = {
						if = {
							limit = { YUG = { owns_state = 103 } }
							transfer_state = 103
						}
						if = {
							limit = { YUG = { owns_state = 958 } }
							transfer_state = 958
						}
						if = {
							limit = { YUG = { owns_state = 104 } }
							transfer_state = 104
						}
						if = {
							limit = { YUG = { owns_state = 804 } }
							transfer_state = 804
						}
						if = {
							limit = { YUG = { owns_state = 961 } }
							transfer_state = 961
						}
						if = {
							limit = { YUG = { owns_state = 962 } }
							transfer_state = 962
						}
						if = {
							limit = { YUG = { owns_state = 109 } }
							transfer_state = 109
						}
						if = {
							limit = { YUG = { owns_state = 959 } }
							transfer_state = 959
						}
						if = {
							limit = { YUG = { owns_state = 952 } }
							transfer_state = 952
						}
					}
					puppet = CRO #again, puppet Croatia if released
				}
				every_other_country = { #Croatia reduces bordergore
					limit = {
						capital_scope = {
							is_on_continent = europe
						}
						is_subject_of = YUG
						OR = {
							original_tag = SLV
							original_tag = BOS
							original_tag = HRZ
						}
					}
					CRO = {
						annex_country = {
							target = PREV
							transfer_troops = no
						}
					}
				}
				if = {
					limit = {
						SER = {
							exists = yes
							is_puppet_of = YUG
						}
					}
					GER = {
						puppet = SER #if Serbia is puppet, transfer it to Germany
					}
				}
				else = {
					SER = { #no Serbia, then release it and give as a puppet to Germany
						if = {
							limit = { YUG = { owns_state = 108 } }
							transfer_state = 108
						}
						if = {
							limit = { YUG = { owns_state = 105 } }
							transfer_state = 105
						}
						if = {
							limit = { YUG = { owns_state = 106 } }
							transfer_state = 106
						}
						if = {
							limit = { YUG = { owns_state = 802 } }
							transfer_state = 802
						}
						if = {
							limit = { YUG = { owns_state = 950 } }
							transfer_state = 950
						}
						if = {
							limit = { YUG = { owns_state = 953 } }
							transfer_state = 953
						}
						if = {
							limit = { YUG = { owns_state = 803 } }
							transfer_state = 803
						}
						if = {
							limit = { YUG = { owns_state = 764 } }
							transfer_state = 764
						}
						if = {
							limit = { YUG = { owns_state = 45 } }
							transfer_state = 45
						}
					}
					puppet = SER 
				}
				
				every_other_country = { #serbia reduces bordergore
					limit = {
						capital_scope = {
							is_on_continent = europe
						}
						is_subject_of = YUG
						OR = {
							original_tag = MAC
							original_tag = TRA
							original_tag = MNT
							original_tag = KOS
							AND = {
								original_tag = HUN
								has_cosmetic_tag = vojvodina
							}
						}
					}
					SER = {
						annex_country = {
							target = PREV
							transfer_troops = no
						}
					}
				}

				annex_country = { target = YUG transfer_troops = no }
				SER = { #doesn't get Belgrade so as Yugo releases Serbia and loses all territories, the puppets won't become independent, sorry for such poor trick
					if = {
						limit = { GER = { owns_state = 107 } }
						transfer_state = 107
					}
				}

				
				hidden_effect = {
					set_global_flag = GER_fate_of_yugoslavia_puppet_CRO_YUG
					news_event = { hours = 6 id = news.169 }
				}
			}
		}

		#If no guarantee or faction Yug has no choice
		if = {
			limit = {
				YUG = {
					is_in_faction = no
					NOT = {
						any_other_country = {
							has_guaranteed = YUG
						}
					}
				}
			}
			add_named_threat = { threat = 2 name = GER_fate_of_yugoslavia }
			if = { #transfer croatian puppet to new overlord
				limit = {
					CRO = {
						exists = yes
						is_puppet_of = YUG
					}
				}
				GER = {
					puppet = CRO
				}
			}
			else = {
				CRO = { #releases Croatia which will become puppet of Germany
					if = {
						limit = { YUG = { owns_state = 103 } }
						transfer_state = 103
					}
					if = {
						limit = { YUG = { owns_state = 958 } }
						transfer_state = 958
					}
					if = {
						limit = { YUG = { owns_state = 104 } }
						transfer_state = 104
					}
					if = {
						limit = { YUG = { owns_state = 804 } }
						transfer_state = 804
					}
					if = {
						limit = { YUG = { owns_state = 961 } }
						transfer_state = 961
					}
					if = {
						limit = { YUG = { owns_state = 962 } }
						transfer_state = 962
					}
					if = {
						limit = { YUG = { owns_state = 109 } }
						transfer_state = 109
					}
					if = {
						limit = { YUG = { owns_state = 959 } }
						transfer_state = 959
					}
					if = {
						limit = { YUG = { owns_state = 952 } }
						transfer_state = 952
					}
				puppet = CRO
				}	
			}
			every_other_country = { #preventing bordergore in Croatian part
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject_of = YUG
					OR = {
						original_tag = SLV
						original_tag = BOS
						original_tag = HRZ
					}
				}
				CRO = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}
			if = {  #transfer serbian puppet to new overlord
				limit = {
					SER = {
						exists = yes
						is_puppet_of = YUG
					}
				}
				GER = {
					puppet = SER
				}
			}
			else = { #serbia released as German puppet
				SER = {
					if = {
						limit = { YUG = { owns_state = 108 } }
						transfer_state = 108
					}
					if = {
						limit = { YUG = { owns_state = 105 } }
						transfer_state = 105
					}
					if = {
						limit = { YUG = { owns_state = 106 } }
						transfer_state = 106
					}
					if = {
						limit = { YUG = { owns_state = 802 } }
						transfer_state = 802
					}
					if = {
						limit = { YUG = { owns_state = 950 } }
						transfer_state = 950
					}
					if = {
						limit = { YUG = { owns_state = 953 } }
						transfer_state = 953
					}
					if = {
						limit = { YUG = { owns_state = 803 } }
						transfer_state = 803
					}
					if = {
						limit = { YUG = { owns_state = 764 } }
						transfer_state = 764
					}
					if = {
						limit = { YUG = { owns_state = 45 } }
						transfer_state = 45
					}
				}
				puppet = SER
			}
			
			every_other_country = { #preventing bordergore in Serbian part
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject_of = YUG
					OR = {
						original_tag = MAC
						original_tag = TRA
						original_tag = MNT
						original_tag = KOS
						AND = {
							original_tag = HUN
							has_cosmetic_tag = vojvodina
						}
					}
				}
				SER = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}

			annex_country = { target = YUG transfer_troops = no }
			SER = { #doesn't get Belgrade so as Yugo releases Serbia and loses all territories, the puppets won't become independent, sorry for such poor trick
				if = {
					limit = { GER = { owns_state = 107 } }
					transfer_state = 107
				}
			}

			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_puppet_CRO_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
		custom_effect_tooltip = yugoslavia_mefo_bills_tt
		add_to_variable = { var = GER_mefo_bill_counter value = -5 }
		GER_mefo_bills_level_down = yes
	}
}

# Germany: Carve up Greece - Give land to Italy?
country_event = {
	id = germany.99
	title = germany.99.t
	desc = germany.99.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		ai_chance = { factor = 5 }
		name = germany.99.a

		ITA = { add_opinion_modifier = { target = GER modifier = GER_second_ljubljana_award_GER } }

		if = {
			limit = {
				GRE = { owns_state = 182 }
			}
			set_global_flag = GER_second_ljubljana_award_ITA_182
		}
		if = {
			limit = {
				GRE = { owns_state = 187 }
			}
			set_global_flag = GER_second_ljubljana_award_ITA_187
		}
		if = {
			limit = {
				OR = {
					has_global_flag = GER_second_ljubljana_award_BUL_done
					NOT = { has_global_flag = GER_second_ljubljana_award_BUL_event }
				}
			}
			custom_effect_tooltip = germany.101_tt
			GRE = { country_event = { id = greece.2 hours = 2 } }
		}
		set_global_flag = GER_second_ljubljana_award_ITA_done
	}

		#Don't give them anything
	option = {
		ai_chance = { factor = 0 }
		name = germany.99.b
		ITA = { add_opinion_modifier = { target = GER modifier = GER_second_ljubljana_award_noland } }
		set_global_flag = GER_second_ljubljana_award_ITA_done
	}
}

# Germany: Carve up Greece - Give land to Bulgaria?
country_event = {
	id = germany.100
	title = germany.100.t
	desc = germany.100.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		ai_chance = { factor = 5 }
		name = germany.100.a

		set_global_flag = GER_second_ljubljana_award_BUL_184
		BUL = { add_opinion_modifier = { target = GER modifier = GER_second_ljubljana_award_GER } }

		if = {
			limit = {
				OR = {
					has_global_flag = GER_second_ljubljana_award_ITA_done
					NOT = { has_global_flag = GER_second_ljubljana_award_ITA_event }
				}
			}
			custom_effect_tooltip = germany.101_tt
			GRE = { country_event = { id = greece.2 hours = 2 } }
		}
		set_global_flag = GER_second_ljubljana_award_BUL_done
	}

		#Don't give them anything
	option = {
		name = germany.100.b
		ai_chance = { factor = 0 }
		BUL = { add_opinion_modifier = { target = GER modifier = GER_second_ljubljana_award_noland } }
		set_global_flag = GER_second_ljubljana_award_BUL_done
	}
}

# Germany: Carve up Greece - Take land for Germany?
country_event = {
	id = germany.101
	title = germany.101.t
	desc = germany.101.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				731 = {
					any_neighbor_state = { is_owned_by = GER }
					is_owned_by = GRE
				}
			}
			set_global_flag = GER_second_ljubljana_award_GER_731
		}
		if = {
			limit = {
				185 = {
					any_neighbor_state = { is_owned_by = GER }
					is_owned_by = GRE
				}
			}
			set_global_flag = GER_second_ljubljana_award_GER_185
		}
		if = {
			limit = {
				47 = {
					any_neighbor_state = { is_owned_by = GER }
					is_owned_by = GRE
				}
			}
			set_global_flag = GER_second_ljubljana_award_GER_47
		}
	}

	option = {
		name = germany.101.a
		GRE = { country_event = { id = greece.2 hours = 2 } }
		custom_effect_tooltip = germany.101_tt
		effect_tooltip = {
			if = {
				limit = {
					has_global_flag = GER_second_ljubljana_award_GER_731
				}
				GER = { transfer_state = 731 }
			}
			if = {
				limit = {
					has_global_flag = GER_second_ljubljana_award_GER_185
					NOT = { has_global_flag = GER_second_ljubljana_award_GER_731 }
				}
				GER = { transfer_state = 185 }
			}
			if = {
				limit = {
					has_global_flag = GER_second_ljubljana_award_GER_47
					NOT = { has_global_flag = GER_second_ljubljana_award_GER_731 }
					NOT = { has_global_flag = GER_second_ljubljana_award_GER_185 }
				}
				GER = { transfer_state = 47 }
			}
		}
	}

	option = {
		name = germany.101.b
	}
}

# Germany: Greece refuses - Generate wargoal
country_event = {
	id = germany.102
	title = germany.102.t
	desc = germany.102.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.102.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = GRE
		}
		hidden_effect = {
			news_event = { id = news.229 hours = 6 }
		}
	}
}

# Germany: Greece refuses puppet request - Generate wargoal
country_event = {
	id = germany.103
	title = germany.103.t
	desc = germany.103.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.103.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = GRE		
		}
	}
}

# Germany: Italy demands lands in Vichy France
country_event = {
	id = germany.104
	title = germany.104.t
	desc = { text = germany.104.d_Savoy 					trigger = { has_global_flag = ITA_claims_on_france_735 } }
	desc = { text = germany.104.d_Corsica 				trigger = { has_global_flag = ITA_claims_on_france_1 } }
	desc = { text = germany.104.d_Savoy_Corsica 	trigger = { has_global_flag = ITA_claims_on_france_735 has_global_flag = ITA_claims_on_france_1 } }
 
 
	picture = GFX_report_event_german_italian_pact
	
	is_triggered_only = yes

	# Italy gets 1 state Savoy
	option = {
		ai_chance = { factor = 70 }
		name = germany.104.a
		trigger = {
			has_global_flag = ITA_claims_on_france_735
			has_global_flag = ITA_claims_on_france_1
		}
		clr_global_flag = ITA_claims_on_france_1
		random_other_country = {
			limit = {
				original_tag = VIC
				has_government = fascism
			}
			country_event = france.27
		}
		ITA = { country_event = { id = italy.16 hours = 2 } }
	}

	# Italy gets 1 state Corsica
	option = {
		ai_chance = { factor = 70 }
		name = germany.104.b
		trigger = {
			NOT = { has_global_flag = ITA_claims_on_france_735 }
			has_global_flag = ITA_claims_on_france_1
		}
		random_other_country = {
			limit = {
				original_tag = VIC
				has_government = fascism
			}
			country_event = france.27
		}		
		ITA = { country_event = { id = italy.15 hours = 2 } }
	}

	# Italy gets Savoy
	option = {
		ai_chance = { factor = 70 }
		name = germany.104.c
		trigger = {
			has_global_flag = ITA_claims_on_france_735
			NOT = { has_global_flag = ITA_claims_on_france_1 }
		}
		random_other_country = {
			limit = {
				original_tag = VIC
				has_government = fascism
			}
			country_event = france.27
		}				
		ITA = { country_event = { id = italy.15 hours = 2 } }		
	}

	# Italy gets Savoy and Corsica
	option = {
		ai_chance = { factor = 20 }
		name = germany.104.e
		trigger = {
			has_global_flag = ITA_claims_on_france_735
			has_global_flag = ITA_claims_on_france_1
		}
		random_other_country = {
			limit = {
				original_tag = FRA
				has_government = fascism
			}
			country_event = france.27
		}				
		ITA = { country_event = { id = italy.15 hours = 2 } }
	}

	# Italy gets nothing 
	option = {
		ai_chance = { factor = 10 }
		name = germany.104.f
		ITA = { country_event = { id = italy.14 hours = 2 } }
	}
}

# Germany: Italy leaves faction
country_event = {
	id = germany.105
	title = germany.105.t
	desc = germany.105.d
	picture = GFX_report_event_german_italian_pact

	is_triggered_only = yes

	option = {
		name = germany.105.a
	}
}

# Germany: Treaty Of Craiova
country_event = {
	id = germany.106
	title = germany.106.t
	desc = { text = germany.106.d_second_vienna_accepted_all trigger = { ROM = { has_country_flag = second_vienna_accepted_all } } }
	desc = { text = germany.106.d_second_vienna_accepted_north trigger = { ROM = { has_country_flag = second_vienna_accepted_north } } }
	desc = {
		text = germany.106.d_no_vienna
		trigger = {
			ROM = {
				NOT = { has_country_flag = second_vienna_accepted_all }
				NOT = { has_country_flag = second_vienna_accepted_north }
			}
		}
	}
	picture = GFX_report_event_vienna_award_hungary

	is_triggered_only = yes

	option = { # Give Bulgaria state 77
		name = germany.106.a
		ai_chance = { factor = 95
			modifier = {
				factor = 0
				BUL = {
					is_in_faction = yes
					NOT = { is_in_faction_with = GER }
				}
			}
		}
		add_named_threat = { threat = 2 name = germany.106_threat }
		BUL = {
			add_opinion_modifier = { target = GER modifier = GER_treaty_of_craiova_GER }

			every_other_country = {
				limit = {
					is_faction_leader = yes
					NOT = { tag = GER }
				}
				reverse_add_opinion_modifier = { target = BUL modifier = GER_treaty_of_craiova_other }
			}
		}
		ROM = {
			country_event = { id = romania.5 hours = 3 }
		}
	}
	option = { # Give Bulgaria nothing
		name = germany.106.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				NOT = {
					BUL = {
						is_in_faction = yes
						NOT = { is_in_faction_with = GER }
					}
				}
			}
		}
		BUL = {
			add_opinion_modifier = { target = GER modifier = GER_treaty_of_craiova_noland }
			country_event = { id = bulgaria.5 hours = 4 }
		}
	}
}

# Flight of Rudolf No Hindenburg
country_event = {
	id = germany.107
	title = germany.107.t
	desc = germany.107.d
	picture = GFX_report_event_airplane_crash

	is_triggered_only = yes

	immediate = {
		set_country_flag = flight_of_hess
		if = {
			limit = {
				has_idea = rudolf_hess
			}
			remove_ideas = rudolf_hess
		}
	}

	option = {
		name = germany.107.a
	}
}

# Rudolf Hess killed No Hindenburg
country_event = {
	id = germany.108
	title = germany.108.t
	desc = germany.108.d
	picture = GFX_report_event_airplane_crash

	is_triggered_only = yes

	immediate = {
		set_country_flag = flight_of_hess
		if = {
			limit = {
				has_idea = rudolf_hess
			}
			remove_ideas = rudolf_hess
		}
	}

	option = {
		name = germany.108.a
	}
}

# Flight of Rudolf Hess (Hindenburg)
country_event = {
	id = germany.109
	title = germany.107.t
	desc = germany.109.d
	picture = GFX_report_event_hindenburg_flames

	is_triggered_only = yes

	immediate = {
		set_country_flag = flight_of_hess
		if = {
			limit = {
				has_idea = rudolf_hess
			}
			remove_ideas = rudolf_hess
		}
	}

	option = {
		name = germany.108.a
	}
}

# Rudolf Hess Killed (Hindenburg)
country_event = {
	id = germany.110
	title = germany.108.t
	desc = germany.110.d
	picture = GFX_report_event_hindenburg_flames

	is_triggered_only = yes

	immediate = {
		set_country_flag = flight_of_hess
		if = {
			limit = {
				has_idea = rudolf_hess
			}
			remove_ideas = rudolf_hess
		}
	}

	option = {
		name = germany.110.a
	}
}

# Yugoslavia refuses
country_event = {
	id = germany.111
	title = germany.111.t
	desc = germany.111.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = {
		name = germany.111.a
		create_wargoal = {
			type = annex_everything
			target = YUG
		}
	}
}

# (Hidden)
country_event = {
	id = germany.112

	is_triggered_only = yes

	hidden = yes

	immediate = {
		every_other_country = {
			limit = { has_idea = anti_soviet_pact }
			add_opinion_modifier = { target = FROM modifier = anti_soviet_pact_call_refused }
		}
	}
}


# Danzig or War (Polish Civil War)
country_event = {
	id = germany.113
	title = germany.113.t
	desc = germany.113.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	#Demand Danzig for aid
	option = {
		name = germany.113.a
		set_country_flag = GER_POL_danzig_promised
		GER = {
			country_event = { id = germany.117 days = 1 }
		}
	}
}

#Germany expects Danzig after war
country_event = {
	id = germany.114
	title = germany.114.t
	desc = germany.114.d
	picture = GFX_report_event_polish_tanks_01

	trigger = {
		has_country_flag = GER_POL_danzig_promised
		has_civil_war = no
		owns_state = 85
		controls_state = 85
	}

	fire_only_once = yes

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			clr_country_flag = GER_POL_danzig_promised
		}
	}

	option = {
		name = germany.114.a
		ai_chance = {
			base = 1
		}
		GER = {
			country_event = { id = germany.115 days = 1 }
		}
	}

	option = {
		name = germany.114.b
		trigger = {
			NOT = {
				is_in_faction_with = GER
			}
		}
		ai_chance = {
			base = 0
		}
		GER = {
			country_event = { id = germany.116 days = 1 }
			effect_tooltip = {
				declare_war_on = {
					target = POL
					type = take_state
					generator = { 85 }
				}
			}
		}
	}
}

#Poland cedes Danzig as repayment
country_event = {
	id = germany.115
	title = germany.115.t
	desc = germany.115.d
	picture = GFX_report_event_polish_tanks_01

	is_triggered_only = yes

	option = {
		name = germany.115.a
		transfer_state = 85
		remove_state_claim = 86
	}
}


# Poland Refuses to Cede Danzig (Polish Civil War)
country_event = {
	id = germany.116
	title = germany.116.t
	desc = germany.116.d
	picture = GFX_report_event_polish_tanks_02

	is_triggered_only = yes

	option = {
		name = germany.116.a
		ai_chance = {
			base = 1
		}
		declare_war_on = {
			target = POL
			type = take_state
			generator = { 85 }
		}
	}

	option = {
		name = germany.116.b
		ai_chance = {
			base = 0
		}
	}
}


# The Promise of Danzig (Polish Civil War)
country_event = {
	id = germany.117
	title = germany.117.t
	desc = germany.117.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	# This is a German struggle
	option = {
		name = germany.117.a
	}
}


#The Yalta Conference
country_event = {
	id =  germany.118
	title = germany.118.t
	desc = germany.118.d
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	trigger = {
		#A democratic or althistory faction leader whose faction holds at least one German core state while SOV holds another can get this.
		NOT = {
			has_global_flag = had_yalta_conference
		}		
		has_war_with = GER
		GER = {
			surrender_progress > 0.44
		}
		is_faction_leader = yes	
		any_of = {
			array = GER.core_states
			var:v = { controller = { is_in_faction_with = ROOT } }
		}
		OR = {
			has_government = democratic
			AND = {
				has_government = neutrality
				GER = {
					NOT = {
						has_government = neutrality
					}
				}
				SOV = {
					NOT = {
						has_government = neutrality
					}
				}
				NOT = {
					any_of = {
						array = GER.core_states
						var:v = { controller = { 
								AND = {
									has_government = democratic
									is_major = yes
								}
							}
						}
					}
				}
			}
			AND = {
				has_government = fascism
				GER = {
					NOT = {
						has_government = fascism
					}
				}
				SOV = {
					NOT = {
						has_government = fascism
					}
				}
				NOT = {
					any_of = {
						array = GER.core_states
						var:v = { controller = { 
								AND = {
									has_government = democratic
									is_major = yes
								}
							}
						}
					}
				}
			}
			AND = {
				has_government = communism
				GER = {
					NOT = {
						has_government = communism
					}
				}
				SOV = {
					NOT = {
						has_government = communism
					}
				}
				NOT = {
					any_of = {
						array = GER.core_states
						var:v = { controller = { 
								AND = {
									has_government = democratic
									is_major = yes
								}
							}
						}
					}
				}
			}
		}
		NOT = {
			tag = SOV
		}
		NOT = {
			has_war_with = SOV
		}
		SOV = {
			is_faction_leader = yes
		}
		OR = {
			any_of = {
				array = GER.core_states
				var:v = { is_controlled_by = SOV }
			}
			any_of = {
				array = GER.core_states
				var:v = { controller = { is_in_faction_with = SOV } }
			}
		}
		NOT = {
			any_of = {
				array = GER.core_states
				var:v = {
					controller = {
						NOT = {
							tag = GER
						}
						is_in_faction = yes
						NOT = {
							OR = {
								is_in_faction_with = ROOT
								is_in_faction_with = SOV
							}
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 15
	}

	immediate = { #A country who has capitulated and does not exist or is in a faction/war with Germany will have Yalta forced on them with the r56_TAG_in_yalta flag.
		set_global_flag = had_yalta_conference
		SOV = {
			save_event_target_as = yalta_partner
			set_country_flag = r56_yalta_partner
		}
		ROOT = {
			save_event_target_as = yalta_origin
			set_country_flag = r56_yalta_origin
		}
		if = {
			limit = {
				USA = { #kinda should get a check if they did anything
					has_war_with = GER
				}
				ENG = {
					has_war_with = GER
				}
				FRA = {
					has_war_with = GER
				}
			}
			set_global_flag = r56_historical_occupation_yalta_allowed
		}
		if = { #Dynamic Germany zones would be a nightmare, this is for Austria
			limit = {
				USA = { #kinda should get a check if they did anything
					has_war_with = GER
				}
			}
			set_global_flag = r56_USA_can_occupy_yalta
		}
		if = {
			limit = {
				FRA = {
					has_war_with = GER
				}
			}
			set_global_flag = r56_FRA_can_occupy_yalta
		}
		if = {
			limit = {
				ENG = {
					has_war_with = GER
				}
			}
			set_global_flag = r56_ENG_can_occupy_yalta
		}
		if = {
			limit = {
				CZE = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_CZE_in_yalta
		}
		if = {
			limit = {
				POL = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						is_government_in_exile = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_POL_in_yalta
		}
		if = {
			limit = {
				HUN = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_HUN_in_yalta
		}
		if = {
			limit = {
				AUS = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_AUS_in_yalta
		}
		if = {
			limit = {
				ITA = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_ITA_in_yalta
		}
		if = {
			limit = {
				ROM = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_ROM_in_yalta
		}
		if = {
			limit = {
				YUG = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						is_government_in_exile = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_YUG_in_yalta
		}
		if = {
			limit = {
				SLO = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_SLO_in_yalta
		}
		if = {
			limit = {
				BUL = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_BUL_in_yalta
		}
		if = {
			limit = {
				GRE = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_GRE_in_yalta
		}
		if = {
			limit = {
				ALB = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
	 					}
					}
				}
			}
			set_global_flag = r56_ALB_in_yalta
		}
		if = {
			limit = {
				LUX = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_LUX_in_yalta
		}
		if = {
			limit = {
				BEL = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_BEL_in_yalta
		}
		if = {
			limit = {
				HOL = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_HOL_in_yalta
		}
		if = {
			limit = {
				DEN = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_DEN_in_yalta
		}
		if = {
			limit = {
				NOR = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_NOR_in_yalta
		}
		if = {
			limit = {
				SWE = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_SWE_in_yalta
		}
		if = {
			limit = {
				FIN = {
					is_ai = yes
					NOT = {
						is_subject_of = SOV
					}
					OR = {
						exists = no
						has_capitulated = yes
						AND = {
							is_in_faction_with = GER
							has_war_together_with = GER
						}
					}
				}
			}
			set_global_flag = r56_FIN_in_yalta
		}
	}

	option = {
		name = germany.118.a
		custom_effect_tooltip = r56_yalta_occupation_tt
		hidden_effect = {
			if = {
				limit = {
					has_government = neutrality
				}
				set_global_flag = r56_yalta_origin_is_neutrality
				WGR = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				set_global_flag = r56_yalta_origin_is_fascism
				WGR = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				set_global_flag = r56_yalta_origin_is_communism
				WGR = {
					set_politics = { ruling_party = communism elections_allowed = no }
					add_popularity = {
						ideology = communism
						popularity = 0.5
					}
				}
			}
			event_target:yalta_partner = {
				country_event = { days = 1 id = germany.119 }
			}
		}
		effect_tooltip = {
			SOV = {
				add_state_core = 763
				add_state_core = 73
			}
			#WGR = {
			#	add_state_core = 42
			#	add_state_core = 50
			#	add_state_core = 51
			#	add_state_core = 52
			#	add_state_core = 53
			#	add_state_core = 54
			#	add_state_core = 55
			#	add_state_core = 56
			#	add_state_core = 57
			#	add_state_core = 58
			#	add_state_core = 59
			#	add_state_core = 989
			#	add_state_core = 922
			#	add_state_core = 923
			#}
			#DDR = {
			#	add_state_core = 60
			#	add_state_core = 61
			#	add_state_core = 62
			#	add_state_core = 64
			#	add_state_core = 65
			#	#add_state_core = 66
			#	#add_state_core = 67
			#}
			POL = {
				if = {
					limit = {
						NOT = {
							has_completed_focus = POL_accept_border_realignment
						}
					}
					add_state_core = 66
					add_state_core = 67
					add_state_core = 68
					add_state_core = 63
					add_state_core = 5
				}
			}
		}
		event_target:yalta_partner = {
			custom_effect_tooltip = needs_approval
		}
	}

	option = {
		name = germany.118.b
		ai_chance = {
			factor = 0
		}
		set_global_flag = r56_unlocked_fate_of_germany_decisions #unlock decisions that allow DDR/WGR formation
		custom_effect_tooltip = r56_yalta_decisions_available_2_tt
	}
}


#Yalta Conference Follow-up
country_event = {
	id = germany.119
	title = germany.119.t
	desc = germany.119.d
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = germany.119.a
		SOV = {
			add_state_core = 763
			add_state_core = 73
			add_state_core = 996 #prevents RUT puppet here
		}
		WGR = {
			add_state_core = 42
			add_state_core = 50
			add_state_core = 51
			add_state_core = 52
			add_state_core = 53
			add_state_core = 54
			add_state_core = 55
			add_state_core = 56
			add_state_core = 57
			add_state_core = 58
			add_state_core = 59
			add_state_core = 989
			add_state_core = 922
			add_state_core = 923
			add_state_core = 998
		}
		DDR = {
			add_state_core = 60
			add_state_core = 61
			add_state_core = 62
			add_state_core = 64
			add_state_core = 65
			#add_state_core = 66
			#add_state_core = 67
		}
		POL = {
			if = {
				limit = {
					NOT = {
						has_completed_focus = POL_accept_border_realignment
					}
				}
				add_state_core = 66
				add_state_core = 67
				add_state_core = 68
				add_state_core = 63
				add_state_core = 5
			}
		}
		hidden_effect = {
			news_event = { days = 1 id = news.236 }
			set_global_flag = r56_yalta_script_is_a_go
			188 = {
				add_claim_by = SOV #helps with border gore
			}
			if = {
				limit = {
					has_government = neutrality
				}
				set_global_flag = r56_yalta_pat_is_neutrality
				DDR = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				set_global_flag = r56_yalta_pat_is_fascism
				DDR = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_government = democratic
				}
				set_global_flag = r56_yalta_pat_is_democratic
				DDR = {
					set_politics = { ruling_party = democratic elections_allowed = no }
					add_popularity = {
						ideology = democratic
						popularity = 0.5
					}
				}
			}
			97 = {
				remove_core_of = BLR
			}

			BLR = {
				add_state_claim = 97
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
					is_government_in_exile = yes
					NOT = {
						has_government = communism
					}
					is_ai = yes
				}
				add_legitimacy = -50
			}
		}
	}

	option = {
		name = germany.119.b
		ai_chance = {
			factor = 0
		}
		hidden_effect = {
			create_wargoal = {
				type = liberate_wargoal
				target = DDR
			}
			if = {
				limit = {
					has_government = neutrality
				}
				set_global_flag = r56_yalta_pat_is_neutrality
				DDR = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				set_global_flag = r56_yalta_pat_is_fascism
				DDR = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_government = democratic
				}
				set_global_flag = r56_yalta_pat_is_democratic
				DDR = {
					set_politics = { ruling_party = democratic elections_allowed = no }
					add_popularity = {
						ideology = democratic
						popularity = 0.5
					}
				}
			}
		}
		event_target:yalta_origin = {
			country_event = {
				id = germany.120
			}
			hidden_effect = {
				create_wargoal = {
					type = liberate_wargoal
					target = WGR
				}
			}
		}
	}
}


country_event = {
	id = germany.120
	title = germany.120.t
	desc = germany.120.d
	picture = GFX_report_event_generic_sign_treaty1

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = germany.120.a
	}
}

country_event = {
	id = germany.121
	title = germany.121.t
	desc = germany.121.d
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	trigger = {
		#Fires for one of the new German states to transfer old German territory.
		country_exists = GER
		OR = {
			country_exists = WGR
			country_exists = DDR
		}
		OR = {
			tag = WGR
			tag = DDR
		}
	}

	mean_time_to_happen = {
		days = 0
	}

	option = {
		name = germany.121.a
		set_global_flag = r56_yalta_fix_after_check
		if = {
			limit = {
				country_exists = POL
			}
			#Return Polish territory + new cores if they exist
			every_state = {
				limit = {
					is_core_of = POL
					is_owned_and_controlled_by = GER
				}
				POL = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				NOT = {
					country_exists = POL
				}
				POL = {
					is_ai = yes
				}
			}
			#Otherwise give SOV Polish cores
			every_state = {
				limit = {
					is_core_of = POL
					is_owned_and_controlled_by = GER
				}
				SOV = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				country_exists = WGR
			}
			#Give WGR their cores
			every_state = {
				limit = {
					is_owned_and_controlled_by = GER
					is_core_of = WGR
				}
				WGR = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				country_exists = DDR
			}
			#Give East Germany their cores
			every_state = {
				limit = {
					is_owned_and_controlled_by = GER
					is_core_of = DDR
				}
				DDR = {
					transfer_state = PREV
				}
			}
			if = {
				limit = {
					GER = {
						is_puppet_of = SOV
					}
				}
				#If SOV decided to puppet GER in peace, they now get DDR instead.
				SOV = {
					puppet = DDR
				}
			}
		}
		if = {
			limit = {
				any_of = {
					array = CZE.core_states
					var:v = {
						is_owned_and_controlled_by = GER
						NOT = {
							is_core_of = DDR
							is_core_of = WGR
							is_core_of = POL
						}
					}
				}
			}
			#Give CZE any territory that might have been taken in a war or focus ending before the one that ended with the Yalta conference.
			every_state = {
				limit = {
					is_core_of = CZE
					is_owned_and_controlled_by = GER
					NOT = {
						is_core_of = DDR
						is_core_of = WGR
						is_core_of = POL
					}
				}
				CZE = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				any_of = {
					array = YUG.core_states
					var:v = {
						is_owned_and_controlled_by = GER
						NOT = {
							is_core_of = DDR
							is_core_of = WGR
							is_core_of = POL
						}
					}
				}
			}
			#Give YUG any territory that might have been taken in a war or focus ending before the one that ended with the Yalta conference.
			every_state = {
				limit = {
					is_core_of = YUG
					is_owned_and_controlled_by = GER
					NOT = {
						is_core_of = DDR
						is_core_of = WGR
						is_core_of = POL
					}
				}
				YUG = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				country_exists = LIT
				any_of = {
					array = LIT.core_states
					var:v = {
						is_owned_and_controlled_by = GER
						NOT = {
							is_core_of = DDR
							is_core_of = WGR
							is_core_of = POL
						}
					}
				}
			}
			#Give LIT any territory that might have been taken in a war or focus ending before the one that ended with the Yalta conference.
			every_state = {
				limit = {
					is_core_of = LIT
					is_owned_and_controlled_by = GER
					NOT = {
						is_core_of = DDR
						is_core_of = WGR
						is_core_of = POL
					}
				}
				LIT = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				NOT = {
					country_exists = LIT
				}
				any_of = {
					array = LIT.core_states
					var:v = {
						is_owned_and_controlled_by = GER
						NOT = {
							is_core_of = DDR
							is_core_of = WGR
							is_core_of = POL
						}
					}
				}
			}
			#Give any LIT cores to SOV if they have been taken in a previous war/focus
			every_state = {
				limit = {
					is_core_of = LIT
					is_owned_and_controlled_by = GER
					owner = {
						is_ai = yes
					}
					NOT = {
						is_core_of = DDR
						is_core_of = WGR
						is_core_of = POL
					}
				}
				SOV = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				DDR = {
					GER = {
						has_government = PREV
					}
				}
			}
			#If GER has changed government, remaining territory is passed to the corresponding new state (WGR or DDR)
			every_state = {
				limit = {
					owner = {
						is_ai = yes
					}
					is_owned_and_controlled_by = GER
					NOT = {
						is_core_of = DDR
						is_core_of = WGR
						is_core_of = POL
					}
				}
				DDR = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				WGR = {
					GER = {
						has_government = PREV
					}
				}
			}
			#See above
			every_state = {
				limit = {
					owner = {
						is_ai = yes
					}
					is_owned_and_controlled_by = GER
					NOT = {
						is_core_of = DDR
						is_core_of = WGR
						is_core_of = POL
					}
				}
				WGR = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				GER = {
					any_owned_state = {
						is_controlled_by = GER
						NOT = {
							is_core_of = WGR
							is_core_of = DDR
						}
					}
				}
			}
			#Any remaining cores go to WGR, because democracy is fun
			every_state = {
				limit = {
					is_owned_and_controlled_by = GER
					NOT = {
						is_core_of = WGR
						is_core_of = DDR
					}
				}
				WGR = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				country_exists = WGR
				country_exists = DDR
			}
			#Remove GER cores
			hidden_effect = {
				every_state = {
					limit = {
						is_core_of = GER
					}
					remove_core_of = GER
				}
			}
		}
	}
}

#Events in case of weirdness with German Czechoslovakia focus
country_event = {
	id = germany.122
	title = germany.122.t
	desc = germany.122.d
	picture = GFX_report_event_german_speech

	is_triggered_only = yes

	option = {
		name = germany.122.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.8
				strength_ratio = { tag = GER ratio < 0.5 }
			}
			modifier = {
				factor = 0.8
				has_opinion = { target = GER value > 99 }
			}
			modifier = {
				factor = 0.8
				strength_ratio = { tag = GER ratio < 0.3 }
			}
			modifier = {
				factor = 0.8
				strength_ratio = { tag = GER ratio < 0.2 }
			}
			modifier = {
				factor = 0.5
				strength_ratio = { tag = GER ratio < 0.1 }
			}
		}
		if = {
			limit = {
				is_in_faction_with = GER
				is_subject = no
			}
			remove_from_faction = CZE #kicked from faction
		}

		effect_tooltip = {
			GER = {
				add_state_claim = 69
				add_state_claim = 74
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 74 }
				}
			}
		}
		hidden_effect = {
			GER = {
				country_event = { id = germany.123 days = 1 }
			}
		}
	}

	option = {
		name = germany.122.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				FRA = { has_completed_focus = FRA_little_entente }
			}
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					has_guaranteed = CZE
				}
			}
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					is_in_faction_with = CZE
				}
			}
			modifier = {
				factor = 0.8
				any_other_country = {
					is_major = no
					has_guaranteed = CZE
				}
			}
			modifier = {
				factor = 0.8
				is_in_faction = yes
				NOT = {
					any_other_country = {
						is_major = yes
						is_in_faction_with = CZE
					}
				}
			}
		}
		effect_tooltip = {
			GER = {
				transfer_state = 69
				transfer_state = 74
			}
		}
		hidden_effect = {
			GER = {
				country_event = {
					id = germany.124 days = 1
				}
			}
		}
	}
}


#Events in case of weirdness with German Czechoslovakia focus
country_event = {
	id = germany.123
	title = germany.123.t
	desc = germany.123.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		name = germany.123.a
		add_state_claim = 69
		add_state_claim = 74
		if = {
			limit = {
				CZE = { is_subject_of = FROM }
				FROM = {
					is_in_faction_with = GER
					is_faction_leader = no
				}
			}
			remove_from_faction = CZE
			remove_from_faction = FROM
		}
		69 = {
			controller = {
				GER = {
					create_wargoal = {
						type = take_state_focus
						target = PREV
						generator = { 69 74 }
					}
				}
			}
		}
	}
}


#Events in case of weirdness with German Czechoslovakia focus
country_event = {
	id = germany.124
	title = germany.124.t
	desc = germany.124.d
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = {
		name = germany.124.a
		add_state_core = 69
		transfer_state = 69
		add_state_core = 74
		transfer_state = 74
	}
}

#Event if Austria has a civil war
country_event = {
	id = germany.126
	title = germany.126.t
	desc = germany.126.d
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = {
		name = germany.126.a
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
		}
		random_other_country = {
			limit = {
				original_tag = AUS
				NOT = { tag = ROOT }
			}
			FROM = {
				add_to_war = {
					targeted_alliance = ROOT
					enemy = PREV
					hostility_reason = war
				}
				annex_country = { target = ROOT transfer_troops = yes }
				hidden_effect = { news_event = { id = news.237 } }
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
	}
	option = {
		name = germany.126.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				OR = {
					has_government = communism
					has_government = democratic
				}
			}
		}
		every_country = {
			limit = {
				OR = {
					tag = AUS
					original_tag = AUS
				}
			}
			FROM = {
				create_wargoal = {
					target = PREV
					type = annex_everything
				}
			}
		}
	}
}

# Anti-Soviet Pact, ask Germany to create faction or invite to faction
country_event = {
	id = germany.127
	title = germany.127.t
	desc = germany.127.d
	picture = GFX_report_event_soviet_tanks

	is_triggered_only = yes

	# Create faction (if none) and send requests to join faction (members leave other faction)
	option = {
		name = germany.127.a
		every_other_country = {
			limit = {
				has_idea = anti_soviet_pact
				has_war_with = SOV
			}
			country_event = { id = germany.128 days = 1 }
		}
		if = {
			limit = {
				is_in_faction = no
			}
			create_faction = "anti_soviet_pact"
		}
	}

	# No ty
	option = {
		name = germany.127.b
		ai_chance = {
			base = 0
		}
	}
}

# Anti-Soviet Pact, Germany asks country to join faction
country_event = {
	id = germany.128
	title = germany.128.t
	desc = germany.128.d
	picture = GFX_report_event_soviet_tanks

	is_triggered_only = yes

	# Join faction (if none) and send requests to join faction (members leave other faction)
	option = {
		name = germany.128.a
		trigger = {
			is_in_faction = no
		}
		ai_chance = {
			base = 10
		}
		GER = { add_to_faction = ROOT }
	}

	# No ty
	option = {
		name = germany.128.b
		ai_chance = {
			base = 0
		}
	}
}

#rename city
country_event = {
	id = germany.999
	title = germany.999.t
	desc = germany.999.desc
	picture = GFX_report_event_GER_hitler_architecture

	fire_only_once = yes

	trigger = {
		tag = GER
		OR = {
			has_government = fascism
			has_government = neutrality
		}
		OR = {
			controls_state = 217
			any_subject_country = {
				controls_state = 217
			}
		}
		OR = {
			controls_state = 195
			any_subject_country = {
				controls_state = 195
			}
		}
	}

	option = { #a great idea!
		name = germany.999.a
		ai_chance = {
			base = 100
		}
		set_province_name = { id = 3529 name = "Hindenburg" }
		set_province_name = { id = 3151 name = "Ludendorff" }
		set_global_flag = GER_cities_renamed
	}

	option = { #rather not
		name = germany.999.b
		ai_chance = {
			base = 0
		}
		add_stability = -0.05 #because fuck you # language bro
	}

}

#reset city name if retaken
country_event = {
	id = germany.1000
	title = germany.1000.t
	desc = germany.1000.desc
	picture = GFX_report_event_german_reichstag_gathering

	hidden = yes

	trigger = {
		SOV = {
			has_government = communism
			controls_state = 217
			controls_state = 195
		}
		OR = {
			has_global_flag = GER_cities_renamed
			has_global_flag = ROM_king_is_silly
		}
	}

	mean_time_to_happen = { days = 2 }

	option = {
		name = germany.1000.a
		ai_chance = {
			base = 100
		}
		reset_province_name = 3529
		reset_province_name = 3151
		clr_global_flag = GER_cities_renamed
		clr_global_flag = ROM_king_is_silly
	}
}

#remove MEFO bills
country_event = {
	id = germany.1001
	title = germany.1001.t
	desc = germany.1001.desc
	picture = GFX_report_event_german_reichstag_gathering

	hidden = yes

	trigger = {
		original_tag = GER
		GER_has_mefo_bills = yes
		any_other_country = {
			has_war_with = GER
			NOT = { original_tag = GER }
		}
	}

	mean_time_to_happen = { days = 2 }

	option = { #remove MEFO
		name = germany.1001.a
		ai_chance = {
			base = 100
		}
		ROOT = {
			GER_remove_mefo_bills = yes
			set_country_flag = mefo_bills_removed_through_war
		}
	}
}


add_namespace = r56.ger

country_event = { #Endsieg
	id = r56.ger.1
	title = r56.ger.1.t
	desc = r56.ger.1.desc
	picture = GFX_report_event_german_reichstag_bombed

	fire_only_once = yes

	trigger = {
		original_tag = GER
		has_civil_war = no
		date > 1940.1.1 #You don't get a bailout for being dumb early 
		ROOT = {
			#has_completed_focus = GER_total_war
			has_war = yes
			surrender_progress > 0.24
			casualties > 699999 #cheese prevention 
			NOT = {
				has_government = democratic
			}
			OR = {
				any_enemy_country = {
					is_major = yes 
					OR = {
						original_tag = ENG
						original_tag = USA
						original_tag = SOV
						original_tag = FRA
						original_tag = POL
						original_tag = ITA
					}
				}
				has_global_flag = had_yalta_conference
				AND = { #just incase the above stuff doesn't cause a fire and Germany is losing hard
					surrender_progress > 0.35
					casualties > 1200000 
				}
			}
		}
	}

	mean_time_to_happen = { days = 4 }

	option = { #Final Victory
		name = r56.ger.1.a
		add_ideas = r56_endsieg_idea
		ROOT = {
			custom_effect_tooltip = r56_GER_endsieg_tt
		}
		set_country_flag = r56_GER_endsieg_event_happened
		hidden_effect = {
			if = {
				limit = {
					ROOT = {
						is_ai = yes
					}
				}
				add_manpower = 20000
				add_fuel = 225
				add_offsite_building = { type = arms_factory level = 3 }
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 5000
					producer = GER
				}
				add_equipment_to_stockpile = { 
					type = support_equipment
					amount = 235
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = light_tank_chassis
					amount = 25
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = medium_tank_chassis
					amount = 200
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = anti_air_equipment
					amount = 50
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = anti_tank_equipment 
					amount = 20
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 100
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = motorized_equipment
					amount = 100
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = 15
				}
			}
			else = {
				add_manpower = 1250
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 1000
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = 5
				}
			}

			if = {
				limit = {
					NOT = {
						has_tech = r56_militia_tech
					}
				}
				set_technology = {
					r56_militia_tech = 1
				}
				set_country_flag = r56_militia_formation_flag
			}
			load_oob = r56_GER_endsieg
			if = { #Cannon Endsieg units
				limit = {
					ROOT = {
						has_full_control_of_state = 60
						casualties > 2000000
					}
				}
				load_oob = r56_GER_endsieg_units_1
			}	
			if = {
				limit = {
					ROOT = {
						has_full_control_of_state = 60
					}
				}
				load_oob = r56_GER_endsieg_units_2
			}
			if = {
				limit = {
					ROOT = {
						has_full_control_of_state = 61
					}
				}
				load_oob = r56_GER_endsieg_units_3
			}
			if = {
				limit = {
					ROOT = {
						has_full_control_of_state = 52
					}
				}
				load_oob = r56_GER_endsieg_units_4
			}
			if = {
				limit = {
					ROOT = {
						has_full_control_of_state = 54
					}
				}
				load_oob = r56_GER_endsieg_units_5
			}
			if = {
				limit = {
					ROOT = {
						has_full_control_of_state = 59
					}
				}
				load_oob = r56_GER_endsieg_units_6
			}
			if = {
				limit = {
					ROOT = {
						has_full_control_of_state = 58
					}
				}
				load_oob = r56_GER_endsieg_units_7
			}
		}
	}
}

country_event = { #Pulled back from endsieg
	id = r56.ger.2
	title = r56.ger.2.t
	desc = r56.ger.2.desc
	picture = GFX_report_event_german_troops

	fire_only_once = yes

	trigger = {
		original_tag = GER
		ROOT = {
			has_war = yes
			has_capitulated = no
			surrender_progress < 0.02
			has_country_flag = r56_GER_endsieg_event_happened
		}
	}

	mean_time_to_happen = { days = 3 }

	option = { #Closer to Final Victory
		name = r56.ger.2.a
		add_war_support = 0.03
		ROOT = {
			custom_effect_tooltip = r56_GER_endsieg_2_tt
		}
		hidden_effect = {
			set_country_flag = r56_GER_endsieg_event_pullback_happened
			if = {
				limit = {
					has_idea = r56_endsieg_idea 
				}
				remove_ideas = r56_endsieg_idea 
			}
			delete_unit_template_and_units = {
				division_template = "Volkssturm"
				disband = yes 
			}
			delete_unit_template_and_units = {
				division_template = "Heeresgruppe"
				disband = yes 
			}
		}
	}	
}

country_event = { #Resolves Europe Post Yalta 
	id = r56.ger.3
	title = r56.ger.3.t
	desc = r56.ger.3.d
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	hidden = yes

	is_triggered_only = yes

	option = { #Don't force anything on a player if possible!
		name = r56.ger.3.a
		set_province_name = { id = 587 name = "Bonn"}
		51 = {
			set_victory_points = {
				province = 587
				value = 20
			}
		}
		if = { #If WW2 ends early this flag will push every tag to want to go for their nearest WW3 option in thier FT
			limit = {
				has_global_flag = r56_yalta_script_is_a_go
				#is_historical_focus_on = no
				date < 1943.01.01
				NOT = {
					SOV = {
						OR = {
							has_war_with = USA
							has_war_with = FRA
							has_war_with = ENG
						}
					}
				}
			}
			set_global_flag = r56_ww2_got_done_early_make_ai_move_toward_ww3
		}
		if = { 
			limit = {
				has_global_flag = r56_yalta_script_is_a_go
				GER = {
					is_ai = yes
				}
			}
			if = { #first things first
				limit = {
					85 = {
						is_claimed_by = GER
					}
				}
				85 = {
					remove_claim_by = GER
				}
			}
			if = { 
				limit = {
					188 = {
						is_claimed_by = GER
					}
				}
				188 = {
					remove_claim_by = GER
				}
			}
			GER = { #This happened once and it was werid
				if = {
					limit = {
						is_ai = yes
						has_dlc = "Man the Guns"
						is_government_in_exile = yes
						is_ai = yes
					}
					end_exile = yes
				}
			}
			if = {
				limit = {
					has_global_flag = r56_ITA_in_yalta
					has_global_flag = r56_yalta_origin_is_neutrality
					ITA = {
						is_ai = yes
						NOT = {
							has_government = neutrality
						}
					}
				}
				ITA = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_ITA_in_yalta
					has_global_flag = r56_yalta_origin_is_fascism
					ITA = {
						is_ai = yes
						NOT = {
							has_government = fascism
						}
					}
				}
				ITA = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_ITA_in_yalta
					has_global_flag = r56_yalta_origin_is_communism
					ITA = {
						is_ai = yes
						NOT = {
							has_government = communism
						}
					}
				}
				ITA = {
					set_politics = { ruling_party = communism elections_allowed = no }
					add_popularity = {
						ideology = communism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_ITA_in_yalta
				}
				if = {
					limit = {
						ITA = {
							is_subject_of = SOV
						}
					}
					SOV = {
						end_puppet = ITA
					}
				}
				every_state = { 
					limit = {
						is_core_of = ITA
						is_owned_and_controlled_by = AUS
						NOT = {
							is_core_of = CZE
							is_core_of = DDR
							is_core_of = SOV
							is_core_of = POL
							is_core_of = AUS
							is_core_of = DEN
							is_core_of = BEL
							is_core_of = HOL
							is_core_of = FRA
							is_core_of = SWI
						}
					}
					ITA = {
						transfer_state = PREV
					}
				}
				if = {
					limit = {
						SAD = {
							is_ai = yes
							NOT = {
								is_subject_of = ITA
							}
						}
					}
					every_state = { 
						limit = {
							is_core_of = ITA
							owner = {
								is_ai = yes
							}
							is_owned_and_controlled_by = SAD
							NOT = {
								is_core_of = CZE
								is_core_of = DDR
								is_core_of = SOV
								is_core_of = POL
								is_core_of = AUS
								is_core_of = DEN
								is_core_of = BEL
								is_core_of = HOL
								is_core_of = FRA
								is_core_of = SWI
							}
						}
						ITA = {
							transfer_state = PREV
						}
					}
				}
				if = {
					limit = {
						NAP = {
							is_ai = yes
							NOT = {
								is_subject_of = ITA
							}
						}
					}
					every_state = { 
						limit = {
							is_core_of = ITA
							owner = {
								is_ai = yes
							}
							is_owned_and_controlled_by = NAP
							NOT = {
								is_core_of = CZE
								is_core_of = DDR
								is_core_of = SOV
								is_core_of = POL
								is_core_of = AUS
								is_core_of = DEN
								is_core_of = BEL
								is_core_of = HOL
								is_core_of = FRA
								is_core_of = SWI
							}
						}
						ITA = {
							transfer_state = PREV
						}
					}
				}
				if = {
					limit = {
						SLV = {
							is_ai = yes
							NOT = {
								is_subject_of = ITA
							}
						}
					}
					every_state = { 
						limit = {
							is_core_of = ITA
							owner = {
								is_ai = yes
							}
							is_owned_and_controlled_by = SLV
							NOT = {
								is_core_of = CZE
								is_core_of = DDR
								is_core_of = SOV
								is_core_of = POL
								is_core_of = AUS
								is_core_of = DEN
								is_core_of = BEL
								is_core_of = HOL
								is_core_of = FRA
								is_core_of = SWI
							}
						}
						ITA = {
							transfer_state = PREV
						}
					}
				}
				if = {
					limit = {
						CRO = {
							is_ai = yes
							NOT = {
								is_subject_of = ITA
							}
						}
					}
					every_state = { 
						limit = {
							is_core_of = ITA
							owner = {
								is_ai = yes
							}
							is_owned_and_controlled_by = CRO
							NOT = {
								is_core_of = CZE
								is_core_of = DDR
								is_core_of = SOV
								is_core_of = POL
								is_core_of = AUS
								is_core_of = DEN
								is_core_of = BEL
								is_core_of = HOL
								is_core_of = FRA
								is_core_of = SWI
							}
						}
						ITA = {
							transfer_state = PREV
						}
					}
				}
				if = {
					limit = {
						VNZ = {
							is_ai = yes
							NOT = {
								is_subject_of = ITA
							}
						}
					}
					every_state = { 
						limit = {
							is_core_of = ITA
							owner = {
								is_ai = yes
							}
							is_owned_and_controlled_by = VNZ
							NOT = {
								is_core_of = CZE
								is_core_of = DDR
								is_core_of = SOV
								is_core_of = POL
								is_core_of = AUS
								is_core_of = DEN
								is_core_of = BEL
								is_core_of = HOL
								is_core_of = FRA
								is_core_of = SWI
							}
						}
						ITA = {
							transfer_state = PREV
						}
					}
				}
				if = {
					limit = {
						SIC = {
							is_ai = yes
							NOT = {
								is_subject_of = ITA
							}
						}
					}
					every_state = { 
						limit = {
							is_core_of = ITA
							owner = {
								is_ai = yes
							}
							is_owned_and_controlled_by = SIC
							NOT = {
								is_core_of = CZE
								is_core_of = DDR
								is_core_of = SOV
								is_core_of = POL
								is_core_of = AUS
								is_core_of = DEN
								is_core_of = BEL
								is_core_of = HOL
								is_core_of = FRA
								is_core_of = SWI
							}
						}
						ITA = {
							transfer_state = PREV
						}
					}
				}
			}
			every_state = { 
				limit = {
					is_core_of = WGR
					OR = {
						is_owned_and_controlled_by = GER
						is_owned_and_controlled_by = BAY
						is_owned_and_controlled_by = SOV
						is_owned_and_controlled_by = FRA
						is_owned_and_controlled_by = USA
						is_owned_and_controlled_by = ENG
						is_owned_and_controlled_by = CHI
					}
					NOT = {
						is_core_of = CZE
						is_core_of = DDR
						is_core_of = SOV
						is_core_of = POL
						is_core_of = AUS
						is_core_of = DEN
						is_core_of = BEL
						is_core_of = HOL
						is_core_of = FRA
						is_core_of = SWI
					}
				}
				WGR = {
					transfer_state = PREV
				}
			}
			every_state = { 
				limit = {
					OR = {
						is_core_of = SOV
						is_core_of = LIT
					}
					owner = {
						is_ai = yes
					}
					OR = {
						is_owned_and_controlled_by = GER
						is_owned_and_controlled_by = HUN
						is_owned_and_controlled_by = ENG
					}
					NOT = {
						is_core_of = DDR
						is_core_of = POL
						is_core_of = ROM
					}
				}
				SOV = {
					transfer_state = PREV
				}
			}
			every_state = { 
				limit = {
					is_core_of = DDR
					owner = {
						is_ai = yes
					}
					OR = {
						is_owned_and_controlled_by = GER
						is_owned_and_controlled_by = SOV
						is_owned_and_controlled_by = ITA
						is_owned_and_controlled_by = POL
						is_owned_and_controlled_by = CHI
					}
					NOT = {
						is_core_of = CZE
						is_core_of = WGR
						is_core_of = SOV
						is_core_of = POL
						is_core_of = AUS
					}
				}
				DDR = {
					transfer_state = PREV
				}
			}
			#The fact I have to double check for everything is upsetting. Fix your on actions PDX
			if = { #Double check. Effects don't fire sometimes
				limit = {
					DDR = {
						NOT = {
							is_puppet_of = SOV
						}
					}
				}
				SOV = {
					puppet = DDR
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = DDR
					61 = { 
						is_core_of = GER
						is_owned_and_controlled_by = DDR
					}
				}
				61 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = DDR
					62 = { 
						is_core_of = GER
						is_owned_and_controlled_by = DDR
					}
				}
				62 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = DDR
					64 = { 
						is_core_of = GER
						is_owned_and_controlled_by = DDR
					}
				}
				64 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = DDR
					65 = { 
						is_core_of = GER
						is_owned_and_controlled_by = DDR
					}
				}
				65 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = DDR
					60 = { 
						is_core_of = GER
						is_owned_and_controlled_by = DDR
					}
				}
				60 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					51 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				51 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					923 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				923 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					42 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				42 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					50 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				50 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					52 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				52 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					53 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				53 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					54 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				54 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					55 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				55 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					59 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				59 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					56 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				56 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					58 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				58 = {
					remove_core_of = GER
				}
			}
			if = { #Double check. Effects don't fire sometimes
				limit = {
					country_exists = WGR
					998 = { 
						is_core_of = GER
						is_owned_and_controlled_by = WGR
					}
				}
				998 = {
					remove_core_of = GER
				}
			}
			if = {
				limit = {
					has_global_flag = r56_CZE_in_yalta
				}
				SOV = {
					puppet = CZE
				}
				every_state = { 
					limit = {
						is_core_of = CZE
						OR = {
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = WGR
							is_owned_and_controlled_by = DDR
						}
						NOT = {
							is_core_of = DDR
							is_core_of = WGR
							is_core_of = SOV
							is_core_of = POL
							is_core_of = RUT
						}
					}
					CZE = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_AUS_in_yalta
				}
				if = {
					limit = {
						AUS = {
							is_subject_of = SOV
						}
					}
					SOV = {
						end_puppet = AUS
					}
					if = {
						limit = {
							AUS = {
								is_in_faction_with = SOV
							}
						}
						SOV = { remove_from_faction = AUS }
					}
					if = {
						limit = {
							has_global_flag = r56_AUS_in_yalta
							NOT = {
								has_global_flag = r56_yalta_origin_is_communism
								has_global_flag = r56_yalta_origin_is_fascism
								has_global_flag = r56_yalta_origin_is_neutrality
							}
							AUS = {
								NOT = {
									has_government = democratic
								}
							}
						}
						AUS = {
							set_politics = { ruling_party = democratic elections_allowed = yes }
							add_popularity = {
								ideology = democratic
								popularity = 0.5
							}
						}
					}
				}
				every_state = { 
					limit = {
						is_core_of = AUS
						owner = {
							is_ai = yes
						}
						OR = {
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = WGR
							if = {
								limit = {
									has_global_flag = r56_YUG_in_yalta
								}
								is_owned_and_controlled_by = YUG
							}
						}
						NOT = {
							is_core_of = CZE
							is_core_of = ITA
							is_core_of = WGR
						}
					}
					AUS = {
						transfer_state = PREV
					}
				}

			}
			if = {
				limit = {
					has_global_flag = r56_SLO_in_yalta
				}
				every_state = { 
					limit = {
						is_core_of = SLO
						owner = {
							is_ai = yes
						}
						OR = {
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = SLO
							is_owned_and_controlled_by = SOV
						}
						NOT = {
							is_core_of = RUT
							is_core_of = POL
							is_core_of = SOV
						}
					}
					CZE = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_POL_in_yalta
				}
				SOV = {
					puppet = POL
				}
				every_state = { 
					limit = {
						is_core_of = POL
						owner = {
							is_ai = yes
						}
						OR = {
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = SLO
							is_owned_and_controlled_by = ENG
							is_owned_and_controlled_by = CHI
						}
						NOT = {
							is_core_of = BLR
							is_core_of = CZE
							is_core_of = SOV
							is_core_of = RUT
							is_core_of = SLO
							is_core_of = LIT
						}
					}
					POL = {
						transfer_state = PREV
					}
				}
				if = {
					limit = {
						has_global_flag = r56_ITA_in_yalta
					}
					every_state = { 
						limit = {
							is_core_of = POL
							is_owned_and_controlled_by = ITA
							owner = {
								is_ai = yes
							}
							NOT = {
								is_core_of = BLR
								is_core_of = CZE
								is_core_of = SOV
								is_core_of = RUT
								is_core_of = SLO
							}
						}
						POL = {
							transfer_state = PREV
						}
					}
				}
				if = {
					limit = {
						85 = {
							OR = {
								is_owned_and_controlled_by = GER
								is_owned_and_controlled_by = SOV
								is_owned_and_controlled_by = SLO
								is_owned_and_controlled_by = ENG
								is_owned_and_controlled_by = ITA
								is_owned_and_controlled_by = FRA
							}
							is_claimed_by = POL
						}
					}
					POL = {
						transfer_state = 85
					}
				}
				if = {
					limit = {
						97 = {
							OR = {
								is_owned_and_controlled_by = GER
								is_owned_and_controlled_by = SOV
								is_owned_and_controlled_by = SLO
								is_owned_and_controlled_by = ENG
								is_owned_and_controlled_by = ITA
								is_owned_and_controlled_by = FRA
							}
							is_claimed_by = POL
						}
					}
					POL = {
						transfer_state = 97
					}
				}
			}
			every_state = { 
				limit = {
					is_core_of = SOV
					owner = {
						is_ai = yes
					}
					OR = {
						is_owned_and_controlled_by = HUN
						is_owned_and_controlled_by = RUT
						is_core_of = RUT
					}
				}
				SOV = {
					transfer_state = PREV
				}
			}
			if = {
				limit = {
					has_global_flag = r56_YUG_in_yalta
				}
				if = {
					limit = {
						CRO = {
							is_ai = yes
							NOT = {
								is_subject_of = YUG
							}
						}
					}
					every_state = { 
						limit = {
							owner = {
								is_ai = yes
							}
							is_core_of = YUG
							is_owned_and_controlled_by = CRO
						}
						YUG = {
							transfer_state = PREV
						}
					}
				}
				if = {
					limit = {
						YUG = {
							is_ai = yes
							NOT = {
								has_government = communism
							}
						}
						SOV = {
							has_government = communism
						}
					}
					YUG = {	
						add_popularity = {
							ideology = communism
							popularity = 0.55
						}
						set_politics = { ruling_party = communism elections_allowed = no }
						if = {
							limit = {
								NOT = {
									has_completed_focus = YUG_join_comintern
								}
								SOV = {
									has_country_leader = { character = SOV_iosif_stalin }
								}
								has_country_leader = { character = YUG_josip_broz_tito }
							}
							add_country_leader_trait = dislikes_russia
						}
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_HUN_in_yalta
				}
				if = {
					limit = {
						HUN = {
							is_ai = yes
						}
					}
					SOV = {
						puppet = HUN
					}
				}
				every_state = { 
					limit = {
						is_core_of = HUN
						owner = {
							is_ai = yes
						}
						OR = {
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = ITA
							is_owned_and_controlled_by = YUG
						}
						NOT = {
							is_core_of = ROM
							is_core_of = CZE
							is_core_of = SOV
							is_core_of = RUT
							is_core_of = YUG
							is_core_of = GER
						}
					}
					HUN = {
						transfer_state = PREV
					}
				}
			}
			if = { #No double puppets
				limit = {
					has_global_flag = r56_ROM_in_yalta
				}
				if = {
					limit = {
						ROM = {
							is_ai = yes
							is_subject = no
						}
						SOV = {
							exists = yes
						}
					}
					SOV = {
						puppet = ROM
					}
				}
				if = {
					limit = {
						TRA = {
							is_ai = yes
							is_puppet_of = SOV
						}
					}
					every_state = { 
						limit = {
							is_core_of = ROM
							owner = {
								is_ai = yes
							}
							OR = {
								is_owned_and_controlled_by = GER
								is_owned_and_controlled_by = SOV
								is_owned_and_controlled_by = TRA
							}
							NOT = {
								is_core_of = CZE
								is_core_of = SOV
								is_core_of = RUT
								is_core_of = BUL
							}
						}
						ROM = {
							transfer_state = PREV
						}
					}
				}	
			}
			if = { #No double puppets
				limit = {
					has_global_flag = r56_ROM_in_yalta
				}
				if = {
					limit = {
						ROM = {
							is_subject_of = SOV
						}
						SZK = {
							is_ai = yes
							is_puppet_of = SOV
						}
					}
					every_state = { 
						limit = {
							is_core_of = ROM
							owner = {
								is_ai = yes
							}
							OR = {
								is_owned_and_controlled_by = GER
								is_owned_and_controlled_by = SOV
								is_owned_and_controlled_by = SZK
							}
							NOT = {
								is_core_of = CZE
								is_core_of = SOV
								is_core_of = RUT
								is_core_of = BUL
							}
						}
						ROM = {
							transfer_state = PREV
						}
					}
				}
				if = { #Bessarabia
					limit = {
						565 = {
							is_owned_and_controlled_by = ROM
							is_claimed_by = SOV
						}
					}
					SOV = {
						transfer_state = 565 
					}
				}
				if = {
					limit = {
						766 = {
							is_owned_and_controlled_by = ROM
							is_claimed_by = SOV
						}
					}
					SOV = {
						transfer_state = 766
					}
				}	
			}
			if = {
				limit = {
					has_global_flag = r56_BUL_in_yalta
					SOV = {
						exists = yes
					}
				}
				if = {
					limit = {
						BUL = {
							is_ai = yes
							is_subject = no
						}
					}
					SOV = {
						puppet = BUL
					}
				}
			}
			if = {
				limit = {
					AND = {
						has_global_flag = r56_BUL_in_yalta
						has_global_flag = r56_GRE_in_yalta
					}
					BUL = {
						is_ai = yes
					}
				}
				every_state = { 
					limit = {
						AND = {
							is_core_of = GRE
							is_core_of = BUL
						}
						owner = {
							is_ai = yes
						}
						OR = {
							is_owned_and_controlled_by = BUL
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = GRE
							is_owned_and_controlled_by = YUG
							is_owned_and_controlled_by = ITA
							is_owned_and_controlled_by = ENG
							is_owned_and_controlled_by = FRA
							is_owned_and_controlled_by = USA
						}
						NOT = {
							is_core_of = TUR
							is_core_of = ITA
							is_core_of = ALB
						}
					}
					GRE = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_ALB_in_yalta
				}
				every_state = { 
					limit = {
						is_core_of = ALB
						owner = {
							is_ai = yes
						}
						OR = {
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = GRE
							is_owned_and_controlled_by = YUG
							is_owned_and_controlled_by = ITA
							is_owned_and_controlled_by = ENG
							is_owned_and_controlled_by = FRA
							is_owned_and_controlled_by = USA
						}
						NOT = {
							is_core_of = ITA
							is_core_of = YUG
						}
					}
					ALB = {
						transfer_state = PREV
					}
				}
				if = {
					limit = {
						ALB = {
							is_ai = yes
						}
					}
					if = {
						limit = {
							ALB = {
								NOT = {
									has_government = communism
								}
								SOV = {
									has_government = communism
								}
							}
						}
						ALB = {
							set_politics = { ruling_party = communism elections_allowed = no }
							add_popularity = {
								ideology = communism
								popularity = 0.5
							}
						}
					}
					
				}
			}
			if = {
				limit = {
					has_global_flag = r56_LUX_in_yalta
				}
				if = {
					limit = {
						LUX = {
							is_subject_of = SOV
						}
					}
					SOV = {
						end_puppet = LUX
					}
				}
				if = {
					limit = {
						has_global_flag = r56_LUX_in_yalta
						has_global_flag = r56_yalta_origin_is_fascism
						LUX = {
							NOT = {
								has_government = fascism
							}
						}
					}
					LUX = {
						set_politics = { ruling_party = fascism elections_allowed = no }
						add_popularity = {
							ideology = fascism
							popularity = 0.5
						}
					}
				}
				if = {
					limit = {
						has_global_flag = r56_LUX_in_yalta
						has_global_flag = r56_yalta_origin_is_communism
						LUX = {
							NOT = {
								has_government = communism
							}
						}
					}
					LUX = {
						set_politics = { ruling_party = communism elections_allowed = no }
						add_popularity = {
							ideology = communism
							popularity = 0.5
						}
					}
				}
				every_state = { 
					limit = {
						is_core_of = LUX
						OR = {
							is_owned_and_controlled_by = WGR
							is_owned_and_controlled_by = DDR
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = FRA
						}
						NOT = {
							is_core_of = CZE
							is_core_of = WGR
							is_core_of = FRA
							is_core_of = BEL
							is_core_of = HOL
						}
					}
					LUX = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_DEN_in_yalta
				}
				if = {
					limit = {
						DEN = {
							is_subject_of = SOV
						}
					}
					SOV = {
						end_puppet = DEN
					}
					if = {
						limit = {
							has_global_flag = r56_DEN_in_yalta
							NOT = {
								has_global_flag = r56_yalta_origin_is_communism
								has_global_flag = r56_yalta_origin_is_fascism
								has_global_flag = r56_yalta_origin_is_neutrality
							}
							DEN = {
								NOT = {
									has_government = democratic
								}
							}
						}
						DEN = {
							add_popularity = {
								ideology = democratic
								popularity = 0.5
							}
							set_politics = { ruling_party = democratic elections_allowed = no }
						}
					}
				}
				every_state = { 
					limit = {
						is_core_of = DEN
						OR = {
							is_owned_and_controlled_by = WGR
							is_owned_and_controlled_by = DDR
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = FRA
						}
						NOT = {
							is_core_of = CZE
							is_core_of = WGR
							is_core_of = FRA
							is_core_of = BEL
							is_core_of = HOL
							is_core_of = NOR
						}
					}
					DEN = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_BEL_in_yalta
				}
				if = {
					limit = {
						BEL = {
							is_subject_of = SOV
						}
					}
					SOV = {
						end_puppet = BEL
					}
				}
				every_state = { 
					limit = {
						is_core_of = BEL
						OR = {
							is_owned_and_controlled_by = WGR
							is_owned_and_controlled_by = DDR
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = GER
						}
						NOT = {
							is_core_of = CZE
							is_core_of = WGR
							is_core_of = FRA
							is_core_of = LUX
							is_core_of = HOL
							is_core_of = NOR
						}
					}
					BEL = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_BEL_in_yalta
					has_global_flag = r56_yalta_origin_is_neutrality
					BEL = {
						NOT = {
							has_government = neutrality
						}
					}
				}
				BEL = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_BEL_in_yalta
					has_global_flag = r56_yalta_origin_is_fascism
					BEL = {
						NOT = {
							has_government = fascism
						}
					}
				}
				BEL = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_BEL_in_yalta
					has_global_flag = r56_yalta_origin_is_communism
					BEL = {
						NOT = {
							has_government = communism
						}
					}
				}
				BEL = {
					set_politics = { ruling_party = communism elections_allowed = no }
					add_popularity = {
						ideology = communism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_HOL_in_yalta
				}
				if = {
					limit = {
						HOL = {
							is_subject_of = SOV
						}
					}
					SOV = {
						end_puppet = HOL
					}
				}
				every_state = { 
					limit = {
						is_core_of = HOL
						owner = {
							is_ai = yes
						}
						OR = {
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = WGR
							is_owned_and_controlled_by = DDR
						}
					}
					HOL = {
						transfer_state = PREV
					}
				}
				every_state = { 
					limit = {
						owner = {
							is_ai = yes
						}
						OR = {
							is_core_of = HOL
							is_core_of = SUR
						}
						OR = {
							is_owned_and_controlled_by = WGR
							is_owned_and_controlled_by = GER
							is_owned_and_controlled_by = DDR
							is_owned_and_controlled_by = SOV
						}
						NOT = {
							is_core_of = CZE
							is_core_of = WGR
							is_core_of = FRA
							is_core_of = BEL
							is_core_of = LUX
							is_core_of = NOR
						}
					}
					HOL = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_HOL_in_yalta
					has_global_flag = r56_yalta_origin_is_neutrality
					HOL = {
						NOT = {
							has_government = neutrality
						}
					}
				}
				HOL = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_HOL_in_yalta
					has_global_flag = r56_yalta_origin_is_fascism
					HOL = {
						NOT = {
							has_government = fascism
						}
					}
				}
				HOL = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_HOL_in_yalta
					has_global_flag = r56_yalta_origin_is_communism
					HOL = {
						NOT = {
							has_government = communism
						}
					}
				}
				HOL = {
					set_politics = { ruling_party = communism elections_allowed = no }
					add_popularity = {
						ideology = communism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_NOR_in_yalta
				}
				if = {
					limit = {
						NOR = {
							is_subject_of = SOV
						}
					}
					SOV = {
						end_puppet = NOR
					}
					if = {
						limit = {
							has_global_flag = r56_NOR_in_yalta
							NOT = {
								has_global_flag = r56_yalta_origin_is_communism
								has_global_flag = r56_yalta_origin_is_fascism
								has_global_flag = r56_yalta_origin_is_neutrality
							}
							NOR = {
								NOT = {
									has_government = democratic
								}
							}
						}
						NOR = {
							set_politics = { ruling_party = democratic elections_allowed = no }
							add_popularity = {
								ideology = democratic
								popularity = 0.5
							}
						}
					}
				}
				every_state = { 
					limit = {
						is_core_of = NOR
						OR = {
							is_owned_and_controlled_by = WGR
							is_owned_and_controlled_by = DDR
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = GER
						}
						NOT = {
							is_core_of = CZE
							is_core_of = WGR
							is_core_of = FRA
							is_core_of = BEL
							is_core_of = HOL
							is_core_of = NOR
						}
					}
					NOR = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_NOR_in_yalta
					has_global_flag = r56_yalta_origin_is_neutrality
					NOR = {
						NOT = {
							has_government = neutrality
						}
					}
				}
				NOR = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_NOR_in_yalta
					has_global_flag = r56_yalta_origin_is_fascism
					NOR = {
						NOT = {
							has_government = fascism
						}
					}
				}
				NOR = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_NOR_in_yalta
					has_global_flag = r56_yalta_origin_is_communism
					NOR = {
						NOT = {
							has_government = communism
						}
					}
				}
				NOR = {
					set_politics = { ruling_party = communism elections_allowed = no }
					add_popularity = {
						ideology = communism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_SWE_in_yalta
				}
				if = {
					limit = {
						SOV = {
							is_ai = yes
						}
						SWE = {
							is_subject_of = SOV
							NOT = {
								has_completed_focus = SWE_sven_olov_addresses_aland_convention #Willing went evil. You don't get to opt out now
							}
						}
					}
					SOV = {
						end_puppet = SWE
					}
					if = {
						limit = {
							has_global_flag = r56_SWE_in_yalta
							NOT = {
								has_global_flag = r56_yalta_origin_is_communism
								has_global_flag = r56_yalta_origin_is_fascism
								has_global_flag = r56_yalta_origin_is_neutrality
							}
							SWE = {
								NOT = {
									has_government = democratic
								}
							}
						}
						SWE = {
							set_politics = { ruling_party = democratic elections_allowed = no }
							add_popularity = {
								ideology = democratic
								popularity = 0.5
							}
						}
					}
				}
				every_state = { 
					limit = {
						is_core_of = SWE
						owner = {
							is_ai = yes
						}
						OR = {
							is_owned_and_controlled_by = WGR
							is_owned_and_controlled_by = DDR
							is_owned_and_controlled_by = SOV
							is_owned_and_controlled_by = GER
						}
						NOT = {
							is_core_of = DEN
							is_core_of = WGR
							is_core_of = FRA
							is_core_of = BEL
							is_core_of = HOL
							is_core_of = NOR
							is_core_of = AHV
							is_core_of = FIN
						}
					}
					SWE = {
						transfer_state = PREV
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_SWE_in_yalta
					has_global_flag = r56_yalta_origin_is_neutrality
					SWE = {
						NOT = {
							has_government = neutrality
						}
					}
				}
				SWE = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_SWE_in_yalta
					has_global_flag = r56_yalta_origin_is_fascism
					SWE = {
						NOT = {
							has_government = fascism
						}
					}
				}
				SWE = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_SWE_in_yalta
					has_global_flag = r56_yalta_origin_is_communism
					SWE = {
						NOT = {
							has_government = communism
						}
					}
				}
				SWE = {
					set_politics = { ruling_party = communism elections_allowed = no }
					add_popularity = {
						ideology = communism
						popularity = 0.5
					}
				}
			}
			if = { #If Finland doesn't peace out, it pays the price 
				limit = {
					has_global_flag = r56_FIN_in_yalta
					has_global_flag = r56_yalta_origin_is_neutrality
					FIN = {
						NOT = {
							has_government = neutrality
						}
					}
				}
				FIN = {
					set_politics = { ruling_party = neutrality elections_allowed = no }
					add_popularity = {
						ideology = neutrality
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_FIN_in_yalta
					has_global_flag = r56_yalta_origin_is_fascism
					FIN = {
						NOT = {
							has_government = fascism
						}
					}
				}
				FIN = {
					set_politics = { ruling_party = fascism elections_allowed = no }
					add_popularity = {
						ideology = fascism
						popularity = 0.5
					}
				}
			}
			if = {
				limit = {
					has_global_flag = r56_FIN_in_yalta
					has_global_flag = r56_yalta_origin_is_communism
					FIN = {
						NOT = {
							has_government = communism
						}
					}
				}
				FIN = {
					set_politics = { ruling_party = communism elections_allowed = no }
					add_popularity = {
						ideology = communism
						popularity = 0.5
					}
				}
			}
			if = { #No double puppets
				limit = {
					has_global_flag = r56_FIN_in_yalta
				}
				#if = {	#no effects? - Fantom
				#	limit = {
				#		SOV = {
				#			is_ai = yes
				#		}
				#		FIN = {
				#			is_ai = yes
				#			is_puppet_of = SOV
				#		}
				#		SMI = {
				#			is_ai = yes
				#		}
				#	}
				#}
				if = {
					limit = {
						SMI = {
							is_ai = yes
							is_puppet_of = SOV
						}
					}
					every_state = { 
						limit = {
							is_core_of = FIN
							owner = {
								is_ai = yes
							}
							OR = {
								is_owned_and_controlled_by = GER
								is_owned_and_controlled_by = SOV
								is_owned_and_controlled_by = SMI
							}
							NOT = {
								is_core_of = GER
								is_core_of = SOV
								is_core_of = NOR
								is_core_of = EST
							}
						}
						FIN = {
							transfer_state = PREV
						}
					}
				}	
			}
			if = { #No double puppets
				limit = {
					has_global_flag = r56_FIN_in_yalta
					SOV = {
						is_ai = yes
					}
				}
				#if = {	#no effects? - Fantom
				#	limit = {
				#		FIN = {
				#			is_ai = yes
				#			is_puppet_of = SOV
				#		}
				#	}
				#}
				if = {
					limit = {
						AHV = {
							is_ai = yes
							is_puppet_of = SOV
						}
					}
					every_state = { 
						limit = {
							is_core_of = FIN
							OR = {
								is_owned_and_controlled_by = GER
								is_owned_and_controlled_by = SOV
								is_owned_and_controlled_by = AHV
							}
							NOT = {
								is_core_of = GER
								is_core_of = SOV
								is_core_of = NOR
								is_core_of = EST
							}
						}
						FIN = {
							transfer_state = PREV
						}
					}
				}	
			}
		}
	}
}

country_event = { #Wilhelm III dies
	id = r56.ger.4
	title = r56.ger.4.t
	desc = r56.ger.4.desc
	picture = GFX_report_event_europe_funeral

	fire_only_once = yes
	#trigger = {
	#	OR = {
	#		has_idea = GER_wilhelm_iii
	#		has_country_leader = { character = GER_wilhelm_iii  }
	#	}
	#	
	#	date > 1951.04.03
	#}
	#mean_time_to_happen = {
	#	days = 42
	#}
	is_triggered_only = yes # Obsolete event, replaced by another

	option = { 
		name = r56.ger.4.a
		if = {
			limit = {
				has_country_leader = { character = GER_wilhelm_iii  }
			}
			every_country = {
				limit = {
					has_country_leader = { character = GER_wilhelm_iii  }
				}
				kill_ideology_leader = neutrality
				add_ideas = GER_wilhelm_iv
			}

		}
		if = {
			limit = {
				has_idea = GER_wilhelm_iii
			}
			every_country = {
				limit ={
					has_country_leader = { character = GER_wilhelm_iii  }
				}
				swap_ideas = { remove_idea = GER_wilhelm_iii add_idea = GER_wilhelm_iv }
			}
			
		}		
		
	}
}

country_event = { #Historical post yalta fixing by marijn211
	id = r56.ger.5
	title = soviet.106.t
	desc = soviet.106.d
	picture = GFX_report_event_spanish_emigres

	fire_only_once = yes
	
	hidden = yes
	
	trigger = {
		NOT = {
			has_global_flag = r56_unlocked_fate_of_germany_decisions #dont trigger if WGR/DDR was formed by decisions after the player refused yalta (only_once blocks if by decisions of this event)
		}
		has_global_flag = r56_yalta_peacedeal_over #in case DDR/WGR were released before war's end
		OR = { #double check
			country_exists = DDR
			country_exists = WGR
		}
	}

	option = {
		name = soviet.106.a
		if = { #Dont bother fixing DDR/GDR fixing if too ahistorical
			limit = {
				has_global_flag = r56_historical_occupation_yalta_allowed
				always = no #DISABLING MEASURE, WIP
			}
			news_event = {
				id = r56.news_event.30
			}
			USA = {
				annex_country = {
					target = AUS
					transfer_troops = no
				}
			}
			USA = {
				annex_country = {
					target = WGR
					transfer_troops = no
				}
			}
			SOV = {
				annex_country = {
					target = DDR
					transfer_troops = no
				}
			}
			#French occupation zone
			if = { #Wurttemberg
				limit = {
					#Someone changed my code with is_ai CHECKS WERE HERE, but thats  stupid as Im giving them a load of land for free to divide, if its a player they shouldnt just keep that
					50 = {
						is_owned_by = USA
					}
				}
				FRA = { transfer_state = 50 }
			}
			if = { #Tyrol - Austria
				limit = {
					153 = {  
						is_owned_by = USA
					}
				}
				FRA = { transfer_state = 153 }
			}
			if = { #Baden
				limit = {
					923 = {  
						is_owned_by = USA
					}
				}
				FRA = { transfer_state = 923 }
			}
			if = { #Moselland
				limit = {
					42 = { 
						is_owned_by = USA
					}
				}
				FRA = { transfer_state = 42 }
			}
			#British occupation zone
			if = { #Wesser-Ems
				limit = {
					56 = {  
						is_owned_by = USA
					}
				}
				ENG = { transfer_state = 56 }
			}
			if = { #Westfalen
				limit = {
					57 = {  
						is_owned_by = USA
					}
				}
				ENG = { transfer_state = 57 }
			}
			if = { #Holstein
				limit = {
					58 = {  
						is_owned_by = USA
					}
				}
				ENG = { transfer_state = 58 }
			}
			if = { #Southern Schweslig
				limit = {
					998 = {  
						is_owned_by = USA
					}
				}
				ENG = { transfer_state = 998 }
			}
			if = { #Hanover
				limit = {
					59 = {  
						is_owned_by = USA
					}
				}
				ENG = { transfer_state = 59 }
			}
			if = { #Rhineland
				limit = {
					51 = {  
						is_owned_by = USA
					}
				}
				ENG = { transfer_state = 51 }
			}
			if = { #Ost-Rhineland
				limit = {
					989 = {  
						is_owned_by = USA
					}
				}
				ENG = { transfer_state = 989 }
			}
			if = { #Soviet Austria
				limit = {
					4 = { #Lower Austria
						is_owned_by = USA
					}
				}
				SOV = { transfer_state = 4 }
			}
			every_state = { #prevent premature German formation
				remove_claim_by = GER #lets not
				remove_core_of = DDR
				remove_core_of = WGR
				remove_core_of = GER #to prevent player bypassing decision system
			}
			set_global_flag = r56_unlocked_fate_of_germany_decisions #unlock decisions that allow DDR/WGR formation
		}
		if = { #Fix Tyrol
			limit = {
				AUS = {
					is_ai = yes
				}
				39 = { #South Tyrol
					OR = {
						is_owned_by = USA
						AND = { #If zones not managed
							has_global_flag = r56_AUS_in_yalta
							is_owned_by = AUS
						}
					}
				}
			}
			ITA = { transfer_state = 39 }
		}
		if = { #Fix  Tyrol
			limit = {
				ITA = {
					is_ai = yes
				}
				153 = { #Tyrol
					OR = {
						is_owned_by = ITA
						AND = { #If zones not managed
							has_global_flag = r56_ITA_in_yalta
							is_owned_by = AUS
						}
					}
				}
			}
			AUS = { transfer_state = 153 }
		}
		if = { #Dynamic Austria without ENG or USA but with FRA
			limit = {
				always = no #DISABLING MEASURE, WIP
				NOT = {
					has_global_flag = r56_historical_occupation_yalta_allowed
				}
				OR = {
					has_global_flag = r56_USA_can_occupy_yalta
					has_global_flag = r56_ENG_can_occupy_yalta
				}
				has_global_flag = r56_FRA_can_occupy_yalta
				has_global_flag = r56_AUS_in_yalta
			}
			SOV = {
				annex_country = {
					target = AUS
					transfer_troops = no
				}
			}
			if = { #Tyrol
				limit = {
					SOV = {
						is_ai = yes
					}
					153 = {  
						is_owned_by = SOV
					}
				}
				FRA = { transfer_state = 153 }
			}
			if = { #Upper Austria
				limit = {
					SOV = {
						is_ai = yes
					}
					has_global_flag = r56_USA_can_occupy_yalta
					152 = {  
						is_owned_by = SOV
					}
				}
				USA = { transfer_state = 152 }
			}
			if = { #Upper Austria
				limit = {
					SOV = {
						is_ai = yes
					}
					NOT = {
						has_global_flag = r56_USA_can_occupy_yalta
					}
					has_global_flag = r56_ENG_can_occupy_yalta
					152 = {  
						is_owned_by = SOV
					}
				}
				ENG = { transfer_state = 152 }
			}
		}
		if = { #Fix released Lithuania in only Vilnius
			limit = {
				has_global_flag = r56_POL_in_yalta #Poland should cede its east
				country_exists = LIT
				LIT = {
					is_ai = yes
				}
				784 = { #Vilnius
					is_owned_by = LIT
				}
				NOT = { #Does not own any other states
					any_state = {
						is_owned_by = LIT
						NOT = { 
							state = 784
						}
					}
				}
			}
			SOV = {
				annex_country = {
					target = LIT
					transfer_troops = no
				}
			}
		}
		if = { #Fix Croatian puppet state
			limit = {
				country_exists = YUG
				country_exists = CRO
				CRO = {
					is_ai = yes
				}
				NOT = {
					CRO = {
						is_subject = yes
						NOT = {
							is_subject_of = YUG
						}
					}
				}
				OR = {
					has_global_flag = r56_YUG_in_yalta
					any_state = { #Good indicator of broken puppet
						is_core_of = CRO
						is_owned_by = YUG
					}
				}
			}
			YUG = { 
				annex_country = {
					target = CRO
					transfer_troops = no
				}
			}
		}
		if = { #Fix East Poland-> remove Belarus if allies puppeted
			limit = {
				BLR = {
					is_ai = yes	
					OVERLORD = {
						is_ai = yes
					}
				}
				has_global_flag = r56_POL_in_yalta
				country_exists = BLR
				NOT = {
					206 = { #Minsk
						is_owned_by = BLR
					}				
				}
			}
			SOV = {
				annex_country = {
					target = BLR
					transfer_troops = no
				}
			}
		}
		if = { #Fix Zara
			limit = {
				NOT = {
					163 = {
						is_owned_by = ITA
						is_owned_by = YUG
						is_owned_by = CRO #broken puppet already fixed
					}
				}
			}
			if = {
				limit = {
					country_exists = CRO
				}
				CRO = { transfer_state = 163 }
			}
			if = {
				limit = {
					NOT = {
						country_exists = CRO
					}
					country_exists = YUG
				}
				YUG = { transfer_state = 163 }
			}
		}
		if = {
			limit = {
				has_global_flag = r56_ALB_in_yalta
			}
			ALB = {
				if = {
					limit = {
						has_autonomy_state = autonomy_supervised_state
					}
					OVERLORD = { #this function requires a different tag here
						set_autonomy = { #disable silly nations making a guided gov of Albania, which is really never removed by AI
							target = ALB
							autonomy_state = autonomy_free
						}
					}
				}
				if = {
					limit = { #in case they are made full puppet
						OR = {
							is_subject = no
							AND = {
								is_subject = yes
								OVERLORD = {
									has_government = communism
								}
							}
						}
					}
					set_politics = {  #should be decently historical
						ruling_party = communism
					}
					set_popularities = {
						democratic = 9
						neutrality = 4
						fascism = 2
						communism = 85
					}
				}
			}
		}
		if = { #Fix East Poland->Cede Remaining land
			limit = {
				has_global_flag = r56_POL_in_yalta
			}
			SOV = {
				if = {
					limit = {
						96 = { #Wilejka
							is_owned_by = POL
							owner = {
								is_ai = yes
							}
						}
					}
					transfer_state = 96
				}
				if = {
					limit = {
						936 = { #Smorgonie
							is_owned_by = POL
							owner = {
								is_ai = yes
							}
						}
					}
					transfer_state = 936
				}
				if = {
					limit = {
						935 = { #Grodno
							is_owned_by = POL
							owner = {
								is_ai = yes
							}
						}
					}
					transfer_state = 935
				}
				if = {
					limit = {
						95 = { #Nowogrodek
							is_owned_by = POL
							owner = {
								is_ai = yes
							}
						}
					}
					transfer_state = 95
				}
				if = {
					limit = {
						94 = { #Polesie
							is_owned_by = POL
							owner = {
								is_ai = yes
							}
						}
					}
					transfer_state = 94
				}
				if = {
					limit = {
						93 = { #Wolyn
							is_owned_by = POL
							owner = {
								is_ai = yes
							}
						}
					}
					transfer_state = 93
				}
				if = {
					limit = {
						91 = { #Lwow
							is_owned_by = POL
							owner = {
								is_ai = yes
							}
						}
					}
					transfer_state = 91
				}
				if = {
					limit = {
						89 = { #Stanislawow
							is_owned_by = POL
							owner = {
								is_ai = yes
							}
						}
					}
					transfer_state = 89
				}
			}
			#Removing cores that are still around
			if = {
				limit = {
					GER = {
						is_ai = yes
					}
					66 = { #Niederschlesien
						is_core_of = GER
						is_owned_by = POL
					}
				}
				GER = {
					remove_state_core = 66
				}
			}
			if = {
				limit = {
					GER = {
						is_ai = yes
					}
					67 = { #Oberschlesien
						is_core_of = GER
						is_owned_by = POL
					}
				}
				GER = {
					remove_state_core = 67
				}
			}
			if = {
				limit = {
					GER = {
						is_ai = yes
					}
					63 = { #Hinterpommern
						is_core_of = GER
						is_owned_by = POL
					}
				}
				GER = {
					remove_state_core = 63
				}
			}
		}
		if = { #This needs to go lastish!
			limit = {
				has_global_flag = r56_ITA_in_yalta
			}
			ITA = {
				if = {
					limit = {
						has_autonomy_state = autonomy_supervised_state
					}
					OVERLORD = { #this function requires a different tag here
						set_autonomy = { #disable silly nations making a guided gov of Italy, which is really never removed by AI
							target = ITA
							autonomy_state = autonomy_free
						}
					}
				}
				if = { #Fix Istria
					limit = { #Havent seen broken Slovenia puppets yet
						owns_state = 911
						owns_state = 736
						OR = {
							911 = {
								owner = {
									is_ai = yes
								}
							}
							736 = {
								owner = {
									is_ai = yes
								}
							}
						}
					}
					if = {
						limit = {
							country_exists = CRO
						}
						CRO = { transfer_state = 736 }
					}
					if = {
						limit = {
							country_exists = YUG
							NOT = {
								country_exists = CRO
							}
						}
						YUG = { transfer_state = 736 }
					}
					if = {
						limit = {
							country_exists = SLV
						}
						SLV = { transfer_state = 911 }
					}
					if = {
						limit = {
							country_exists = YUG
							NOT = {
								country_exists = SLV
							}
						}
						YUG = { transfer_state = 911 }
					}
				}
				if = {
					limit = {
						NOT = {
							is_puppet = yes
							is_subject = yes
							has_autonomy_state = autonomy_supervised_state
						}
						
						NOT = { #Allied leader is democratic or non-aligned
							has_global_flag = r56_yalta_origin_is_communism
							has_global_flag = r56_yalta_origin_is_fascism
						}
					}
					set_politics = { #historical
						ruling_party = neutrality
						elections_allowed = no #handled by events
					}
					set_popularities = { #based on monarchy referendum and first election
						democratic = 33
						neutrality = 38
						fascism = 4
						communism = 25
					}
					#announce referendum
					country_event = { id = r56_italy.107 days = 2 }
				}
				if = { #fixes weird Italy owning things
					limit = {
						owns_state = 736
					}
					if = {
						limit = {
							country_exists = WGR
							736 = {
								is_core_of = WGR
							}
						}
						WGR = { transfer_state = 736 }
					}
				}
			}
			every_state = { #remove Italian claims that lead to WW3
				remove_claim_by = ITA
			}
		}
		#Below are very rare edge cases that are fixed when found - SpicyAlfredo
		if = { #Niche case were Poland lived and not at war with Soviets/Other tags took new west Poland land and gets rid of Danzig aswell
			limit = {
				NOT = {
					has_global_flag = r56_POL_in_yalta
				}
				POL = {
					is_puppet = no #double checking
					is_government_in_exile = no
					has_capitulated = no
					NOT = {
						has_war_with = SOV
						has_war_with = ENG
						has_war_with = USA
						has_war_with = FRA
					}
					OR = { #Need to be in a faction or it's too bad for you Poland
						is_in_faction_with = ENG
						is_in_faction_with = SOV
						is_in_faction_with = FRA
						is_in_faction_with = USA
					}
				}
			}
			if = { #Danzig is still around lol
				limit = { 
					DNZ = {
						exists = yes
						is_ai = yes
					}
					85 = { #Danzig
						is_owned_by = DNZ
					}
				}
				POL = {
					transfer_state = 85
				}
			}
			if = {#Removing claims that are around
				limit = {
					85 = {
						is_claimed_by = GER
					}
				}
				GER = {
					remove_state_claim = 85
				}
			}
			if = {
				limit = {
					SOV = {
						is_ai = yes
					}
				}
				POL = {
					if = {
						limit = {
							63 = { #Hinterpommern
								is_owned_by = SOV
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 63
					}
					if = {
						limit = { #what
							has_global_flag = r56_ITA_in_yalta
							63 = { #Hinterpommern
								is_owned_by = ITA
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 63
					}
					if = {
						limit = { 
							63 = { #Hinterpommern
								is_owned_by = FRA
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 63
					}
					if = {
						limit = { 
							63 = { #Hinterpommern
								is_owned_by = ENG
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 63
					}
					if = {
						limit = { 
							63 = { #Hinterpommern
								is_owned_by = USA
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 63
					}
					if = {
						limit = {
							68 = { #Neumark
								is_owned_by = SOV
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 68
					}
					if = {
						limit = { 
							66 = { #Niederschlesien
								is_owned_by = SOV
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 66
					}
					if = {
						limit = { 
							67 = { #Oberschlesien
								is_owned_by = SOV
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 67
					}
					if = {
						limit = { 
							67 = { #Oberschlesien
								is_owned_by = SOV
								is_core_of = POL
								owner = {
									is_ai = yes
								}
							}
						}
						transfer_state = 67
					}
				}
			}
		}
	}
}

country_event = { # United front against fascism with France
	id = r56.ger.6
	title = r56.ger.6.t
	desc = r56.ger.6.d
	picture = GFX_report_event_generic_sign_treaty2
		
	fire_only_once = yes
	
	is_triggered_only = yes
		
	option = { # Accept
		name = r56.ger.6.a
		ai_chance = {
			base = 60
			modifier = {
                add = 10
				has_opinion = {
					target = GER
					value > 30
				}	
			}
			modifier = {
                add = 30
				has_government = communism	
			}
		}
		GER = { country_event = { id = r56.ger.10 hours = 6 } }
	}
		
	option = { # Refuse
		name = r56.ger.6.b
		ai_chance = {
			base = 40
			modifier = {
                add = 10
				has_opinion = {
					target = GER
					value < 11
				}	
			}
			modifier = {
                add = 30
				has_government = fascism
			}
		}
		GER = { country_event = { id = r56.ger.11 hours = 6 } }	
	}
}
	
country_event = { # Pressure Austria
	id = r56.ger.7
	title = r56.ger.7.t
	desc = r56.ger.7.d
	picture = GFX_report_event_generic_sign_treaty1
		
	fire_only_once = yes
	
	is_triggered_only = yes
		
	option = { # Accept
		name = r56.ger.7.a
		ai_chance = {
			base = 10
			modifier = {
                add = 10
				has_opinion = {
					target = GER
					value > 50
				}	
			}
			modifier = {
                add = 10
				communism > 0.25	
			}
			modifier = {
                add = 10
				has_stability < 0.50	
			}
		}
		effect_tooltip = {
			GER = {
				annex_country = { target = AUS transfer_troops = yes }
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
		GER = { country_event = { id = r56.ger.8 hours = 6 } }
	}
		
	option = { # Refuse
		name = r56.ger.7.b
		ai_chance = {
			base = 10
			modifier = {
                add = 10
				has_army_manpower = {
					size > 200000
				}
			}
			modifier = {
                add = 25
				is_in_faction = yes	
			}
		}
		add_war_support = 0.1
		GER = { country_event = { id = r56.ger.9 hours = 6 } }
	}
}
	
country_event = {
	id = r56.ger.8
	title = r56.ger.8.t
	desc = r56.ger.8.d
	picture = GFX_report_event_hitler_handshake
		
	fire_only_once = yes
	
	is_triggered_only = yes
		
	option = {
		name = r56.ger.8.a
		ai_chance = {
			base = 90
		}
		annex_country = { target = AUS transfer_troops = yes }
	}
}
	
country_event = {
	id = r56.ger.9
	title = r56.ger.9.t
	desc = r56.ger.9.d
	picture = GFX_report_event_albanian_partisans
		
	fire_only_once = yes
	
	is_triggered_only = yes
		
	#Then it's war
	option = {
		name = r56.ger.9.a
		ai_chance = {
				base = 90
		}
		declare_war_on = {
			target = FROM
			type = puppet_wargoal_focus
		}
	}
}

country_event = { 
	id = r56.ger.10
	title = r56.ger.10.t
	desc = r56.ger.10.d
	picture = GFX_report_event_generic_sign_treaty2
		
	fire_only_once = yes
	
	is_triggered_only = yes
		
	option = {
		name = r56.ger.10.a
		ai_chance = {
			base = 60
		}
		give_guarantee = FRA
		FRA = {
			give_guarantee = GER
		}
		diplomatic_relation = {
			country = FRA
			relation = non_aggression_pact
			active = yes
		}
	}

}

country_event = { 
	id = r56.ger.11
	title = r56.ger.11.t
	desc = r56.ger.11.d
	picture = GFX_report_event_generic_sign_treaty2
		
	fire_only_once = yes
	
	is_triggered_only = yes
		
	option = {
		name = r56.ger.11.a
	}
}

country_event = { #Give Hungary Southern Slovakia?
	id = r56.ger.15
	title = r56.ger.15.t
	desc = r56.ger.15.d
	picture = GFX_report_event_german_politician_speech

	is_triggered_only = yes

	option = { #Yes
		name = r56.ger.15.a
		trigger = {
			OR = {
				country_exists = HUN
				AND = {
					country_exists = AUS
					has_cosmetic_tag = HUN_EMPIRE
				}
			}
		}		
		ai_chance = {
			factor = 80
		}
		if = {
			limit = {
				country_exists = HUN
			}
			HUN = {
				country_event = {
					id = germany.51
				}
			}			
		}
		if = {
			limit = {
				AUS = {
					has_cosmetic_tag = HUN_EMPIRE
				}
				NOT = {
					country_exists = HUN
				}
			}
			AUS = {
				country_event = {
					id = germany.51
				}
			}			
		}
		add_opinion_modifier = {
			target = GER modifier = GER_first_vienna_award_GER
		}
		hidden_effect = {
			set_global_flag = GER_first_vienna_award
		}
	}

	option = { #No (Annexed)
		name = r56.ger.15.b

		trigger = {
			GER = { 
				owns_state = 664
				owns_state = 996
			}
		}

		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				HUN = {
					exists = yes
				}				
			}
		}
	}

	option = { #No (Slovakia)
		name = r56.ger.15.c

		trigger = {
			SLO = {
			 	owns_state = 664
				is_puppet_of = GER
			}
		}

		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

country_event = { #One last ai handout
	id = r56.ger.16
	title = r56.ger.16.t
	desc = r56.ger.16.desc
	picture = GFX_report_event_german_reichstag_bombed

	fire_only_once = yes

	hidden = yes

	trigger = {
		original_tag = GER
		is_ai = yes
		has_civil_war = no
		date > 1941.9.9 #You don't get a bailout for being dumb early 
		ROOT = {
			#has_completed_focus = GER_total_war
			has_war = yes
			surrender_progress > 0.88
			has_country_flag = r56_GER_endsieg_event_happened
			casualties > 799999 
			NOT = {
				has_government = democratic
			}
			OR = {
				any_enemy_country = {
					is_major = yes 
					OR = {
						original_tag = ENG
						original_tag = USA
						original_tag = SOV
						original_tag = FRA
						original_tag = POL
						original_tag = ITA
					}
				}
				has_global_flag = had_yalta_conference
				AND = { #just incase the above stuff doesn't cause a fire and Germany is losing hard
					surrender_progress > 0.90
					casualties > 1200000 
				}
			}
		}
	}

	mean_time_to_happen = { days = 3 }

	option = { 
		name = r56.ger.16.a 
		if = {
			limit = {
				64 = {
					NOT = {
						is_controlled_by = GER
					}
				}
				has_global_flag = had_yalta_conference
				has_country_leader = {
					character = GER_adolf_hitler
					ruling_only = yes
				}
			}
			kill_ideology_leader = fascism
			set_global_flag = r56_we_killed_no_no_man
			create_country_leader = { 
				name = "Karl Donitz"
				desc = ""
				picture = "Portrait_Germany_Karl_Donitz.dds"
				expire = "1965.1.1"
				ideology = nazism
				traits = {
					retired_admiral defacto_leader 
				}
			}
		}
		ROOT = {
			add_manpower = 10000
			add_fuel = 250
			add_offsite_building = { type = arms_factory level = 1 }
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 4000
				producer = GER
			}
			add_equipment_to_stockpile = { 
				type = support_equipment
				amount = 250
				producer = GER
			}
			add_equipment_to_stockpile = {
				type = medium_tank_chassis
				amount = 200
				producer = GER
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 200
				producer = GER
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 100
				producer = GER
			}
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 10
			}
		}
	}
}
country_event = { #Germany offers to "protect Poland"
	id = r56.ger.17
	title = r56.ger.17.t
	desc = r56.ger.17.d
	picture = GFX_report_event_german_reichstag_bombed

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Agree
		name = r56.ger.17.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				strength_ratio = { #help might still be helpful but not giving you any territory
					tag = GER
					ratio > 1
				}
			}
			modifier = {
				factor = 0.5
				is_in_faction = yes
			}
			modifier = { #guarantees might not work anyway
				factor = 0
				is_faction_leader = yes
				any_other_country = {
					is_in_faction_with = POL
				}
			}
			modifier = {
				factor = 0
				threat < 0.15
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = SOV
					ratio > 0.5
				}
				SOV = { #lower strength expected
					has_civil_war = no
				}
			}
		}
		FROM = {
			country_event = {
				id = r56.ger.19
				hours = 2
				random = 20
			}
		}
		if = {
			limit = {
				owns_state = 807
			} 	
			FROM = {
				transfer_state = 807
			}
		}
		if = {
			limit = {
				owns_state = 86
			} 	
			FROM = {
				transfer_state = 86
			}
		}
		if = {
			limit = {
				owns_state = 762
			} 	
			FROM = {
				transfer_state = 762
			}
		}
		if = {
			limit = {
				OR = {	#Danzig
					owns_state = 85
					85 = {
						owner = {
							is_subject_of = ROOT
						}
					}
				}
			} 	
			FROM = {
				transfer_state = 85
			}
		}
		FROM = {
			diplomatic_relation = {
				country = ROOT
				relation = guarantee
				active = yes
		   	}
		}
		diplomatic_relation = {
			country = FROM
			relation = guarantee
			active = yes
		}
		leave_faction = yes #is not at war, ensures guarantees work
	}
	option = { #Decline
		name = r56.ger.17.b
		ai_chance = {
			base = 50
		}
		FROM = {
			country_event = {
				id = r56.ger.18
				hours = 2
				random = 20
			}
		}
	}
}

country_event = { #Poland declines
	id = r56.ger.18
	title = r56.ger.18.t
	desc = r56.ger.18.d
	picture = GFX_report_event_polish_army

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Rip
		name = r56.ger.18.a
		create_wargoal = {
			type = puppet_wargoal_focus #buffer state
			target = FROM
		}
	}
}

country_event = { #Poland agrees
	id = r56.ger.19
	title = r56.ger.19.t
	desc = r56.ger.19.d
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Yay
		name = r56.ger.19.a 
	}
}

country_event = { #Democratic anschluss
	id = r56.ger.20
	title = r56.ger.20.t
	desc = r56.ger.20.d
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Yes
		name = r56.ger.20.a
		trigger = {
			communism < 0.3
		}
		ai_chance = {
			base = 10
		}
		FROM = {
			annex_country = {
				target = ROOT
				transfer_troops = yes
			}
			add_state_core = 4
			add_state_core = 152
			add_state_core = 153
			add_state_core = 848
			#AI would probably do stupid things with a claim on South Tyrol, perhaps something for a future focus
		}
		country_event = r56.ger.26 #world event
	}
	option = { #Yes, except the referendum doesnt pass because of commies
		name = r56.ger.20.a
		trigger = {
			communism > 0.3
		}
		ai_chance = {
			base = 10
		}
		FROM = {
			country_event = r56.ger.21
		}
		country_event = r56.ger.21 #show them the referendum failed
	}
	option = { #No
		name = r56.ger.20.b
		ai_chance = {
			base = 3
			modifier = {
				factor = 0
				communism > 0.3 #take the other option, but keep it available for players
			}
			modifier = {
				factor = 8
				strength_ratio = {
					tag = GER
					ratio > 0.6 #very strong for its size
				}
			}
			modifier = {
				factor = 100
				strength_ratio = {
					tag = GER
					ratio > 0.9 #we are the Germanic captain now
				}
			}
		}
		if = {
			limit = {
				ic_ratio = {
					tag = GER
					ratio < 0.4 #otherwise: maybe independence isnt so bad
				}
			}
			add_stability = -0.15
		}
		set_global_flag = dem_anschluss_refused #this has to be before the event for dynamic loc
		FROM = {
			country_event = r56.ger.21
		}
	}
}
country_event = { #Democratic anschluss failure, success becomes world event
	id = r56.ger.21
	title = r56.ger.21.t
	desc = {
		text = r56.ger.21.d1
		trigger = {
			has_global_flag = dem_anschluss_refused
		}
	}
	desc = {
		text = r56.ger.21.d2
		trigger = {
			NOT = {
				has_global_flag = dem_anschluss_refused
			}
		}
	}
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Rip
		trigger = {
			has_global_flag = dem_anschluss_refused
		}
		name = r56.ger.21.a
	}
	option = { #Rip, but commies
		trigger = {
			NOT = {
				has_global_flag = dem_anschluss_refused
			}
		}
		name = r56.ger.21.b
	}
}

country_event = { #Trade Oberschlesien for Gdynia
	id = r56.ger.22
	title = r56.ger.22.t
	desc = r56.ger.22.d
	picture = GFX_report_event_poland_rejects

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Yes
		name = r56.ger.22.a
		ai_chance = { 
			factor = 75
			modifier = { #were kinda busy
				factor = 0
				has_war = yes
			}
			modifier = { #we want friendly relations
				factor = 1.5
				any_neighbor_country = {
					has_added_tension_amount > 7
					NOT = {
						tag = FROM #perhaps from civil war
					}
				}
			}
			modifier = { #we're powerful, we need that, we can trade for the steel they offer
				factor = 0.5
				is_major = yes
			}
			modifier = { #just another port
				factor = 5
				any_controlled_state = {
					is_coastal = yes
					is_core_of = ROOT
				}
			}
		}
		GER = {
			transfer_state = 807
			add_state_core = 807
			country_event = r56.ger.23
		}
		transfer_state = 67
		add_state_core = 67
	}
	option = { #No
		name = r56.ger.22.b
		ai_chance = { 
			factor = 25
		}
		set_global_flag = GER_dem_poland_trade_failed
		GER = {
			country_event = r56.ger.23
		}
	}
}
country_event = { #German reaction
	id = r56.ger.23
	title = {
		text = r56.ger.23.t1
		trigger = {
			NOT = {
				has_global_flag = GER_dem_poland_trade_failed
			}
		}
	}
	title = {
		text = r56.ger.23.t2
		trigger = {
			has_global_flag = GER_dem_poland_trade_failed
		}
	}
	desc = {
		text = r56.ger.23.d1
		trigger = {
			NOT = {
				has_global_flag = GER_dem_poland_trade_failed
			}
		}
	}
	desc = {
		text = r56.ger.23.d2
		trigger = {
			has_global_flag = GER_dem_poland_trade_failed
		}
	}
	picture = GFX_report_event_german_polish_border

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Eyyyy
		name = r56.ger.23.a
		trigger = {
			NOT = {
				has_global_flag = GER_dem_poland_trade_failed
			}
		}
	}
	option = { #Ooof
		name = r56.ger.23.b
		trigger = {
			has_global_flag = GER_dem_poland_trade_failed
		}
	}
}
country_event = { #Trade Lithuania for Gdynia (allows forming Poland-Lithuania)
	id = r56.ger.24
	title = r56.ger.24.t
	desc = r56.ger.24.d
	picture = GFX_report_event_german_polish_border

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Yes
		name = r56.ger.24.a
		ai_chance = { 
			factor = 75
			modifier = { #we're kinda busy
				factor = 0
				has_war = yes
			}
			modifier = { #whoa land to expand on and cores
				factor = 2
				is_major = yes
			}
		}
		GER = {
			transfer_state = 807
			add_state_core = 807
			transfer_state = 762
			add_state_core = 762
			country_event = r56.ger.23
		}
		transfer_state = 814
		transfer_state = 815
		transfer_state = 11
		transfer_state = 189
		activate_decision = form_commonwealth #lost states arent required, but this is a free buff is they lost eastern lands to the soviet or something
	}
	option = { #No
		name = r56.ger.22.b
		ai_chance = { 
			factor = 25
		}
		set_global_flag = GER_dem_poland_trade_failed
		GER = {
			country_event = r56.ger.23
		}
	}
}
country_event = { #Germany civil war
	id = r56.ger.25
	title = erwache.5.t #reused from monarchists
	desc = r56.ger.25.d
	picture = GFX_report_event_german_reichstag_bombed

	fire_only_once = yes

	is_triggered_only = yes

	timeout_days = 3

	immediate = {
		hidden_effect={
			random_country = {
				limit = {
					original_tag = GER
					NOT = {
						tag = GER
					}
					has_government = communism
				}
				save_event_target_as = communist_germany
				set_country_flag = r56_communist_germany_aliases_set
			}
			random_country = {
				limit = {
					original_tag = GER
					NOT = {
						tag = GER
					}
					has_government = democratic
				}
				save_event_target_as = conservative_germany
				set_country_flag = r56_conservative_germany_aliases_set
			}
			every_character = {
				limit = {
					OR = {
						is_character = GER_ernst_thalmann
						is_character = GER_Walter_Ulbricht
						is_character = GER_franz_jacob
						is_character = GER_Franz_Dahlem
						is_character = GER_Bernhard_Bastlein
					}
				}
				set_nationality = event_target:communist_germany
			}
			every_character = { #move over advisors and leaders
				limit = {
					OR = {
						is_advisor = yes
						is_unit_leader = yes
						is_character = GER_konrad_adenauer
					}
					NOT = {
						is_character = GER_rudolf_hess
						is_character = GER_martin_bormann
						is_character = GER_joseph_goebbels
						is_character = GER_wilhelm_keitel
						is_character = GER_heinrich_himmler
						is_character = GER_hermann_goring
						is_character = GER_joachim_von_ribbentrop
						is_character = GER_fritz_todt
						is_character = GER_albert_speer
						is_character = GER_werner_von_fritsch #despite the Blomberg–Fritsch affair, he seemingly didnt stop supporting anti-democratic and nazi ideals
						is_character = GER_ferdinand_schorner
						is_character = GER_felix_steiner #SS 
						
						has_id = 10 #Walter Model
						has_id = 15 #Walter Kruger
						has_id = 20 #Paul Hausser
						has_id = 24 #Sepp Dietrich
					}
				}
				set_nationality = event_target:conservative_germany
			}
			event_target:conservative_germany = {
				GER_erwin_von_witzleben = {
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
						  	ideology = conservatism
						  	expire = "1942.1.1.1" #health
						  	traits = {  }
						}
					}
				}
				division_template = {
					name = "Landsturmregiment"
					is_locked = yes
				
					division_names_group = GER_Inf_01
				
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
					}
					support = { 
						engineer = { x = 0 y = 0 }
					}
				}
				every_controlled_state = {
					limit = {
						OR = {
							state = 67 #Poland enclave
							state = 54 #East
							state = 989 #Upper
							state = 922 #Center
						}
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Landsturmregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Landsturmregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Landsturmregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
				}
			}
			event_target:communist_germany = {
				add_command_power = 50
				#Thalmann was imprisoned in the communist area, make him leader here and fire an event about him being freed if communists are chosen
				GER_ernst_thalmann = {
					promote_character = yes
					promote_character = stalinism
					set_portraits = { #temporarily doesnt use his fancy uniform
						civilian = {
							large="gfx/leaders/GER/r56_portrait_Ernst_Thalmann.dds"
						}
					}
				}
				set_variable = {
					var = GER_commie_soviet_influence
					value = 0
				}
				add_equipment_to_stockpile = { #buff to compensate for lack of industry, 5-divisions worth
					type = infantry_equipment
					amount = 5000
					producer = GER
				}
				division_template = {
					name = "Rotesregiment"
					is_locked = yes
				
					division_names_group = GER_Inf_01
				
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
					}
					support = { 
						engineer = { x = 0 y = 0 }
					}
				}
				every_controlled_state = { #16 weak units in stronghold
					limit = {
						OR = {
							state = 60
							state = 65
						}
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
					}
				}
				every_state = { #8 divisions in contested areas
					limit = {
						OR = {
							state = 59
							state = 64
						}
					}
					create_unit = {
						division = "name = \"Hamburger Rotes Regiment\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
						allow_spawning_on_enemy_provs = no
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
						allow_spawning_on_enemy_provs = no
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
						allow_spawning_on_enemy_provs = no
					}
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Rotesregiment\" start_experience_factor = 0.05"
						owner = PREV
						allow_spawning_on_enemy_provs = no
					}
				}
			}
			###heres your starting designs now stop annoying me about debug mode not saying your tag is GER
			every_country = {
				limit = {
					OR = {
						tag = event_target:communist_germany
						tag = event_target:conservative_germany
					}
				}
				if = {
					limit = {
						not = { has_dlc = "Man the Guns" }
					}
					create_equipment_variant = {
						name = "Scharnhorst Class"
						type = battle_cruiser_2
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 3
							ship_engine_upgrade = 1
							ship_armor_upgrade = 4
							ship_gun_upgrade = 0
						}
					}
					create_equipment_variant = {
						name = "Deutschland Class"
						type = battleship_1
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 0
							ship_engine_upgrade = 0
							ship_armor_upgrade = 0
							ship_gun_upgrade = 0
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Deutschland Class"
						type = heavy_cruiser_2
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 1
							ship_engine_upgrade = 0
							ship_armor_upgrade = 0
							ship_gun_upgrade = 4
						}
						obsolete=yes
					}
					create_equipment_variant = {
						name = "Leipzig Class"
						type = light_cruiser_1
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 2
							ship_engine_upgrade = 2
							ship_gun_upgrade = 3
							ship_anti_air_upgrade = 3
						}
						obsolete = yes
					}
					# Light Cruisers #
					create_equipment_variant = {
						name = "Königsberg Class"
						type = light_cruiser_1
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 2
							ship_engine_upgrade = 2
							ship_gun_upgrade = 3
							ship_anti_air_upgrade = 2
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "1924 Type"
						type = destroyer_1
						parent_version = 0
						upgrades = {
							ship_torpedo_upgrade = 1
							destroyer_engine_upgrade = 1
							ship_ASW_upgrade = 0
							ship_anti_air_upgrade = 1
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Zerstörer 1934A"
						type = destroyer_2
						parent_version = 0
						upgrades = {
							ship_torpedo_upgrade = 1
							destroyer_engine_upgrade = 1
							ship_ASW_upgrade = 1
							ship_anti_air_upgrade = 1
						}
					}
					create_equipment_variant = {
						name = "Type IIB"
						type = submarine_2
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 1
							sub_engine_upgrade = 0
							sub_stealth_upgrade = 1
							sub_torpedo_upgrade = 0
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Type VIIA"
						type = submarine_2
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 4
							sub_engine_upgrade = 3
							sub_stealth_upgrade = 2
							sub_torpedo_upgrade = 1
						}
					}
					create_equipment_variant = {
						name = "Type IA"
						type = submarine_1
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 1
							sub_engine_upgrade = 2
							sub_stealth_upgrade = 2
							sub_torpedo_upgrade = 2
						}
						obsolete = yes
					}
				}
				if = {
					limit = { has_dlc = "Man the Guns" }
					create_equipment_variant = { #Are we making a CV or a Monster Cruiser? Make up your mind
						name = "Graf Zeppelin Class"
						type = ship_hull_carrier_conversion_ca
						name_group = GER_CV_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_deck_slot_1 = ship_deck_space
							fixed_ship_deck_slot_2 = ship_deck_space
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_2
							fixed_ship_secondaries_slot = ship_secondaries_2 
						}
					}
					create_equipment_variant = {
						name = "Deutschland Class"
						type = ship_hull_cruiser_panzerschiff
						name_group = GER_CA_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_battery_slot = ship_heavy_battery_2
							fixed_ship_secondaries_slot = ship_secondaries_1
							fixed_ship_armor_slot = ship_armor_cruiser_2
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_engine_slot = cruiser_ship_engine_2
							front_1_custom_slot = ship_anti_air_1
							mid_1_custom_slot = ship_airplane_launcher_1
							mid_2_custom_slot = ship_secondaries_1
							rear_1_custom_slot = ship_torpedo_1
						}
					}
					create_equipment_variant = {
						name = "Type 24 Class"
						type = ship_hull_light_1
						name_group = GER_TB_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = empty
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_1
							fixed_ship_torpedo_slot = ship_torpedo_1
							rear_1_custom_slot = ship_mine_layer_1
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Zerstörer 1934 Class"
						type = ship_hull_light_2
						name_group = GER_DD_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_2
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_2
							fixed_ship_torpedo_slot = ship_torpedo_1
							mid_1_custom_slot = ship_torpedo_1
							rear_1_custom_slot = ship_mine_layer_1
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Zerstörer 1934A Class"
						type = ship_hull_light_2
						name_group = GER_DD_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_2
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_2
							fixed_ship_torpedo_slot = ship_torpedo_1
							mid_1_custom_slot = ship_torpedo_1
							rear_1_custom_slot = ship_depth_charge_1
						}
					}
					create_equipment_variant = {
						name = "Type I Class"
						type = ship_hull_submarine_2
						name_group = GER_SS_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_torpedo_slot = ship_torpedo_sub_1
							fixed_ship_engine_slot = sub_ship_engine_1
							rear_1_custom_slot = empty
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Type II Class"
						type = ship_hull_submarine_1
						name_group = GER_SS_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_torpedo_slot = ship_torpedo_sub_1
							fixed_ship_engine_slot = sub_ship_engine_1
							rear_1_custom_slot = empty
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Type IX Class"
						type = ship_hull_submarine_2
						name_group = GER_SS_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_torpedo_slot = ship_torpedo_sub_2
							fixed_ship_engine_slot = sub_ship_engine_2
							rear_1_custom_slot = empty
						}
					}
					create_equipment_variant = {
						name = "Type VII Class"
						type = ship_hull_submarine_2
						name_group = GER_SS_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_torpedo_slot = ship_torpedo_sub_2
							fixed_ship_engine_slot = sub_ship_engine_1
							rear_1_custom_slot = empty
						}
					}
					create_equipment_variant = {
						name = "Königsberg Class"
						type = ship_hull_cruiser_2
						name_group = GER_CL_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_medium_battery_1
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_1
							fixed_ship_armor_slot = ship_armor_cruiser_1
							mid_1_custom_slot = ship_torpedo_1
							mid_2_custom_slot = ship_light_medium_battery_1
							rear_1_custom_slot = ship_mine_layer_1
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Emden Class"
						type = ship_hull_cruiser_1
						name_group = GER_CL_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_medium_battery_1
							fixed_ship_anti_air_slot = empty
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_1
							fixed_ship_armor_slot = ship_armor_cruiser_1
							mid_1_custom_slot = ship_light_medium_battery_1
							mid_2_custom_slot = ship_torpedo_1
							rear_1_custom_slot = empty
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Bremse Class"
						type = ship_hull_cruiser_1
						name_group = GER_CL_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_1
							mid_1_custom_slot = ship_anti_air_1
							mid_2_custom_slot = ship_mine_layer_1
							rear_1_custom_slot = ship_mine_layer_1
						}
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Leipzig Class"
						type = ship_hull_cruiser_2
						name_group = GER_CL_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_medium_battery_1
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_1
							fixed_ship_armor_slot = ship_armor_cruiser_1
							front_1_custom_slot = ship_light_medium_battery_1
							mid_1_custom_slot = ship_torpedo_1
							mid_2_custom_slot = ship_mine_layer_1
							rear_1_custom_slot = ship_airplane_launcher_1
						}
					}
					create_equipment_variant = {
						name = "Admiral Hipper Class"
						type = ship_hull_cruiser_2
						name_group = GER_CA_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_medium_battery_2
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = cruiser_ship_engine_1
							fixed_ship_armor_slot = ship_armor_cruiser_2
							front_1_custom_slot = ship_anti_air_1
							mid_1_custom_slot = ship_torpedo_1
							mid_2_custom_slot = ship_airplane_launcher_1
							rear_1_custom_slot = ship_medium_battery_2
						}
					}
					create_equipment_variant = {
						name = "Scharnhorst Class"
						type = ship_hull_heavy_2
						name_group = GER_BB_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_heavy_battery_2
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = heavy_ship_engine_2
							fixed_ship_secondaries_slot = ship_secondaries_1
							fixed_ship_armor_slot = ship_armor_bb_1
							front_1_custom_slot = ship_anti_air_1
							mid_1_custom_slot = empty
							mid_2_custom_slot = ship_secondaries_1
							rear_1_custom_slot = ship_heavy_battery_2
						}
					}
					create_equipment_variant = {
						name = "Deutschland Class"
						type = ship_hull_pre_dreadnought
						name_group = GER_BB_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_heavy_battery_1
							fixed_ship_anti_air_slot = ship_anti_air_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = heavy_ship_engine_1
							fixed_ship_secondaries_slot = ship_secondaries_1
							fixed_ship_armor_slot = ship_armor_bb_1
							front_1_custom_slot = ship_anti_air_1
							mid_1_custom_slot = ship_secondaries_1
							rear_1_custom_slot = ship_torpedo_1
						}
						obsolete = yes
					}
				}
				create_equipment_variant = {
					name = "Ju 86"
					type = tac_bomber_equipment_0
					upgrades = {
						plane_tac_bomb_upgrade = 5
						plane_range_upgrade = 5
						plane_engine_upgrade = 5
						plane_reliability_upgrade = 10
					}
					obsolete = yes
				}
				create_equipment_variant = {
					name = "Do 17"
					type = tac_bomber_equipment_0
					upgrades = {
						plane_tac_bomb_upgrade = 5
						plane_range_upgrade = 1
						plane_engine_upgrade = 1
						plane_reliability_upgrade = 5
					}
					obsolete = yes
				}
				if = {
					limit = {
						has_dlc = "No Step Back"
					}
					create_equipment_variant = {
						name = "Leichttraktor"
						type = light_tank_chassis_0
						parent_version = 0
						modules = {
							main_armament_slot = tank_small_cannon
							turret_type_slot = tank_light_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_riveted_armor
							engine_type_slot = tank_gasoline_engine
							special_type_slot_1 = tank_radio_1
						}
						upgrades = {
							tank_nsb_engine_upgrade = 2
							tank_nsb_armor_upgrade = 2
						}
						obsolete = yes
						icon = "gfx/interface/technologies/gwtank.dds"
					}
					create_equipment_variant = {
						name = "Panzer I Ausf. A"
						type = light_tank_chassis_1
						parent_version = 0
						modules = {
							main_armament_slot = tank_heavy_machine_gun
							turret_type_slot = tank_light_one_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_riveted_armor
							engine_type_slot = tank_gasoline_engine
							special_type_slot_1 = tank_radio_1
						}
						upgrades = {
							tank_nsb_engine_upgrade = 5
							tank_nsb_armor_upgrade = 1
						}
						icon = "gfx/interface/technologies/ger_basic_light_tank.dds"
						obsolete = yes
					}
					create_equipment_variant = {
						name = "Neubaufahrzeug"
						type = heavy_tank_chassis_1
						parent_version = 0
						modules = {
							main_armament_slot = tank_close_support_gun
							turret_type_slot = tank_heavy_three_man_tank_turret
							suspension_type_slot = tank_bogie_suspension
							armor_type_slot = tank_riveted_armor
							engine_type_slot = tank_gasoline_engine
							special_type_slot_1 = tank_radio_1
							special_type_slot_2 = secondary_turret_hmg
							special_type_slot_3 = secondary_turret_hmg
							special_type_slot_4 = secondary_turret_hmg
						}
						upgrades = {
							tank_nsb_engine_upgrade = 6
							tank_nsb_armor_upgrade = 2
						}
						icon = "gfx/interface/technologies/ger_basic_heavy_tank.dds"
					}
					create_equipment_variant = {
						name = "Panzer II Ausf. a"
						type = light_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_auto_cannon
							turret_type_slot = tank_light_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_riveted_armor
							engine_type_slot = tank_gasoline_engine
							special_type_slot_1 = tank_radio_1
						}
						upgrades = {
							tank_nsb_engine_upgrade = 3
							tank_nsb_armor_upgrade = 2
						}
						icon = "gfx/interface/technologies/ger_imp_light_tank.dds"
					}
				}
			}
		}
	}

	#Unit handling NEEDS to be in options or the player can disband the fascist army before switching
	option = { #Democrats
		name = r56.ger.25.a
		hidden_effect = {
			civil_war_anti_exploiter_punitive_action = yes	#give the nazis free divisions if player deleted army
			transfer_units_fraction= {
				target = event_target:communist_germany
				size = 0.2
				stockpile_ratio = 0.2 #bit of raiding
				army_ratio = 0.15
				navy_ratio = 0.1 #no majorities in naval regions
				air_ratio = 0.05
				keep_unit_leaders_trigger = {
					always = yes 
				}
			}
			transfer_units_fraction= {
				target = event_target:conservative_germany
				size = 0.4
				stockpile_ratio = 0.55 #industrial core
				army_ratio = 0.45
				navy_ratio = 0.3 #no majorities in naval regions
				air_ratio = 0.35
				keep_unit_leaders_trigger = {
					always = yes 
				}
			}
			#create fascist paramilitaries here, after splitting and after the player can mess with them
			division_template = {
				name = "SS-Sturmbrigade"
				is_locked = yes
			
				division_names_group = GER_Inf_01
			
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
				}
				support = { 
					engineer = { x = 0 y = 0 }
				}
			}
			every_controlled_state = {
				create_unit = {
					division = "name = \"Infantry Division\" division_template = \"SS-Sturmbrigade\" start_experience_factor = 0.05"
					owner = PREV
					allow_spawning_on_enemy_provs = no
				}				
			}
		}
		event_target:conservative_germany = {
			change_tag_from = ROOT
		}
	}
	option = { #Commies
		name = r56.ger.25.b
		hidden_effect = {
			civil_war_anti_exploiter_punitive_action = yes	#give the nazis free divisions if player deleted army
			transfer_units_fraction= {
				target = event_target:communist_germany
				size = 0.2
				stockpile_ratio = 0.2 #bit of raiding
				army_ratio = 0.15
				navy_ratio = 0.1 #no majorities in naval regions
				air_ratio = 0.05
				keep_unit_leaders_trigger = {
					always = yes 
				}
			}
			transfer_units_fraction= {
				target = event_target:conservative_germany
				size = 0.4
				stockpile_ratio = 0.55 #industrial core
				army_ratio = 0.45
				navy_ratio = 0.3 #no majorities in naval regions
				air_ratio = 0.35
				keep_unit_leaders_trigger = {
					always = yes 
				}
			}
			#create fascist paramilitaries here, after splitting and after the player can mess with them
			division_template = {
				name = "SS-Sturmbrigade"
				is_locked = yes
			
				division_names_group = GER_Inf_01
			
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
				}
				support = { 
					engineer = { x = 0 y = 0 }
				}
			}
			every_controlled_state = {
				create_unit = {
					division = "name = \"Infantry Division\" division_template = \"SS-Sturmbrigade\" start_experience_factor = 0.05"
					owner = PREV
					allow_spawning_on_enemy_provs = no
				}
			}
		}
		event_target:communist_germany = {
			change_tag_from = ROOT
		}
		custom_effect_tooltip = GER_communists_are_pretty_hard_tt
	}
}
country_event = { #based on original anschluss, as some strings still apply
	id = r56.ger.26
	title = news.36.t
	desc = r56.ger.26.d
	picture = GFX_report_event_german_troops
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = news.36.a
		trigger = {
			NOT = {
				TAG = GER
				TAG = ITA
				TAG = FRA
				TAG = ENG
			}
		}
	}
	option = {
		name = r56.ger.26.b
		trigger = { TAG = GER }
	}
	option = {
		name = news.36.c
		trigger = { TAG = ITA }
	}
	option = {
		name = news.36.e
		trigger = {
			OR = {
				TAG = FRA
				TAG = ENG
			}
		}
	}
}
country_event = { #German-Soviet trade treaty, but initiated by Germany
	id = r56.ger.27
	title = r56.ger.27.t
	desc = r56.ger.27.d
	picture = GFX_erwache_reichsbank
	
	is_triggered_only = yes
	
	option = {
		name = r56.ger.27.a #yes
		diplomatic_relation = {
			country = GER
			relation = non_aggression_pact
			active = yes
		}
		give_resource_rights = { receiver = ROOT state = 232 }
		if = {
			limit = {
				has_dlc = "Man the Guns"
			}
			if = {
				limit = {
					NOT = { has_tech = basic_ship_hull_cruiser }
				}
				set_technology = { basic_ship_hull_cruiser = 1 }
			}
			if = {
				limit = {
					NOT = { has_tech = basic_cruiser_armor_scheme }
				}
				set_technology = { basic_cruiser_armor_scheme = 1 }
			}
			
			# CA: Lützow -> Petropavlovsk
			add_equipment_production = {
				equipment = {
					type = ship_hull_cruiser_2
					creator = "SOV"
					version_name = "Hipper Class"
				}
				name = "Petropavlovsk"
				requested_factories = 1
				progress = 0.5
				amount = 1
			}

			if = { #Default name
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
					bonus = 0.5
					uses = 2
					category = ship_modules_tech
					category = bb_tech
					category = dd_tech
				}
			}
			else = { #Alt name
				add_tech_bonus = {
					name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
					bonus = 0.5
					uses = 2
					category = ship_modules_tech
					category = bb_tech
					category = dd_tech
				}
			}
		}
		else = { #No MTG
			if = {
				limit = {
					NOT = { has_tech = basic_heavy_cruiser }
				}
				set_technology = { basic_heavy_cruiser = 1 }
			}
			create_equipment_variant = {
				name = "Hipper Class"
				type = heavy_cruiser_2
				parent_version = 0
				upgrades = {
					ship_reliability_upgrade = 1
					ship_engine_upgrade = 1
					ship_armor_upgrade = 2
					ship_gun_upgrade = 2
				}
			}

			add_equipment_production = {
				equipment = {
					type = heavy_cruiser_2
					creator = "SOV"
				}
				requested_factories = 1
				progress = 0.5
				amount = 1
			}

			if = { #Default name
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
					bonus = 0.5
					uses = 2
					category = ca_tech
					category = bb_tech
					category = dd_tech
				}
			}
			else = { #Alt name
				add_tech_bonus = {
					name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
					bonus = 0.5
					uses = 2
					category = ca_tech
					category = bb_tech
					category = dd_tech
				}
			}
		}

		if = { #Default name
			limit = {
				has_government = communism
			}
			add_tech_bonus = {
				name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
				bonus = 0.5
				uses = 2
				category = air_equipment
			}
		}
		else = { #Alt name
			add_tech_bonus = {
				name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
				bonus = 0.5
				uses = 2
				category = air_equipment
			}
		}

		#Effects to Germans
		add_timed_idea = { idea = SOV_soviet_german_trade_agreement days = 545 } #Technically 1 year but really 18 months for Soviet payment 

		add_opinion_modifier = {
			target = GER
			modifier = SOV_strengthened_relations_with_us
		}
		GER = {
			add_opinion_modifier = {
				target = ROOT
				modifier = SOV_strengthened_relations_with_us
			}
		}
	}
	option = {
		name = r56.ger.27.b
	}
}
country_event = { #Germany proposes invading communist Yugoslavia with Italy
	id = r56.ger.28
	title = r56.ger.28.t
	desc = r56.ger.28.d
	picture = GFX_news_event_GER_fate_of_yugoslavia

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Yes
		name = r56.ger.28.a
		ai_chance = { 
			factor = 80
			modifier = { #we're kinda busy
				factor = 0
				any_home_area_neighbor_country = {
					has_war_with = ITA
					is_major = yes
				}
			}
		}
		add_state_claim = 102
		add_state_claim = 958
		add_state_claim = 103
		add_state_claim = 105
		declare_war_on = {
			target = YUG
			type = take_state_focus
		}
		FROM = {
			declare_war_on = {
				target = YUG
				type = puppet_wargoal_focus
			}
		}
	}
	option = { #No
		name = r56.ger.28.b
		ai_chance = { 
			factor = 20
		}
	}
}

country_event = { #Germany proposes to aid Britain in exchange for some colonies
	id = r56.ger.29
	title = r56.ger.29.t
	desc = r56.ger.29.d
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Yes
		name = r56.ger.29.a
		ai_chance = { 
			factor = 10
			modifier = {
				add = 8
				any_country = { #at some risk
					is_subject_of = ROOT
					OR = {
						has_capitulated = yes
						surrender_progress > 0.25
					}
				}
			}
			modifier = {
				add = 2
				any_country = { #could be smaller, stacks for puppets
					is_in_faction_with = ROOT
					OR = {
						has_capitulated = yes
						surrender_progress > 0.25
					}
				}
			}
		}
		546 = {
			set_state_owner_to = GER
		}
		541 = {
			set_state_owner_to = GER
		}
		737 = {
			set_state_owner_to = GER
		}
		GER = {
			add_war_support = 0.1
			add_stability = 0.05
		}
		every_country = {
			limit = {
				has_war_with = ROOT
			}
			GER = {
				add_to_war = {
					targeted_alliance = ROOT
					enemy = PREV
				}
			}
		}
	}
	option = { #No
		name = r56.ger.29.b
		ai_chance = { 
			factor = 0
			modifier = { #we can handle this
				add = 10
				NOT = {
					any_country = {
						has_war_with = ROOT
						is_major = no
					}
				}
			}
		}
	}
}

country_event = { #Contact Ludendorff
	id = r56.ger.30
	title = r56.ger.30.t
	desc = r56.ger.30.d
	picture = GFX_report_event_GER_ludendorff_gathering

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = r56.ger.30.a
		add_stability = 0.05
		custom_effect_tooltip = GER_ludendorff_will_join
	}
}

country_event = { #Ludendorff's health worsens
	id = r56.ger.31
	title = r56.ger.31.t
	desc = r56.ger.31.d
	picture = GFX_report_event_GER_ludendorff_gathering

	trigger = {
		date > 1937.3.1
		has_completed_focus = GER_contact_ludendorff
	}

	mean_time_to_happen = {
		days = 90
	}

	fire_only_once = yes

	option = { # Give him all the healthcare he needs - he lives longer
		name = r56.ger.31.a
		if = {
			limit = {
				has_power_balance = {
					id = GER_monarchist_power_balance
				}
			}
			GER_monarchist_bop_low_decrease_effect = yes
		}
		GER_erich_ludendorff = {
			remove_unit_leader = yes
		}
	}
	option = { # Give him all the healthcare he needs - he lives longer
		name = r56.ger.31.b
		if = {
			limit = {
				has_power_balance = {
					id = GER_monarchist_power_balance
				}
			}
			GER_monarchist_bop_very_low_increase_effect = yes
		}
		GER_erich_ludendorff = {
			add_unit_leader_trait = sick
		}
		add_ideas = GER_medical_costs
	}
}

country_event = { #Ludendorff dies (field marshal) 
	id = r56.ger.32
	title = r56.ger.32.t
	desc = r56.ger.32.d
	picture = GFX_report_event_europe_funeral

	trigger = {
		date > 1938.7.1 # Let's just say he gets some good healthcare and lives another 8 months or so
		has_completed_focus = GER_contact_ludendorff
		has_idea = GER_medical_costs
	}

	mean_time_to_happen = {
		days = 90
	}

	fire_only_once = yes

	option = { # Oh dear
		name = r56.ger.32.a
		retire_character = GER_erich_ludendorff
		remove_ideas = GER_medical_costs
	}
}

country_event = { #Ludendorff dies (retired) 
	id = r56.ger.33
	title = r56.ger.33.t
	desc = r56.ger.33.d
	picture = GFX_report_event_europe_funeral

	trigger = {
		date > 1937.10.1 # Died 1937.12.20
		has_completed_focus = GER_contact_ludendorff
		NOT = {
			has_idea = GER_medical_costs
		}
	}

	mean_time_to_happen = {
		days = 70
	}

	fire_only_once = yes

	option = { # Oh dear
		name = r56.ger.33.a
		retire_character = GER_erich_ludendorff
	}
}

country_event = { #Germany proposes economic integration
	id = r56.ger.34
	title = r56.ger.34.t
	desc = r56.ger.34.desc

	is_triggered_only = yes

	option = {	#yippie!
		name = r56.ger.34.a
		ai_chance = {
			factor = 1
		}
		FROM = {
			country_event = r56.ger.35
		}
		effect_tooltip = {
			FROM = {
				set_autonomy = {
					target = ROOT
					autonomy_state = autonomy_dominion
					end_wars = no
					end_civil_wars = no
				}
			}
		}
	}
	option = {	#no!
		name = r56.ger.34.b
		ai_chance = {
			factor = 1
		}
		trigger = {	#LIT cant be couped so has to cut ties
			NOT = {
				original_tag = LIT
			}
		}
		FROM = {
			country_event = r56.ger.36
		}
	}
	option = {	#we must purge their influence
		name = r56.ger.34.c
		ai_chance = {
			factor = 1
		}
		FROM = {
			country_event = r56.ger.36
		}
		custom_effect_tooltip = GER_cannot_influence_us_anymore_tt
		set_country_flag = GER_country_cut_all_ties	#has no tooltip
		#downgrade any German-inherited MIO's
		add_timed_idea = { idea = GER_cut_german_trade_ties days = 450 }
	}
}

country_event = { #Integration accepted
	id = r56.ger.35
	title = r56.ger.35.t
	desc = r56.ger.35.desc

	is_triggered_only = yes

	option = {
		name = r56.ger.35.a
		set_autonomy = {
			target = FROM
			autonomy_state = autonomy_dominion
			end_wars = no
			end_civil_wars = no
		}
	}
}

country_event = { #Integration refused
	id = r56.ger.36
	title = r56.ger.36.t
	desc = r56.ger.36.desc

	is_triggered_only = yes

	option = {
		name = r56.ger.36.a
		#nothing
	}
	option = {	#embargo
		name = r56.ger.36.b
		send_embargo = FROM
	}
	option = {	#war/overthrow
		name = r56.ger.36.c
		send_embargo = FROM
		# if = {	#undemocratic behaviour - ofc actually acting upon this will give more tension
		# 	limit = {
		# 		has_government = democratic
		# 	}
		# 	add_threat = 0.3	#amount too small to show up, instead link to action on threats
		# }
		custom_effect_tooltip = GER_hostile_trade_decisions_tt
		hidden_effect = {	#flag setting doesnt have loc anyway
			FROM = {
				set_country_flag = GER_target_for_hostile_trade_influence
			}
		}
	}
}


add_namespace = ger.civil_war

country_event = { #Commie German
	id = ger.civil_war.2
	title = ger.civil_war.2.t
	desc = ger.civil_war.2.desc
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = no

	is_triggered_only = yes

	option = { #Yes
		ai_chance = { 
			factor = 10
		}
		name = ger.civil_war.2.a
		hidden_effect={
			set_nationality = { #mid-rank generals that dont go to Spain and are politically reliable but not too important
				target_country = FROM
				character = SOV_nikolay_vatutin
			}
			set_nationality = {
				target_country = FROM
				character = SOV_vasily_kuznetsov
			}
		}
		SOV_nikolay_vatutin = {
			custom_effect_tooltip = character_changes_country_tt
		}
		SOV_vasily_kuznetsov = {
			custom_effect_tooltip = character_changes_country_tt
		}
		add_to_variable = {
			var = GER_commie_soviet_influence
			value = 1
		}
		set_global_flag = GER_soviets_sent_advisors_to_germany
	}
	option = { #No
		name = ger.civil_war.2.b
		ai_chance = { 
			factor = 1
		}
	}
}

add_namespace = ger.renegotiate_versailles

country_event = { # Democratic Germany offers to renegotiate the treaty of Versailles
	id = ger.renegotiate_versailles.1
	title = ger.renegotiate_versailles.1.t
	desc = ger.renegotiate_versailles.1.d
	picture = GFX_report_event_gre_allied_diplomacy

	fire_only_once = no

	is_triggered_only = yes

	option = { # Sure, why not?
		ai_chance = { 
			factor = 10
		}
		name = ger.renegotiate_versailles.1.a
		diplomatic_relation = {
			country = FROM
			relation = guarantee
			active = yes
		}
		add_opinion_modifier = { target = FROM modifier = ger_abided_by_versailles }
		effect_tooltip = {
			FROM = {
				add_ideas = GER_treaty_of_versailles
			}
		}
		hidden_effect = {
			FROM = {
				country_event = { id = ger.renegotiate_versailles.2 hours = 6 }
			}
		}
	}
	option = { # You wot mate?
		name = ger.renegotiate_versailles.1.b
		ai_chance = { 
			factor = 1
		}
		FROM = {
			country_event = { id = ger.renegotiate_versailles.3 hours = 6 }
		}
	}
}

country_event = { # 
	id = ger.renegotiate_versailles.2
	title = ger.renegotiate_versailles.2.t
	desc = ger.renegotiate_versailles.2.d
	picture = GFX_report_event_generic_sign_treaty3

	fire_only_once = no

	is_triggered_only = yes

	option = { # Sure, why not?
		ai_chance = { 
			factor = 10
		}
		name = ger.renegotiate_versailles.2.a
		if = {
			limit = {
				NOT = {
					has_idea = GER_treaty_of_versailles
				}
			}
			add_ideas = GER_treaty_of_versailles
		}
	}
}

country_event = { # 
	id = ger.renegotiate_versailles.3
	title = ger.renegotiate_versailles.3.t
	desc = ger.renegotiate_versailles.3.d
	picture = GFX_report_event_generic_sign_treaty2

	fire_only_once = yes

	is_triggered_only = yes

	option = { # Sure, why not?
		ai_chance = { 
			factor = 10
		}
		name = ger.renegotiate_versailles.3.a
		add_political_power = 10
	}
}
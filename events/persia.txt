#### NAMESPACES ####

add_namespace = persia
add_namespace = persia.navy
add_namespace = persia.railway
add_namespace = persia.balance

######################################################################
#### EVENTS FROM BEFORE I KNEW YOU COULD USE MULTIPLE NAMESPACES. ####
######################################################################

country_event = {
	id = persia.2
	title = persia.2.t
	desc = persia.2.d
	picture = GFX_report_event_ace_promoted

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.2.a
		add_political_power = -100
		country_event = {
			id = persia.3
			days = 15
			random_days = 3
		}
    }
	
	option = {
	    name = persia.2.b
		add_political_power = -50
		add_tech_bonus = {
			bonus = 0.75
			ahead_reduction = 0.75
			uses = 2
			category = infantry_weapons
		}
    }
}

country_event = {
	id = persia.3
	title = persia.3.t
	desc = persia.3.d
	picture = GFX_report_event_ace_promoted

	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = persia.3.a
		CZE = {
			create_production_license = {
				target = PER
				equipment = {
					type = infantry_equipment_1
					version = 0
				}
				cost_factor = 0
			}
		}
		CZE = {
			add_opinion_modifier = {
				target = PER
				modifier = aided_industry
			}
		}
	    add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 1500
			producer = CZE
		}
		unlock_decision_tooltip = PER_subsidize_zbrojovka_brno
		set_country_flag = PER_zbrojovka_brno_contract
	}
}

country_event = {
	id = persia.4
	title = persia.4.t
	desc = persia.4.d
	picture = GFX_report_event_chinese_army_training

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.4.a
		swap_ideas = {
			remove_idea = PER_agriculture_reform_idea
			add_idea = PER_agriculture_reform_internal
		}
    }
	
	option = {
	    name = persia.4.b
		swap_ideas = {
			remove_idea = PER_agriculture_reform_idea
			add_idea = PER_agriculture_reform_exports
		}
    }
}

country_event = {
	id = persia.5
	title = persia.5.t
	desc = persia.5.d
	picture = GFX_report_event_military_planning
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = persia.5.a
		set_country_flag = PER_new_chief_of_army_flag_1
		retire_character = PER_Azizollah_Zarghami
		add_war_support = 0.025
		add_political_power = 30
		add_advisor_role = {
			character = PER_karim_agha_khan_buzarjomehri
			activate = yes
			advisor = {
				slot = theorist
				cost = 100
				idea_token = PER_karim_agha_khan_buzarjomehri_1
				traits = {
					grand_battle_plan_expert
				}
				allowed = {
					always = yes
				}
			}
		}
	}
	
	option = { # Superior Firepower #
		name = persia.5.b
		set_country_flag = PER_new_chief_of_army_flag_2
		retire_character = PER_Azizollah_Zarghami
		add_political_power = -25
		add_advisor_role = {
			character = PER_ahmad_amirahmadi
			activate = yes
			advisor = {
				slot = theorist
				cost = 100
				idea_token = PER_Ahmad_Amir_Ahmadi_2
				traits = {
					superior_firepower_expert
				}
				allowed = {
					always = yes
				}
			}
		}
	}
	
	option = { # Mass Assault #
		name = persia.5.c
		set_country_flag = PER_new_chief_of_army_flag_3
		retire_character = PER_Azizollah_Zarghami
		add_stability = -0.05
		add_popularity = {
			ideology = neutrality
			popularity = -0.02
		}
		add_advisor_role = {
			character = PER_Fazlollah_Zahedi
			activate = yes
			advisor = {
				slot = theorist
				cost = 100
				idea_token = PER_Fazlollah_Zahedi_1
				traits = {
					mass_assault_expert
				}
				allowed = {
					always = yes
				}
			}
		}
	}
	
	option = { # Mobile Warfare #
		name = persia.5.e
		set_country_flag = PER_new_chief_of_army_flag_4
		retire_character = PER_Azizollah_Zarghami
		add_war_support = -0.05
		add_political_power = -35
		add_advisor_role = {
			character = PER_hasan_arfa
			activate = yes
			advisor = {
				slot = theorist
				cost = 100
				idea_token = PER_hasan_arfa_2
				traits = {
					mobile_warfare_expert
				}
				allowed = {
					always = yes
				}
			}
		}
	}
	
}


country_event = {
	id = persia.6
	title = persia.6.t
	desc = persia.6.d
	picture = GFX_report_event_ace_promoted

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.6.a
		add_timed_idea = {
			idea = PER_pilot_training_idea
			days = 300
		}
	    add_equipment_to_stockpile = {
			type = fighter_equipment_0
			amount = 75
			producer = ENG
		}
    }
}

country_event = {
	id = persia.7
	title = persia.7.t
	desc = persia.7.desc
	picture = GFX_report_event_ace_promoted
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = persia.7.a
		FROM = {
			country_event = {
				id = persia.8
				random_hours = 8
			}
		}
	}
	
	option = {
		trigger = {
			is_ai = no
		}
		name = persia.7.b
		FROM = {
			country_event = {
				id = persia.9
				random_hours = 8
			}
		}
	}
	
}

country_event = { ## Agreement confirmation, PER ##
	id = persia.8
	title = persia.8.t
	desc = persia.8.desc
	picture = GFX_report_event_ace_promoted
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = persia.8.a
		set_country_flag = PER_airforce_agreement_signed
		clr_country_flag = PER_airforce_agreement_in_progress
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = PER_small_relations_boost_10
			}
		}
		if = {
			limit = {
				FROM = { tag = ENG }
			}
			set_country_flag = PER_airforce_agreement_UK
			add_relation_modifier = {
				target = ENG
				modifier = PER_naval_license_acceptance
			}
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_yarrow_shipbuilders
			
		}
		else_if = {
			limit = {
				FROM = { tag = GER }
			}
			add_relation_modifier = {
				target = GER
				modifier = PER_naval_license_acceptance
			}
			set_country_flag = PER_airforce_agreement_germany
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_blohm_und_voss
			
		}
		else_if = {
			limit = {
				FROM = { tag = SOV }
			}
			add_relation_modifier = {
				target = SOV
				modifier = PER_naval_license_acceptance
			}
			set_country_flag = PER_airforce_agreement_USSR
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_black_sea_shipyard
			
		}
		else_if = {
			limit = {
				FROM = { tag = USA }
			}
			add_relation_modifier = {
				target = USA
				modifier = PER_naval_license_acceptance
			}
			set_country_flag = PER_airforce_agreement_US
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_newport_news_shipbuilding
			
		}
		
	}
	
}



##########################
#### BALANCE OF POWER ####
##########################

country_event = { ### Kashf-e hijab
	id = persia.balance.1
	title = persia.balance.1.t
	desc = persia.balance.1.d
	picture = GFX_report_event_kashf_hijab

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.balance.1.a
		add_political_power = 25
		PER_bop_very_low_increase_effect = yes
    }
	
}

country_event = { ### Secular event 1, Clerics grumbling
	id = persia.balance.2
	title = persia.balance.2.t
	desc = persia.balance.2.d
	picture = GFX_report_event_kashf_hijab

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.balance.2.a
		add_stability = -0.05
    }
	
}

country_event = { ### Secular event 2, clerics start protests
	id = persia.balance.3
	title = persia.balance.3.t
	desc = persia.balance.3.d
	picture = GFX_report_event_kashf_hijab

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.balance.3.a
		PER_devout_resistance_up = yes
		add_stability = -0.05
    }
	
}

country_event = { ### Secular event 3, more protests?? riots? civil war?
	id = persia.balance.4
	title = persia.balance.4.t
	desc = persia.balance.4.d
	picture = GFX_report_event_kashf_hijab

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.balance.4.a
		
    }
	
}

country_event = { ### Clerical resistence event, low severity
	id = persia.balance.5
	title = persia.balance.5.t
	desc = persia.balance.5.d
	picture = GFX_report_event_iww_demonstration

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.balance.5.a
		add_stability = -0.01
		PER_bop_tiny_tiny_decrease_effect = yes
    }
	
}

country_event = { ### Clerical resistence event, medium severity
	id = persia.balance.6
	title = persia.balance.6.t
	desc = persia.balance.6.d
	picture = GFX_report_event_iww_demonstration

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.balance.6.a
		add_stability = -0.03
		add_manpower = -980
		PER_bop_tiny_decrease_effect = yes
		PER_devout_resistance_up = yes
    }
	
}

country_event = { ### Clerical resistence event, medium severity
	id = persia.balance.7
	title = persia.balance.7.t
	desc = persia.balance.7.d
	picture = GFX_report_event_iww_demonstration

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.balance.7.a
		add_manpower = -2160
		add_stability = -0.05
		PER_bop_very_low_decrease_effect = yes
		PER_devout_resistance_up = yes
    }
	
}

###############################
#### TRANS IRANIAN RAILWAY ####
###############################

country_event = {
	id = persia.railway.1
	title = persia.railway.1.t
	desc = persia.railway.1.d
	picture = GFX_report_event_trans_iranian_railway_1

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.railway.1.a
		add_political_power = 60
		activate_mission = PER_build_the_railway_mission
		unlock_decision_category_tooltip = PER_construct_trans_iranian_railway_category
		hidden_effect = {
			country_event = {
				id = persia.railway.2
				days = 200
				random_days = 35
			}
		}
    }
	
}

country_event = {
	id = persia.railway.2
	title = persia.railway.2.t
	desc = persia.railway.2.d
	picture = GFX_report_event_trans_iranian_railway_2

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.railway.2.a
		add_political_power = 50
    }
	
}

country_event = {
	id = persia.railway.3
	title = persia.railway.3.t
	desc = persia.railway.3.d
	picture = GFX_report_event_trans_iranian_railway_3

	fire_only_once = yes
	
	is_triggered_only = yes

	option = {
	    name = persia.railway.3.a
		build_railway = {
			level = 2
			path = { 5005 7953 1922 2065 1982 10922 10837 10768 10385 7602 }
		}
		add_stability = 0.05
		add_political_power = 50
		swap_ideas = {
			remove_idea = PER_disconnected_country
			add_idea = PER_disconnected_country_1
		}
    }
}


##############################
####     NAVAL EVENTS     ####
##############################

country_event = {
	id = persia.navy.1
	title = persia.navy.1.t
	desc = persia.navy.1.d
	picture = GFX_report_event_hol_polderen
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = persia.navy.1.a
		
		
	}
	
	option = {
		name = persia.navy.1.b
		
	}
	
	option = {
		name = persia.navy.1.c
		
	}
	
}

country_event = {
	id = persia.navy.2 ## PER asks for Naval Agreement, FROM ##
	title = persia.navy.2.t
	desc = persia.navy.2.desc
	picture = GFX_report_event_generic_sign_treaty1
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = persia.navy.2.a
		FROM = {
			country_event = {
				id = persia.navy.3
				random_hours = 8
			}
		}
	}
	
	option = {
		trigger = {
			is_ai = no
		}
		name = persia.navy.2.b
		FROM = {
			country_event = {
				id = persia.navy.4
				random_hours = 8
			}
		}
	}
}

country_event = { ## Agreement confirmation, PER ##
	id = persia.navy.3
	title = persia.navy.3.t
	desc = persia.navy.3.desc
	picture = GFX_report_event_destroyers
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = persia.navy.3.a
		navy_experience = 5
		unlock_decision_tooltip = PER_transfer_ship_designs_decision
		custom_effect_tooltip = PER_persia_navy_3_tt
		set_country_flag = PER_naval_agreement_signed
		clr_country_flag = PER_naval_agreement_in_progress
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = PER_small_relations_boost_10
			}
		}
		if = {
			limit = {
				FROM = { tag = ENG }
			}
			set_country_flag = PER_naval_agreement_UK
			add_relation_modifier = {
				target = ENG
				modifier = PER_naval_license_acceptance
			}
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_yarrow_shipbuilders
			
		}
		else_if = {
			limit = {
				FROM = { tag = GER }
			}
			add_relation_modifier = {
				target = GER
				modifier = PER_naval_license_acceptance
			}
			set_country_flag = PER_naval_agreement_germany
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_blohm_und_voss
			
		}
		else_if = {
			limit = {
				FROM = { tag = SOV }
			}
			add_relation_modifier = {
				target = SOV
				modifier = PER_naval_license_acceptance
			}
			set_country_flag = PER_naval_agreement_USSR
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_black_sea_shipyard
			
		}
		else_if = {
			limit = {
				FROM = { tag = USA }
			}
			add_relation_modifier = {
				target = USA
				modifier = PER_naval_license_acceptance
			}
			set_country_flag = PER_naval_agreement_US
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = PER_newport_news_shipbuilding
			
		}
		
	}
	
}

country_event = { ## Agreement DENIED, PER notif ##
	id = persia.navy.4
	title = persia.navy.4.t
	desc = persia.navy.4.d
	picture = GFX_report_event_merchant_ship_01
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = persia.navy.4.a
		add_political_power = 25
		clr_country_flag = PER_naval_agreement_in_progress
	}
	
	
}
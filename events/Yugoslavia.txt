###########################
# Yugoslavian Events
###########################

add_namespace = yugoslavia

# Britain to Back Coup in Yugoslavia
country_event = {
	id = yugoslavia.1
	title = yugoslavia.1.t
	desc = yugoslavia.1.d
	picture = GFX_report_event_yugoslavian_king_peter

	fire_only_once = yes
	
	trigger = {
		tag = ENG
		NOT = {
			has_dlc = "Death or Dishonor"
		}
		YUG = {
			OR = {
				is_in_faction_with = GER
				gives_military_access_to = GER
			}
		}
		HUN = { owns_state = 76 }
		GER = {
			OR = {
				AND = { is_in_faction_with = ITA is_in_faction_with = HUN }
				AND = { is_in_faction_with = ITA is_in_faction_with = BUL }
				AND = { is_in_faction_with = HUN is_in_faction_with = BUL }
			}
		}
		ENG = { NOT = { is_in_faction_with = GER } }
	}

	immediate = {
		hidden_effect = { remove_ideas = anti_german_military }
	}

	mean_time_to_happen = {
		days = 14
	}
	
	option = {
		name = yugoslavia.1.a
		add_political_power = -50
		YUG = {
			country_event = { id = yugoslavia.2 }
		}
	}

	option = {
		name = yugoslavia.1.b
		ai_chance = { factor = 0 }
		YUG = { remove_opinion_modifier = { target = ENG modifier = balkan_strategy_good } }
	}
}

# Yugoslavian Coup
country_event = {
	id = yugoslavia.2
	title = yugoslavia.2.t
	desc = yugoslavia.2.d
	picture = GFX_report_event_yugoslavian_king_peter

	is_triggered_only = yes

	immediate = {
		hidden_effect = { remove_ideas = anti_german_military }
	}

	option = {
		name = yugoslavia.2.a
		#retire_country_leader = yes
		#create_country_leader = {
		#	name = "Peter II"
		#	desc = "POLITICS_PETER_II_DESC"
		#	picture = "Portrait_Yugoslavia_Peter_II.dds"
		#	expire = "1965.1.1"
		#	ideology = absolute_monarchism
		#	traits = {
		#		#
		#	}
		#}
		create_country_leader = {
			name = "Dušan Simović"
			picture = "gfx/leaders/YUG/r56_portrait_YUG_Dusan_Simovic.dds"
			expire = "1965.1.1"
			ideology = despotism
			traits = {
				army_connections
				r56_trait_opposed_to_communism
			}
		}
		add_ideas = YUG_peter_II
		if = {
			limit = {
				has_idea = YUG_prince_paul
			}
			remove_ideas = YUG_prince_paul
		}
		
		set_politics = { ruling_party = neutrality elections_allowed = yes }
		add_popularity = { ideology = neutrality popularity = 0.5 }
		set_party_name = { ideology = neutrality long_name = YUG_neutrality_party_2 name = YUG_neutrality_party_2 }
		
		add_timed_idea = { idea = anti_nazi_coup days = 730 }
		add_opinion_modifier = { target = GER modifier = anti_german_coup }
		diplomatic_relation = {
			country = GER
			relation = non_aggression_pact
			active = no
		}
		if = {
			limit = { is_in_faction_with = GER }
			GER = { remove_from_faction = YUG }
		}
		if = {
			limit = { gives_military_access_to = GER }
			GER = {
				diplomatic_relation = {
					country = YUG
					relation = military_access
					active = no
				}
			}
		}
		news_event = { hours = 6 id = news.150 }
	}

	option = {
		name = yugoslavia.2.b
		ai_chance = { factor = 0 }
		start_civil_war = {
			ideology = democratic
			size = 0.4
		}
	}
}



# Yugoslavia (British and (possibly) French Support)
country_event = {
	id = yugoslavia.3
	title = yugoslavia.3.t
	desc = {
		text = yugoslavia.3.d 
		trigger = {
			NOT = { has_global_flag = FRA_abandoned_yugoslavia }
		}
	}
	desc = {
		text = yugoslavia.3.d_FRA_abandoned_yugoslavia
		trigger = {
			has_global_flag = FRA_abandoned_yugoslavia
		}
	}
	picture = GFX_report_event_chamberlain_announce
	
	is_triggered_only = yes
	
	option = {
		name = yugoslavia.3.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 956 853 }
				}
			}
		}
	}
}

# Yugoslavia (French Support)
country_event = {
	id = yugoslavia.4
	title = yugoslavia.3.t
	desc = yugoslavia.4.d
	picture = GFX_report_event_chamberlain_announce
	
	is_triggered_only = yes
	
	option = {
		name = yugoslavia.4.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 956 853 }
				}
			}
		}
	}
}

# Yugoslavia (Abandoned)
country_event = {
	id = yugoslavia.5
	title = yugoslavia.5.t
	desc = yugoslavia.5.d
	picture = GFX_report_event_hitler_croatia_handshake
	
	is_triggered_only = yes
	
	option = { # Surrender Slovenia
		name = yugoslavia.5.a
		ai_chance = {
			factor = 90
			modifier = { # Decrease chance YUG resists if AUS isn't taken first
				AUS = { exists = yes }
				factor = 0.5
			}
			modifier = { # If they stand a chance to hold the line they will fight
				factor = 0.1
				strength_ratio = {
					tag = GER
					ratio > 0.70
				}
			}
			modifier = { #decrease if in faction
				factor = 0.5
				is_in_faction = yes
			}
			modifier = { # Increase it again if other bordering nations are in Axis
				any_neighbor_country = {
					NOT = { tag = GER }
					is_in_faction_with = GER
				}
				factor = 2.0
			}
		}
		GER = { country_event = germany.94 } #Germany gets Slovenia
	}
	option = { # Refuse anyway
		name = yugoslavia.5.b
		ai_chance = { factor = 10 }
		GER = {
			country_event = germany.95 #Germany gains wargoal
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 956 853 }
				}
			}
		}
	}
}


# Yugoslavia (Italian Support)
country_event = {
	id = yugoslavia.6
	title = yugoslavia.3.t
	desc = yugoslavia.6.d
	picture = GFX_report_event_fascists_posing
	
	is_triggered_only = yes
	
	option = {
		name = yugoslavia.6.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 956 853 }
				}
			}
		}
	}
}

# Fate of Yugoslavia
country_event = {
	id = yugoslavia.7
	title = germany.98.t
	desc = yugoslavia.7.d
	picture = GFX_report_event_german_inspect_troops
	
	is_triggered_only = yes
	
	#Nope
	option = {
		name = yugoslavia.7.a
		ai_chance = { 
			factor = 5
		}

		GER = { country_event = { id = germany.111 days = 1 } 
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = YUG
				}
			}
		}
	}

	#Alrighty
	option = {
		name = yugoslavia.7.b
		ai_chance = { 
			factor = 10
			modifier = {
				factor = 0
				is_puppet = yes
			}
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					OR = {
						has_guaranteed = YUG
						is_in_faction_with = YUG
					}
				}
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
		GER = {

			add_political_power = -75
			add_named_threat = { threat = 5 name = GER_fate_of_yugoslavia }
			every_other_country = {
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject_of = YUG
					OR = {
						original_tag = CRO
						original_tag = SLV
						original_tag = MAC
						original_tag = SER
						original_tag = BOS
						original_tag = HRZ
						original_tag = TRA
						original_tag = MNT
						original_tag = KOS
						AND = {
							original_tag = HUN
							has_cosmetic_tag = vojvodina
						}
						original_tag = SER
					}
				}
				GER = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}
			annex_country = { target = YUG transfer_troops = no }

			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_annex_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
	}
}

# Fate of Yugoslavia
country_event = {
	id = yugoslavia.8
	title = germany.98.t
	desc = yugoslavia.8.d
	picture = GFX_report_event_german_inspect_troops
	
	is_triggered_only = yes
	
	#Fuck that
	option = {
		name = yugoslavia.8.a
		ai_chance = { 
			factor = 10
		}

		GER = { country_event = { id = germany.111 days = 1 } 
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = YUG
				}
			}
		}
	}

	#Sure thing
	option = {
		name = yugoslavia.8.b

		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					OR = {
						has_guaranteed = YUG
						is_in_faction_with = YUG
					}
				}
			}
			modifier = {
				factor = 0
				is_puppet = yes
			} 
		}

		trigger = { 
			YUG = { 
				OR = { 
					owns_state = 103
					owns_state = 958
					owns_state = 104
					owns_state = 804
					owns_state = 961
					owns_state = 962
					owns_state = 109
					owns_state = 958
					owns_state = 952
					CRO = { is_puppet_of = YUG }
				} 
			} 
		}

		GER = {		
			add_political_power = -25
			add_named_threat = { threat = 3 name = GER_fate_of_yugoslavia }
			if = {
				limit = {
					CRO = {
						exists = yes
						is_puppet_of = YUG
					}
				}
				GER = {
					puppet = CRO
				}
			}
			else = {
				CRO = {
					if = {
						limit = { YUG = { owns_state = 103 } }
						transfer_state = 103
					}
					if = {
						limit = { YUG = { owns_state = 958 } }
						transfer_state = 958
					}
					if = {
						limit = { YUG = { owns_state = 104 } }
						transfer_state = 104
					}
					if = {
						limit = { YUG = { owns_state = 804 } }
						transfer_state = 804
					}
					if = {
						limit = { YUG = { owns_state = 961 } }
						transfer_state = 961
					}
					if = {
						limit = { YUG = { owns_state = 962 } }
						transfer_state = 962
					}
					if = {
						limit = { YUG = { owns_state = 109 } }
						transfer_state = 109
					}
					if = {
						limit = { YUG = { owns_state = 959 } }
						transfer_state = 959
					}
					if = {
						limit = { YUG = { owns_state = 952 } }
						transfer_state = 952
					}
				}
			puppet = CRO
			}
			every_other_country = {
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject_of = YUG
					OR = {
						original_tag = SLV
						original_tag = MAC
						original_tag = SER
						original_tag = BOS
						original_tag = HRZ
						original_tag = TRA
						original_tag = MNT
						original_tag = KOS
						AND = {
							original_tag = HUN
							has_cosmetic_tag = vojvodina
						}
						original_tag = SER
					}
				}
				GER = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}
			annex_country = { target = YUG transfer_troops = no }
			804 = {
				start_resistance = yes
				set_compliance = 80
				set_resistance = 2
				set_garrison_strength = 0.8
			}
			104 = {
				start_resistance = yes
				set_compliance = 30
				set_resistance = 2
				set_garrison_strength = 0.8
			}
			962 = {
				start_resistance = yes
				set_compliance = 30
				set_resistance = 2
				set_garrison_strength = 0.8
			}
			961 = {
				start_resistance = yes
				set_compliance = 50
				set_resistance = 2
				set_garrison_strength = 0.8
			}								

			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_puppet_CRO_annex_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
	}
}

# Fate of Yugoslavia
country_event = {
	id = yugoslavia.9
	title = germany.98.t
	desc = yugoslavia.9.d
	picture = GFX_report_event_german_inspect_troops
	
	is_triggered_only = yes
	
	#No way
	option = {
		name = yugoslavia.9.a
		ai_chance = { factor = 2 }

		GER = { country_event = { id = germany.111 days = 1 } 
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = YUG
				}
			}
		}
	}

	#Seems fair
	option = {
		name = yugoslavia.9.b
		ai_chance = { 
			factor = 10
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					OR = {
						has_guaranteed = YUG
						is_in_faction_with = YUG
					}
				}
			}
			modifier = {
				factor = 0
				is_puppet = yes
			} 
		}

		GER = {

			add_named_threat = { threat = 2 name = GER_fate_of_yugoslavia }
			if = {
				limit = {
					CRO = {
						exists = yes
						is_puppet_of = YUG
					}
				}
				GER = {
					puppet = CRO
				}
			}
			else = {
				CRO = {
					if = {
						limit = { YUG = { owns_state = 103 } }
						transfer_state = 103
					}
					if = {
						limit = { YUG = { owns_state = 958 } }
						transfer_state = 958
					}
					if = {
						limit = { YUG = { owns_state = 104 } }
						transfer_state = 104
					}
					if = {
						limit = { YUG = { owns_state = 804 } }
						transfer_state = 804
					}
					if = {
						limit = { YUG = { owns_state = 961 } }
						transfer_state = 961
					}
					if = {
						limit = { YUG = { owns_state = 962 } }
						transfer_state = 962
					}
					if = {
						limit = { YUG = { owns_state = 109 } }
						transfer_state = 109
					}
					if = {
						limit = { YUG = { owns_state = 959 } }
						transfer_state = 959
					}
					if = {
						limit = { YUG = { owns_state = 952 } }
						transfer_state = 952
					}
				}
			puppet = CRO
			}
			if = {
				limit = {
					SER = {
						exists = yes
						is_puppet_of = YUG
					}
				}
				GER = {
					puppet = SER
				}
			}
			else = {
				SER = {
					if = {
						limit = { YUG = { owns_state = 107 } }
						transfer_state = 107
					}
					if = {
						limit = { YUG = { owns_state = 108 } }
						transfer_state = 108
					}
					if = {
						limit = { YUG = { owns_state = 105 } }
						transfer_state = 105
					}
					if = {
						limit = { YUG = { owns_state = 106 } }
						transfer_state = 106
					}
					if = {
						limit = { YUG = { owns_state = 802 } }
						transfer_state = 802
					}
					if = {
						limit = { YUG = { owns_state = 950 } }
						transfer_state = 950
					}
					if = {
						limit = { YUG = { owns_state = 953 } }
						transfer_state = 953
					}
					if = {
						limit = { YUG = { owns_state = 803 } }
						transfer_state = 803
					}
					if = {
						limit = { YUG = { owns_state = 764 } }
						transfer_state = 764
					}
					if = {
						limit = { YUG = { owns_state = 45 } }
						transfer_state = 45
					}
				}
			}
			puppet = SER

			every_other_country = {
				limit = {
					capital_scope = {
						is_on_continent = europe
					}
					is_subject_of = YUG
					OR = {
						original_tag = SLV
						original_tag = MAC
						original_tag = BOS
						original_tag = HRZ
						original_tag = TRA
						original_tag = MNT
						original_tag = KOS
						AND = {
							original_tag = HUN
							has_cosmetic_tag = vojvodina
						}
					}
				}
				GER = {
					annex_country = {
						target = PREV
						transfer_troops = no
					}
				}
			}
			hidden_effect = {
				SER = {
					if = {
						limit = {
							has_intelligence_agency = no
							YUG = {
								has_intelligence_agency = yes
							}							
						}
						create_intelligence_agency = yes						
					}
					annex_country = { target = YUG transfer_troops = no }
					if = {
						limit = {
							YUG = { is_ai = no }
						}
						change_tag_from = YUG
					}
				}
			}

			hidden_effect = {
				set_global_flag = GER_fate_of_yugoslavia_puppet_CRO_YUG
				news_event = { hours = 6 id = news.169 }
			}
		}
	}
}


#Fate of Serbia
country_event = {
	id = yugoslavia.10
	title = yugoslavia.10.t
	desc = yugoslavia.10.d
	picture = GFX_report_event_YUG_nedic_army
	
	is_triggered_only = yes

	fire_only_once = yes

	trigger = {
		SER = {
			exists = no
		}
	}
	
	#Military occupation
	option = {
		name = yugoslavia.10.a
		764 = {
			set_compliance = 65
		}
		add_stability = -0.05
		every_state = {
			limit = {
				OR = {
					state = 107
					state = 108
					state = 953
				}
				is_controlled_by = ROOT
			}
			add_resistance = 15
		}
	}

	#Establish Serbia, keep Banat
	option = {
		name = yugoslavia.10.b
		764 = {
			set_compliance = 65
		}
		every_state = {
			limit = {
				OR = {
					state = 107
					state = 108
					state = 953
				}
				is_controlled_by = ROOT
			}
			hidden_effect = {
				set_garrison_strength = 0.85
				remove_core_of = SER
			}
			transfer_state_to = SER
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 107
						state = 108
						state = 953
						state = 764
					}
					is_controlled_by = ROOT
				}
				set_compliance = 35
				set_garrison_strength = 0.85
			}
		}
		GER = {
			if = {
				limit = {
					has_dlc = "Death or Dishonor"
				}
				set_autonomy = {
					target = SER
					autonomous_state = autonomy_reichskommissariat
					end_wars = no
					end_civil_wars = no
				}
			}
			else = {
				puppet = SER
			}
		}
	}

	#Establish Serbia, autonomous Banat
	option = {
		name = yugoslavia.10.c
		every_state = {
			limit = {
				OR = {
					state = 107
					state = 108
					state = 953
					state = 764
				}
				is_controlled_by = ROOT
			}
			hidden_effect = {
				remove_core_of = SER
			}
			transfer_state_to = SER
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 107
						state = 108
						state = 953
						state = 764
					}
					is_controlled_by = SER
				}
				set_garrison_strength = 0.85
				set_compliance = 35
			}
		}
		GER = {
			if = {
				limit = {
					has_dlc = "Death or Dishonor"
				}
				set_autonomy = {
					target = SER
					autonomous_state = autonomy_reichskommissariat
					end_wars = no
					end_civil_wars = no
				}
			}
			else = {
				puppet = SER
			}
		}
	}
}

#Fate of Yugoslavia
country_event = {
	id = yugoslavia.11
	title = yugoslavia.11.t
	desc = yugoslavia.11.d
	picture = GFX_report_event_YUG_captured_soldiers

	is_triggered_only = yes

	fire_only_once = yes

	trigger = {
		has_war_with = YUG
		has_capitulated = no
	}

	option = {
		name = yugoslavia.11.a
		every_state = {
			limit = {
				OR = {
					state = 102
					state = 764
					state = 107
					state = 108
					state = 953
					state = 109
					state = 959
					state = 952
					state = 961
					state = 962
					state = 104
					state = 804
				}
				controller = {
					OR = {
						original_tag = ROOT
						is_in_faction_with = ROOT
					}
					NOT = {
						original_tag = YUG
						tag = CRO
					}
				}
			}
			set_state_controller_to = GER
		}
		if = {
			limit = {
				ITA = {
					has_war_with = YUG
					is_in_faction_with = ROOT
					has_capitulated = no
				}
			}
			every_state = {
				limit = {
					OR = {
						state = 853
						state = 958
						state = 103
						state = 105
						state = 963
					}
					controller = {
						OR = {
							original_tag = ROOT
							is_in_faction_with = ROOT
						}
						NOT = {
							original_tag = YUG
						}
					}
				}
				set_state_controller_to = ITA
			}
			if = {
				limit = {
					ALB = {
						is_puppet_of = ITA
						owns_state = 910
						has_capitulated = no
					}
				}
				every_state = {
					limit = {
						OR = {
							state = 802
							state = 950
						}
						controller = {
							OR = {
								original_tag = ROOT
								is_in_faction_with = ROOT
							}
							NOT = {
								original_tag = YUG
							}
						}
					}
					set_state_controller_to = ALB
				}
			}
		}
		if = {
			limit = {
				HUN = {
					has_war_with = YUG
					is_in_faction_with = ROOT
					has_capitulated = no
					owns_state = 155
					owns_state = 913
				}
			}
			every_state = {
				limit = {
					OR = {
						state = 956
						state = 45
					}
					controller = {
						OR = {
							original_tag = ROOT
							is_in_faction_with = ROOT
						}
						NOT = {
							original_tag = YUG
						}
					}
				}
				set_state_controller_to = HUN
			}
		}
		if = {
			limit = {
				BUL = {
					has_war_with = YUG
					is_in_faction_with = ROOT
					has_capitulated = no
					owns_state = 48
					owns_state = 212
				}
			}
			every_state = {
				limit = {
					OR = {
						state = 106
						state = 803
					}
					controller = {
						OR = {
							original_tag = ROOT
							is_in_faction_with = ROOT
						}
						NOT = {
							original_tag = YUG
						}
					}
				}
				set_state_controller_to = BUL
			}
		}
		if = {
			limit = {
				ROOT = {
					any_controlled_state = {
						OR = {
							state = 107
							state = 108
							state = 953
							state = 764
						}
					}
				}
				SER = {
					exists = no
				}
			}
			country_event = { id = yugoslavia.10 hours = 12 }
		}
		if = {
			limit = {
				ITA = {
					has_war_with = YUG
					has_capitulated = no
					is_in_faction_with = ROOT
					any_controlled_state = {
						OR = {
							state = 103
							state = 958
						}
					}
				}
				CRO = {
					exists = no
				}
			}
			ITA = {
				country_event = { id = yugoslavia.12 hours = 12 }
			}
		}
		if = {
			limit = {
				ITA = {
					NOT = {
						is_in_faction_with = ROOT
						has_war_with = YUG
					}
				}
				CRO = {
					exists = no
				}
			}
			country_event = { id = yugoslavia.12 days = 1 hours = 12 }
		}
	}
}

#Fate of Croatia
country_event = {
	id = yugoslavia.12
	title = yugoslavia.12.t
	desc = yugoslavia.12.d
	picture = GFX_report_event_YUG_pavelic_ustase
	
	is_triggered_only = yes
	
	#Military occupation
	option = {
		name = yugoslavia.12.a
		add_stability = -0.05
		every_state = {
			limit = {
				OR = {
					state = 109
					state = 959
					state = 952
					state = 103
					state = 958
					state = 961
					state = 962
					state = 104
					state = 804
				}
				is_controlled_by = ROOT
			}
			add_resistance = 15
		}
		if = {
			limit = {
				is_in_faction_with = GER
				GER = {
					has_capitulated = no
				}
			}
			GER = {
				country_event = { id = yugoslavia.12 hours = 12 }
			}
		}
	}

	#Establish Croatia, keep Zadar
	option = {
		name = yugoslavia.12.b
		every_state = {
			limit = {
				OR = {
					state = 109
					state = 959
					state = 952
					state = 103
					state = 958
					state = 961
					state = 962
					state = 104
					state = 804
				}
				is_controlled_by = ROOT
			}
			hidden_effect = {
				remove_core_of = CRO
			}
			transfer_state_to = CRO
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 109
						state = 959
						state = 952
						state = 103
						state = 958
					}
					is_controlled_by = CRO
				}
				set_garrison_strength = 0.85
				set_compliance = 45
			}
			every_state = {
				limit = {
					OR = {
						state = 952
						state = 961
						state = 962
						state = 104
						state = 804
					}
					is_controlled_by = CRO
				}
				set_garrison_strength = 0.65
				set_compliance = 15
			}
		}
		if = {
			limit = {
				CRO = {
					is_puppet = no
				}
			}
			ROOT = {
				if = {
					limit = {
						has_dlc = "Death or Dishonor"
					}
					set_autonomy = {
						target = CRO
						autonomous_state = autonomy_reichskommissariat
						end_wars = no
						end_civil_wars = no
					}
				}
				else = {
					puppet = CRO
				}
			}
		}
		if = {
			limit = {
				is_in_faction_with = GER
				GER = {
					has_capitulated = no
				}
				NOT = {
					original_tag = GER
				}
			}
			GER = {
				country_event = { id = yugoslavia.12 hours = 12 }
			}
		}
	}

	#Establish Croatia, give Zadar and Pula
	option = {
		name = yugoslavia.12.c
		trigger = {
			OR = {
				controls_state = 163
				controls_state = 852
			}
		}
		every_state = {
			limit = {
				OR = {
					state = 852
					state = 163
					state = 109
					state = 959
					state = 952
					state = 103
					state = 958
					state = 961
					state = 962
					state = 104
					state = 804
				}
				is_controlled_by = ROOT
			}
			hidden_effect = {
				remove_core_of = CRO
			}
			transfer_state_to = CRO
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 852
						state = 109
						state = 959
						state = 952
						state = 103
						state = 958
						state = 163
					}
					is_controlled_by = ROOT
				}
				set_garrison_strength = 0.85
				set_compliance = 45
			}
			every_state = {
				limit = {
					OR = {
						state = 952
						state = 961
						state = 962
						state = 104
						state = 804
					}
					is_controlled_by = ROOT
				}
				set_garrison_strength = 0.65
				set_compliance = 15
			}
		}
		if = {
			limit = {
				CRO = {
					is_puppet = no
				}
			}
			ROOT = {
				if = {
					limit = {
						has_dlc = "Death or Dishonor"
					}
					set_autonomy = {
						target = CRO
						autonomous_state = autonomy_reichskommissariat
						end_wars = no
						end_civil_wars = no
					}
				}
				else = {
					puppet = CRO
				}
			}
		}
		if = {
			limit = {
				is_in_faction_with = GER
				GER = {
					has_capitulated = no
				}
				NOT = {
					original_tag = GER
				}
			}
			GER = {
				country_event = { id = yugoslavia.12 hours = 12 }
			}
		}
	}
}

# Event For Resistance
country_event = {
	id = yugoslavia.13
	title = yugoslavia.13.t
	desc = yugoslavia.13.d
	picture = GFX_report_event_YUG_uprising
	
	is_triggered_only = yes
	
	option = {
		name = yugoslavia.13.a
		custom_effect_tooltip = r56_YUG_rebellion_event
	}
}

# Event For Surrender
country_event = {
	id = yugoslavia.14
	title = yugoslavia.14.t
	desc = yugoslavia.14.d
	picture = GFX_report_event_YUG_surrender_soldiers
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = yugoslavia.14.a
		if = {
			limit = {
				SER = {
					exists = yes
				}
			}
			YUG = {
				annex_country = {
					target = SER
					transfer_troops = yes
				}
			}
			SER = {
				every_unit_leader = {
					set_nationality = YUG
				}
			}
		}
		else = {
			every_state = {
				limit = {
					owner = {
						tag = YUG
					}
					OR = {
						state = 107
						state = 108
						state = 953
					}
					controller = {
						has_offensive_war_with = YUG
						has_capitulated = no
					}
				}
				transfer_state_to = YUG
			}
			every_state = {
				limit = {
					owner = {
						tag = YUG
					}
					controller = {
						has_offensive_war_with = YUG
						has_capitulated = no
					}
				}
				controller = {
					set_state_owner = PREV
				}
			}
			YUG = {
				every_enemy_country = {
					limit = {
						has_offensive_war_with = YUG
						OR = {
							AND = {
								is_in_faction = yes
								is_faction_leader = yes
							}
							is_major = yes
						}
						has_capitulated = no
					}
					white_peace = YUG
				}
			}
			ROOT = {
				add_to_faction = YUG
			}
		}
		ai_chance = {
			base = 9
		}
	}

	option = {
		name = yugoslavia.14.b
		ai_chance = {
			base = 1
		}
	}
}

# Event For Counter-Resistance
country_event = {
	id = yugoslavia.15
	title = yugoslavia.15.t
	desc = yugoslavia.15.d
	picture = GFX_report_event_YUG_uprising
	
	is_triggered_only = yes
	
	option = {
		name = yugoslavia.15.a
		unlock_decision_category_tooltip = r56_YUG_partisan_resistance_for_controller
		custom_effect_tooltip = r56_YUG_partisan_resistance_for_controller_tt
	}
}

# Event For Bulgaria Pact
country_event = {
	id = yugoslavia.16
	title = yugoslavia.16.t
	desc = yugoslavia.16.d
	picture = GFX_report_event_YUG_bulgaria_pact
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = yugoslavia.16.a
		add_opinion_modifier = {
			target = YUG
			modifier = YUG_pact_of_eternal_friendship
		}
		YUG = {
			add_opinion_modifier = {
				target = ROOT
				modifier = YUG_pact_of_eternal_friendship
			}
		}
		diplomatic_relation = {
			country = YUG
			relation = non_aggression_pact
			active = yes
		}
		every_state = {
			limit = {
				is_owned_by = YUG
				is_core_of = YUG
				is_claimed_by = BUL
			}
			remove_claim_by = BUL
		}
		hidden_effect = {
			YUG = {
				country_event = { id = yugoslavia.17 hours = 12 }
			}
		}
	}

	option = {
		name = yugoslavia.16.b
		hidden_effect = {
			YUG = {
				country_event = { id = yugoslavia.18 hours = 12 }
			}
		}
	}
}

# Event For Bulgaria Pact - YES
country_event = {
	id = yugoslavia.17
	title = yugoslavia.17.t
	desc = yugoslavia.17.d
	picture = GFX_report_event_YUG_bulgaria_pact
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = yugoslavia.17.b
	}
}

# Event For Bulgaria Pact - NO
country_event = {
	id = yugoslavia.18
	title = yugoslavia.18.t
	desc = yugoslavia.18.d
	picture = GFX_report_event_YUG_bulgaria_pact
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = yugoslavia.18.b
	}
}

# Event For Italy Pact
country_event = {
	id = yugoslavia.19
	title = yugoslavia.19.t
	desc = yugoslavia.19.d
	picture = GFX_report_event_YUG_italy_pact
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = yugoslavia.19.a
		add_opinion_modifier = {
			target = YUG
			modifier = YUG_italo_yugoslav_pact
		}
		YUG = {
			add_opinion_modifier = {
				target = ROOT
				modifier = YUG_italo_yugoslav_pact
			}
		}
		diplomatic_relation = {
			country = YUG
			relation = non_aggression_pact
			active = yes
		}
		every_state = {
			limit = {
				is_owned_by = YUG
				is_core_of = YUG
				is_claimed_by = ITA
			}
			remove_claim_by = ITA
		}
		custom_effect_tooltip = MPL_newline
		custom_effect_tooltip = YUG_recognize_italian_albania_italy
		effect_tooltip = {
			add_opinion_modifier = {
				target = YUG
				modifier = YUG_broke_italo_yugoslav_treaty
			}
			create_wargoal = {
				type = topple_government
				target = YUG
				expire = 0
			}
		}
		set_country_flag = YUG_recognized_albania_italian
		hidden_effect = {
			YUG = {
				country_event = { id = yugoslavia.20 hours = 12 }
			}
		}
	}

	option = {
		name = yugoslavia.19.b
		hidden_effect = {
			YUG = {
				country_event = { id = yugoslavia.21 hours = 12 }
			}
		}
	}
}

# Event For Italy Pact - YES
country_event = {
	id = yugoslavia.20
	title = yugoslavia.20.t
	desc = yugoslavia.20.d
	picture = GFX_report_event_YUG_italy_pact
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = yugoslavia.20.a
	}
}

# Event For Italy Pact - NO
country_event = {
	id = yugoslavia.21
	title = yugoslavia.21.t
	desc = yugoslavia.21.d
	picture = GFX_report_event_YUG_italy_pact
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = yugoslavia.21.a
	}
}

# Event For Italy Pact - Reject Dominance
country_event = {
	id = yugoslavia.22
	title = yugoslavia.22.t
	desc = yugoslavia.22.d
	picture = GFX_report_event_YUG_italy_pact
	
	is_triggered_only = yes

	fire_only_once = yes
	
	option = {
		name = yugoslavia.22.a
	}
}

# 1939 Elections - MAIN
country_event = {
	id = yugoslavia.23
	title = yugoslavia.23.t
	desc = yugoslavia.23.d
	picture = GFX_report_event_YUG_elections
	
	is_triggered_only = yes

	fire_only_once = yes

	trigger = {
		NOT = {
			has_government = communism
			has_government = fascism
			has_country_flag = YUG_early_elections_flag
		}
	}

	immediate = {
		if = {
			limit = {
				has_completed_focus = r56_YUG_call_for_early_elections
				has_completed_focus = r56_YUG_found_the_green_shirts
				has_capitulated = no
			}
			set_variable = {
				var = stability_minus
				value = YUG.party_popularity@democratic
			}
			multiply_variable = {
				var = stability_minus
				value = -0.4
			}
		}
	}
	
	option = {
		name = yugoslavia.23.a # Free Elections
		trigger = {
			has_capitulated = no
		}
		complete_national_focus = r56_YUG_the_yugoslav_elections
		effect_tooltip = {
			if = {
				limit = {
					check_variable = {
						YUG.party_popularity@neutrality > YUG.party_popularity@democratic
					}
				}
				add_political_power = 100
				add_stability = 0.05
				add_popularity = {
					ideology = neutrality
					popularity = 0.05
				}
				custom_effect_tooltip = MPL_newline
				if = {
					limit = {
						has_idea = r56_YUG_combating_serb_hegemony
					}
					remove_ideas = r56_YUG_combating_serb_hegemony
				}
				if = {
					limit = {
						has_idea = r56_YUG_bloc_of_national_agreement
					}
					remove_ideas = r56_YUG_bloc_of_national_agreement
				}
			}
			else_if = {
				limit = {
					check_variable = {
						YUG.party_popularity@democratic > YUG.party_popularity@neutrality
					}
				}
				add_political_power = 100
				add_popularity = {
					ideology = democratic
					popularity = 0.05
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
					last_election = "1939.12.10"
					election_frequency = 48
				}
				custom_effect_tooltip = MPL_newline
				if = {
					limit = {
						has_idea = r56_YUG_censorship
					}
					remove_ideas = r56_YUG_censorship
				}
				if = {
					limit = {
						has_idea = r56_YUG_patronage_program
					}
					remove_ideas = r56_YUG_patronage_program
				}
				if = {
					limit = {
						has_idea = r56_YUG_green_shirts
					}
					remove_ideas = r56_YUG_green_shirts
				}
			}
		}
	}

	option = {
		name = yugoslavia.23.b # Rig Elections
		trigger = {
			has_completed_focus = r56_YUG_continue_in_alexanders_footsteps
			has_capitulated = no
		}
		complete_national_focus = r56_YUG_manipulate_the_votes
		effect_tooltip = {
			add_political_power = -150
			add_stability = stability_minus
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
			set_politics = {
				ruling_party = ROOT
				elections_allowed = yes
				last_election = "1939.12.10"
				election_frequency = 48
			}
		}
	}

	option = {
		name = yugoslavia.23.c
		trigger = {
			has_completed_focus = r56_YUG_dreaming_a_new_dream
			has_capitulated = no
		}
		complete_national_focus = r56_YUG_boycott_the_elections
		effect_tooltip = {
			add_political_power = -100
			add_stability = -0.15
			add_popularity = {
				ideology = democratic
				popularity = -0.1
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			set_politics = {
				ruling_party = ROOT
				elections_allowed = yes
				last_election = "1939.12.10"
				election_frequency = 48
			}
		}
	}

	option = {
		name = yugoslavia.23.d # Postpone Elections
		trigger = {
			has_capitulated = yes
		}
		custom_effect_tooltip = r56_YUG_postpone_elections
		set_country_flag = r56_YUG_postpone_elections_flag
	}
}

# 1939 Elections - EARLY
country_event = {
	id = yugoslavia.24
	title = yugoslavia.24.t
	desc = yugoslavia.24.d
	picture = GFX_report_event_YUG_elections
	
	is_triggered_only = yes

	fire_only_once = yes

	trigger = {
		date > 1938.12.1
		NOT = {
			has_capitulated = yes
			has_government = communism
			has_government = fascism
			has_country_flag = YUG_early_elections_flag
		}
	}

	immediate = {
		if = {
			limit = {
				has_completed_focus = r56_YUG_call_for_early_elections
				has_completed_focus = r56_YUG_found_the_green_shirts
			}
			set_variable = {
				var = stability_minus
				value = YUG.party_popularity@democratic
			}
			multiply_variable = {
				var = stability_minus
				value = -0.4
			}
		}
	}
	
	option = {
		name = yugoslavia.24.a # Free Elections
		trigger = {
			has_capitulated = no
		}
		complete_national_focus = r56_YUG_the_yugoslav_elections
		effect_tooltip = {
			if = {
				limit = {
					check_variable = {
						YUG.party_popularity@neutrality > YUG.party_popularity@democratic
					}
				}
				add_political_power = 100
				add_stability = 0.05
				add_popularity = {
					ideology = neutrality
					popularity = 0.05
				}
				custom_effect_tooltip = MPL_newline
				if = {
					limit = {
						has_idea = r56_YUG_combating_serb_hegemony
					}
					remove_ideas = r56_YUG_combating_serb_hegemony
				}
				if = {
					limit = {
						has_idea = r56_YUG_bloc_of_national_agreement
					}
					remove_ideas = r56_YUG_bloc_of_national_agreement
				}
			}
			else_if = {
				limit = {
					check_variable = {
						YUG.party_popularity@democratic > YUG.party_popularity@neutrality
					}
				}
				add_political_power = 100
				add_popularity = {
					ideology = democratic
					popularity = 0.05
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
					last_election = "1939.12.10"
					election_frequency = 48
				}
				custom_effect_tooltip = MPL_newline
				if = {
					limit = {
						has_idea = r56_YUG_censorship
					}
					remove_ideas = r56_YUG_censorship
				}
				if = {
					limit = {
						has_idea = r56_YUG_patronage_program
					}
					remove_ideas = r56_YUG_patronage_program
				}
				if = {
					limit = {
						has_idea = r56_YUG_green_shirts
					}
					remove_ideas = r56_YUG_green_shirts
				}
			}
		}
	}

	option = {
		name = yugoslavia.24.b # Rig Elections
		trigger = {
			has_completed_focus = r56_YUG_continue_in_alexanders_footsteps
			has_capitulated = no
		}
		complete_national_focus = r56_YUG_manipulate_the_votes
		effect_tooltip = {
			add_political_power = -150
			add_stability = stability_minus
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
			set_politics = {
				ruling_party = ROOT
				elections_allowed = yes
				last_election = "1939.12.10"
				election_frequency = 48
			}
		}
	}

	option = {
		name = yugoslavia.24.c
		trigger = {
			has_completed_focus = r56_YUG_dreaming_a_new_dream
			has_capitulated = no
		}
		complete_national_focus = r56_YUG_boycott_the_elections
		effect_tooltip = {
			add_political_power = -100
			add_stability = -0.15
			add_popularity = {
				ideology = democratic
				popularity = -0.1
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			set_politics = {
				ruling_party = ROOT
				elections_allowed = yes
				last_election = "1939.12.10"
				election_frequency = 48
			}
		}
	}

	option = {
		name = yugoslavia.24.d # Postpone Elections
		trigger = {
			has_capitulated = yes
		}
		custom_effect_tooltip = r56_YUG_postpone_elections
		set_country_flag = r56_YUG_postpone_elections_flag
	}
}

country_event = { # ALLIANCE WITH PAKISTAN?
	id = yugoslavia.25
	title = yugoslavia.25.t
	desc = yugoslavia.25.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	option = {
		name = yugoslavia.25.a # Honor the Alliance
		FROM = {
			every_enemy_country = {
				limit = {
					tag = HUN
				}
				ROOT = {
					add_to_faction = FROM
					add_to_war = {
						targeted_alliance = FROM
						enemy = PREV
						hostility_reason = asked_to_join
					}
				}
			}
		}
	}

	option = {
		name = yugoslavia.25.b # Dont honor it
	}
}
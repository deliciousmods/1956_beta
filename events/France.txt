###########################
# French Events
###########################

add_namespace = france

	############################
		#### MOD : FRANCE SECTION ####
	############################
	
#Legislative Election
country_event = {
	id = france.100
	title = france.100.t
	desc = france.100.d
	picture = GFX_report_event_election_vote
	
	fire_only_once = yes
	
	trigger = {
        tag = FRA
		has_government = democratic
		date > 1936.5.03
		NOT = {
			has_completed_focus = FRA_far_right_leagues
			has_completed_focus = FRA_action_francaise
			has_country_flag = FRA_1936_election
		}
	}
	
	option = {
		name = france.100.a
		set_country_flag = FRA_1936_election
		promote_character = FRA_léon_blum
		set_party_name = { 
		    ideology = democratic 
		    long_name = "Section Française De L'Internationale Ouvrière" 
		    name = "SFIO"
		}
		set_country_flag = legislative_election
		hidden_effect = {
			every_country = { 
				if = {
					limit = {
						exists = yes
						has_capitulated = no
						OR = {
							is_subject_of = FRA
							any_owned_state = {
								is_on_continent = europe
							}
						}
					}
					news_event = { 
						hours = 8
						id = france.152
					}
				}
			}	
		}
	}
}
 
#Legislative Election (Right Wing Victory)
country_event = {
	id = france.154
	title = france.154.t
	desc = france.154.d
	picture = GFX_report_event_election_vote
	
	fire_only_once = yes
	
	trigger = {
        tag = FRA
		has_government = democratic
		date > 1936.5.03
		OR = {
			has_completed_focus = FRA_far_right_leagues
			has_completed_focus = FRA_action_francaise
		}
		NOT = {
			has_country_flag = FRA_1936_election
		}
	}
	
	option = {
		name = france.154.a
		set_country_flag = FRA_1936_election
		create_country_leader = {
			name = "Pierre-Étienne Flandin"
			picture = "gfx/leaders/FRA/r56_Portrait_FRA_Pierre_Etienne_Flandin.dds"
			expire = "1965.1.1"
			ideology = conservatism
		}
		set_party_name = {
		    ideology = democratic 
		    long_name = "Fédération Républicaine" 
		    name = "Fédération Républicaine"
		}
		set_country_flag = legislative_election
		hidden_effect = {
			hidden_effect = {
				every_country = { 
					if = {
						limit = {
							exists = yes
							has_capitulated = no
							OR = {
								is_subject_of = FRA
								any_owned_state = {
									is_on_continent = europe
								}
							}
						}
						news_event = { 
							hours = 8
							id = france.153
						}
					}
				}	
			}
		}
	}
}

# The Hoare-Laval Pact
country_event = {
	id = france.101
	title = france.101.t
	desc = france.101.d
	picture = GFX_report_event_pierre_laval

	fire_only_once = yes

	trigger = {
        tag = FRA
		has_government = democratic
		date > 1936.1.24
	}
	option = {
		name = france.101.a
		retire_country_leader = yes
		promote_character = FRA_albert_sarraut
		set_country_flag = laval_resigned
		add_stability = -0.02
	}
}

# Blum resigns
country_event = {
	id = france.102
	title = france.102.t
	desc = france.102.d
	picture = GFX_report_event_generic_rally

	is_triggered_only	= yes

	option = {
		name = france.102.a
		retire_country_leader = yes
		promote_character = FRA_edouard_daladier
		set_party_name = { 
		    ideology = democratic 
		    long_name = "Parti Radical" 
		    name = "Parti Radical"
		}
		set_country_flag = blum_resigned
	}
}

# Deflation event
country_event = {
	id = france.103
	title = france.103.t
	desc = france.103.d
	picture = GFX_report_event_generic_factory
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = france.103.a
		custom_effect_tooltip = FRA_deflation_tooltip
		add_ideas = FRA_deflation1
		set_country_flag = deflation
		unlock_decision_category_tooltip = FRA_economic_reforms
		unlock_decision_tooltip = FRA_devaluation
	}
}


# Communists remove their support
country_event = {
	id = france.105
	title = france.105.t
	desc = france.105.d
	picture = GFX_report_event_gathering_protest
	
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		has_government = democratic
		NOT = {
			has_completed_focus = FRA_popular_front_united
		}
	}
	
	option = {
		name = france.105.a
		add_popularity = {
			ideology = communism
			popularity = 0.2
		}
		add_political_power = -50	
		set_country_flag = communist_resigned
	}
}


# Communists support the government
country_event = {
	id = france.106
	title = france.106.t
	desc = france.106.d
	picture = GFX_report_event_communists_cheer
	
	is_triggered_only = yes
	
	option = {
		name = france.106.a
		add_popularity = {
			ideology = communism
			popularity = -0.15
		}
		add_political_power = 100	
		set_country_flag = communist_support
	}
}

# End of the Popular Front
country_event = {
	id = france.107
	title = france.107.t
	desc = france.107.d
	picture = GFX_report_event_generic_sign_treaty2
	
	fire_only_once = yes

	is_triggered_only = yes
	
	option = {
		name = france.107.a
		set_country_flag = FRA_popular_front_was_dealth_with
		swap_ideas = {
			remove_idea = FRA_disjointed_government
			add_idea = FRA_reforms_failed
		}
		retire_country_leader = yes
		promote_character = FRA_camille_chautemps
		hidden_effect = {	
			set_country_flag = front_explosed
		}
	}
}

# Invitation BEL and LUX to Allies
country_event = {
	id = france.108
	title = france.108.t
	desc = france.108.d
	picture = GFX_report_event_worried_french
	
	is_triggered_only = yes
	
	option = {
		name = france.108.a
		ai_chance = { base = 100 }
	}

	option = {
		name = france.108.b
		ai_chance = { base = 0 }
		FRA = { country_event = france.110 }
	}
}

# UK Accepts
country_event = {
	id = france.109
	title = france.109.t
	desc = france.109.d
	picture = GFX_report_event_soldiers_in_france
	
	is_triggered_only = yes
	
	option = {
		name = france.109.a
		hidden_effect = {
			BEL = { country_event = { id = france.124 days = 1 } }
			LUX = { country_event = { id = france.124 days = 1 } }
		}
	}
}

# UK Refuses
country_event = {
	id = france.110
	title = france.110.t
	desc = france.110.d
	picture = GFX_report_event_finnish_letter
	
	is_triggered_only = yes
	
	option = {
		name = france.110.a
	}
}

# La Cagoule Coup
country_event = {
	id = france.111
	title = france.111.t
	desc = france.111.d
	picture = GFX_report_event_fascist_gathering
	
	is_triggered_only = yes
	
	option = {
		name = france.111.b
		add_timed_idea = { idea = FRA_consolidating_power days = 365 }
	}
}

# PPF referendum
country_event = {
	id = france.112
	title = france.112.t
	desc = france.112.d
	picture = GFX_report_event_fascist_gathering

	is_triggered_only = yes

	option = {
		name = france.112.a
		
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
			long_name = FRA_fascism_party2_long
			name = FRA_fascism_party2
		}
		retire_country_leader = yes
		promote_character = FRA_jacques_doriot
	}
}

# Demand Wallonia
country_event = {
	id = france.113
	title = france.113.t
	desc = france.113.d	
	picture = GFX_report_event_generic_rally
	
	is_triggered_only = yes
	
	option = {
		name = france.113.a
		ai_chance = {
			base = 60
		}
		
		FRA = {
			country_event = { id = france.114 }
		}
	}
	
	option = {
		name = france.113.b
		ai_chance = {
			base = 40
		}
		add_war_support = 0.15
		add_stability = 0.1


		effect_tooltip = {
			if = {
				limit = {
					country_exists = BEL
				}
				FRA = {
					create_wargoal = {
						type = take_state_focus
						target = BEL
						generator = { 34 965 } 
					}			
				}
				
			}
			if = {
				limit = {
					country_exists = WLL
				}
				FRA = {
					create_wargoal = {
						type = take_state_focus
						target = WLL
						generator = { 34 965 }
					}			
				}
				
			}			
		}
		hidden_effect = { FRA = { country_event = { id = france.115 } } }
	}
}

# Belgium accepts
country_event = {
	id = france.114
	title = france.114.t
	desc = france.114.d
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
	
	option = {
		name = france.114.a
		FRA = { transfer_state = 34 }
		if = {
			limit = {
				OR = {
					any_country_with_original_tag = {
						original_tag_to_check = BEL
						owns_state = 965
					}
					any_country_with_original_tag = {
						original_tag_to_check = WLL
						owns_state = 965
					}				
				}
			}

			FRA = { transfer_state = 965 }
		} 
	}
}

#Belgium refuses
country_event = {
	id = france.115
	title = france.115.t
	desc = france.115.d
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes
	
	option = {
		name = france.115.a
		if = {
			limit = {
				country_exists = BEL
			}
			create_wargoal = {
				type = take_state_focus
				target = BEL
				generator = { 34 965 }
			}			
		}
		if = {
			limit = {
				country_exists = WLL
			}
			create_wargoal = {
				type = take_state_focus
				target = WLL
				generator = { 34 965 }
			}			
		}
	}
}

# Slipt Swizeland demand
country_event = {
	id = france.116
	title = france.116.t
	desc = france.116.d	
	picture = GFX_report_event_generic_rally
	
	is_triggered_only = yes
	
	option = {
		name = france.116.a
		ai_chance = {
			base = 90
		}
		
		FRA = {
			country_event = { id = france.117 }
		}

	}
	
	option = {
		name = france.116.b	
		ai_chance = {
			base = 20
		}
		
		FRA = { country_event = { id = france.116 } }

	}
}

# Germany accepts
country_event = {
	id = france.117
	title = france.117.t
	desc = france.117.d
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
	
	option = {
		name = france.117.a
		GER = { transfer_state = 151 } 
		annex_country = { target = SWI transfer_troops = no }
	}
}

#Germany refuses
country_event = {
	id = france.118
	title = france.118.t
	desc = france.118.d
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes
	
	option = {
		name = france.118.a
	}
}

# Petain at the government
#country_event = {
#	id = france.51
#	title = france.51.t
#	desc = france.51.d
#	picture = GFX_report_event_election_vote
#
#	fire_only_once = yes
#
#	trigger = {
#       tag = FRA
#		has_government = democratic
#		NOT = { has_completed_focus = FRA_popular_front_united }
#		has_defensive_war_with = GER 
#		date > 1940.06.16
#	}
#	option = {
#		name = france.51.a
#		retire_country_leader = yes
#		create_country_leader = {
#			name = "Philippe Pétain"
#			desc = "POLITICS_PHILIPPE_PÉTAIN_DESC"
#			picture = "Portrait_France_Philippe_Petain.dds"
#			expire = "1965.1.1"
#			ideology = conservatism
#		}
#		set_country_flag = petain_lead
#	}
#}

# Paul Reynaud
country_event = {
	id = france.122
	title = france.122.t
	desc = france.122.d
	picture = GFX_report_event_election_vote

	fire_only_once = yes

	trigger = {
        tag = FRA
		has_government = democratic
		NOT = { has_completed_focus = FRA_popular_front_united }
		has_defensive_war_with = GER 
		date > 1939.09.01
	}
	option = {
		name = france.122.a
		retire_country_leader = yes
		promote_character = FRA_paul_reynaud
		set_country_flag = reynaud_lead
	}
}

# Restoration monarchy
country_event = {
	id = france.123
	title = france.123.t
	desc = france.123.d
	picture = GFX_report_event_fascist_gathering

	is_triggered_only = yes

	option = {
		name = france.123.a
	}
	
}

# Invitation to French Faction
country_event = {
	id = france.124
	title = france.124.t
	desc = france.124.d
	picture = GFX_report_event_worried_french
	
	is_triggered_only = yes
	
	option = {
		name = france.124.a
		ai_chance = { base = 100 }
		FRA = {
			country_event = france.125
			add_to_faction = ROOT
		}
		add_ai_strategy = {
			type = alliance
			id = "FRA"
			value = 200
		}
	#	hidden_effect = {
	#		set_country_flag = alliance_applicant@ROOT
	#		FROM = { set_country_flag = alliance_inviter@ROOT }
	#		news_event = { id = news.289 hours = 12 }
	#	}		
	}

	option = {
		name = france.124.b
		ai_chance = { base = 0 }
		FRA = { country_event = france.126 }
	}
}

# [Country] Accepts
country_event = {
	id = france.125
	title = france.125.t
	desc = france.125.d
	picture = GFX_report_event_soldiers_in_france
	
	is_triggered_only = yes
	
	option = {
		name = france.125.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

# [Country] Refuses
country_event = {
	id = france.126
	title = france.126.t
	desc = france.126.d
	picture = GFX_report_event_finnish_letter
	
	is_triggered_only = yes
	
	option = {
		name = france.126.a
	}
}

# Fate of Benelux
country_event = {
	id = france.127
	title = france.127.t
	desc = france.127.d
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
	
	option = {
		name = france.127.a
		if = {	#demand annexation
			limit = {
				country_exists = LUX
			}
			LUX = {
				country_event = { days = 1 id = france.133 }
			}			
		}
		BEL = {	#demand subjegation
			if = {
				limit = {
					exists = yes
					NOT = {
						is_subject_of = ROOT
					}
				}
				country_event = { days = 1 id = france.136 }
			}
		}
		HOL = {	#demand subjegation
			if = {
				limit = {
					exists = yes
					NOT = {
						is_subject_of = ROOT
					}
				}
				country_event = { days = 1 id = france.139 }
			}
		}
		if = {
			limit = {
				country_exists = FLA
			}
			create_wargoal = {
				type = annex_everything
				target = FLA
			}			
		}		
		if = {
			limit = {
				country_exists = WLL
			}
			create_wargoal = {
				type = annex_everything
				target = WLL
			}			
		}		
	}
}

# Communist Coup
country_event = {
	id = france.128
	title = france.128.t
	desc = france.128.d
	picture = GFX_report_event_generic_riot
	
	is_triggered_only = yes
	
	option = {
		name = france.128.a
		if = {
			limit = {
				NOT = { has_government = communism }
			}
			set_politics = {
				ruling_party = communism
				elections_allowed = no
			}
		}
		if = {
			limit = {
				has_government = communism
			}
			add_political_power = 100
		}
		add_popularity = {
			ideology = democratic
			popularity = -0.25
		}
		add_popularity = {
			ideology = fascism
			popularity = -0.10
		}
		news_event = { hours = 6 id = news.178 }
	}
	
}
	
# Economic Agreement
country_event = {
	id = france.129
	title = france.129.t
	desc = france.129.d
	picture = GFX_report_event_journalists_speech
	
	is_triggered_only = yes
	
	option = {
		name = france.129.a
		ai_chance = { base = 50 }
		add_tech_bonus = {
			name = industrial_bonus
			bonus = 0.5
			uses = 1
			category = industry
		}
		add_tech_bonus = {
			name = electronics_bonus
			bonus = 0.5
			uses = 3
			category = electronics
		}
	}

	option = {
		name = france.129.b
		ai_chance = { base = 50 }
		add_doctrine_cost_reduction = {
			name = land_doc_bonus
			cost_reduction = 0.5
			uses = 2
			category = land_doctrine
		}
	}
	
	option = {
		name = france.129.c
		ai_chance = { base = 50 }
		trigger = {	#no embargoing instead of buffs when youre literally at war with them
			NOT = {
				ROOT = {
					has_war_with = GER
				}
				ENG = {
					has_war_with = GER
				}
			}
		}
		ROOT = {
			send_embargo = GER
			custom_effect_tooltip = embargo_relation_tt
		}
		ENG = {
			send_embargo = GER
			custom_effect_tooltip = embargo_relation_tt
		}
	}
}


# Appoint a Material Designer
country_event = {
	id = france.130
	title = france.130.t
	desc = france.130.d
	picture = GFX_report_event_journalists_speech
	
	is_triggered_only = yes
	
	option = {
		name = france.130.a
		ai_chance = { base = 50 }
		add_ideas = bayonne
	}

	option = {
		name = france.130.b
		ai_chance = { base = 50 }
		add_ideas = puteaux
	}
	
	option = {
		name = france.130.c
		ai_chance = { base = 50 }
		add_ideas = bouton
	}
	
	option = {
		name = france.130.e
		ai_chance = { base = 50 }
		add_political_power = 75
	}
}

# Commit a Tank Designer - PRE AAT
country_event = {
	id = france.131
	title = france.131.t
	desc = france.131.d
	picture = GFX_report_event_journalists_speech
	
	is_triggered_only = yes
	
	option = {
		name = france.131.a
		ai_chance = { base = 50 }
		add_ideas = dietrich
	}

	option = {
		name = france.131.b
		ai_chance = { base = 50 }
		add_ideas = berliet
	}
	
	option = {
		name = france.131.c
		ai_chance = { base = 50 }
		add_ideas = delaunay
	}
	
	option = {
		name = france.131.e
		ai_chance = { base = 50 }
		add_political_power = 75
	}
}
# Commit a Tank Designer - POST AAT - Doesn't give op designers ;( but works atleast?
add_namespace = france.aat
country_event = {
	id = france.aat.1
	title = france.aat.1.t
	desc = france.aat.1.d
	picture = GFX_report_event_journalists_speech
	is_triggered_only = yes
	
	option = { # Hotchkiss
		name = france.aat.1.a
		ai_chance = { base = 50 }
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}    
			show_mio_tooltip = FRA_hotchkiss_organization 
			mio:FRA_hotchkiss_organization = {
				add_mio_size = 1
				add_mio_funds = 500
			}
		}
	}

	option = { # Renault
		name = france.aat.1.b
		ai_chance = { base = 50 }
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}    
			show_mio_tooltip = FRA_renault_organization
			mio:FRA_renault_organization = {
				add_mio_size = 1
				add_mio_funds = 500
			}
		}
	}
	
	option = { # APX
		name = france.aat.1.c
		ai_chance = { base = 50 }	
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}    
			show_mio_tooltip = FRA_apx_organization
			mio:FRA_apx_organization = {
				add_mio_size = 1
				add_mio_funds = 500
			}
		}
	}
}

country_event = {
	id = france.aat.2
	title = france.aat.2.t
	desc = france.aat.2.desc
	picture = GFX_report_event_journalists_speech
	is_triggered_only = yes
	
	option = { # Fund MAS
		name = france.aat.2.a
		ai_chance = { base = 50 }
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}    
			show_mio_tooltip = FRA_mas_organization
			mio:FRA_mas_organization = {
				add_mio_size = 1
				add_mio_funds = 500
			}
		}
	}

	option = { # Fund Schneider
		name = france.aat.2.b
		ai_chance = { base = 50 }
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}    
			show_mio_tooltip = FRA_schneider_organization
			mio:FRA_schneider_organization = {
				add_mio_size = 1
				add_mio_funds = 500
			}
		}
	}
	
	option = { # Fund Panhard
		name = france.aat.2.c
		ai_chance = { base = 50 }	
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}    
			show_mio_tooltip = FRA_panhard_organization
			mio:FRA_panhard_organization = {
				add_mio_size = 1
				add_mio_funds = 500
			}
		}
	}

	option = { # Fund Somua
		name = france.aat.2.d
		ai_chance = { base = 50 }	
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}    
			show_mio_tooltip = FRA_somua_organization
			mio:FRA_somua_organization = {
				add_mio_size = 1
				add_mio_funds = 500
			}
		}
	}
}
# Hidden event to remove Industrial Support idea when France go to war
country_event = {
    id = france.132
    hidden = yes
 
    fire_only_once = yes

    trigger = {
        tag = FRA
		has_war = yes
	}

    immediate = {
    	remove_ideas = FRA_industrial_support1
		remove_ideas = FRA_industrial_support2
		remove_ideas = FRA_industrial_support3
		remove_ideas = FRA_industrial_support4
		remove_ideas = FRA_industrial_support5
		remove_ideas = FRA_industrial_support6
		remove_ideas = FRA_industrial_support7
		remove_ideas = FRA_industrial_support8
		remove_ideas = FRA_industrial_support9
		set_country_flag = { flag = FRA_nationalize_industy_3 value = 1 }
		set_country_flag = { flag = FRA_nationalize_military_complex_3 value = 1 }
		set_country_flag = { flag = FRA_nationalize_aircraft_3 value = 1 }
    }

    option = {
        
    }
}

# French Ultimatum (Luxemburg)
country_event = {
	id = france.133
	title = france.133.t
	desc = france.133.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	
	option = { # Accept demands
		name = france.133.a
		ai_chance = {
			base = 10
			modifier = { # Don't accept if in a faction that can protect them
				factor = 0
				OR = {
					any_other_country = {
						is_major = yes
						OR = {
							is_in_faction_with = LUX
							has_guaranteed = LUX
						}
					}
					FRA = { surrender_progress > 0.5 }
				}
			}
		}
		FRA = {
			country_event = { days = 5 id = france.134 }
		}
		custom_effect_tooltip = GAME_OVER_TT
	}
	option = { # Refuse
		name = france.133.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				OR = {
					is_historical_focus_on = no
					any_other_country = {
						is_major = yes
						is_in_faction_with = LUX
					}
				}
			}
			modifier = {
				add = 5
				any_other_country = {
					is_major = yes
					has_guaranteed = LUX
				}
			}
		}

		FRA = {
			country_event = { days = 5 id = france.135 }
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = LUX
				}	
			}
		}
	}
}

# Luxemburg Surrenders
country_event = {
	id = france.134
	title = france.134.t
	desc = france.134.d
	picture = GFX_report_event_soviet_invasion_map
	
	is_triggered_only = yes
	
	option = {
		name = france.134.a
		annex_country = { target = LUX }
	}
}

# Luxemburg Refuses
country_event = {
	id = france.135
	title = france.135.t
	desc = france.135.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = france.135.a
		create_wargoal = {
			type = annex_everything
			target = LUX
		}		
	}
}

# French Ultimatum (Belgium)
country_event = {
	id = france.136
	title = france.136.t
	desc = france.136.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	
	option = { # Accept demands
		name = france.136.a
		ai_chance = {
			base = 10
			modifier = { # Don't accept if in a faction that can protect them
				factor = 0
				OR = {
					any_other_country = {
						is_major = yes
						OR = {
							is_in_faction_with = BEL
							has_guaranteed = BEL
						}
					}
					FRA = { surrender_progress > 0.5 }
				}
			}
		}
		FRA = {
			country_event = { days = 5 id = france.137 }
		}
	}
	option = { # Refuse
		name = france.136.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				OR = {
					is_historical_focus_on = no
					any_other_country = {
						is_major = yes
						is_in_faction_with = BEL
					}
				}
			}
			modifier = {
				add = 5
				any_other_country = {
					is_major = yes
					has_guaranteed = BEL
				}
			}
		}

		FRA = {
			country_event = { days = 5 id = france.138 }
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = BEL
				}	
			}
		}
	}
}


# Belgium Surrenders
country_event = {
	id = france.137
	title = france.137.t
	desc = france.137.d
	picture = GFX_report_event_soviet_invasion_map
	
	is_triggered_only = yes
	
	option = {
		name = france.137.a
		FRA = { puppet = BEL }
	}
}

# Belgium Refuses
country_event = {
	id = france.138
	title = france.138.t
	desc = france.138.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = france.138.a
		create_wargoal = {
			type = annex_everything
			target = BEL
		}		
	}
}

# French Ultimatum (Holland)
country_event = {
	id = france.139
	title = france.139.t
	desc = france.139.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	
	option = { # Accept demands
		name = france.139.a
		ai_chance = {
			base = 10
			modifier = { # Don't accept if in a faction that can protect them
				factor = 0
				OR = {
					any_other_country = {
						is_major = yes
						OR = {
							is_in_faction_with = HOL
							has_guaranteed = HOL
						}
					}
					FRA = { surrender_progress > 0.5 }
				}
			}
		}
		FRA = {
			country_event = { days = 5 id = france.140 }
		}
	}
	option = { # Refuse
		name = france.139.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				OR = {
					is_historical_focus_on = no
					any_other_country = {
						is_major = yes
						is_in_faction_with = HOL
					}
				}
			}
			modifier = {
				add = 5
				any_other_country = {
					is_major = yes
					has_guaranteed = HOL
				}
			}
		}

		FRA = {
			country_event = { days = 5 id = france.141 }
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = HOL
				}	
			}
		}
	}
}


# Holland Surrenders
country_event = {
	id = france.140
	title = france.140.t
	desc = france.140.d
	picture = GFX_report_event_soviet_invasion_map
	
	is_triggered_only = yes
	
	option = {
		name = france.140.a
		FRA = { puppet = HOL }
		FRA = { puppet = INS }
	}
}

# Holland Refuses
country_event = {
	id = france.141
	title = france.141.t
	desc = france.141.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = france.141.a
		create_wargoal = {
			type = annex_everything
			target = HOL
		}		
	}
}

# French Ultimatum (Haiti)
country_event = {
	id = france.142
	title = france.142.t
	desc = france.142.d
	picture = GFX_report_event_soviet_soldiers
	
	is_triggered_only = yes
	
	option = { # Accept demands
		name = france.142.a
		ai_chance = {
			base = 10
			modifier = { # Don't accept if in a faction that can protect them
				factor = 0
				OR = {
					any_other_country = {
						is_major = yes
						OR = {
							is_in_faction_with = HAI
							has_guaranteed = HAI
						}
					}
					FRA = { surrender_progress > 0.5 }
				}
			}
		}
		FRA = {
			country_event = { days = 5 id = france.143 }
		}
	}
	option = { # Refuse
		name = france.142.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				OR = {
					is_historical_focus_on = no
					any_other_country = {
						is_major = yes
						is_in_faction_with = HAI
					}
				}
			}
			modifier = {
				add = 5
				any_other_country = {
					is_major = yes
					has_guaranteed = HAI
				}
			}
		}

		FRA = {
			country_event = { days = 5 id = france.144 }
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = HAI
				}	
			}
		}
	}
}


# Haiti Surrenders
country_event = {
	id = france.143
	title = france.143.t
	desc = france.143.d
	picture = GFX_report_event_soviet_invasion_map
	
	is_triggered_only = yes
	
	option = {
		name = france.143.a
		FRA = { puppet = HAI }
	}
}

# Haiti Refuses
country_event = {
	id = france.144
	title = france.144.t
	desc = france.144.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = france.144.a
		create_wargoal = {
			type = annex_everything
			target = HAI
		}		
	}
}


# Demand Catalognia
country_event = {
	id = france.145
	title = france.145.t
	desc = france.145.d	
	picture = GFX_report_event_generic_rally
	
	is_triggered_only = yes
	
	option = {
		name = france.145.a
		ai_chance = {
			base = 80
		}
		
		FRA = {
			country_event = { id = france.146 }
		}
	}
	
	option = {
		name = france.145.b
		ai_chance = {
			base = 20
			modifier = {
				is_subject_of = FROM
				factor = 0
			}
			modifier = {
				original_tag = CAT
				factor = 0
			}			
		}
		
		effect_tooltip = {
			FRA = {
				create_wargoal = {
					type = annex_everything
					target = SPR
				}
			}
		}
		hidden_effect = { FRA = { country_event = { id = france.147 } } }
	}
}

# Spain accepts
country_event = {
	id = france.146
	title = france.146.t
	desc = france.146.d
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
	
	option = {
		name = france.146.a
		 
		transfer_state = 165
		diplomatic_relation = {
			country = PREV
			relation = non_aggression_pact
			active = yes
		}
		set_global_flag = catalonia_ceded_to_france		 
		 
	}
}

#Spain refuses
country_event = {
	id = france.147
	title = france.147.t
	desc = france.147.d
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes
	
	option = {
		name = france.147.a
		add_state_claim = 165
		create_wargoal = {
			type = take_state_focus
			target = FROM
			generator = { 165 }
		}
	}
}


# Restoration empire
country_event = {
	id = france.148
	title = france.148.t
	desc = france.148.d
	picture = GFX_report_event_fascist_gathering

	is_triggered_only = yes

	option = {
		name = france.148.a
	}
}

# Jean d'Orléans dies
country_event = {
	id = france.149
	title = france.149.t
	desc = france.149.d
	picture = GFX_report_event_generic_funeral

	fire_only_once = yes
	
	trigger = {
		original_tag = FRA
		has_government = neutrality
		date > 1939.1.1
		has_country_leader = { ruling_only = yes name = "Jean III" }
	}

	mean_time_to_happen = {
		days = 260	# Died in 1940
	}
	
	option = {
		name = france.149.a
		kill_country_leader = yes
		if = {
			limit = {
				has_completed_focus = FRA_constitutional_monarchy
			}
			create_country_leader = {
				name = "Henri VI"
				picture = "gfx/leaders/FRA/Portrait_France_Henri_Orleans.dds"
				expire = "1965.1.1"
				ideology = constitutional_monarchy
				traits = {
					count_of_paris
					constitutional_monarch
				}
			}
		}
		else_if = {
			limit = {
				has_completed_focus = FRA_restore_ancient_reights
			}
			create_country_leader = {
				name = "Henri VI"
				picture = "gfx/leaders/FRA/Portrait_France_Henri_Orleans.dds"
				expire = "1965.1.1"
				ideology = absolute_monarchism
				traits = {
					count_of_paris
					absolute_monarch
				}
			}
		}
		else = {
			create_country_leader = {
				name = "Henri VI"
				picture = "gfx/leaders/FRA/Portrait_France_Henri_Orleans.dds"
				expire = "1965.1.1"
				ideology = absolute_monarchism
				traits = {
					count_of_paris
				}
			}
		}
	}
}

# Syndicalist Revolution
country_event = {
	id = france.150
	title = france.150.t
	desc = france.150.d
	picture = GFX_report_event_france_leon_jouhaux

	is_triggered_only = yes

	option = {
		name = france.150.a
		if = {
			limit = {
				NOT = { has_government = communism }
			}
			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}
		}
		if = {
			limit = {
				has_government = communism
			}
			add_political_power = 100
		}
	}
}

# Franchet D'Esperey's death
country_event = {
	id = france.151
	title = france.151.t
	desc = france.151.d
	picture = GFX_report_event_france_franchet_d_esperey_funerals

	fire_only_once = yes

	trigger = {
		tag = FRA
		date > 1942.07.07
		has_country_leader = {
		    name = "Louis Franchet d'Espèrey"
		    ruling_only = yes
		}
	}

	option = {
		name = france.151.a
		retire_country_leader = yes
        create_country_leader = {
        	name = "Henri Giraud"
        	picture = "gfx/leaders/FRA/portrait_france_henri_giraud.dds"
        	expire = "1965.1.1"
        	ideology = fascism_ideology
        	traits = {
        		army_connections
            }
        }
	}

	option = {
		name = france.151.b
		retire_country_leader = yes
        create_country_leader = {
        	name = "François Mitterand"
        	picture = "gfx/leaders/FRA/r56_portrait_FRA_Francois_Mitterand.dds"
        	expire = "1965.1.1"
        	ideology = fascism_ideology
        	traits = {
        		POL_charismatic_leader
        		dislikes_germany
            }
        }
	}
}

# POPULAR FRONT NEWS EVENT
news_event = {
	id = france.152
	title = france.152.t
	desc = france.152.d
	
	picture = GFX_news_event_france_popular_front
	
	is_triggered_only = yes
	
	option = {			
		name = france.152.a
		trigger = {
			tag = FRA
		}
	}
	
	option = {
		name = france.152.b
		trigger = {
			NOT = {
				tag = FRA
				has_government = fascism
			}
		}
	}

	option = {
		name = france.152.c
		trigger = {
			NOT = {
				tag = FRA
			}
			has_government = fascism
		}
	}
}

# RIGHT WING VICTORY NEWS EVENT
news_event = {
	id = france.153
	title = france.153.t
	desc = france.153.d
	
	picture = GFX_news_event_flandin_petain_marquet
	
	is_triggered_only = yes
	
	option = {			
		name = france.153.a
		trigger = {
			tag = FRA
		}
	}
	
	option = {
		name = france.153.b
		trigger = {
			NOT = {
				tag = FRA
				has_government = communism
			}
		}
	}

	option = {
		name = france.153.c
		trigger = {
			NOT = {
				tag = FRA
			}
			has_government = communism
		}
	}
}

#initial event - France wants to control country
country_event = {
	id = france.155
	title = lar_split_belgium.1.t
	desc = lar_split_belgium.1.desc
	picture = GFX_report_event_fascist_speech
	is_triggered_only = yes
	option = {
		name = lar_split_belgium.1.a #agree
		ai_chance = {
			base = 50
			modifier = {
				tag = WLL
				factor = 10
			}
			modifier = {
				tag = FLA
				factor = 10
			}			
		}
		FRA = {
			country_event = france.156
		}
		if = {
			limit = {
				original_tag = BEL
			}
			BEL = {
				release = FLA
			}
			FLA = {
				change_tag_from = BEL
			}
			FRA = {
				puppet = FLA
				transfer_state = 34
				34 = {
					add_compliance = 30
				}				
			}

						
			GER = {
				transfer_state = 965
				add_state_core = 965
			}						
		}
		if = {
			limit = {
				COG = {
					OR = {
						is_puppet_of = BEL
						is_puppet_of = FLA
						is_puppet_of = WLL
					}
					
				}
			}
			FRA = {
				puppet = COG
			}
		}
		if = {
			limit = {
				original_tag = WLL
			}
			transfer_state = 34
			GER = {
				transfer_state = 965
				add_state_core = 965
			}						
		}
		if = {
			limit = {
				original_tag = FLA
			}
			GER = {
				puppet = FLA
			}					
		}		
		#if = {
		#	limit = {
		#		tag = BEL
		#	}
		#	effect_tooltip = {
		#		FRA = {
		#			puppet = PREV
		#			transfer_state = 34
		#		}
		#		GER = {
		#			transfer_state = 965
		#		}
	#
		#	}			
		#}

	}

	option = {
		name = lar_split_belgium.1.b #refuse
		ai_chance = {
			base = 50
		}
		FRA = {
			country_event = france.157
		}
		effect_tooltip = {
			create_wargoal = {
				target = ROOT
				type = puppet_wargoal_focus
			}
		}
		set_global_flag = FRA_GER_sphere_of_influence_agreement_resistance
	}
}

# response event for France - country agrees
country_event = {
	id = france.156
	title = lar_split_belgium.2.t
	desc = lar_split_belgium.2.desc
	Picture = GFX_report_event_generic_sign_treaty1
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = lar_split_belgium.2.a #agree
		effect_tooltip = {
			transfer_state = 34
			puppet = COG
			GER = {
				transfer_state = 965
				add_state_core = 965
				puppet = FLA
			}				
		}
	}
}
#response event for France - Belgium refuses
country_event = {
	id = france.157
	title = lar_split_belgium.3.t
	desc = lar_split_belgium.3.desc
	Picture = GFX_report_event_generic_defensive_preparations
	is_triggered_only = yes
	option = {
		name = lar_split_belgium.3.a #agree
		ai_chance = {
			base = 80
		}
		create_wargoal = {
			target = FROM
			type = puppet_wargoal_focus
		}
	}
	option = {
		name = lar_split_belgium.3.b #back down
		ai_chance = {
			base = 20
		}
	}
}

country_event = {
	id = france.158
	title = france.158.t
	desc = france.158.desc
	Picture = GFX_report_event_hitler_croatia_handshake
	trigger = {
		OR = {
			owns_state = 6
			FLA = {
				is_puppet_of = FRA
			}
			owns_state = 965
		}
		has_completed_focus = FRA_split_belgium
		has_global_flag = FRA_GER_sphere_of_influence_agreement_resistance
		
	}
	mean_time_to_happen = {
		days = 30
	}
	fire_only_once = yes
	option = {
		name = france.158.a #agree
		ai_chance = {
			base = 100
		}
		add_opinion_modifier = { target = GER modifier = large_increase }
		GER = {
			add_opinion_modifier = { target = FRA modifier = large_increase }	
		} 
		 
		if = {
			limit = {
				OR = {
					any_other_country = {
						NOT = {
							tag = GER
						}
						owns_state = 965
						
					}
					owns_state = 965
				}
			}
			GER = {
				transfer_state = 965
				add_state_core = 965
			}
		}
		if = {
			limit = {
				country_exists = FLA 
			}
			GER = {
				puppet = FLA
			}			
		}
		if = {
			limit = {
				owns_state = 6
			}
			FLA = {
				transfer_state = 6
			}
			GER = {
				puppet = FLA
			}			
		}
		if = {			
			limit = {
				owns_state = 6	
			}
			FLA = {
				transfer_state = 6
			}				
			GER = {
				puppet = FLA
			}
		}
		34 = {
			add_compliance = 30
		}								
	}
	option = {
		name = france.158.b
		ai_chance = {
			base = 0
		}
		GER = {
			add_opinion_modifier = { target = FRA modifier = large_decrease }	
		} 
	}
}
#Bonapartist France approaches Poland and Romania
news_event = {
	id = france.159
	title = france.159.t
	desc = france.159.desc
	
	picture = GFX_news_event_POL_join_faction_france
	
	is_triggered_only = yes
	
	option = {			
		name = france.159.a
		trigger = {
			tag = FRA
		}
	}
	
	option = {
		name = france.159.b
		trigger = {
			is_in_faction_with = FRA
			NOT = {
				tag = FRA
			}
		}
	}

	option = {
		name = france.159.c
		trigger = {
			NOT = {
				tag = FRA
				is_in_faction_with = FRA
			}
			NOT = {
				has_war_with = FRA
			}
		}
	}
	option = {
		name = france.159.d
		trigger = {
			has_war_with = FRA
		}
	}	
}

	#### END MOD #### -------------------------------------------------------------------------------------------
# Japan demands Indochina
country_event = {
	id = france.1
	title = france.1.t
	desc = france.1.d
	picture = GFX_report_event_japan_army_mountainside
	
	is_triggered_only = yes
	
	option = { # Accept demands
		name = france.1.a
		ai_chance = {
			base = 25 
			modifier = {
				factor = 50
				has_war = yes
				any_enemy_country = {
					strength_ratio = { 
						tag = ROOT 
						ratio < 0.4
					}
				}
			}
			modifier = {
				factor = 75
				16 = { NOT = { is_controlled_by = FRA } } #Paris	
			}
		} 
		JAP = {
			country_event = { days = 5 id = japan.6 }
		}
	}
	option = { # Refuse
		name = france.1.b
		ai_chance = { 
			base = 25 
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		JAP = {
			country_event = { days = 5 id = japan.7 }
		}
	}
}

# Maginot Line Extension
country_event = {
	id = france.2
	title = france.2.t
	desc = france.2.d
	picture = GFX_report_event_bunker_01
	
	is_triggered_only = yes
	
	option = {
		name = france.2.a
		18 = {
			add_building_construction = {
				type = bunker
				province = 5291
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 3560
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 9472
				level = 2
				instant_build = yes
			}
		}
		29 = {
			add_building_construction = {
				type = bunker
				province = 11606
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 11483
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 575
				level = 2
				instant_build = yes
			}
		}
		785 = {
			add_building_construction = {
				type = bunker
				province = 3447
				level = 2
				instant_build = yes
			}
		}
	}
}

# Alpine Line Extension
country_event = {
	id = france.3
	title = france.3.t
	desc = france.3.d
	picture = GFX_report_event_bunker_01

	is_triggered_only = yes
	
	option = {
		name = france.3.a
		735 = {
			add_building_construction = {
				type = bunker
				province = 764
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 9909
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 3959
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 6975
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 3764
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 9745
				level = 2
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				province = 778
				level = 2
				instant_build = yes
			}
		}
	}
}

### The Fall of France

#hidden pre-event to check before capitulation
country_event = {
	id = france.201
	hidden = yes
	trigger = {
		tag = FRA
		has_war_with = GER
		has_government = democratic
		16 = { is_controlled_by = GER }
		is_in_faction_with = ENG
		ENG = { has_war_with = GER }
		surrender_progress > 0.7
		NOT = {
			country_exists = OCC
		}
		GER = {
			OR = {
				is_faction_leader = yes
				has_government = neutrality
			}
		}
		has_civil_war = no
		#Don't fire if France has pushed pretty far into ITA or GER
		NOT = {
			any_state = {
				is_on_continent = europe
				NOT = { state = 158 }
				NOT = { state = 114 }
				NOT = { state = 50 }
				NOT = { state = 42 }
				is_controlled_by = ROOT
				OR = {
					is_owned_by = GER
					AND = {
						FRA = { has_War_with = ITA }
						is_owned_by = ITA
					}
				}
			}
		}		

		#Don't fire if any states in France are controlled by a different human player
		NOT = {
			any_country = {
				is_ai = no
				NOT = { tag = GER }
				NOT = { is_in_faction_with = GER }
				has_war_with = ROOT
				any_state = {
					is_on_continent = europe
					NOT = { state = 1 }
					NOT = { state = 735 }
					NOT = { state = 21 }
					NOT = { state = 31 }
					is_owned_by = ROOT
					is_controlled_by = PREV
				}
			}
		}
	}
	mean_time_to_happen = { days = 2 }
	immediate = {
		country_event = france.10
	}
}
# The Battle is Lost
country_event = {
	id = france.10
	title = france.10.t
	desc = france.10.d
	picture = GFX_report_event_german_parade_paris
	
	fire_only_once = yes
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_global_flag = FRA_capitulation_event_fired
		}
	}
	
	option = { # Become Vichy
		name = france.10.a
		trigger = { is_ai = no }
		set_country_flag = become_vichy
		save_global_event_target_as = vichy_france
		set_global_flag = fall_of_france
		GER = { country_event = france.14 }
		custom_effect_tooltip = france.10.a_tt
		# Switches to Vichy if GER accepts

		#Swiss event regarding hiding French soldiers in there after the Fall of France
		hidden_effect = {	#linked with Fall of France, so replaced it here instead of own trigger - Fantom
			if = {
				limit = {
					SWI = {
						has_war = no
					}
				}
				SWI = { country_event = EYE_swiss.4 }
			}
			if = {
				limit = { 
					SWI = {
						has_government = neutrality
					}
				}
				SWI = { news_event = { id = EYE_swiss.5 days = 45 } }
			}
		}
	}
	option = { # Become Free French
		name = france.10.b
		ai_chance = {
			base = 85
		}
		set_global_flag = fall_of_france
		set_country_flag = free_france
		save_global_event_target_as = free_france
		GER = { country_event = france.14 }
		custom_effect_tooltip = france.10.b_tt
		
		#Swiss event regarding hiding French soldiers in there after the Fall of France
		hidden_effect = {	#linked with Fall of France, so replaced it here instead of own trigger - Fantom
			if = {
				limit = {
					SWI = {
						has_war = no
					}
				}
				SWI = { country_event = EYE_swiss.4 }
			}
			if = {
				limit = { 
					SWI = {
						has_government = neutrality
					}
				}
				SWI = { news_event = { id = EYE_swiss.5 days = 45 } }
			}
		}
	}
	option = { # Ask for British Union
		name = france.10.c
		ai_chance = {
			base = 15
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		trigger = { 
			ENG = {
				has_capitulated = no
				controls_state = 126
			}
		 }
		ENG = {
			country_event = france.11
			effect_tooltip = {
				annex_country = { target = FRA transfer_troops = yes }
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
	}
	option = { # decide to fight on
		name = france.10.e
		ai_chance = {
			base = 15
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		trigger = { has_war_support > 0.7 }
		add_stability = -0.05
	}
}

# France suggests a Union (Britain)
country_event = {
	id = france.11
	title = france.11.t
	desc = france.11.d
	picture = GFX_report_event_degaulle_churchill
	
	is_triggered_only = yes
	
	option = { # Refuse Union
		name = france.11.a
		ai_chance = {
			base = 10
		}
		FRA = {
			country_event = { hours = 6 id = france.13 }
		}
	}
	option = { # Agree to Union
		name = france.11.b
		ai_chance = {
			base = 90
		}
		FRA = {
			country_event = { hours = 6 id = france.12 }
		}
	}
}

# Britain agrees to Union (France)
country_event = {
	id = france.12
	title = france.12.t
	desc = france.12.d
	picture = GFX_report_event_chamberlain_announce
	
	is_triggered_only = yes
	
	option = {
		name = france.12.a
		# Franco-British Union created
		set_global_flag = fall_of_france
		set_global_flag = flag_franco_british_union
		hidden_effect = {
			every_state = {
				limit = {
					is_core_of = FRA
				}
				ENG = {
					add_state_core = PREV
				}
			}
		}
		FRA = {
			every_unit_leader = {
				set_unit_leader_flag = flag_former_french_general
				set_nationality = ENG
			}
		}
		ENG = {
			annex_country = { target = FRA transfer_troops = yes }
			add_victory_points = {
				province = 6103
				value = 50    
			}		
			every_other_country = {
				limit = {
					is_puppet_of = FRA
				}
				puppet = PREV
			}		
		}
		custom_effect_tooltip = FRA_franco_british_cores
		hidden_effect = {
			ENG = { set_cosmetic_tag = FRA_UK }
			GER = { 
				news_event = { hours = 6 id = news.35 }
			}
		}
		
		#Swiss event regarding hiding French soldiers in there after the Fall of France
		hidden_effect = {	#linked with Fall of France, so replaced it here instead of own trigger - Fantom
			if = {
				limit = {
					SWI = {
						has_war = no
					}
				}
				SWI = { country_event = EYE_swiss.4 }
			}
			if = {
				limit = { 
					SWI = {
						has_government = neutrality
					}
				}
				SWI = { news_event = { id = EYE_swiss.5 days = 45 } }
			}
		}
	}
}

# Britain refuses Union (France)
country_event = {
	id = france.13
	title = france.13.t
	desc = france.13.d
	picture = GFX_report_event_pierre_laval
	
	is_triggered_only = yes
	
	option = { # Become Vichy
		name = france.13.a
		trigger = { is_ai = no }
		set_country_flag = become_vichy
		set_global_flag = fall_of_france
		save_global_event_target_as = vichy_france
		GER = { country_event = france.14 }
		custom_effect_tooltip = france.10.a_tt
		FRI = {
			country_event = frenchindochina.4
		}
		# Switches to Vichy if GER accepts

		#Swiss event regarding hiding French soldiers in there after the Fall of France
		hidden_effect = {	#linked with Fall of France, so replaced it here instead of own trigger - Fantom
			if = {
				limit = {
					SWI = {
						has_war = no
					}
				}
				SWI = { country_event = EYE_swiss.4 }
			}
			if = {
				limit = { 
					SWI = {
						has_government = neutrality
					}
				}
				SWI = { news_event = { id = EYE_swiss.5 days = 45 } }
			}
		}
	}
	option = { # Become Free France
		name = france.13.b
		GER = { country_event = france.14 }
		save_global_event_target_as = free_france
		custom_effect_tooltip = france.10.b_tt
		set_global_flag = fall_of_france
		FRI = {
			country_event = frenchindochina.4
		}

		#Swiss event regarding hiding French soldiers in there after the Fall of France
		hidden_effect = {	#linked with Fall of France, so replaced it here instead of own trigger - Fantom
			if = {
				limit = {
					SWI = {
						has_war = no
					}
				}
				SWI = { country_event = EYE_swiss.4 }
			}
			if = {
				limit = { 
					SWI = {
						has_government = neutrality
					}
				}
				SWI = { news_event = { id = EYE_swiss.5 days = 45 } }
			}
		}
	}
	option = { # decide to fight on
		name = france.10.e
		ai_chance = {
			base = 15
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		trigger = { has_war_support > 0.7 }
		add_stability = -0.05
		custom_effect_tooltip = france_continue_the_fight_tt
	}
}

# France wants Armistice (Germany)
country_event = {
	id = france.14
	title = france.14.t
	desc = france.14.d
	picture = GFX_report_event_german_parade_paris
	
	is_triggered_only = yes
	
	option = { # Agree
		name = france.14.a
		ai_chance = {
			base = 50
		}
		trigger = {
			has_government = fascism
			not = { has_dlc = "La Resistance" }
		}
		#Set same cosmetic tag they would get on capitulation
		FRA = {
			set_cosmetic_tag = FRA_FREE
		}
		# German Occupation Zone
		if = {
			limit = { 28 = { owner = { original_tag = FRA } } }
			set_state_controller = 28
		}
		if = {
			limit = { 17 = { owner = { original_tag = FRA } } }
			set_state_controller = 17
		}
		if = {
			limit = { 27 = { owner = { original_tag = FRA } } }
			set_state_controller = 27
		}
		if = {
			limit = { 18 = { owner = { original_tag = FRA } } }
			set_state_controller = 18
		}
		if = {
			limit = { 29 = { owner = { original_tag = FRA } } }
			set_state_controller = 29
		}
		if = {
			limit = { 785 = { owner = { original_tag = FRA } } }
			set_state_controller = 785
		}
		if = {
			limit = { 15 = { owner = { original_tag = FRA } } }
			set_state_controller = 15
		}
		if = {
			limit = { 16 = { owner = { original_tag = FRA } } }
			set_state_controller = 16
		}
		if = {
			limit = { 24 = { owner = { original_tag = FRA } } }
			set_state_controller = 24
		}
		if = {
			limit = { 30 = { owner = { original_tag = FRA } } }
			set_state_controller = 30
		}
		if = {
			limit = { 14 = { owner = { original_tag = FRA } } }
			set_state_controller = 14
		}
		if = {
			limit = { 23 = { owner = { original_tag = FRA } } }
			set_state_controller = 23
		}
		if = {
			limit = { 19 = { owner = { original_tag = FRA } } }
			set_state_controller = 19
		}
		# Italian Occupation Zone (if they did well)
		if = { #if Italy did really well, they get an extra bonus state (but only if that doesn't lead to bordergore)
			limit = {
				735 = { #Savoy
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
				21 = { #Provence
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
				32 = { #Alpes
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
			}
			ITA = { transfer_state = 32 }
		}
		if = {
			limit = {
				21 = { #Provence
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
			}
			ITA = { transfer_state = 21 }
		}
		if = {
			limit = {
				1 = { #Corsica
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
			}
			ITA = { transfer_state = 1 }
		}
		if = {
			limit = {
				735 = { #Savoy
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
			}
			ITA = { transfer_state = 735 }
		}
		
		#Spanish occupation zone
		if = {
			limit = {
				31 = { #Midi-Pyrinees
					owner = { original_tag = FRA }
					controller = { original_tag = SPR }
				}
			}
			random_other_country = {
				limit = {
					original_tag = SPR
					has_war_with = FRA
				}
				transfer_state = 31
			}
		}
		FRA = {
			set_capital = { state = 539 }
			hidden_effect = {
					set_state_controller = 26
					set_state_controller = 22
					set_state_controller = 25
					set_state_controller = 20
					set_state_controller = 33
					set_state_controller = 851	#Var
					#tunisia
					if = {
						limit = {
							458 = {
								owner = { original_tag = FRA }
								controller = { 
									original_tag = FRA
								}
							}
						}
						set_state_controller = 458
					}					

					#syria
					if = {
						limit = {
							677 = {
								owner = { original_tag = FRA }
								controller = { 
									original_tag = FRA
								}
							}
						}
						set_state_controller = 677
					}
					if = {
						limit = {
							680 = {
								owner = { original_tag = FRA }
								controller = { 
									original_tag = FRA
								}
							}
						}
						set_state_controller = 680
					}
					if = {
						limit = {
							554 = {
								owner = { original_tag = FRA }
								controller = { 
									original_tag = FRA
								}
							}
						}
						set_state_controller = 554 
					}

					if = {
						limit = {
							1 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 1
					}
					if = {
						limit = {
							32 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 32
					}
					if = {
						limit = {
							735 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 735
					}
					if = {
						limit = {
							21 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 21
					}
					if = {
						limit = {
							31 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 31
					}
					if = {
						limit = {
							694 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 694
					}					
			}
			start_civil_war = {
				ideology = fascism
				size = 0.9
				capital = 26
				states = { 26 21 22 31 25 20 32 33 1 735 677 680 554 458 462 461 513 933 459 460 665 553 272 556 543 706 708 713 268 557 514 515 776 777 778 779 780 781 782 786 694 851 }
				states_filter = {
					owner = { original_tag = FRA }
					OR = {		
						# lets not involve syria or tunisia in civil war flip if occupied by other party
						AND = {
							OR = {
								state = 554
								state = 680
								state = 677
								state = 458
							}
							controller = { # FRA not controller
								original_tag = FRA
							}
						}
						NOT = {
							state = 554
							state = 680
							state = 677
							state = 458						
						}
					}					
				}
			}
		}
		random_other_country = {
			limit = { original_tag = FRA has_government = fascism }
			set_cosmetic_tag = VICHY_FRANCE
			create_country_leader = {
				name = "Philippe Pétain"
				picture = "Portrait_France_Philippe_Petain.dds"
				expire = "1965.1.1"
				ideology = fascism_ideology
				traits = {
					popular_figurehead2
				}
			}
			load_focus_tree = vichy_france_focus
			set_country_flag = is_vichy_france
			ROOT = { puppet = PREV }
			set_capital = { state = 26 }
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
			}
			set_popularities = {
				democratic = 22
				fascism = 76
				communism = 2
			}
			every_unit_leader = {
				limit = {
					has_id = 101
				}
				set_nationality = FRA
			}
			# FRA Player Switches to Vichy
			if = {
				limit = { FRA = { has_country_flag = become_vichy } }
				change_tag_from = FRA
			}
			save_event_target_as = vichy_france
		}
		news_event = {id = news.34  hours = 6 }
		hidden_effect =  {
			FRA = { country_event = { id = france.20 days = 1 } }
		}
		FRI = {
			country_event = frenchindochina.4
		}
	}

	option = { # Agree - Neutrality
		name = france.14.c
		ai_chance = {
			base = 50
		}
		trigger = {
			has_government = neutrality
		}
		#Set same cosmetic tag they would get on capitulation
		FRA = {
			set_cosmetic_tag = FRA_FREE
			set_country_flag = free_france
		}
		# German Occupation Zone
		if = {
			limit = { 28 = { owner = { original_tag = FRA } } }
			set_state_controller = 28
		}
		if = {
			limit = { 17 = { owner = { original_tag = FRA } } }
			set_state_controller = 17
		}
		if = {
			limit = { 27 = { owner = { original_tag = FRA } } }
			set_state_controller = 27
		}
		if = {
			limit = { 18 = { owner = { original_tag = FRA } } }
			set_state_controller = 18
		}
		if = {
			limit = { 29 = { owner = { original_tag = FRA } } }
			set_state_controller = 29
		}
		if = {
			limit = { 785 = { owner = { original_tag = FRA } } }
			set_state_controller = 785
		}
		if = {
			limit = { 15 = { owner = { original_tag = FRA } } }
			set_state_controller = 15
		}
		if = {
			limit = { 16 = { owner = { original_tag = FRA } } }
			set_state_controller = 16
		}
		if = {
			limit = { 24 = { owner = { original_tag = FRA } } }
			set_state_controller = 24
		}
		if = {
			limit = { 30 = { owner = { original_tag = FRA } } }
			set_state_controller = 30
		}
		if = {
			limit = { 14 = { owner = { original_tag = FRA } } }
			set_state_controller = 14
		}
		if = {
			limit = { 23 = { owner = { original_tag = FRA } } }
			set_state_controller = 23
		}
		if = {
			limit = { 19 = { owner = { original_tag = FRA } } }
			set_state_controller = 19
		}
		# Italian Occupation Zone (if they did well)
		if = { #if Italy did really well, they get an extra bonus state (but only if that doesn't lead to bordergore)
			limit = {
				735 = { #Savoy
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
				21 = { #Provence
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
				32 = { #Alpes
					owner = { original_tag = FRA }
					is_controlled_by = ITA
				}
			}
			ITA = { transfer_state = 32 }
		}
		if = {
			limit = {
				AND = {
					21 = { #Provence
						owner = { original_tag = FRA }
						is_controlled_by = ITA
					}
				}
			}
			ITA = { transfer_state = 21 }
		}
		if = {
			limit = {
				AND = {
					1 = { #Corsica
						owner = { original_tag = FRA }
						is_controlled_by = ITA
					}
				}
			}
			ITA = { transfer_state = 1 }
		}
		if = {
			limit = {
				AND = {
					735 = { #Savoy
						owner = { original_tag = FRA }
						is_controlled_by = ITA
					}
				}
			}
			ITA = { transfer_state = 735 }
		}
		
		#Spanish occupation zone
		if = {
			limit = {
				31 = { #Midi-Pyrinees
					owner = { original_tag = FRA }
					controller = { original_tag = SPR }
				}
			}
			random_other_country = {
				limit = {
					original_tag = SPR
					has_war_with = FRA
				}
				transfer_state = 31
			}
		}
		if = {
            limit = {
                806 = { #French Basque Country
                    OR = {
                        owner = { original_tag = FRA }
                        owner = { original_tag = GER } #should never go to Vichy
                    }
                    controller = { original_tag = SPR }
                }
            }
            random_other_country = {
                limit = {
                    original_tag = SPR
                    has_war_with = FRA
                }
                transfer_state = 806
            }
        }
		FRA = {
			set_capital = { state = 539 }
			hidden_effect = {
					set_state_controller = 26
					set_state_controller = 22
					set_state_controller = 25
					set_state_controller = 20
					set_state_controller = 33
					set_state_controller = 851	#Var
					#tunisia
					if = {
						limit = {
							458 = {
								owner = { original_tag = FRA }
								controller = { 
									original_tag = FRA
								}
							}
						}
						set_state_controller = 458
					}					

					#syria
					if = {
						limit = {
							677 = {
								owner = { original_tag = FRA }
								controller = { 
									original_tag = FRA
								}
							}
						}
						set_state_controller = 677
					}
					if = {
						limit = {
							680 = {
								owner = { original_tag = FRA }
								controller = { 
									original_tag = FRA
								}
							}
						}
						set_state_controller = 680
					}
					if = {
						limit = {
							554 = {
								owner = { original_tag = FRA }
								controller = { 
									original_tag = FRA
								}
							}
						}
						set_state_controller = 554 
					}

					if = {
						limit = {
							1 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 1
					}
					if = {
						limit = {
							32 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 32
					}
					if = {
						limit = {
							735 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 735
					}
					if = {
						limit = {
							21 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 21
					}
					if = {
						limit = {
							31 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 31
					}
					if = {
						limit = {
							694 = {
								owner = { original_tag = FRA }
							}
						}
						set_state_controller = 694
					}					
			}
			start_civil_war = {
				ideology = neutrality
				size = 0.5
				capital = 26
				states = { 26 21 22 31 25 20 32 33 1 735 677 680 554 458 462 461 513 933 459 460 665 553 272 556 543 706 708 713 268 557 514 515 694 851 }
				states_filter = {
					owner = { original_tag = FRA }
					OR = {		
						# lets not involve syria or tunisia in civil war flip if occupied by other party
						AND = {
							OR = {
								state = 554
								state = 680
								state = 677
								state = 458
							}
							controller = { # FRA not controller
								original_tag = FRA
							}
						}
						NOT = {
							state = 554
							state = 680
							state = 677
							state = 458					
						}
					}					
				}
			}
		}
		random_other_country = {
			limit = { original_tag = FRA has_government = neutrality }
			ROOT = { puppet = PREV }
			set_capital = { state = 26 }
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			set_popularities = {
				democratic = 22
				neutrality = 60
				fascism = 16
				communism = 2
			}
			# FRA Player Switches to Vichy
			if = {
				limit = { FRA = { has_country_flag = become_vichy } }
				change_tag_from = FRA
			}
			save_event_target_as = vichy_france
		}
		news_event = { hours = 6 id = news.34 }
		hidden_effect =  {
			FRA = { country_event = { id = france.20 days = 1 } }
		}
		FRI = {
			country_event = frenchindochina.4
		}
	}
	option = { # Agree - Fascism - LaR
		name = france.14.a
		ai_chance = { 
			base = 50 
		}
		trigger = {
			has_government = fascism
			has_dlc = "La Resistance"
		}
		FRA = { 
			set_cosmetic_tag = FRA_FREE 
			add_ideas = FRA_defeatism
			load_focus_tree = free_french_focus
			#CHECK IF NECESSARY
			#create_country_leader = {
			#	name = "Charles de Gaulle"
			#	desc = "POLITICS_CHARLES_DE_GAULLE_DESC"
			#	picture = "r56_portrait_FRA_Charles_De_Gaulle.dds"
			#	expire = "1965.1.1"
			#	ideology = conservatism
			#	traits = {
			#		connetable_of_france
			#	}
			#}			
			if = {
				limit = {
					capital_scope = {
						NOT = {
							state = 16
							state = 635
						}
					}
					controls_state = 635
				}
				set_capital = { state = 635 }
			}
			country_event = france.20
			every_owned_state = {
				limit = { 
					is_controlled_by = ITA 
					is_core_of = FRA
				}
				set_state_flag = vichy_italian_conquest
			}
		}
		custom_effect_tooltip = establishing_vichy_tt
		hidden_effect = {
			create_dynamic_country = {
				original_tag = FRA
				save_event_target_as = vichy_france
				every_state = { #transfer French colonial empire
					limit = {
						is_controlled_by = FRA
						is_owned_by = FRA
						OR = {
							is_on_continent = africa
							is_core_of = VIN
							is_core_of = CAM
							is_core_of = LAO
							is_core_of = LEB
							is_core_of = SYR
						}
					}
					event_target:vichy_france = { transfer_state = PREV }
				}
				every_state = {
					limit = { #set up Vichy continental holdings
						OR = {
							state = 735
							state = 21
							state = 32
							state = 20
							state = 26
							state = 22
							state = 31
							state = 25
							state = 33
							state = 1
							state = 851 #Var
							AND = {	#Monaco for when micronations disabled
								state = 1012
								is_core_of = FRA
							}
						}
						CONTROLLER = { 
							OR = {
								original_tag = FRA
								has_war_with = FRA
							} 
						} #failsafe for weird shit (tm)
					}
					add_core_of = PREV
					event_target:vichy_france = { transfer_state = PREV }
				}
				every_state = { #set up cores for French cores
					limit = {
						is_core_of = FRA
						NOT = {
							is_controlled_by = event_target:vichy_france
						}
					}
					add_core_of = PREV
				}
				if = { 
					limit = { ITA = { has_war_with = FRA } }
					every_owned_state = {
						limit = {
							OR = {
								state = 21
								state = 1
								state = 735
							}
							has_state_flag = vichy_italian_conquest
						}
						ITA = { transfer_state = PREV }
					}
					
					if = {
						limit = {
							21 = { is_controlled_by = ITA }
							735 = { is_controlled_by = ITA } 
						}
						ITA = { transfer_state = 32 }
					}
					
				}
				set_rule = { 
					can_join_factions = no 
					can_create_factions = no
					can_not_declare_war = yes
				}
				set_capital = { state = 26 }
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
				set_popularities = {
					democratic = 22
					fascism = 46
					neutrality = 30
					communism = 2
				}
				set_cosmetic_tag = VICHY_FRANCE
				create_country_leader = {
					name = "Philippe Pétain"
					picture = "Portrait_France_Philippe_Petain.dds"
					expire = "1965.1.1"
					ideology = fascism_ideology
					traits = {
						popular_figurehead2
					}
				}
				add_ideas = FRA_occupation_costs_4
				load_focus_tree = vichy_french_focus
				set_country_flag = is_vichy_france
				FRA = {
					transfer_units_fraction = {
						target = event_target:vichy_france
						size = 0.9
						stockpile_ratio = 0.7
						army_ratio = 0.5
						navy_ratio = 0.85
						air_ratio = 1.0
					}
				}
				if = {
					limit = { FRA = { has_country_flag = become_vichy } }
					change_tag_from = FRA
				}
			}
		}
		random_country = {
			limit = {
				has_focus_tree = vichy_french_focus
			}
			GER = {
				give_guarantee = PREV
			}
			every_unit_leader = {
				limit = {
					has_id = 101 #de Gaulle
				}
				set_nationality = FRA
			}
			every_army_leader = {
				limit = {
					NOT = { has_trait = old_guard }
				}
				set_nationality = FRA
			}
			FRA = {
				every_unit_leader = {
					limit = {
						OR = {
							has_trait = old_guard
							has_trait = old_guard_navy
						}
					}
					set_nationality = PREV.PREV
				}
				every_navy_leader = {
					limit = {
						has_id = 102 #Darlan
					}
					set_nationality = PREV.PREV
				}
			}
		}
		FRI = {
			country_event = frenchindochina.4
		}
		#put this below the transfer of De Gaulle.
		FRA = {
			country_event = france.20
		}		
	}
	option = { # Conquer everything!
		name = france.14.b
		ai_chance = { 
			base = 50 
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		FRA = {
			country_event = { hours = 6 id = france.15 }
		}
	}
}

# Germany refuses armistice! (France)
country_event = {
	id = france.15
	title = france.15.t
	desc = france.15.d
	picture = GFX_report_event_french_resistance_01
	
	is_triggered_only = yes
	
	option = {
		name = france.15.a
		set_global_flag = germany_refused_second_armistice	#apparently relevant for axi_major_vichy_france content. Outdated?
	}
}

#Capital captured by non french faction
country_event = {
	id = france.16
	title = france.16.t
	desc = france.16.d
	picture = GFX_report_event_french_resistance_02

	fire_only_once = yes

	trigger = {
		original_tag = FRA
		16 = { controller = { NOT = { original_tag = FRA } } }
		has_capitulated = yes
		#16 = { is_owned_by = FRA }
	}
	
	mean_time_to_happen = {
		days = 4
	}

	option = {
		name = france.16.a
		remove_ideas = FRA_victors_of_wwi
		remove_ideas = FRA_disjointed_government
		remove_ideas = FRA_protected_by_the_maginot_line
	}
}

# Invitation to French Faction
country_event = {
	id = france.17
	title = france.17.t
	desc = france.17.d
	picture = GFX_report_event_worried_french
	
	is_triggered_only = yes
	
	option = {
		name = france.17.a
		ai_chance = { base = 90 }
		FRA = {
			country_event = france.18
			add_to_faction = ROOT
		}
		add_ai_strategy = {
			type = alliance
			id = "FRA"
			value = 200
		}
	#	hidden_effect = {
	#		set_country_flag = alliance_applicant@ROOT
	#		FROM = { set_country_flag = alliance_inviter@ROOT }
	#		news_event = { id = news.289 hours = 12 }
	#	}		
	}

	option = {
		name = france.17.b
		ai_chance = { base = 10 }
		FRA = { country_event = france.19 }
	}
}

# [Country] Accepts
country_event = {
	id = france.18
	title = france.18.t
	desc = france.18.d
	picture = GFX_report_event_soldiers_in_france
	
	is_triggered_only = yes
	
	option = {
		name = france.18.a
		effect_tooltip = {
			add_to_faction = FROM
		}
	}
}

# [Country] Refuses
country_event = {
	id = france.19
	title = france.19.t
	desc = france.19.d
	picture = GFX_report_event_finnish_letter
	
	is_triggered_only = yes
	
	option = {
		name = france.19.a
	}
}

# De Gaulle becomes leader
country_event = {
	id = france.20
	title = france.20.t
	desc = france.20.d
	picture = GFX_report_event_degaulle_churchill
	
	is_triggered_only = yes
	
	option = {
		custom_effect_tooltip = france.20.a_tt
		set_country_flag = france_de_gaulle
		hidden_effect =  {
			add_country_leader_role = {
				character = FRA_charles_de_gaulle
				country_leader = {
					expire = "1965.1.1"
					traits = {
						tank_enthusiast
						connetable_of_france
					}
					ideology = conservatism
				}
				promote_leader = yes
			}
			if = {
				limit = {
					#has_dlc = "La Resistance"
					NOT = {
						has_focus_tree = free_french_focus
					}
				}
				load_focus_tree = free_french_focus
			}
			set_country_flag = free_france
			set_country_flag = free_france_advisor_check
		}
		
		name = france.20.a
	}
}


# French ban on communism
#country_event = {
#	id = france.24
#	title = france.24.t
#	desc = france.24.d
#	picture = GFX_report_event_molotov_ribentrop_handshake
#
#
#	trigger = {
#		tag = FRA
#		SOV = { has_government = communism }
#		has_government = democratic
#		communism < 0.5
#		has_global_flag = sov_yes_pact
#	}
#
#	fire_only_once = yes
#	
#	mean_time_to_happen = {	days = 2	}
#
#	option = {
#		ai_chance = {	factor = 10 }
#		add_political_power = -20
#		name = france.24.a
#		add_popularity = {
#			ideology = communism
#			popularity = -0.3
#		}
#		add_ideas = FRA_communism_banned
#
#		add_opinion_modifier = {
#			target = SOV
#			modifier = FRA_ban_communism
#		}
#		
#		every_other_country = {
#			limit = { 
#				has_government = communism
#			}
#			add_opinion_modifier = {
#				target = FRA
#				modifier = FRA_ban_communism
#			}
#		}
#		hidden_effect = {
#			news_event = { id = news.161 hours = 6 }
#		}
#
#	}
#	option = {
#		ai_chance = {	factor = 0 }
#		name = france.24.b
#	}
#}

# British abandon yugoslavia
country_event = {
	id = france.25
	title = france.25.t
	desc = france.25.d
	picture = GFX_report_event_hitler_croatia_handshake

	is_triggered_only	= yes	
	option = { # Follow Britain's lead
		name = france.25.a
		ai_chance = {
			base = 90
			modifier = {
				factor = 0
				OR = {
					is_in_faction_with = YUG
					has_war_with = GER
				}
			}
		}
		if = {
			limit = {
				has_guaranteed = YUG
			}
			diplomatic_relation = {
   				country = YUG
   				relation = guarantee
   				active = no
  			}
		}
		if = {
			limit = {
				ITA = {
					OR = {
						has_completed_focus = ITA_balkan_ambition
						has_completed_focus = ITA_operazione_tiberio
						is_in_faction_with = GER
						exists = no
					}
				}
			}
			YUG = {
				add_opinion_modifier = { target = FRA modifier = western_betrayal }
				country_event = { id = yugoslavia.5 hours = 6 }
			}
		}
		if = {
			limit = { 
				ITA = {
					NOT = { 
						has_completed_focus = ITA_balkan_ambition
						has_completed_focus = ITA_operazione_tiberio
					}
					NOT = { is_in_faction_with = GER }
					NOT = { has_war_with = YUG }
				}
			}
			ITA = { country_event = { id = italy.12 } }
		}
	}
	option = { # Support the Yugoslavs alone
		name = france.25.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				is_in_faction_with = GER
			}
			modifier = {
				factor = 10
				has_war_with = GER
			}
		}
		if = {
			limit = {
				NOT = {
					has_war_with = GER
				}
			}
			add_political_power = -200
		}
		add_opinion_modifier = { target = GER modifier = condemn_aggression }
		YUG = { 
			country_event = { id = yugoslavia.4 days = 1 }
			add_opinion_modifier = { target = FRA modifier = offered_support }
		}
		GER = {
			country_event = { id = germany.97 hours = 6 } #Generate wargoal
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 }
				}
			}
		}
		if = {
			limit = { 
				is_in_faction_with = ENG 
			}
			if = {
				limit = { ENG = { is_faction_leader = yes } }
				ENG = { 
					country_event = { id = britain.15 hours = 6 }
					remove_from_faction = FRA
				}
				else_if = {
					limit = {
						is_faction_leader = yes
					}
					remove_from_faction = ENG
				}
			}
		}
		if = {
			limit = { is_in_faction_with = GER }
			GER = { 
				remove_from_faction = FRA
			}
		}
		if = {
			limit = {
				is_in_faction = yes
				is_faction_leader = yes
				NOT = { is_in_faction_with = ENG }
				NOT = { is_in_faction_with = GER }
			}
			add_to_faction = YUG
			YUG = {
				add_ai_strategy = {
					type = alliance
					id = "FRA"
					value = 200
				}
			}
		}
		if = {
			limit = {
				OR = {
					is_in_faction = no
					is_faction_leader = no
					is_in_faction_with = ENG
					is_in_faction_with = GER
				}
			}
			create_faction = french_alliance
			add_to_faction = YUG
			YUG = {
				add_ai_strategy = {
					type = alliance
					id = "FRA"
					value = 200
				}
			}
		}
		if = {
			limit = { NOT = { has_completed_focus = FRA_little_entente } }
			add_stability = 0.05
		}
	}
}

# British support yugoslavia
country_event = {
	id = france.26
	title = france.26.t
	desc = france.26.d
	picture = GFX_report_event_hitler_croatia_handshake

	is_triggered_only = yes

	option = { #stand together
		name = france.26.a
		ai_chance = {
			base = 90
			modifier = {
				factor = 0
				is_in_faction_with = GER
			}
		}
		if = {
			limit = {
				NOT = {
					has_guaranteed = YUG
				}
			}
			give_guarantee = YUG
		}
		if = {
			limit = { is_in_faction = no }
			ENG = { add_to_faction = FRA }
			FRA = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"
					value = 200
				}
			}
		}
		add_opinion_modifier = { target = GER modifier = condemn_aggression }
		YUG = { 
			country_event = { id = yugoslavia.3 days = 1 }
			add_opinion_modifier = { target = FRA modifier = offered_support }
		}
		GER = {
			country_event = { id = germany.93 hours = 6 } #Generate wargoal
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = YUG
					generator = { 102 }
				}
			}
		}		
	}

	#Abandon
	option = {
		name = france.26.b
		trigger = { NOT = { is_in_faction_with = ENG } }
		ai_chance = { base = 10 }
		set_global_flag = FRA_abandoned_yugoslavia
		if = {
			limit = {
				has_guaranteed = YUG
			}
			diplomatic_relation = {
   				country = YUG
   				relation = guarantee
   				active = no
  			}
		}
		YUG = {
			country_event = { id = yugoslavia.3 hours = 6 }
			add_opinion_modifier = { target = FRA modifier = western_betrayal }
		}
	}	
}

# Vichy France: Germany is handing over some of our land
country_event = {
	id = france.27
	title = france.27.t
	desc = { 
		text = france.27.d_1_state 
		trigger = {
			OR = {
				NOT = { has_global_flag = ITA_claims_on_france_735 }
				has_global_flag = ITA_claims_on_france_1
			}
			OR = {
				has_global_flag = ITA_claims_on_france_735
				NOT = { has_global_flag = ITA_claims_on_france_1 }
			}
		} 
	}
	desc = { 
		text = france.27.d_both
		trigger = { 
			has_global_flag = ITA_claims_on_france_735 
			has_global_flag = ITA_claims_on_france_1
		} 
	}
	picture = GFX_report_event_worried_french

	is_triggered_only	= yes

	option = {
		name = france.27.a
		
		effect_tooltip = {
			if = {
				limit = { has_global_flag = ITA_claims_on_france_735 }
				ITA = { transfer_state = 735 }
			}
			if = {
				limit = { has_global_flag = ITA_claims_on_france_1 }
				ITA = { transfer_state = 1 }
			}
		}

		if = {
			limit = {
				has_global_flag = ITA_claims_on_france_735
				has_global_flag = ITA_claims_on_france_1
				OR = {
					owns_state = 554
					owns_state = 677
					owns_state = 680
				}

			}
			random_other_country = {
				limit = {
					original_tag = FRA
					has_government = democratic
				}
				if = {
					limit = { ROOT = { owns_state = 554 } }
					transfer_state = 554
				}
				if = {
					limit = { ROOT = { owns_state = 677 } }
					transfer_state = 677
				}
				if = {
					limit = { ROOT = { owns_state = 680 } }
					transfer_state = 680
				}
				country_event = france.28
			}
		}
	}

}

# France - Syria defects to us
country_event = {
	id = france.28
	title = france.28.t
	desc = france.28.d
	picture = GFX_report_event_worried_french

	is_triggered_only	= yes

	option = {
		name = france.28.a
	}

}

# France - Britain accepts Ally request
country_event = {
	id = france.29
	title = france.29.t
	desc = france.29.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	option = {
		name = france.29.a
	}
}

# France - Britain denies Ally request
country_event = {
	id = france.30
	title = france.30.t
	desc = france.30.d
	picture = GFX_report_event_chamberlain

	is_triggered_only	= yes

	option = {
		name = france.30.a
	}
}

# Édouard Daladier Resigns
country_event = {
    id = france.31
    title = france.31.t
    desc = france.31.d
    picture = GFX_report_event_german_parade_paris
 
    fire_only_once = yes
 
    trigger = {
        original_tag = FRA
        has_government = democratic
        has_global_flag = fall_of_france
        NOT = { has_country_flag = france_de_gaulle }
    } 

    mean_time_to_happen = {
        days = 7
    }

	option = {
		name = france.31.a
		retire_country_leader = yes
		add_country_leader_role = {
			character = FRA_paul_reynaud
			country_leader = {
				expire = "1965.1.1"
				ideology = liberalism
			}
			promote_leader = yes
		}
		set_country_flag = daladier_resigned
	}
}

# Hidden event to add AI values for nationalist spain if France is going fascist
country_event = {
	id = france.32
	hidden = yes
 
    fire_only_once = yes

    is_triggered_only = yes

    immediate = {
    	if = {
    		limit = {
    			NOT = { has_dlc = "La Resistance" }
    		}
    		random_other_country = {
				limit = {
					original_tag = SPR
					has_government = fascism
				}
				FRA = {
					add_ai_strategy = {
						type = befriend
						id = PREV
						value = 200
					}
				}
			}
    	}
    	if = {
    		limit = {
    			has_dlc = "La Resistance"
    		}
			FRA = {
					add_ai_strategy = {
						type = befriend
					id = "SPA"
						value = 200
					}
			}
    	}
    }

    option = {
		name = france.32.a
    }
}

# Britain is at peace after annexing France in the Franco-British Union
# AI will tend to release France if historic mode is on or they are democratic

country_event = {
	id = france.33
	title = france.33.title
	desc = france.33.desc
	
	picture = GFX_report_event_generic_peaceful_annexation
	
	fire_only_once = yes
	
	trigger = {
		tag = ENG
		has_war = no
		is_subject = no
		has_global_flag = flag_franco_british_union
		any_owned_state = {
			is_core_of = FRA
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}

	option = { # Release
		name = france.33.a
		
		if = {
			limit = {
				has_cosmetic_tag = FRA_UK
			}
			drop_cosmetic_tag = yes
		}
		
		if = {
			limit = {
				NOT = { country_exists = FRA }
			}
			if = {
				limit = {
					has_government = democratic
				}
				FRA = {
					set_politics = {
						ruling_party = democratic
						elections_allowed = yes
					}
					set_popularities = {
						democratic = 60
						fascism = 20
						communism = 20
					}
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				FRA = {
					set_politics = {
						ruling_party = fascism
						elections_allowed = no
					}
					set_popularities = {
						democratic = 20
						fascism = 60
						communism = 20
					}
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				FRA = {
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
					set_popularities = {
						democratic = 20
						fascism = 20
						communism = 60
					}
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				FRA = {
					set_politics = {
						ruling_party = neutrality
						elections_allowed = no
					}
					set_popularities = {
						democratic = 15
						neutrality = 55
						fascism = 15
						communism = 15
					}
				}
			}
			release = FRA
			
			set_autonomy = { target = FRA autonomy_state = autonomy_free }
		}
		
		every_state = {
			limit = {
				is_core_of = ENG
				is_core_of = FRA
			}
			remove_core_of = ENG
		}
		
		hidden_effect = { # This looks odd in the tooltip
			every_other_country = {
				limit = {
					is_subject_of = ENG
				}
				every_owned_state = {
					limit = {
						is_core_of = FRA
					}
					FRA = {
						transfer_state = PREV
					}
				}
			}
		}
		
		if = {
			limit = {
				is_faction_leader = yes
				FRA = {
					is_subject = no
					is_in_faction = no
				}
			}
			add_to_faction = FRA
		}
		
		every_unit_leader = {
			limit = {
				has_unit_leader_flag = {
					flag = flag_former_french_general
				}
			}
			set_nationality = FRA
		}
		
		hidden_effect =  {
			news_event = { id = france.34 days = 1 }
		}
		
		ai_chance = {
			base = 60
			
			modifier = {
				factor = 2
				has_government = democratic
			}
		}
	}
	
	option = { # Don't release
		name = france.33.b
		
		add_war_support = -0.1
		add_stability = -0.2
		
		every_state = {
			limit = {
				is_core_of = ENG
				is_core_of = FRA
			}
			remove_core_of = ENG
		}
		
		every_unit_leader = {
			limit = {
				has_unit_leader_flag = {
					flag = flag_former_french_general
				}
			}
			set_nationality = FRA
		}
		
		ai_chance = {
			base = 40
			
			modifier = {
				factor = 0.5
				has_stability < 0.5
			}
			modifier = {
				factor = 0.5
				has_war_support < 0.5
			}
			modifier = {
				factor = 2
				has_government = fascism
			}
			modifier = {
				factor = 0.5
				is_historical_focus_on = yes
			}
		}
	}
}

# News event for the release of France

news_event = {
	id = france.34
	title = france.34.title
	desc = france.34.desc
	
	picture = GFX_news_event_degaulle_churchill
	
	is_triggered_only = yes
	
	option = {
		name = france.34.a
		trigger = {
			OR = {
				tag = ENG
				tag = FRA
				is_in_faction_with = ENG
				is_subject_of = ENG
			}
		}
	}
	
	option = {
		name = france.34.b
		trigger = {
			NOT = {
				tag = ENG
				tag = FRA
				is_in_faction_with = ENG
				is_subject_of = ENG
			}
		}
	}
}

#Communists dominate the popular front

news_event = {
	id = france.35
	title = france.35.title
	desc = france.35.desc
	
	picture = GFX_news_event_degaulle_churchill
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {		
			if = {
				limit = {
					tag = FROM
				}
				set_politics = {
					ruling_party = communism
					elections_allowed = yes
				}
				set_cosmetic_tag = FRA_democratic
			}
		}
	}
	
	option = {
		trigger = {
			tag = FROM
		}
		name = france.35.a
	}
	option = {
		trigger = {
			has_government = communism
			NOT = {
				tag = FROM
			}
		}
		name = france.35.b
	}
	option = {
		trigger = {
			NOT = {
				tag = FROM
				has_government = communism
			}
		}
		name = france.35.c
	}
}
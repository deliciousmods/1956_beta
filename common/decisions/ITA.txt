###DEBUG STUFF

debug_decisions = {
	DEBUG_activate_missiolinis_system = {
		priority = 999
		allowed = {
			tag = ITA
		}

		visible = {
			NOT = { has_country_flag = ITA_missiolinis_system_active_flag }
			is_debug = yes
		}

		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
		}

		complete_effect = {
			ITA_missiolinis_initialize_missiolinis_system = yes
			log = "Will mess the sync between between the initial missions to Conquer/Hold Ethiopia for ETH and ITA"
			ITA_benito_mussolini = { unit_leader_event = BBA_italo_ethiopian_war_events.01 } #This event initializes the system
		}
	}

	DEBUG_deactivate_missiolinis_system = {
		priority = 999
		allowed = {
			tag = ITA
		}

		visible = {
			has_country_flag = ITA_missiolinis_system_active_flag
			is_debug = yes
		}

		complete_effect = {
			clr_country_flag = ITA_missiolinis_system_active_flag
			log = "Deactivates Missiolinis system"
		}
	}

	DEBUG_manu_tests = {
		priority = 100
		allowed = {
			OR = {
				original_tag = ITA
				tag = RSI
				tag = RDS
			}
		}

		visible = {
			is_debug = yes
		}

		available = {
			has_country_flag = ITA_defeat_in_ethiopia_flag 
			has_country_flag = ITA_victory_in_ethiopia_flag
		}

		complete_effect = {
			ITA_set_up_character_cw_flags_effect = yes
			#activate_mission = ITA_conquer_the_north_mission
			#activate_mission = ITA_conquer_the_south_mission

			#activate_mission = ITA_conquer_the_north_mission
			#activate_mission = ITA_conquer_the_south_mission

			#ITA_create_francesco_de_martini_operative = yes
			#ITA_create_paolo_caccia_dominioni_operative = yes
			#ITA_create_rosa_dainelli_operative = yes
			#ITA_create_padre_ildefonso_operative = yes
			#ITA_create_pietro_koch_operative = yes
			#ITA_create_carmelo_borg_pisani_operative = yes
			#ITA_create_maurizio_giglio_operative = yes
			#ITA_create_emilio_faldella_operative = yes
			#ITA_create_edgardo_sogno_operative = yes
			#ITA_create_laura_garroni_operative = yes
			#ITA_create_stefanina_moro_operative = yes
			#ITA_create_hugh_o_flaherty_operative = yes

			#ITA_benito_mussolini = { unit_leader_event = BBA_italy_missiolinis.61 }

			#set_variable = { trucks_stored = num_equipment@motorized_equipment_1 }
			#log = "TRUCKS: [?trucks_stored]"

			#activate_mission = ITA_conquer_the_north_mission
			#activate_mission = ITA_conquer_the_south_mission
		}
	}

	DEBUG_initiate_BOP = {
		priority = 100

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_any_power_balance = no
			is_debug = yes
		}

		complete_effect = {
			ITA_initiate_balance_of_power_effect = yes
		}
	}
}


ETH_second_italo_ethiopian_war_category = {
	ITA_withdraw_from_ethiopia = {
		priority = -10
		icon = GFX_decision_eng_trade_unions_support

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_global_flag = second_italo_ethiopian_war_flag
		}

		available = {
			OR = {
				date > 1937.01.01
				NOT = { has_full_control_of_state = 550 } #ERITREA
				NOT = { has_full_control_of_state = 559 } #SOMALILAND
				NOT = { has_full_control_of_state = 844 } #JUBALAND
			}
		}

		cost = 15

		fire_only_once = yes

		complete_effect = {
			ETH = {
				country_event = { id = BBA_italy_second_italo_ethiopian_war.1 hours = 1 }
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				custom_effect_tooltip = ITA_transfer_lost_states_tt
				white_peace = ETH

				ITA_manage_italian_defeat_in_ethiopia_effect = yes
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				NOT = { has_full_control_of_state = 550 } #ERITREA
			}
			modifier = {
				add = 10
				NOT = { has_full_control_of_state = 559 } #SOMALILAND
			}
			modifier = {
				add = 5
				NOT = { has_full_control_of_state = 844 } #JUBALAND
			}
			modifier = {
				factor = 100
				NOT = { has_full_control_of_state = 550 } #ERITREA
				NOT = { has_full_control_of_state = 559 } #SOMALILAND
				NOT = { has_full_control_of_state = 844 } #JUBALAND
			}
			modifier = {
				factor = 0.5
				any_controlled_state = {
					is_core_of = ETH
				}
			}
			modifier = {
				factor = 0
				date < 1937.03.01
			}
		}
	}
	
	r56_ITA_vanquish_ethiopia = {

		icon = generic_civil_support

		#Fail trigger
		available = {
			OR = {
				ETH = {
					is_subject_of = ROOT
					has_capitulated = yes
					exists = no
				}
				has_full_control_of_state = 271
			}
		}
		
		visible = {
			has_war_with = ETH
		}

		cancel_if_not_visible = yes
		
		days_mission_timeout = 395

		fire_only_once = yes

		is_good = no

		activation = {
			tag = ITA
			has_war_with = ETH			
		}

		#Fail
		timeout_effect = {
			add_stability = -0.05
			add_war_support = -0.1	
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}						
				
		}
		#Success
		complete_effect = {
			add_stability = 0.01
			set_country_flag = r56_ITA_vanquish_ethiopia_success
		}
	}
}


##     ## ####  ######   ######  ####  #######  ##       #### ##    ## ####  ######
###   ###  ##  ##    ## ##    ##  ##  ##     ## ##        ##  ###   ##  ##  ##    ##
#### ####  ##  ##       ##        ##  ##     ## ##        ##  ####  ##  ##  ##
## ### ##  ##   ######   ######   ##  ##     ## ##        ##  ## ## ##  ##   ######
##     ##  ##        ##       ##  ##  ##     ## ##        ##  ##  ####  ##        ##
##     ##  ##  ##    ## ##    ##  ##  ##     ## ##        ##  ##   ###  ##  ##    ##
##     ## ####  ######   ######  ####  #######  ######## #### ##    ## ####  ######


### MISSIOLINIS
ITA_missiolinis = {
	DEBUG_MISSIOLINIS_FASTER_TACK = {
		priority = 100
		allowed = {
			tag = ITA
		}

		visible = {
			is_debug = yes
			NOT = { has_country_flag = ITA_missiolinis_faster_missions_flag }
		}

		complete_effect = {
			set_country_flag = ITA_missiolinis_faster_missions_flag

			set_variable = { ITA_missiolinis_conquer_ethiopia_days = 3 }
			set_variable = { ITA_missiolinis_pacify_ethiopia_days = 3 }
			set_variable = { ITA_missiolinis_default_days = 3 }
		}
	}

	DEBUG_MISSIOLINIS_BACK_TO_NORMAL = {
		priority = 100
		allowed = {
			tag = ITA
		}

		visible = {
			is_debug = yes
			has_country_flag = ITA_missiolinis_faster_missions_flag
		}

		complete_effect = {
			clr_country_flag = ITA_missiolinis_faster_missions_flag

			set_variable = { ITA_missiolinis_conquer_ethiopia_days = 170 }
			set_variable = { ITA_missiolinis_pacify_ethiopia_days = 720 }
			set_variable = { ITA_missiolinis_default_days = 350 }
		}
	}

	# Hold the north "dummy" mission for Italy
	ITA_conquer_the_north_mission = {
		icon = GFX_decision_generic_operation

		allowed = {
			tag = ITA
		}

		available = { #GOAL
			OR = {
				has_country_flag = ITA_victory_in_ethiopia_flag
				count_triggers = {
					amount = 2
					# 841 = { is_controlled_by = ROOT }
					# 842 = { is_controlled_by = ROOT }
					# 843 = { is_controlled_by = ROOT }
					controls_province = 1984
					controls_province = 2072
					controls_province = 5097
				}
			}
		}

		activation = {
			always = no
		}

		visible = {
			ITA_missiolinis_system_available = yes
			has_global_flag = second_italo_ethiopian_war_flag
			NOT = { has_country_flag = ITA_victory_in_ethiopia_flag } #If Italy peaces out with ETH, the mission just cancels instead of failing
		}

		highlight_states = {
			highlight_state_targets = {
				state = 841 #BEGEMDER
				state = 842 #TIGRAY
				state = 843 #WELLO
			}
			#highlight_provinces = {
			#	1984
			#	#2072
			#	#5097
			#}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}

		#highlight_states = {
		#	highlight_states_trigger = {
		#		OR = {
		#			state = 841 #BEGEMDER
		#			state = 842 #TIGRAY
		#			state = 843 #WELLO
		#		}
		#	}
		#	highlight_color_while_active = 2
		#}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ETH.ETH_hold_the_north_time

		cancel_effect = {
			if = { #MISSION SUCCEEDED
				limit = {
					OR = {
						has_country_flag = ITA_victory_in_ethiopia_flag
						count_triggers = {
							amount = 2
							# 841 = { is_controlled_by = ROOT }
							# 842 = { is_controlled_by = ROOT }
							# 843 = { is_controlled_by = ROOT }
							controls_province = 1984
							controls_province = 2072
							controls_province = 5097
						}
						hidden_trigger = {
							NOT = { has_global_flag = second_italo_ethiopian_war_flag }
							hidden_trigger = { NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag } }
						}
					}
				}
				country_event = { id = BBA_italy_missiolinis.03_north hours = 1 }
			}
			else = { #MISSION FAILED
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_south_failed_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_north_failed_flag
					#log = "Adding North flag"
				}

				country_event = { id = BBA_italy_missiolinis.02_north hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_progress_in_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_south_failed_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_north_failed_flag
					#log = "Adding North flag"
				}

				country_event = { id = BBA_italy_missiolinis.02_north hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_progress_in_ethiopia_success_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_south_succeeded_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_north_succeeded_flag
				}

				country_event = { id = BBA_italy_missiolinis.03_north hours = 1 }
			}
		}
	}

	# Hold the south "dummy" mission for Italy
	ITA_conquer_the_south_mission = {
		icon = GFX_decision_generic_operation
		allowed = { tag = ITA }

		available = { #GOAL
			OR = {
				has_country_flag = ITA_victory_in_ethiopia_flag
				count_triggers = {
					amount = 2
					# 835 = { is_controlled_by = ROOT }
					# 836 = { is_controlled_by = ROOT }
					# 837 = { is_controlled_by = ROOT }
					controls_province = 12812
					controls_province = 10775
					controls_province = 13296
				}
			}
		}

		activation = {
			always = no
		}

		visible = {
			ITA_missiolinis_system_available = yes
			has_global_flag = second_italo_ethiopian_war_flag
			NOT = { has_country_flag = ITA_victory_in_ethiopia_flag } #If Italy peaces out with ETH, the mission just cancels instead of failing
		}

		highlight_states = {
			highlight_states_trigger = {
				OR = {
					state = 835 #HARARGHE
					state = 836 #BALE
					state = 837 #SIDAMO
				}
			}
			highlight_color_while_active = 2
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ETH.ETH_hold_the_south_time

		cancel_effect = {
			if = { #MISSION SUCCEEDED
				limit = {
					OR = {
						has_country_flag = ITA_victory_in_ethiopia_flag
						count_triggers = {
							amount = 2
							# 835 = { is_controlled_by = ROOT }
							# 836 = { is_controlled_by = ROOT }
							# 837 = { is_controlled_by = ROOT }
							controls_province = 12812
							controls_province = 10775
							controls_province = 13247
						}
						hidden_trigger = {
							NOT = { has_global_flag = second_italo_ethiopian_war_flag }
							hidden_trigger = { NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag } }
						}
					}
				}
				country_event = { id = BBA_italy_missiolinis.05_south hours = 1 }
			}
			else = { #MISSION FAILED
				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_north_failed_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_south_failed_flag
					#log = "Adding South flag"
				}

				country_event = { id = BBA_italy_missiolinis.04_south hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_progress_in_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_north_failed_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_south_failed_flag
					#log = "Adding South flag"
				}
				country_event = { id = BBA_italy_missiolinis.04_south hours = 1 } #Triggered one hour later for event options purposes
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_progress_in_ethiopia_success_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_north_succeeded_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_south_succeeded_flag
				}

				country_event = { id = BBA_italy_missiolinis.05_south hours = 1 }
			}
		}
	}

	# Conquer Ethiopia
	ITA_missiolini_conquer_ethiopia = {
		icon = GFX_decision_generic_prepare_civil_war
		allowed = { tag = ITA }

		visible = {
			ITA_missiolinis_system_available = yes
			hidden_trigger = { NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag } }
		}

		available = { #GOAL
			NOT = { has_global_flag = second_italo_ethiopian_war_flag }
			hidden_trigger = { NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag } }
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_conquer_ethiopia_days

		cancel_effect = {
			if = { #Succeeded
				limit = {
					NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag }
				}
				country_event = { id = BBA_italy_missiolinis.13 hours = 1 }
			}
			else = { #Failed
				country_event = { id = BBA_italy_missiolinis.12 hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_conquer_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				ITA_missiolinis_manage_next_mission = yes

				country_event = { id = BBA_italy_missiolinis.12 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_conquer_ethiopia_success_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				ITA_missiolinis_manage_next_mission = yes

				country_event = { id = BBA_italy_missiolinis.13 hours = 1 }
			}
		}
	}

	# Pacify Ethiopia - BBA
	ITA_missiolini_pacify_ethiopia = {
		icon = GFX_decision_generic_police_action
		allowed = {
			tag = ITA
			has_dlc = "By Blood Alone"
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_pacify_ethiopia_goal_tt
				all_of_scopes = {
					array = ITA_initial_ethiopian_states
					compliance > 60 #WARNING THIS VALUE NEEDS TO MATCH THE ONE IN EVENT TRIGGER
				}
			}
		}

		activation = {
			always = no
		}

		visible = {
			has_global_flag = second_italo_ethiopian_war_flag
		}

		#cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_pacify_ethiopia_days

		cancel_trigger = {
			hidden_trigger = { ITA_missiolinis_system_available = no }
		}

		cancel_effect = {
			if = { #Succeeded
				limit = {
					all_of_scopes = {
						array = ITA_initial_ethiopian_states
						is_owned_by = ROOT
					}
				}
				country_event = { id = BBA_italy_missiolinis.23 hours = 1 }
			}
			else = { #Failed
				country_event = { id = BBA_italy_missiolinis.22 hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_pacify_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.22 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_pacify_ethiopia_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.23 hours = 1 }
			}
		}
	}

	# Pacify Ethiopia - NO BBA
	ITA_missiolini_pacify_ethiopia_vanilla = {
		icon = GFX_decision_generic_police_action
		allowed = {
			tag = ITA
			NOT = { has_dlc = "By Blood Alone"}
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_pacify_ethiopia_goal_tt
				all_of_scopes = {
					array = ITA_initial_ethiopian_states
					compliance > 60 #WARNING THIS VALUE NEEDS TO MATCH THE ONE IN EVENT TRIGGER
				}
			}
		}

		activation = {
			always = no
		}

		visible = {
			has_global_flag = second_italo_ethiopian_war_flag
		}

		#cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_pacify_ethiopia_days

		cancel_trigger = {
			hidden_trigger = { ITA_missiolinis_system_available = no }
		}

		cancel_effect = {
			if = { #Succeeded
				limit = {
					all_of_scopes = {
						array = ITA_initial_ethiopian_states
						compliance > 70
					}
				}
				log = "Success"
				country_event = { id = BBA_italy_missiolinis.23 hours = 1 }
			}
			else = { #Failed
				log = "Failure"
				country_event = { id = BBA_italy_missiolinis.22 hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_pacify_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.22 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_pacify_ethiopia_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.23 hours = 1 }
			}
		}
	}

	# Strengthen Heavy Industry
	ITA_missiolini_strengthen_heavy_industry = {
		icon = GFX_decision_generic_merge_plant_materiel
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = { #TODO_Manu: This should be replaced by the appropriate check once Red king merges stuff (Factories BUILD check)
				tooltip = ITA_missiolini_strengthen_heavy_industry_trigger_tt
				num_of_civilian_factories > ROOT.ITA_missiolinis_required_civs
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_heavy_industry_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.32 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_heavy_industry_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.33 hours = 1 }
			}
		}
	}

	# Strengthen the Army
	ITA_missiolini_strengthen_the_army = {
		icon = GFX_decision_generic_military
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#has_army_manpower = { size > ROOT.ITA_missiolinis_fielded_manpower_goal } #1kk #TODO_Manu: Code support to use vars in has_army_manpower
			#if = { #FIRST TIME - FIXED AMOUNT #TODO_Manu: NEED CODE SUPPORT (see line above)
			#	limit = {
			#		NOT = { has_country_flag = ITA_missiolini_strengthen_the_army_repeatable_flag } #First time it's a fixed amopunt. Then if the mission is repeated it will require +500k MP in the field (compare to current)
			#	}
				if = {
					limit = {
						ITA_has_missiolini_easier_goals = yes
					}
					has_army_manpower = { size > 650000 } #650k
				}
				else = {
					has_army_manpower = { size > 750000 } #750k
				}
			#}
			#else = { #IF REPEATING
			#	has_army_manpower = { size > 1000000 } #TODO_Manu: Current MP + 500 -> Code Support for this (has_army_manpower does not take vars)
			#}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_army_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.42 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_army_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.43 hours = 1 }
			}
		}
	}

	# Stockpile Trucks
	ITA_missiolini_stockpile_trucks = {
		icon = GFX_decision_generic_trucks
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			has_equipment = { #TODO_Manu: Code Support to also get the trucks in the field // Alternatively, check for trucks produced (Code support too!)
				motorized_equipment_1 > ROOT.ITA_missiolinis_trucks_to_produce
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_stockpile_trucks_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.52 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_stockpile_trucks_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.53 hours = 1 }
			}
		}
	}

	# Stockpile fuel
	ITA_missiolini_stockpile_fuel = {
		icon = GFX_decision_oil
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			has_fuel > 500000
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_stockpile_fuel_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.62 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_stockpile_fuel_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.63 hours = 1 }
			}
		}
	}

	# Strengthen the Airforce
	ITA_missiolini_strengthen_the_airforce = {
		icon = GFX_decision_generic_merge_plant_aircraft
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#Fighters
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_strengthen_the_airforce_fighters_goal_tt
				#Fighters
				set_temp_variable = { current_fighters = num_equipment@small_plane_airframe }
				add_to_temp_variable = { current_fighters = num_deployed_planes_with_type@small_plane_airframe }
				##CV Fighters
				#add_to_temp_variable = { current_fighters = num_equipment@cv_small_plane_airframe }
				#add_to_temp_variable = { current_fighters = num_deployed_planes_with_type@cv_small_plane_airframe }
				
				

				check_variable = { current_fighters = ITA_missiolinis_fighters_goal compare = greater_than_or_equals }
			}
			#Bombers
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_strengthen_the_airforce_bombers_goal_tt
				#CAS
				set_temp_variable = { current_cas = num_equipment@small_plane_cas_airframe }
				add_to_temp_variable = { current_cas = num_deployed_planes_with_type@small_plane_cas_airframe }
				#CV CAS
				#add_to_temp_variable = { current_cas = num_equipment@cv_small_plane_cas_airframe }
				#add_to_temp_variable = { current_cas = num_deployed_planes_with_type@cv_small_plane_cas_airframe }
				#Naval Bombers
				set_temp_variable = { current_naval_bombers = num_equipment@small_plane_naval_bomber_airframe }
				add_to_temp_variable = { current_naval_bombers = num_deployed_planes_with_type@small_plane_naval_bomber_airframe }
				#CV Naval Bombers
				#add_to_temp_variable = { current_naval_bombers = num_equipment@cv_small_plane_naval_bomber_airframe }
				#add_to_temp_variable = { current_naval_bombers = num_deployed_planes_with_type@cv_small_plane_naval_bomber_airframe }

				#Tactical Bombers
				set_temp_variable = { current_tactical_bombers = num_equipment@medium_plane_airframe }
				add_to_temp_variable = { current_tactical_bombers = num_deployed_planes_with_type@medium_plane_airframe }
				OR = {
					#CAS
					check_variable = { current_cas = ITA_missiolinis_cas_goal compare = greater_than_or_equals }
					#Naval Bombers
					check_variable = { current_naval_bombers = ITA_missiolinis_naval_bombers_goal compare = greater_than_or_equals }
					#Tactical Bombers
					check_variable = { current_tactical_bombers = ITA_missiolinis_tactical_bombers_goal compare = greater_than_or_equals }
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_airforce_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.72 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_airforce_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.73 hours = 1 }
			}
		}
	}

	# Industrial Research
	ITA_missiolini_industrial_research = {
		icon = GFX_decision_generic_wreckers
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#ASSIGN TECH GOAL
			if = { #Production - Advanced Machine Tools
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 1 }
				}
				has_tech = advanced_machine_tools
			}
			else_if = { #Production - Assembly Line Production
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 2 }
				}
				has_tech = assembly_line_production
			}
			else_if = { #Production - Flexible Line / Streamlined Line
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 3 }
				}
				OR = {
					has_tech = flexible_line
					has_tech = streamlined_line
				}
			}
			else_if = { #Industry - Concentrated Industry 3 / Dispersed Industry 3
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 1 }
				}
				OR = {
					has_tech = concentrated_industry3
					has_tech = dispersed_industry3
				}
			}
			else_if = { #Industry - Concentrated Industry 4 / Dispersed Industry 4
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 2 }
				}
				OR = {
					has_tech = concentrated_industry4
					has_tech = dispersed_industry4
				}
			}
			else_if = { #Industry - Concentrated Industry 5 / Dispersed Industry 5
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 3 }
				}
				OR = {
					has_tech = concentrated_industry5
					has_tech = dispersed_industry5
				}
			}
			else_if = { #Construction - Construction 3
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 1 }
				}
				has_tech = construction3
			}
			else_if = { #Construction - Construction 4
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 2 }
				}
				has_tech = construction4
			}
			else_if = { #Construction - Construction 5
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 3 }
				}
				has_tech = construction5
			}
			else = { #Absurd fallback just in case
				has_tech = nukes
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_industrial_research_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.82 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_industrial_research_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.83 hours = 1 }
			}
		}
	}

	# Expand Intelligence Agency
	ITA_missiolini_expand_intelligence_agency = {
		icon = GFX_decision_onmap_recruit_operative
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#ASSIGN INTEL AGENCY GOAL
			if = { #Create Intel Agency
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 1 }
				}
				has_intelligence_agency = yes
			}
			else_if = { #Upgrade - Form Cryptology Department
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 2 }
				}
				has_done_agency_upgrade = upgrade_form_department
			}
			else_if = { #Production - Form Army Department
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 3 }
				}
				has_done_agency_upgrade = upgrade_army_department
			}
			else_if = { #Production - Anti-Partisan
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 4 }
				}
				has_done_agency_upgrade = upgrade_anti_partisan
			}
			else_if = { #Production - Passive Defense
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 5 }
				}
				has_done_agency_upgrade = upgrade_passive_defense
			}
			else = { #Absurd fallback just in case
				agency_upgrade_number > 30 #31 is max
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_expand_intelligence_service_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.92 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_expand_intelligence_service_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.93 hours = 1 }
			}
		}
	}

	# Occupy Albania
	ITA_missiolini_occupy_albania = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			44 = { #ALBANIA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			805 = { #NORTHERN EPIRUS
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = ALB
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_albania_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.102 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_albania_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.103 hours = 1 }
			}
		}
	}

	# Occupy Dalmatia
	ITA_missiolini_occupy_dalmatia = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			103 = { #DALMATIA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = YUG
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_dalmatia_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.112 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_dalmatia_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.113 hours = 1 }
			}
		}
	}

	# Occupy Greece
	ITA_missiolini_occupy_greece = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			185 = { #EPIRUS
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			47 = { #ATTICA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			186 = { #PELOPONNESE
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = GRE
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_greece_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.122 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_greece_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.123 hours = 1 }
			}
		}
	}

	# Occupy Ticino
	ITA_missiolini_occupy_ticino = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			846 = { #TICINO
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = SWI
		cosmetic_ideology = democratic

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_ticino_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.132 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_ticino_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.133 hours = 1 }
			}
		}
	}






	# Bolster Political Cabinet
	ITA_missiolini_bolster_political_cabinet = {
		icon = GFX_decision_generic_political_discourse
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_bolster_political_cabinet_trigger_tt
				amount_taken_ideas = {
					amount > 2
					slots = { political_advisor }
				}
				OR = {
					has_idea = ITA_gian_galeazzo_ciano
					has_idea = ITA_dino_grandi
					has_idea = ITA_giuseppe_bottai
					has_idea = ITA_renato_ricci
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_bolster_political_cabinet_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.202 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_bolster_political_cabinet_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.203 hours = 1 }
			}
		}
	}

	# Bolster Military High Command
	ITA_missiolini_bolster_military_high_command = {
		icon = GFX_decision_generic_army_support
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_bolster_military_high_command_trigger_tt
				amount_taken_ideas = {
					amount > 2
					#category = { military_staff }
					slots = { high_command }
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_bolster_military_high_command_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.212 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_bolster_military_high_command_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.213 hours = 1 }
			}
		}
	}
}



########     ###    ##          ###    ##    ##  ######  ########     #######  ########    ########   #######  ##      ## ######## ########
##     ##   ## ##   ##         ## ##   ###   ## ##    ## ##          ##     ## ##          ##     ## ##     ## ##  ##  ## ##       ##     ##
##     ##  ##   ##  ##        ##   ##  ####  ## ##       ##          ##     ## ##          ##     ## ##     ## ##  ##  ## ##       ##     ##
########  ##     ## ##       ##     ## ## ## ## ##       ######      ##     ## ######      ########  ##     ## ##  ##  ## ######   ########
##     ## ######### ##       ######### ##  #### ##       ##          ##     ## ##          ##        ##     ## ##  ##  ## ##       ##   ##
##     ## ##     ## ##       ##     ## ##   ### ##    ## ##          ##     ## ##          ##        ##     ## ##  ##  ## ##       ##    ##
########  ##     ## ######## ##     ## ##    ##  ######  ########     #######  ##          ##         #######   ###  ###  ######## ##     ##


ITA_balance_of_power_category = {
	DEBUG_deactivate_BOP = {
		priority = 91
		visible = {
			is_debug = yes
		}
		complete_effect = {
			remove_power_balance = { id = ITA_power_balance }
		}
	}

	DEBUG_bop_make_decisions_faster_and_free = {
		priority = 90
		visible = {
			is_debug = yes
			NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag }
		}
		complete_effect = {
			set_country_flag = ITA_debug_bop_decisions_faster_and_free_flag
			set_variable = { ITA_bop_take_over_ministry_cost = 0 }
			set_variable = { ITA_bop_resign_ministry_cost = 0 }
		}
	}

	DEBUG_bop_make_decisions_go_back_to_normal = {
		priority = 90
		visible = {
			is_debug = yes
			has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag
		}
		complete_effect = {
			clr_country_flag = ITA_debug_bop_decisions_faster_and_free_flag
			set_variable = { ITA_bop_take_over_ministry_cost = 50 }
			set_variable = { ITA_bop_resign_ministry_cost = 15 }
		}
	}

	DEBUG_bop_absurdly_high_increase_value = {
		priority = 20
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_absurdly_high_increase_effect = yes
		}
	}

	DEBUG_bop_high_increase_value = {
		priority = 19
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_high_increase_effect = yes
		}
	}

	DEBUG_bop_medium_increase_value = {
		priority = 18
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_medium_increase_effect = yes
		}
	}

	DEBUG_bop_low_increase_value = {
		priority = 17
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_low_increase_effect = yes
		}
	}

	DEBUG_bop_very_low_increase_value = {
		priority = 16
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_very_low_increase_effect = yes
		}
	}

	DEBUG_bop_absurdly_high_decrease_value = {
		priority = 15
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_absurdly_high_decrease_effect = yes
		}
	}

	DEBUG_bop_high_decrease_value = {
		priority = 14
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_high_decrease_effect = yes
		}
	}

	DEBUG_bop_medium_decrease_value = {
		priority = 13
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_medium_decrease_effect = yes
		}
	}

	DEBUG_bop_low_decrease_value = {
		priority = 12
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_low_decrease_effect = yes
		}
	}

	DEBUG_bop_very_low_decrease_value = {
		priority = 11
		visible = {
			is_debug = yes
		}
		complete_effect = {
			ITA_bop_very_low_decrease_effect = yes
		}
	}

	DEBUG_set_mussolini_bop = {
		priority = 8
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				right_side = ITA_mussolini_side
			}
		}
	}

	DEBUG_set_grand_council_bop = {
		priority = 7
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				left_side = ITA_grand_council_side
			}
		}
	}

	DEBUG_set_balbo_bop = {
		priority = 6
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				right_side = ITA_balbo_side
			}
		}
	}

	DEBUG_set_grandi_bop = {
		priority = 5
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				right_side = ITA_grandi_side
			}
		}
	}

	DEBUG_set_king_bop = {
		priority = 4
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				right_side = ITA_king_side
			}
		}
	}

	DEBUG_set_king_umberto_bop = {
		priority = 3
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				right_side = ITA_king_umberto_side
			}
		}
	}

	DEBUG_set_communism_bop = {
		priority = 2
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				left_side = ITA_communism_side
			}
		}
	}

	DEBUG_set_democratic_bop = {
		priority = 1
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				right_side = ITA_democratic_side
			}
		}
	}

	DEBUG_set_pope_bop = {
		priority = 0
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				left_side = ITA_pope_side
			}
		}
	}

	DEBUG_set_max_bop = {
		priority = -1
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				set_value = 1
			}
		}
	}

	DEBUG_set_min_bop = {
		priority = -2
		visible = {
			is_debug = yes
		}
		complete_effect = {
			set_power_balance = {
				id = ITA_power_balance
				set_value = -1
			}
		}
	}

	ITA_bop_take_over_ministry_of_foreign_affairs = {
		priority = 100
		icon = GFX_decision_eng_trade_unions_demand

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			NOT = { has_country_leader_with_trait = mussolini_minister_of_foreign_affairs }
		}

		available = {
			if = {
				limit = {
					has_country_flag = ITA_mussolini_resigned_minister_of_foreign_affairs_position_flag
					NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag } #Debug
				}
				custom_trigger_tooltip = {
					tooltip = ITA_mussolini_resigned_minister_of_foreign_affairs_position_flag
					NOT = { has_country_flag = ITA_mussolini_resigned_minister_of_foreign_affairs_position_flag }
				}
			}
		}

		cost = ITA_bop_take_over_ministry_cost

		complete_effect = {
			set_country_flag = { flag = ITA_mussolini_took_over_minister_of_foreign_affairs_flag value = 1 days = 365 }
			add_country_leader_trait = mussolini_minister_of_foreign_affairs
			ITA_bop_medium_increase_effect = yes

			hidden_effect = { #In order to work with debug decisions
				if = {
					limit = {
						has_country_flag = ITA_mussolini_resigned_minister_of_foreign_affairs_position_flag
					}
					clr_country_flag = ITA_mussolini_resigned_minister_of_foreign_affairs_position_flag
				}
			}
		}

		ai_will_do = {
			base = 0.1
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.1
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < -0.2
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = no
			}
		}
	}

	ITA_bop_resign_ministry_of_foreign_affairs_position = {
		priority = 100
		icon = GFX_decision_generic_political_discourse

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			has_country_leader_with_trait = mussolini_minister_of_foreign_affairs
		}

		available = {
			if = {
				limit = {
					has_country_flag = ITA_mussolini_took_over_minister_of_foreign_affairs_flag
					NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag } #Debug
				}
				custom_trigger_tooltip = {
					tooltip = ITA_mussolini_took_over_minister_of_foreign_affairs_flag
					NOT = { has_country_flag = ITA_mussolini_took_over_minister_of_foreign_affairs_flag }
				}
			}
		}

		cost = ITA_bop_resign_ministry_cost

		complete_effect = {
			set_country_flag = { flag = ITA_mussolini_resigned_minister_of_foreign_affairs_position_flag value = 1 days = 365 }
			remove_country_leader_trait = mussolini_minister_of_foreign_affairs
			ITA_bop_medium_decrease_effect = yes

			hidden_effect = { #In order to work with debug decisions
				if = {
					limit = {
						has_country_flag = ITA_mussolini_took_over_minister_of_foreign_affairs_flag
					}
					clr_country_flag = ITA_mussolini_took_over_minister_of_foreign_affairs_flag
				}
			}
		}

		ai_will_do = { #Never
			base = 0
		}
	}

	ITA_bop_take_over_ministry_of_justice = {
		priority = 99
		icon = GFX_decision_eng_trade_unions_demand

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			NOT = { has_country_leader_with_trait = mussolini_minister_of_justice }
		}

		available = {
			if = {
				limit = {
					has_country_flag = ITA_mussolini_resigned_minister_of_justice_position_flag
					NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag } #Debug
				}
				custom_trigger_tooltip = {
					tooltip = ITA_mussolini_resigned_minister_of_justice_position_flag
					NOT = { has_country_flag = ITA_mussolini_resigned_minister_of_justice_position_flag }
				}
			}
		}

		cost = ITA_bop_take_over_ministry_cost

		complete_effect = {
			set_country_flag = { flag = ITA_mussolini_took_over_minister_of_justice_flag value = 1 days = 365 }
			add_country_leader_trait = mussolini_minister_of_justice
			ITA_bop_medium_increase_effect = yes

			hidden_effect = { #In order to work with debug decisions
				if = {
					limit = {
						has_country_flag = ITA_mussolini_resigned_minister_of_justice_position_flag
					}
					clr_country_flag = ITA_mussolini_resigned_minister_of_justice_position_flag
				}
			}
		}

		ai_will_do = {
			base = 0.1
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < 0.1
				}
			}
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < 0
				}
			}
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < -0.2
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = no
			}
		}
	}

	ITA_bop_resign_ministry_of_justice_position = {
		priority = 99
		icon = GFX_decision_generic_political_discourse

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			has_country_leader_with_trait = mussolini_minister_of_justice
		}

		available = {
			if = {
				limit = {
					has_country_flag = ITA_mussolini_took_over_minister_of_justice_flag
					NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag } #Debug
				}
				custom_trigger_tooltip = {
					tooltip = ITA_mussolini_took_over_minister_of_justice_flag
					NOT = { has_country_flag = ITA_mussolini_took_over_minister_of_justice_flag }
				}
			}
		}

		cost = ITA_bop_resign_ministry_cost

		complete_effect = {
			set_country_flag = { flag = ITA_mussolini_resigned_minister_of_justice_position_flag value = 1 days = 365 }
			remove_country_leader_trait = mussolini_minister_of_justice
			ITA_bop_medium_decrease_effect = yes

			hidden_effect = { #In order to work with debug decisions
				if = {
					limit = {
						has_country_flag = ITA_mussolini_took_over_minister_of_justice_flag
					}
					clr_country_flag = ITA_mussolini_took_over_minister_of_justice_flag
				}
			}
		}

		ai_will_do = { #Never
			base = 0
		}
	}

	ITA_bop_take_over_ministry_of_education = {
		priority = 98
		icon = GFX_decision_eng_trade_unions_demand

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			NOT = { has_country_leader_with_trait = mussolini_minister_of_education }
		}

		available = {
			if = {
				limit = {
					has_country_flag = ITA_mussolini_resigned_minister_of_education_position_flag
					NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag } #Debug
				}
				custom_trigger_tooltip = {
					tooltip = ITA_mussolini_resigned_minister_of_education_position_flag
					NOT = { has_country_flag = ITA_mussolini_resigned_minister_of_education_position_flag }
				}
			}
		}

		cost = ITA_bop_take_over_ministry_cost

		complete_effect = {
			set_country_flag = { flag = ITA_mussolini_took_over_minister_of_education_flag value = 1 days = 365 }
			add_country_leader_trait = mussolini_minister_of_education
			ITA_bop_medium_increase_effect = yes

			hidden_effect = { #In order to work with debug decisions
				if = {
					limit = {
						has_country_flag = ITA_mussolini_resigned_minister_of_education_position_flag
					}
					clr_country_flag = ITA_mussolini_resigned_minister_of_education_position_flag
				}
			}
		}

		ai_will_do = {
			base = 0.1
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < 0.1
				}
			}
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < 0
				}
			}
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < -0.2
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = no
			}
		}
	}

	ITA_bop_resign_ministry_of_education_position = {
		priority = 98
		icon = GFX_decision_generic_political_discourse

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			has_country_leader_with_trait = mussolini_minister_of_education
		}

		available = {
			if = {
				limit = {
					has_country_flag = ITA_mussolini_took_over_minister_of_education_flag
					NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag } #Debug
				}
				custom_trigger_tooltip = {
					tooltip = ITA_mussolini_took_over_minister_of_education_flag
					NOT = { has_country_flag = ITA_mussolini_took_over_minister_of_education_flag }
				}
			}
		}

		cost = ITA_bop_resign_ministry_cost

		complete_effect = {
			set_country_flag = { flag = ITA_mussolini_resigned_minister_of_education_position_flag value = 1 days = 365 }
			remove_country_leader_trait = mussolini_minister_of_education
			ITA_bop_medium_decrease_effect = yes

			hidden_effect = { #In order to work with debug decisions
				if = {
					limit = {
						has_country_flag = ITA_mussolini_took_over_minister_of_education_flag
					}
					clr_country_flag = ITA_mussolini_took_over_minister_of_education_flag
				}
			}
		}

		ai_will_do = { #Never
			base = 0
		}
	}

	ITA_bop_take_over_ministry_of_corporations = {
		priority = 97
		icon = GFX_decision_eng_trade_unions_demand

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			NOT = { has_country_leader_with_trait = mussolini_minister_of_corporations }
		}

		available = {
			if = {
				limit = {
					has_country_flag = ITA_mussolini_resigned_minister_of_corporations_position_flag
					NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag } #Debug
				}
				custom_trigger_tooltip = {
					tooltip = ITA_mussolini_resigned_minister_of_corporations_position_flag
					NOT = { has_country_flag = ITA_mussolini_resigned_minister_of_corporations_position_flag }
				}
			}
		}

		cost = ITA_bop_take_over_ministry_cost

		complete_effect = {
			set_country_flag = { flag = ITA_mussolini_took_over_minister_of_corporations_flag value = 1 days = 365 }
			add_country_leader_trait = mussolini_minister_of_corporations
			ITA_bop_medium_increase_effect = yes

			hidden_effect = { #In order to work with debug decisions
				if = {
					limit = {
						has_country_flag = ITA_mussolini_resigned_minister_of_corporations_position_flag
					}
					clr_country_flag = ITA_mussolini_resigned_minister_of_corporations_position_flag
				}
			}
		}

		ai_will_do = {
			base = 0.1
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < 0.1
				}
			}
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < 0
				}
			}
			modifier = {
				factor = 9
				power_balance_value = {
					id = ITA_power_balance
					value < -0.2
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = no
			}
		}
	}

	ITA_bop_resign_ministry_of_corporations_position = {
		priority = 97
		icon = GFX_decision_generic_political_discourse

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			has_country_leader_with_trait = mussolini_minister_of_corporations
		}

		available = {
			if = {
				limit = {
					has_country_flag = ITA_mussolini_took_over_minister_of_corporations_flag
					NOT = { has_country_flag = ITA_debug_bop_decisions_faster_and_free_flag } #Debug
				}
				custom_trigger_tooltip = {
					tooltip = ITA_mussolini_took_over_minister_of_corporations_flag
					NOT = { has_country_flag = ITA_mussolini_took_over_minister_of_corporations_flag }
				}
			}
		}

		cost = ITA_bop_resign_ministry_cost

		complete_effect = {
			set_country_flag = { flag = ITA_mussolini_resigned_minister_of_corporations_position_flag value = 1 days = 365 }
			remove_country_leader_trait = mussolini_minister_of_corporations
			ITA_bop_medium_decrease_effect = yes

			hidden_effect = { #In order to work with debug decisions
				if = {
					limit = {
						has_country_flag = ITA_mussolini_took_over_minister_of_corporations_flag
					}
					clr_country_flag = ITA_mussolini_took_over_minister_of_corporations_flag
				}
			}
		}

		ai_will_do = { #Never
			base = 0
		}
	}




	#DANNES#
	ITA_bop_slander_the_duce = {
		priority = 120
		icon = GFX_decision_generic_political_discourse

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			if = {
				limit = {
					has_completed_focus = ITA_struggle_in_ethiopia
				}
				has_completed_focus = ITA_undermine_the_duce
			}
			else_if = {
				limit = {
					has_completed_focus = ITA_solid_progress
				}
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {}

		cost = ITA_bop_generic_council_cost

		fire_only_once = yes

		complete_effect = {
			ITA_bop_low_decrease_effect = yes
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0.1
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value > -0.1
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = yes
			}
		}
	}

	ITA_bop_criticize_the_war = {
		priority = 119
		icon = GFX_decision_generic_political_discourse

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			if = {
				limit = {
					has_completed_focus = ITA_struggle_in_ethiopia
				}
				has_completed_focus = ITA_undermine_the_duce
			}
			else_if = {
				limit = {
					has_completed_focus = ITA_solid_progress
				}
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {}

		ai_hint_pp_cost = 25
		custom_cost_trigger = {
			command_power > 24
			has_political_power > 24
		}
		custom_cost_text = decision_cost_CP_25_pp_25

		fire_only_once = yes

		complete_effect = {
			ITA_bop_low_decrease_effect = yes
			hidden_effect = {
				add_command_power = -25
				add_political_power = -25

			}

		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0.1
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value > -0.1
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = yes
			}
		}
	}

	ITA_bop_question_the_army = {
		priority = 118
		icon = GFX_decision_generic_political_discourse

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			OR = {
				has_completed_focus = ITA_conspiracies_in_the_shadows
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			has_political_power > 14
			has_army_experience > 9
		}
		custom_cost_text = decision_cost_pp_15_ArmXP_10

		fire_only_once = yes

		complete_effect = {
			ITA_bop_very_low_decrease_effect = yes
			hidden_effect = {
				add_political_power = -15
				army_experience = -10
			}
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0.1
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > -0.1
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = yes
			}
		}
	}

	ITA_bop_question_the_airforce = {
		priority = 117
		icon = GFX_decision_generic_political_discourse

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			OR = {
				has_completed_focus = ITA_conspiracies_in_the_shadows
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			has_political_power > 14
			has_air_experience > 9
		}
		custom_cost_text = decision_cost_pp_15_AirXP_10

		fire_only_once = yes

		complete_effect = {
			ITA_bop_very_low_decrease_effect = yes
			hidden_effect = {
				add_political_power = -15
				air_experience = -10
			}
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0.1
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > -0.1
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = yes
			}
		}
	}

	ITA_bop_question_the_navy = {
		priority = 116
		icon = GFX_decision_generic_political_discourse

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			OR = {
				has_completed_focus = ITA_conspiracies_in_the_shadows
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			has_political_power > 14
			has_navy_experience > 9
		}
		custom_cost_text = decision_cost_pp_15_NavXP_10

		fire_only_once = yes

		complete_effect = {
			ITA_bop_very_low_decrease_effect = yes
			hidden_effect = {
				add_political_power = -15
				navy_experience = -10
			}
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0.1
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > 0
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value > -0.1
				}
			}
			modifier = {
				factor = 0
				ITA_is_historical_ai = yes
			}
		}
	}

	ITA_bop_military_parade = {
		priority = 1115
		icon = GFX_decision_generic_military

		allowed = {
			original_tag = ITA
		}

		visible = {
			OR = {
				has_completed_focus = ITA_italo_balbo_focus
				has_completed_focus = ITA_dino_grandi_focus
				has_completed_focus = ITA_monarchia_d_italia
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {
			NOT = { has_global_flag = second_italo_ethiopian_war_flag }
		}

		cost = ITA_bop_generic_council_cost

		days_re_enable = 365

		complete_effect = {
			ITA_bop_very_low_increase_effect = yes
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.3
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.15
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < -0.11
				}
			}
			modifier = {
				factor = 0
				AND = {
					OR = {
						ITA_is_alt_fascist_balbo_ai = yes
						ITA_is_alt_fascist_grandi_ai = yes
						ITA_is_monarchist_ai = yes
						ITA_is_christian_democracy_ai = yes
					}
					has_country_leader = {
						character = ITA_benito_mussolini
						ruling_only = yes
					}
				}
			}
			modifier = {
				factor = 0
				ITA_is_socialist_ai = yes
			}
		}
	}

	ITA_bop_send_support = {
		priority = 114
		icon = ger_military_buildup

		allowed = {
			original_tag = ITA
		}

		visible = {		}

		fire_only_once = yes

		available = {
			NOT = { has_global_flag = second_italo_ethiopian_war_flag }
			ROOT = { has_government = fascism }
		}

		target_trigger = {
			FROM = {
				has_government = fascism
				is_subject = no
				AND = {
					has_war = yes
					NOT = {
						has_war_with = ROOT
						ROOT = {
							any_allied_country = {
								has_war_with = FROM
							}
						}
						FROM = { is_justifying_wargoal_against = ROOT }
						ROOT = { is_justifying_wargoal_against = FROM }
						FROM = { has_wargoal_against = ROOT }
						ROOT = { has_wargoal_against = FROM }
					}
				}
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			OR = {
				has_completed_focus = ITA_italo_balbo_focus
				has_completed_focus = ITA_dino_grandi_focus
				has_completed_focus = ITA_culto_del_duce
			}
		}

		days_remove = 60

		days_re_enable = 365

		remove_effect = {
			effect_tooltip = {
				FROM = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2500
						producer = ROOT
					}
					add_equipment_to_stockpile = {
						type = support_equipment
						amount = 50
						producer = ROOT
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = SOV_sent_us_weapons
					}
				}
			}
			hidden_effect = {
				FROM = { country_event = { id = BBA_italy_sends_military_support.1 } }
			}
		}

		ai_hint_pp_cost = 25
		custom_cost_trigger = {
			has_political_power > 24
			command_power > 24
		}
		custom_cost_text = decision_cost_CP_25_pp_25

		complete_effect = {
			ITA_bop_low_increase_effect = yes
			hidden_effect = {
				add_political_power = -25
				add_command_power = -25
			}

		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < 0.3
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.15
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < -0.11
				}
			}
			modifier = {
				factor = 0
				AND = {
					OR = {
						ITA_is_alt_fascist_balbo_ai = yes
						ITA_is_alt_fascist_grandi_ai = yes
						ITA_is_monarchist_ai = yes
						ITA_is_christian_democracy_ai = yes
					}
					has_country_leader = {
						character = ITA_benito_mussolini
						ruling_only = yes
					}
				}
			}
		}
	}

	ITA_bop_praise_the_army = {
		priority = 113
		icon = GFX_decision_generic_tank

		allowed = {
			original_tag = ITA
		}

		visible = {
			OR = {
				has_completed_focus = ITA_italo_balbo_focus
				has_completed_focus = ITA_dino_grandi_focus
				has_completed_focus = ITA_monarchia_d_italia
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {}

		cost = ITA_bop_generic_council_cost

		fire_only_once = yes

		complete_effect = {
			ITA_bop_very_low_increase_effect = yes
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < 0.3
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.15
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < -0.11
				}
			}
			modifier = {
				factor = 0
				AND = {
					OR = {
						ITA_is_alt_fascist_balbo_ai = yes
						ITA_is_alt_fascist_grandi_ai = yes
						ITA_is_monarchist_ai = yes
						ITA_is_christian_democracy_ai = yes
					}
					has_country_leader = {
						character = ITA_benito_mussolini
						ruling_only = yes
					}
				}
			}
		}
	}

	ITA_bop_praise_the_airforce = {
		priority = 112
		icon = GFX_decision_generic_air

		allowed = {
			original_tag = ITA
		}

		visible = {
			OR = {
				has_completed_focus = ITA_italo_balbo_focus
				has_completed_focus = ITA_dino_grandi_focus
				has_completed_focus = ITA_monarchia_d_italia
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {}

		cost = ITA_bop_generic_council_cost

		fire_only_once = yes

		complete_effect = {
			ITA_bop_very_low_increase_effect = yes
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < 0.3
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.15
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < -0.11
				}
			}
			modifier = {
				factor = 0
				AND = {
					OR = {
						ITA_is_alt_fascist_balbo_ai = yes
						ITA_is_alt_fascist_grandi_ai = yes
						ITA_is_monarchist_ai = yes
						ITA_is_christian_democracy_ai = yes
					}
					has_country_leader = {
						character = ITA_benito_mussolini
						ruling_only = yes
					}
				}
			}
		}
	}

	ITA_bop_praise_the_navy = {
		priority = 111
		icon = GFX_decision_generic_naval

		allowed = {
			original_tag = ITA
		}

		visible = {
			OR = {
				has_completed_focus = ITA_italo_balbo_focus
				has_completed_focus = ITA_dino_grandi_focus
				has_completed_focus = ITA_monarchia_d_italia
				has_completed_focus = ITA_triumph_in_africa_bba
			}
		}

		available = {}

		cost = ITA_bop_generic_council_cost

		fire_only_once = yes

		complete_effect = {
			ITA_bop_very_low_increase_effect = yes
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < 0.3
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.15
				}
			}
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < -0.11
				}
			}
			modifier = {
				factor = 0
				AND = {
					OR = {
						ITA_is_alt_fascist_balbo_ai = yes
						ITA_is_alt_fascist_grandi_ai = yes
						ITA_is_monarchist_ai = yes
						ITA_is_christian_democracy_ai = yes
					}
					has_country_leader = {
						character = ITA_benito_mussolini
						ruling_only = yes
					}
				}
			}
		}
	}

	### MONARCHIST DECISIONS

	ITA_bop_constitutional_draft = {
		priority = 110
		icon = GFX_decision_SWI_swiss_democratic_tradition_campaign

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_revoke_the_acerbo_law
		}

		available = {
			has_government = democratic
		}

		cost = 70

		fire_only_once = yes

		complete_effect = {
			ITA_bop_high_increase_effect = yes
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < 0.3
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.15
				}
			}
		}
	}

	ITA_bop_privileges_for_the_elites = {
		priority = 109
		icon = GFX_decision_eng_ally_imperialist_coup

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_power_to_the_king
		}

		available = {
			has_government = neutrality
		}

		cost = 70

		fire_only_once = yes

		complete_effect = {
			ITA_bop_medium_increase_effect = yes
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 5
				power_balance_value = {
					id = ITA_power_balance
					value < 0.3
				}
			}
			modifier = {
				factor = 10
				power_balance_value = {
					id = ITA_power_balance
					value < 0.15
				}
			}
		}
	}

	ITA_bop_revoke_the_lateran_treaty = {
		priority = 108
		icon = GFX_decision_generic_break_treaty

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_power_to_the_king
			NOT = { has_completed_focus = ITA_seek_papal_support }
			NOT = { has_country_flag = ITA_expanded_lateran_treaty_flag }
		}

		available = {
			NOT = { has_completed_focus = ITA_seek_papal_support }
			NOT = { has_country_flag = ITA_expanded_lateran_treaty_flag }
		}

		cost = 70

		fire_only_once = yes

		complete_effect = {
			set_country_flag = ITA_revoked_lateran_treaty_flag
			add_stability = -0.05
			ITA_bop_medium_increase_effect = yes

			custom_effect_tooltip = ITA_bop_revoke_the_lateran_treaty_tt
		}

		ai_will_do = {
			base = 0
		}
	}

	ITA_bop_expand_the_lateran_treaty = {
		priority = 107
		icon = GFX_decision_hol_exchange_intelligence_data

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_seek_papal_support
			NOT = { has_country_flag = ITA_revoked_lateran_treaty_flag }
		}

		available = {
			has_government = neutrality
			NOT = { has_country_flag = ITA_revoked_lateran_treaty_flag }
		}

		cost = 70

		fire_only_once = yes

		complete_effect = {
			set_country_flag = ITA_expanded_lateran_treaty_flag
			add_stability = 0.05
			add_popularity = {
				ideology = neutrality
				popularity = 0.05
			}
			ITA_bop_medium_decrease_effect = yes
		}

		ai_will_do = {
			base = 0
		}
	}

	ITA_bop_liturgical_reforms = {
		priority = 106
		icon = GFX_decision_eng_trade_unions_support

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_strengthen_the_papacy
		}

		available = {
			has_government = neutrality
		}

		cost = 70

		days_re_enable = ITA_bop_liturgical_reforms_cd

		complete_effect = {
			add_stability = 0.1
			ITA_bop_medium_decrease_effect = yes

			custom_effect_tooltip = ITA_bop_liturgical_reforms_cd_tt
		}

		ai_will_do = {
			base = 0
		}
	}

	ITA_bop_condemn_fascism = {
		priority = 105
		icon = GFX_decision_eng_propaganda_campaigns

		allowed = {
			original_tag = ITA
		}

		visible = {
			OR = {
				has_completed_focus = ITA_seek_papal_support
				has_completed_focus = ITA_disband_the_blackshirts
			}
		}

		available = {
			has_completed_focus = ITA_seek_papal_support
			has_completed_focus = ITA_disband_the_blackshirts
		}

		cost = 70

		fire_only_once = yes

		complete_effect = {
			add_stability = -0.05
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
			add_popularity = {
				ideology = fascism
				popularity = -0.1
			}
			ITA_bop_low_decrease_effect = yes
		}

		ai_will_do = {
			base = 0
		}
	}

	ITA_bop_convoke_ecumenical_council = {
		priority = 104
		icon = GFX_decision_SWI_support_humanitarian_efforts

		allowed = {
			original_tag = ITA
		}

		visible = {
			ITA_is_ruled_by_a_pope = yes
		}

		available = {
			ITA_is_ruled_by_a_pope = yes
		}

		cost = 100

		fire_only_once = yes

		days_remove = 90

		remove_effect = {
			ITA_bop_high_decrease_effect = yes
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	ITA_bop_cooperation_with_anarchists = {
		priority = 106
		icon = GFX_decision_generic_civil_support

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_the_popular_front
		}

		available = {
			has_government = communism
		}

		cost = 70

		fire_only_once = yes

		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
			ITA_bop_medium_decrease_effect = yes
		}

		ai_will_do = {
			base = 1
		}
	}

	ITA_bop_unify_the_left = {
		priority = 105
		icon = GFX_decision_generic_speech

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_a_leader_steps_forward
		}

		available = {
			has_government = communism
		}

		cost = 70

		fire_only_once = yes

		days_remove = 90

		modifier = {
			political_power_factor = -0.15
		}

		remove_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
			ITA_bop_medium_decrease_effect = yes
		}

		ai_will_do = {
			base = 1
		}
	}

	ITA_bop_concesions_to_the_bourgeoisie = {
		priority = 104
		icon = GFX_decision_generic_fundraising

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_common_ground
		}

		available = {
			OR = {
				has_government = communism
				has_government = democratic
			}
		}

		cost = ITA_bop_concesions_to_the_bourgeoisie_cost

		fire_only_once = yes

		days_remove = ITA_bop_concesions_to_the_bourgeoisie_days

		complete_effect = {
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			ITA_bop_medium_increase_effect = yes
		}

		remove_effect = {
			if = {
				limit = {
					has_government = communism
				}
				add_stability = 0.05
			}
			else = {
				add_stability = 0.1
				add_political_power = 100
			}
		}

		modifier = {
			consumer_goods_factor = -0.12
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 0
				ITA_is_communist_ai = yes
			}
		}
	}

	ITA_bop_cooperation_with_christian_democrats = {
		priority = 103
		icon = GFX_decision_generic_political_discourse

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_italian_socialism
		}

		available = {
			has_government = democratic
		}

		cost = 70

		fire_only_once = yes

		complete_effect = {
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
			ITA_bop_low_increase_effect = yes
		}

		ai_will_do = {
			base = 1
		}
	}

	ITA_bop_utilize_the_mafia = {
		priority = 102
		icon = GFX_decision_generic_assassination

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_cooperate_with_the_mafia
		}

		available = {
			has_government = democratic
		}

		cost = 100

		fire_only_once = yes

		days_remove = 90

		complete_effect = {
			add_stability = -0.1
		}

		remove_effect = {
			add_to_variable = { ITA_re_supply_node_range = 0.1 }
			custom_effect_tooltip = ITA_bop_utilize_the_mafia_re_tt

			ITA_bop_low_increase_effect = yes
		}

		ai_will_do = {
			base = 0.5
		}
	}
}



########     ###     ######  #### ######## ####  ######     ###    ######## ####  #######  ##    ##     #######  ########    ######## ######## ##     ## ####  #######  ########  ####    ###
##     ##   ## ##   ##    ##  ##  ##        ##  ##    ##   ## ##      ##     ##  ##     ## ###   ##    ##     ## ##          ##          ##    ##     ##  ##  ##     ## ##     ##  ##    ## ##
##     ##  ##   ##  ##        ##  ##        ##  ##        ##   ##     ##     ##  ##     ## ####  ##    ##     ## ##          ##          ##    ##     ##  ##  ##     ## ##     ##  ##   ##   ##
########  ##     ## ##        ##  ######    ##  ##       ##     ##    ##     ##  ##     ## ## ## ##    ##     ## ######      ######      ##    #########  ##  ##     ## ########   ##  ##     ##
##        ######### ##        ##  ##        ##  ##       #########    ##     ##  ##     ## ##  ####    ##     ## ##          ##          ##    ##     ##  ##  ##     ## ##         ##  #########
##        ##     ## ##    ##  ##  ##        ##  ##    ## ##     ##    ##     ##  ##     ## ##   ###    ##     ## ##          ##          ##    ##     ##  ##  ##     ## ##         ##  ##     ##
##        ##     ##  ######  #### ##       ####  ######  ##     ##    ##    ####  #######  ##    ##     #######  ##          ########    ##    ##     ## ####  #######  ##        #### ##     ##


ETH_italian_occupation_category = {
	#Expand Regional Control
	ITA_expand_regional_control = {
		icon = GFX_decision_oppression
		target_trigger = {
			FROM = {
				owner = {
					tag = ETH # For now - change if making it generic
					is_government_in_exile = yes
				}
				is_fully_controlled_by = ROOT
			}
		}
		target_root_trigger = { tag = ITA } # For now - change if making it generic
		state_target = yes
		on_map_mode = map_only

		cost = 75
		days_remove = 90

		visible = {
			has_completed_focus = ITA_triumph_in_africa_bba
		}

		available = {
			NOT = { has_country_flag = expanding_regional_control_flag }
			FROM = {
				compliance > 60
				any_neighbor_state = { is_owned_by = ROOT }
				owner = {
					faction_leader = { NOT = { has_war_with = ROOT } }
				}
			}
		}

		cancel_trigger = { FROM = { NOT = { is_controlled_by = ROOT } } }

		complete_effect = {
			set_country_flag = expanding_regional_control_flag
			set_variable = { state_integrated = FROM }
			hidden_effect = {
				FROM = { owner = { activate_mission = ETH_italian_control_mission } } # Starts "warning timer" for Original owner
			}
		}

		remove_effect = {
			FROM = { set_state_owner_to = ROOT }
			clr_country_flag = expanding_regional_control_flag
		}

		ai_will_do = {
			base = 10

			modifier = {
				NOT = {
					is_historical_focus_on = no
					has_war_with_major = no
				}
				factor = 25
			}
		}
	}

	#Discredit Haile Selassie
	ITA_discredit_haile_selassie = {
		icon = GFX_decision_generic_speech
		allowed = {
			tag = ITA
		}

		available = {
			has_completed_focus = ITA_the_new_emperor_of_ethiopia
		}

		visible = {
			any_controlled_state = {
				is_owned_by = ETH
			}
		}

		days_re_enable = 180 #Changing this requires changing the custom tooltip below
		cost = 35

		complete_effect = {
			ETH = {
				add_legitimacy = -10
			}

			hidden_effect = {
				ETH = { country_event = { id = BBA_italo_ethiopian_war_events.510 hours = 1 } }
			}

			every_controlled_state = {
				limit = {
					is_owned_by = ETH
				}
				add_compliance = 5
			}

			custom_effect_tooltip = ITA_discredit_haile_selassie_cd_tt
		}

		ai_will_do = {
			base = 0.8
		}
	}

	ITA_electrify_state = { #Equivalent to ETH_electrify_state but for Italy (So that it goes into same category as other ETH-related stuff for ITA)
		icon = GFX_decision_generic_electricity
		target_trigger = {
			FROM = {
				has_state_flag = ITA_can_electrify_state_flag #Different flag so that ITA/ETH conditions for electrifying states are different
				NOT = { has_state_flag = ETH_state_is_electrified_flag }
				is_fully_controlled_by = ROOT
			}
		}
		target_root_trigger = { tag = ITA } # For now - change if making it generic
		state_target = yes
		on_map_mode = map_only
		fire_only_once = yes # Only once per State
		available = {
			NOT = { has_country_flag = ETH_investments_in_progress_flag }
			has_completed_focus = ITA_develop_ethiopia
		}

		visible = {
			has_completed_focus = ITA_triumph_in_africa_bba
		}

		cancel_trigger = {
			NOT = { FROM = { is_fully_controlled_by = ROOT } }
		}

		cancel_effect = {
			clr_country_flag = ETH_investments_in_progress_flag
		}

		days_remove = 30

		cost = 25

		modifier = {
			consumer_goods_factor = 0.1
		}

		complete_effect = {
			set_country_flag = ETH_investments_in_progress_flag
		}

		remove_effect = {
			FROM = { add_compliance = 15 }
			ETH_electrify_state_remove_effect = yes  #Used both in ETH and ITA decisions
		}

		ai_will_do = {
			base = 125
			modifier = {
				factor = 2
				has_war = no
			}
			modifier = {
				factor = 0
				surrender_progress > 0.2
			}
		}
	}
}


 ######   #######  ##        #######  ##    ## ####    ###    ##          ##     ##    ###    ##    ##    ###     ######   ######## ##     ## ######## ##    ## ########
##    ## ##     ## ##       ##     ## ###   ##  ##    ## ##   ##          ###   ###   ## ##   ###   ##   ## ##   ##    ##  ##       ###   ### ##       ###   ##    ##
##       ##     ## ##       ##     ## ####  ##  ##   ##   ##  ##          #### ####  ##   ##  ####  ##  ##   ##  ##        ##       #### #### ##       ####  ##    ##
##       ##     ## ##       ##     ## ## ## ##  ##  ##     ## ##          ## ### ## ##     ## ## ## ## ##     ## ##   #### ######   ## ### ## ######   ## ## ##    ##
##       ##     ## ##       ##     ## ##  ####  ##  ######### ##          ##     ## ######### ##  #### ######### ##    ##  ##       ##     ## ##       ##  ####    ##
##    ## ##     ## ##       ##     ## ##   ###  ##  ##     ## ##          ##     ## ##     ## ##   ### ##     ## ##    ##  ##       ##     ## ##       ##   ###    ##
 ######   #######  ########  #######  ##    ## #### ##     ## ########    ##     ## ##     ## ##    ## ##     ##  ######   ######## ##     ## ######## ##    ##    ##


ITA_colonial_management_dec_cat = {
	# Train Irregulars
	ITA_train_irregulars = {
		icon = GFX_decision_generic_prepare_civil_war
		allowed = {
			tag = ITA
		}

		available = {
			has_war = yes
			NOT = { has_global_flag = second_italo_ethiopian_war_flag }
			any_controlled_state = {
				OR = {
					is_core_of = LBA
					is_core_of = ERI
					is_core_of = SOM
					is_core_of = ETH
				}
			}
		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
		}

		ai_hint_pp_cost = 50
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 49
		}
		custom_cost_text = decision_cost_CP_50_pp_50

		days_remove = ITA_colonial_management_days

		days_re_enable = ITA_colonial_management_cd

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -50
			}

			if = {
				limit = {
					NOT = { has_template = "Truppe Irregolari a Cavallo" }
				}
				if = {
					limit = {
						NOT = { has_country_flag = ITA_improved_irregular_templates_flag }
					}
					division_template = { #Improve Irregular template
						name = "Truppe Irregolari a Cavallo"
						division_names_group = ITA_CAV_05
						is_locked = yes
						regiments = {
							cavalry = { x = 0 y = 0 }
							cavalry = { x = 0 y = 1 }
							cavalry = { x = 1 y = 0 }
							cavalry = { x = 1 y = 1 }
						}
						priority = 0
					}
				}
				else = {
					division_template = { #Basic irregular template
						name = "Truppe Irregolari a Cavallo"
						division_names_group = ITA_CAV_05
						is_locked = yes
						regiments = {
							cavalry = { x = 0 y = 0 }
							cavalry = { x = 0 y = 1 }
							cavalry = { x = 1 y = 0 }
							cavalry = { x = 1 y = 1 }
							cavalry = { x = 2 y = 0 }
							cavalry = { x = 2 y = 1 }
						}
						support = {
							recon = { x = 0 y = 0 }
						}
						priority = 0
					}
				}
			}

			if = {
				limit = {
					NOT = { has_template = "Truppe Irregolari di Cammelli" }
				}
				if = {
					limit = {
						NOT = { has_country_flag = ITA_improved_irregular_templates_flag }
					}
					division_template = { #Improve Irregular template
						name = "Truppe Irregolari di Cammelli"
						division_names_group = ITA_CAM_02
						is_locked = yes
						regiments = {
							camelry = { x = 0 y = 0 }
							camelry = { x = 0 y = 1 }
							camelry = { x = 1 y = 0 }
							camelry = { x = 1 y = 1 }
						}
						priority = 0
					}
				}
				else = {
					division_template = { #Basic irregular template
						name = "Truppe Irregolari di Cammelli"
						division_names_group = ITA_CAM_02
						is_locked = yes
						regiments = {
							camelry = { x = 0 y = 0 }
							camelry = { x = 0 y = 1 }
							camelry = { x = 1 y = 0 }
							camelry = { x = 1 y = 1 }
							camelry = { x = 2 y = 0 }
							camelry = { x = 2 y = 1 }
						}
						support = {
							recon = { x = 0 y = 0 }
						}
						priority = 0
					}
				}
			}

			custom_effect_tooltip = ITA_train_irregulars_create_units_tt

			#ERITREA
			if = {
				limit = {
					any_owned_state = {
						is_core_of = ERI
						is_fully_controlled_by = ROOT
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = ERI
						is_fully_controlled_by = ROOT
					}
					prioritize = { 550 } # ERITREA (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_train_irregulars_eritrea_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Banda Irregolare Libica\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Truppe Irregolari a Cavallo\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}

			#LIBYA
			if = {
				limit = {
					any_owned_state = {
						is_core_of = LBA
						is_fully_controlled_by = ROOT
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = LBA
						is_fully_controlled_by = ROOT
					}
					prioritize = { 448 } # TRIPOLI (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_train_irregulars_libya_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Truppe Irregolari a Cavallo\" start_experience_factor = 0.15 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Truppe Irregolari di Cammelli\" start_experience_factor = 0.15 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}

			#SOMALIA
			if = {
				limit = {
					any_owned_state = {
						is_core_of = SOM
						is_fully_controlled_by = ROOT
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = SOM
						is_fully_controlled_by = ROOT
					}
					prioritize = { 559 } # SOMALILAND (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_train_irregulars_somalia_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Banda Irregolare Somala\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 2
						}
						create_unit = {
							division = "division_template = \"Truppe Irregolari a Cavallo\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}

			#ETHIOPIA
			if = {
				limit = {
					any_owned_state = {
						is_core_of = ETH
						is_fully_controlled_by = ROOT
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = ETH
						is_fully_controlled_by = ROOT
					}
					prioritize = { 271 } # ADDIS ABABA (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_train_irregulars_ethiopia_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Banda Irregolare Eritrea\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
						create_unit = {
							division = "division_template = \"Truppe Irregolari di Cammelli\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 1
						}
					}
				}
			}

			custom_effect_tooltip = ITA_train_irregulars_cd_tt
		}

		ai_will_do = {
			base = 0.05
		}
	}

	#Disband Irregulars
	ITA_disband_irregulars = {
		icon = GFX_decision_generic_disband_irregulars
		allowed = {
			tag = ITA
		}

		available = {
			NOT = { has_global_flag = second_italo_ethiopian_war_flag }
			any_country_division = {
				division_has_majority_template = irregular_infantry
			}
		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
		}

		cost = 5

		complete_effect = {
			custom_effect_tooltip = ITA_disband_irregulars_tt

			hidden_effect = {
				delete_units = {
					division_template = "Banda Indigena Irregolare"
					disband = no #MP or weapons are not ours to take
				}
				delete_units = {
					division_template = "Truppe Irregolari a Cavallo"
					disband = no #MP or weapons are not ours to take
				}
				delete_units = {
					division_template = "Banda Irregolare Libica"
					disband = no #MP or weapons are not ours to take
				}
				delete_units = {
					division_template = "Banda Irregolare Eritrea"
					disband = no #MP or weapons are not ours to take
				}
				delete_units = {
					division_template = "Banda Irregolare Somala"
					disband = no #MP or weapons are not ours to take
				}
				delete_units = {
					division_template = "Truppe Irregolari di Cammelli"
					disband = no #MP or weapons are not ours to take
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	#Re-organize Irregulars
	ITA_reorganize_irregulars = {
		icon = GFX_decision_generic_reorganize_irregulars
		allowed = {
			tag = ITA
		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
			NOT = { has_country_flag = ITA_improved_irregular_templates_flag }
		}

		available = {
			has_tech = tech_recon
		}

		ai_hint_pp_cost = 50
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 49
			has_army_experience > 14
		}
		custom_cost_text = decision_cost_CP_50_pp_50_ArmXP_15

		days_remove = ITA_reorganize_irregulars_days

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -50
				army_experience = -15
			}
		}

		remove_effect = {
			set_country_flag = ITA_improved_irregular_templates_flag

			custom_effect_tooltip = ITA_reorganize_irregulars_tt

			hidden_effect = {
				add_units_to_division_template = {
					template_name = "Banda Indigena Irregolare"
					regiments = {
						irregular_infantry = 0
						irregular_infantry = 1

					}
					support = {
						recon = 0
					}
				}

				add_units_to_division_template = {
					template_name = "Truppe Irregolari a Cavallo"
					regiments = {
						cavalry = 0
						cavalry = 1
					}
					support = {
						recon = 0
					}
				}

				add_units_to_division_template = {
					template_name = "Truppe Irregolari di Cammelli"
					regiments = {
						camelry = 0
						camelry = 1
					}
					support = {
						recon = 0
					}
				}

				add_units_to_division_template = {
					template_name = "Banda Irregolare Eritrea"
					regiments = {
						irregular_infantry = 0
						irregular_infantry = 1
					}
					support = {
						recon = 0
					}
				}

				add_units_to_division_template = {
					template_name = "Banda Irregolare Libica"
					regiments = {
						irregular_infantry = 0
						irregular_infantry = 1
					}
					support = {
						recon = 0
					}
				}

				add_units_to_division_template = {
					template_name = "Banda Irregolare Somala"
					regiments = {
						irregular_infantry = 0
						irregular_infantry = 1
					}
					support = {
						recon = 0
					}
				}
			}
		}

		ai_will_do = {
			base = 0.5
			modifier = {
				factor = 3
				OR = {
					has_completed_focus = ITA_comandante_diavolo
					has_completed_focus = ITA_irregulars
				}
			}
		}
	}

	#Re-organize Ascari
	ITA_reorganize_ascari = {
		icon = GFX_decision_ITA_reorganize_ascari
		allowed = {
			tag = ITA
		}

		visible = {
			has_completed_focus = ITA_strengthen_ascari_corps
			NOT = { has_country_flag = ITA_improved_ascari_templates_flag }
		}

		available = {
			has_tech = tech_recon
		}

		ai_hint_pp_cost = 50
		custom_cost_trigger = {
			command_power > 49
			has_political_power > 49
			has_army_experience > 14
		}
		custom_cost_text = decision_cost_CP_50_pp_50_ArmXP_15

		days_remove = ITA_reorganize_ascari_days

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				add_political_power = -50
				army_experience = -15
			}
		}

		remove_effect = {
			set_country_flag = ITA_improved_ascari_templates_flag

			custom_effect_tooltip = ITA_reorganize_ascari_tt

			hidden_effect = {
				if = {
					limit = {
						NOT = { has_template = "Divisione Coloniale" }
					}
					division_template = {
						name = "Divisione Coloniale"
						division_names_group = ITA_COL_01
						template_counter = 67

						# Represents lesser-equipped colonial units
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
						}

						priority = 0
					}
				}
				add_units_to_division_template = {
					template_name = "Divisione Coloniale"
					support = {
						mot_recon = 0 #from armored_car_recon by Abbus
						artillery = 0
					}
				}

				if = {
					limit = {
						NOT = { has_template = "Cavalleria Coloniale" }
					}
					division_template = {
						name = "Cavalleria Coloniale"
						division_names_group = ITA_CAV_03
						override_model = ITA_cavalry_alt_1_entity
						is_locked = yes

						# Represents lesser-equipped colonial units
						regiments = {
							cavalry = { x = 0 y = 0 }
							cavalry = { x = 0 y = 1 }
							cavalry = { x = 1 y = 0 }
							cavalry = { x = 1 y = 1 }
						}

						priority = 0
					}
				}
				add_units_to_division_template = {
					template_name = "Cavalleria Coloniale"
					regiments = {
						cavalry = 0
						cavalry = 1
					}
					support = {
						recon = 0
					}
				}

				if = {
					limit = {
						NOT = { has_template = "Reggimento Meharista" }
					}
					division_template = {
						name = "Reggimento Meharista"
						division_names_group = ITA_CAM_01
						override_model = ITA_camelry_alt_1_entity
						regiments = {
							camelry = { x = 0 y = 0 }
							camelry = { x = 0 y = 1 }
							camelry = { x = 1 y = 0 }
							camelry = { x = 1 y = 1 }
						}
					}
				}
				add_units_to_division_template = {
					template_name = "Reggimento Meharista"
					regiments = {
						camelry = 0
						camelry = 1
					}
					support = {
						recon = 0
					}
				}

				if = {
					limit = {
						NOT = { has_template = "Divisione Ascari Libica" }
					}
					division_template = {
						name = "Divisione Ascari Libica"
						division_names_group = ITA_COL_01
						override_model = ITA_infantry_alt_0_entity
						template_counter = 67
						#is_locked = yes
						obsolete = yes

						# Represents lesser-equipped colonial units
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
						}

						priority = 0
					}
				}
				add_units_to_division_template = {
					template_name = "Divisione Ascari Libica"
					support = {
						mot_recon = 0 #from armored_car_recon by Abbus
						artillery = 0
					}
				}

				if = {
					limit = {
						NOT = { has_template = "Divisione Ascari Eritrea" }
					}
					division_template = {
						name = "Divisione Ascari Eritrea"
						division_names_group = ITA_COL_01
						template_counter = 67
						#is_locked = yes
						obsolete = yes

						# Represents lesser-equipped colonial units
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
						}

						priority = 0
					}
				}
				add_units_to_division_template = {
					template_name = "Divisione Ascari Eritrea"
					support = {
						mot_recon = 0 #from armored_car_recon by Abbus
						artillery = 0
					}
				}

				if = {
					limit = {
						NOT = { has_template = "Divisione Ascari Somala" }
					}
					division_template = {
						name = "Divisione Ascari Somala"
						division_names_group = ITA_COL_01
						override_model = ITA_infantry_alt_1_entity
						template_counter = 67
						#is_locked = yes
						obsolete = yes

						# Represents lesser-equipped colonial units
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
						}

						priority = 0
					}
				}
				add_units_to_division_template = {
					template_name = "Divisione Ascari Somala"
					support = {
						mot_recon = 0 #from armored_car_recon by Abbus
						artillery = 0
					}
				}
			}
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 3
				OR = {
					has_completed_focus = ITA_strengthen_ascari_corps
					has_completed_focus = ITA_ascari
				}
			}
		}
	}

	#Infrastructure Program in State
	ITA_regional_development_in_state = {
		icon = GFX_decision_generic_construction
		allowed = {
			tag = ITA
		}

		available = {
			has_tech = construction3
			num_of_civilian_factories_available_for_projects > 0
		}

		state_target = yes

		target_array = ROOT.owned_states

		target_trigger = {
			FROM = {
				is_fully_controlled_by = ROOT
				ITA_is_italian_colony = yes
				OR = {
					has_state_category = wasteland
					has_state_category = pastoral
				}
				impassable = no
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_completed_focus = ITA_regional_development
			has_civil_war = no
		}

		cost = ITA_infrastructure_program_in_state_cost

		days_remove = ITA_infrastructure_program_in_state_days

		modifier = {
			civilian_factory_use = 1
		}

		remove_effect = {
			FROM = {
				add_compliance = 5
				add_extra_state_shared_building_slots = 1
				if = {
					limit = {
						has_state_category = wasteland
					}
					set_state_category = pastoral
				}
				else_if = {
					limit = {
						has_state_category = pastoral
					}
					set_state_category = rural
				}
			}
		}

		ai_will_do = {
			base = 0
		}
	}

	colonial_government_in_east_africa = {

		icon = GFX_decision_generic_colonial_administration

		allowed = {
			original_tag = ITA # Italy
		}

		fire_only_once = yes

		available = {
			has_completed_focus = ITA_ministry_of_italian_africa
			has_completed_focus = ITA_the_new_emperor_of_ethiopia
			custom_trigger_tooltip = {
				tooltip = aoi_required_ethiopian_states
				AND = {
					OR = {
						ITA = {
						owns_state = 271 # Shewa
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 271 # Shewa
						}
					}
					OR = {
						ITA = {
						owns_state = 843 # Wello
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 843 # Wello
						}
					}
					OR = {
						ITA = {
						owns_state = 908 # Afar
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 908 # Afar
						}
					}
					OR = {
						ITA = {
						owns_state = 842 # Tigray
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 842 # Tigray
						}
					}
					OR = {
						ITA = {
						owns_state = 841 # Begemder
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 841 # Begemder
						}
					}
					OR = {
						ITA = {
						owns_state = 840 # Gojjam
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 840 # Gojjamm
						}
					}
					OR = {
						ITA = {
						owns_state = 839 # Welega
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 839 # Welega
						}
					}
					OR = {
						ITA = {
						owns_state = 838 # Illubabor-Kaffa
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 838 # Illubabor-Kaffa
						}
					}
					OR = {
						ITA = {
						owns_state = 837 # Sidamo
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 837 # Sidamo
						}
					}
					OR = {
						ITA = {
						owns_state = 836 # Bale
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 836 # Bale
						}
					}
					OR = {
						ITA = {
						owns_state = 835 # Hararghe
						}
						any_country = {
							is_subject_of = ITA
							owns_state = 835 # Hararghe
						}
					}
				}
			}
			OR = {
				ITA = {
				owns_state = 550 # Eritrea
				}
				any_country = {
					is_subject_of = ITA
					owns_state = 550 # Eritrea
				}
			}
			OR = {
				ITA = {
				owns_state = 559 # Somaliland
				}
				any_country = {
					is_subject_of = ITA
					owns_state = 559 # Somaliland
				}
			}
			OR = {
				ITA = {
				owns_state = 844 # Jubaland
				}
				any_country = {
					is_subject_of = ITA
					owns_state = 844 # Jubaland
				}
			}

		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
			original_tag = ITA # Italy
			NOT = { has_global_flag = italian_east_africa_flag }
		}

		complete_effect = {

			custom_effect_tooltip = aoi_founded_tt



			hidden_effect = {
				set_global_flag = italian_east_africa_flag

				# Shewa
				AOI = {
					transfer_state = 271
				}

				# Wello
				AOI = {
					transfer_state = 843
				}

				# Afar
				AOI = {
					transfer_state = 908
				}

				# Tigray
				AOI = {
					transfer_state = 842
				}

				# Begemder
				AOI = {
					transfer_state = 841
				}

				# Eritrea
				AOI = {
					transfer_state = 550
				}

				# Gojjam
				AOI = {
					transfer_state = 840
				}

				# Welega
				AOI = {
					transfer_state = 839
				}

				# Illubabor-Kaffa
				AOI = {
					transfer_state = 838
				}

				# Sidamo
				AOI = {
					transfer_state = 837
				}

				# Bale
				AOI = {
					transfer_state = 836
				}

				# Hararghe
				AOI = {
					transfer_state = 835
				}

				# Somaliland
				AOI = {
					transfer_state = 559
				}

				# Jubaland
				AOI = {
					transfer_state = 844
				}

				set_autonomy = {
				    target = AOI
				    autonomy_state = autonomy_puppet
				    end_wars = no
				    end_civil_wars = no
				}

				AOI = {
					add_manpower = 100000
					add_ideas = {
						AOI_enrico_cerulli
						AOI_africa_orientale_italiana_idea
					}
					add_offsite_building = { type = industrial_complex level = 4 }
					add_offsite_building = { type = arms_factory level = 4 }
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 5000
					    producer = ITA
					}
					if = {
						limit = {
							has_dlc = "La Resistance"
						}
						create_intelligence_agency = yes
					}
					set_cosmetic_tag = AOI_Italian
				}
			}
		}

		ai_will_do = {
			base = 200
			modifier = {
				factor = 0
				ETH = {
					has_completed_focus = ETH_declare_for_italy
				}
			}
		}
	}

	give_somaliland_to_the_aoi = {

		cost = 25

		fire_only_once = yes

		icon = GFX_decision_infiltrate_state

		allowed = {
			original_tag = ITA # Italy
		}

		available = {
			AOI = {
				exists = yes
			}
			OR = {
				ITA = {
				controls_state = 269 # British Somaliland
				}
				any_country = {
					is_subject_of = ITA
					controls_state = 269 # British Somaliland
				}
			}
		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
			original_tag = ITA # Italy
			has_global_flag = italian_east_africa_flag
			NOT = {
				has_global_flag = italian_east_africa_has_somaliland_flag
			}
		}

		complete_effect = {

			# British Somaliland
			AOI = {
				transfer_state = 269
			}

			hidden_effect = {
				set_global_flag = italian_east_africa_has_somaliland_flag
			}
		}

		ai_will_do = {
			factor = 400
		}
	}

	give_djibouti_to_the_aoi = {

		cost = 25

		fire_only_once = yes

		icon = GFX_decision_infiltrate_state

		allowed = {
			original_tag = ITA # Italy
		}

		available = {
			AOI = {
				exists = yes
			}
			OR = {
				ITA = {
				controls_state = 268 # French Somaliland
				}
				any_country = {
					is_subject_of = ITA
					controls_state = 268 # French Somaliland
				}
			}
		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
			original_tag = ITA # Italy
			has_global_flag = italian_east_africa_flag
			NOT = {
				has_global_flag = italian_east_africa_has_djibouti_flag
			}
		}

		complete_effect = {

			# French Somaliland
			AOI = {
				transfer_state = 268
			}

			hidden_effect = {
				set_global_flag = italian_east_africa_has_djibouti_flag
			}
		}

		ai_will_do = {
			factor = 400
		}
	}

	give_garissa_to_the_aoi = {

		cost = 25

		fire_only_once = yes

		icon = GFX_decision_infiltrate_state

		allowed = {
			original_tag = ITA # Italy
		}

		available = {
			AOI = {
				exists = yes
			}
			OR = {
				ITA = {
				controls_state = 903 # Garissa
				}
				any_country = {
					is_subject_of = ITA
					controls_state = 903 # Garissa
				}
			}
		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
			original_tag = ITA # Italy
			has_global_flag = italian_east_africa_flag
			NOT = {
				has_global_flag = italian_east_africa_has_garissa_flag
			}
		}

		complete_effect = {

			# Garissa
			AOI = {
				transfer_state = 903
			}

			hidden_effect = {
				set_global_flag = italian_east_africa_has_garissa_flag
			}
		}

		ai_will_do = {
			factor = 400
		}
	}

	send_more_men_to_the_AOI = {

		cost = 10

		days_re_enable = 91

		icon = GFX_decision_eng_blackshirt_march

		allowed = {
			original_tag = ITA # Italy
		}

		available = {
			AOI = {
				exists = yes
			}
			ITA = {
				has_manpower > 10000
			}
		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
			original_tag = ITA # Italy
			has_global_flag = italian_east_africa_flag
		}

		complete_effect = {

			ITA = {
				add_manpower = -10000
			}

			AOI = {
				add_manpower = 10000
				army_experience = 15
			}
			every_state = {
				limit = {
					is_owned_and_controlled_by = AOI
				}
				add_resistance = -5
			}

			hidden_effect = {

			}
		}

		ai_will_do = {
			factor = 20
		}
	}

	send_more_weapons_to_the_AOI = {

		cost = 10

		days_re_enable = 91

		icon = GFX_decision_generic_prepare_civil_war

		allowed = {
			original_tag = ITA # Italy
		}

		available = {
			AOI = {
				exists = yes
			}
			OR = {
				ITA = {
					has_equipment = {
					    infantry_equipment_1 > 2000
					}
				}
				ITA = {
					has_equipment = {
					    infantry_equipment_0 > 2000
					}
				}
				ITA = {
					has_equipment = {
					    infantry_equipment_2 > 2000
					}
				}
			}
		}

		visible = {
			has_completed_focus = ITA_ministry_of_italian_africa
			original_tag = ITA # Italy
			has_global_flag = italian_east_africa_flag
		}

		complete_effect = {

			ITA = {
				send_equipment = {
				    equipment = infantry_equipment
				    amount = 2000
				    target = AOI
				}
			}

			every_state = {
				limit = {
					is_owned_and_controlled_by = AOI
				}
				add_resistance = -5
			}

			hidden_effect = {

			}
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 10
				OR = {
					ITA = {
						has_equipment = {
						    infantry_equipment_1 > 5000
						}
					}
					ITA = {
						has_equipment = {
						    infantry_equipment_0 > 5000
						}
					}
					ITA = {
						has_equipment = {
						    infantry_equipment_2 > 5000
						}
					}
				}
			}
		}
	}

	#Abolish the Colonies
	ITA_abolish_the_colonies_dec = {
		icon = GFX_decision_generic_reorganize_irregulars
		allowed = {
			tag = ITA
		}

		visible = {
			has_completed_focus = ITA_abolish_the_colonies
		}

		available = {
			always = no
		}

		fire_only_once = yes

		days_remove = ITA_abolish_the_colonies_days #365

		modifier = {
			stability_factor = -0.1
			political_power_factor = -0.1
		}

		complete_effect = {

		}

		remove_effect = {
			custom_effect_tooltip = ITA_abolish_the_colonies_event_chain_tt
			custom_effect_tooltip = ITA_abolish_the_colonies_tips_tt
			hidden_effect = {
				country_event = BBA_italy_anti_colonialism_events.51
			}
		}
	}
}

ITA_naval_cooperation_programs_dec_cat = {
	ITA_cooperation_program_with_country = {
		priority = 20

		icon = GFX_decision_generic_research

		ai_will_do = {
			base = 0.7
		}

		available = {
			has_navy_size = {
				size > 4
				archetype = ship_hull_light #DDs
			}
			has_navy_size = {
				size > 0
				type = capital_ship
			}
			FROM = { #For tooltip purposes
				has_navy_size = {
					size > 4
					archetype = ship_hull_light #DDs
				}
			}
		}

		target_array = ROOT.allies

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			is_in_faction = yes
		}

		cost = 15

		complete_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.01 hours = 1 } }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group
				FROM = { add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group }
			}
		}
	}

	ITA_joint_maneuvers_with_country = {
		priority = 18

		icon = GFX_decision_hol_draw_up_staff_plans

		ai_will_do = {
			base = 1
		}

		available = {
			has_navy_size = {
				size > 14
				archetype = ship_hull_light #DDs
			}
			has_navy_size = {
				size > 2
				type = capital_ship
			}
			FROM = { #For tooltip purposes
				has_navy_size = {
					size > 9#14
					archetype = ship_hull_light #DDs
				}
			}
			FROM = {
				has_navy_size = {
					size > 2
					type = capital_ship
				}
			}
		}

		target_array = ROOT.allies

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
				NOT = { has_country_flag = ITA_joint_maneuvers_flag }
				NOT = { has_country_flag = ITA_joint_maneuvers_rejected_flag }
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			is_in_faction = yes
		}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			has_political_power > 14
			has_navy_experience > 14
		}
		custom_cost_text = decision_cost_pp_15_NavXP_15

		days_remove = ITA_joint_maneuvers_with_country_days

		cancel_trigger = {
			hidden_trigger = {
				OR = {
					NOT = { country_exists = ROOT }
					NOT = { country_exists = FROM }
					NOT = { is_in_faction_with = FROM }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				add_political_power = -15
				navy_experience = -15
			}
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.04 hours = 1 } }
		}

		remove_effect = {
			FROM = { set_country_flag = ITA_joint_maneuvers_flag } #To prevent the decision to be taken more than once for the same tag

			hidden_effect = {
				country_event = BBA_italy_naval_cooperation_programs.07
				FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.07 hours = 1 } }
			}
			custom_effect_tooltip = if_they_accept
			effect_tooltip = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = ITA_joint_maneuvers_with_country_doctrine_bonus
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
				FROM = {
					navy_experience = 50
					add_doctrine_cost_reduction = {
						name = ITA_joint_maneuvers_with_country_doctrine_bonus
						cost_reduction = 0.75
						uses = 1
						category = naval_doctrine
					}
				}
			}
		}
	}

	ITA_sell_obsolete_escort_ships_to_country = {
		priority = 15

		icon = GFX_decision_generic_naval

		ai_will_do = {
			base = 1
		}

		available = {
			FROM = {
				OR = {
					is_in_faction_with = ROOT
					is_in_faction = no
				}
				is_major = no
				capital_scope = {
					is_on_continent = europe
				}
				NOT = { has_war_with = ROOT }
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
			}
			NOT = { has_country_flag = ITA_escort_ships_purchase_ongoing_flag } #Prevents ITA from activating more than one of these decisions at once
		}

		visible = {
			NOT = { has_country_flag = ITA_sold_obsolete_escort_ships_flag } #Can only sell the ships once // Need this inside visible in order to hide the other decisions immediately after successfully selling ships
		}

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				is_major = no
				NOT = { has_country_flag = ITA_obsolete_escort_ships_rejected_flag }
				capital_scope = {
					is_on_continent = europe
				}
				NOT = { has_war_with = ROOT }
				NOT = { has_country_flag = ITA_purchase_obsolete_escort_ships_rejected_flag }
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			has_country_flag = ITA_sweden_refused_to_buy_ships_flag #Available only if Sweden refuses in the event triggered via FT
			NOT = { has_country_flag = ITA_sold_obsolete_escort_ships_flag } #Can only sell the ships once
		}

		cost = 15

		complete_effect = {
			set_country_flag = ITA_escort_ships_purchase_ongoing_flag
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.08 hours = 1 } }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				custom_effect_tooltip = ITA_cooperation_programs_deal_others_tt
				add_timed_idea = {
					idea = ITA_sold_obsolete_escort_ships_ns
					days = 365
				}
			}

			custom_effect_tooltip = ITA_sell_obsolete_escort_ships_to_country_only_once_tt
		}
	}

	ITA_cede_aquila_class_destroyers_to_spanish_tag = {
		priority = 15

		icon = GFX_decision_generic_naval

		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				is_historical_focus_on = yes
			}
		}

		visible = {
			NOT = { has_country_flag = ITA_ceded_aquila_class_destroyers_flag } #Used inside visible trigger to check continuously and prevent exploits
		}

		available = {
			has_navy_size = {
				size > 0
				archetype = ship_hull_light #DDs
			}
			FROM = {
				OR = {
					is_in_faction_with = ROOT
					is_in_faction = no
				}
				is_major = no
				capital_scope = {
					is_on_continent = europe
				}
				NOT = { has_war_with = ROOT }
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
			}
		}

		fire_only_once = yes

		targets = { SPA SPB SPC SPD }

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				original_tag = SPR
				ITA_is_compatible_spanish_tag = yes
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			has_completed_focus = ITA_corpo_di_truppe_volontarie #It's totally ok that the decision gets unlocked even if the focus gets bypassed
			NOT = { has_country_flag = ITA_ceded_aquila_class_destroyers_flag } #To prevent visible trigger to check every tick after this happens
			OR = {
				has_global_flag = spanish_civil_war
				has_global_flag = scw_over
			}
		}

		complete_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.11 hours = 1 } }
			custom_effect_tooltip = if_they_accept
			effect_tooltip = {
				navy_experience = 50
				add_political_power = 50
				custom_effect_tooltip = ITA_cede_aquila_class_destroyers_tt
				FROM = {
					add_opinion_modifier = {
						modifier = ITA_ceded_destroyers
						target = ROOT
					}
				}
			}
		}
	}

	ITA_export_midget_submarines = {
		priority = 15

		icon = GFX_decision_generic_construction

		ai_will_do = {
			base = 0.5
			modifier = {
				factor = 100
				FROM = {
					is_ai = no
				}
			}
		}

		allowed = {
			has_dlc = "Man the Guns"
		}

		visible = {
			NOT = { FROM = { has_country_flag = ITA_midget_submarines_flag } } #Used inside visible trigger to check continuously and prevent exploits
		}

		available = {
			FROM = {
				is_in_faction_with = ROOT
				is_major = no
				capital_scope = {
					is_on_continent = europe
				}
				has_navy_size = {
					size > 0
					archetype = ship_hull_submarine #SS
				}
			}
			NOT = { has_country_flag = ITA_producing_midget_submarines_for_export_flag }
		}

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				is_in_faction_with = ROOT
				is_major = no
				capital_scope = {
					is_on_continent = europe
				}
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			has_completed_focus = ITA_cooperation_programs
			has_completed_focus = ITA_midget_submarines
			NOT = { FROM = { has_country_flag = ITA_midget_submarines_flag } } #To prevent visible trigger to check every tick after this happens
		}

		cancel_trigger = {
			OR = {
				NOT = { is_in_faction_with = FROM }
				NOT = { country_exists = FROM }
			}
		}

		cancel_effect = {
			clr_country_flag = ITA_producing_midget_submarines_for_export_flag
		}

		days_remove = ITA_export_midget_submarines_days

		modifier = {
			consumer_goods_factor = -0.05
			industrial_capacity_dockyard = -0.05
		}

		complete_effect = {
			set_country_flag = ITA_producing_midget_submarines_for_export_flag
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.14 hours = 1 } }
			custom_effect_tooltip = if_they_accept
			effect_tooltip = {
				custom_effect_tooltip = ITA_export_midget_submarines_tt
				FROM = {
					add_opinion_modifier = {
						modifier = POR_sold_ships
						target = ROOT
					}
				}
			}
		}

		remove_effect = {
			clr_country_flag = ITA_producing_midget_submarines_for_export_flag
			FROM = { country_event = BBA_italy_naval_cooperation_programs.17 }
		}
	}
}


########     ###    ##       ##    ##    ###    ##    ##    ########  #### ########  ##        #######  ##     ##    ###     ######  ##    ##
##     ##   ## ##   ##       ##   ##    ## ##   ###   ##    ##     ##  ##  ##     ## ##       ##     ## ###   ###   ## ##   ##    ##  ##  ##
##     ##  ##   ##  ##       ##  ##    ##   ##  ####  ##    ##     ##  ##  ##     ## ##       ##     ## #### ####  ##   ##  ##         ####
########  ##     ## ##       #####    ##     ## ## ## ##    ##     ##  ##  ########  ##       ##     ## ## ### ## ##     ## ##          ##
##     ## ######### ##       ##  ##   ######### ##  ####    ##     ##  ##  ##        ##       ##     ## ##     ## ######### ##          ##
##     ## ##     ## ##       ##   ##  ##     ## ##   ###    ##     ##  ##  ##        ##       ##     ## ##     ## ##     ## ##    ##    ##
########  ##     ## ######## ##    ## ##     ## ##    ##    ########  #### ##        ########  #######  ##     ## ##     ##  ######     ##


ITA_diplomacy_balkan_decision_category = {
	ITA_pressure_country_government_balkan = {
		priority = 50

		icon = generic_political_discourse

		ai_will_do = {
			base = 0.8
			modifier = {
				factor = 2
				has_political_power > 160
			}
			modifier = { #If ideological rallies happened, then it's better
				factor = 4
				FROM = { has_country_flag = ITA_ideological_rallies_promoted_flag }
			}
			modifier = {
				factor = 10
				original_tag = ITA
				date > 1940.4.1 #Get things moving on the Yugo front
				AND = {
					ROOT = {
						is_in_faction_with = GER
						is_major = yes
					}
					FROM = {
						original_tag = YUG
					}
				}
			}
			modifier = { #Do it only once, don't spam
				factor = 0
				FROM = { has_country_flag = ITA_government_pressured_flag }
			}
			modifier = {
				factor = 0	#it will never work, so why bother?!
				original_tag = ITA
				FROM = {
					any_other_country = {
						is_major = yes
						is_subject = no
						has_guaranteed = PREV
						num_of_factories > 50		#just a check to prevent memes
					}
				}
			}
		}

		targets = { YUG BUL ROM }
		#targets = { BUL GRE YUG ALB ROM TUR SLV BOS HRZ MAC SER CRO KOS MNT TRA } #These are all tags included in scripted trigger "BUL_is_balkan_nation = yes"

		target_trigger = {
			SOV_basic_pressure_government_triggers = yes
		}

		target_root_trigger = {
			has_completed_focus = ITA_potential_allies_in_the_balkans
			is_subject = no
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			is_faction_leader = yes
			FROM = {
				has_opinion = {
					target = ROOT
					value > 49
				}
				SOV_is_valid_subject = yes # Italy might not give a sh*t about their petty overlord ;)
				NOT = { has_war_with = ROOT }
			}
			NOT = { has_country_flag = ITA_pressure_government_active_flag }
		}

		visible = {
		}

		days_remove = ITA_pressure_government_days

		days_re_enable = ITA_pressure_government_cd

		cost = ITA_pressure_country_government_cost

		modifier = {
			political_power_gain = -0.25
		}

		complete_effect = {
			set_country_flag = ITA_pressure_government_active_flag
		}

		remove_effect = {
			FROM = {
				country_event = { id = NSB_soviet_foreign_politics_events.1 hours = 4 random_hours = 2 }
				set_country_flag = ITA_government_pressured_flag #For AI weights - don't spam
			}
			clr_country_flag = ITA_pressure_government_active_flag
			custom_effect_tooltip = SOV_pressure_government_effects_tt
			custom_effect_tooltip = ITA_pressure_government_cd_tt
		}
	}

	ITA_promote_ideology_rallies_balkan = {
		priority = 50

		icon = generic_political_rally

		ai_will_do = {
			base = 1
			modifier = {
				factor = 2
				has_political_power > 160
			}
		}

		targets = { YUG BUL ROM }
		#targets = { BUL GRE YUG ALB ROM TUR SLV BOS HRZ MAC SER CRO KOS MNT TRA } #These are all tags included in scripted trigger "BUL_is_balkan_nation = yes"

		target_trigger = {
			SOV_basic_promote_rallies_triggers = yes
		}

		target_root_trigger = {
			has_completed_focus = ITA_potential_allies_in_the_balkans
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			FROM = {
				SOV_is_valid_subject = yes # Italy might not give a sh*t about their petty overlord ;)
				NOT = { has_war_with = ROOT }
			}
		}

		visible = {
		}

		days_remove = ITA_ideological_rallies_days

		fire_only_once = yes

		cost = ITA_promote_ideology_rallies_cost

		modifier = {
			political_power_gain = -0.25
		}

		complete_effect = {
		}

		remove_effect = {
			FROM = {
				country_event = { id = NSB_soviet_foreign_politics_events.2 hours = 4 random_hours = 2 }
			}
			custom_effect_tooltip = SOV_promote_rallies_effects_tt
			custom_effect_tooltip = SOV_promote_ideological_rallies_cd_tt
		}
	}

	ITA_send_ultimatum_to_country_balkan = {
		priority = 50

		icon = eng_trade_unions_demand

		ai_will_do = {
			base = 20
			modifier = {
				factor = 10
				has_political_power > 160
			}
			modifier = {
				factor = 10
				date > 1940.4.1 
			}
			modifier = {
				factor = 0
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 0	#was 0.5, making Italy willing to literally suicide into Allies
				original_tag = ITA
				any_other_country = {
					is_major = yes
					is_subject = no
					has_guaranteed = FROM
					num_of_factories > 50		#just a check to prevent memes
				}
			}
			modifier = { #It's time to do a history 
				factor = 100
				is_historical_focus_on = yes
				date > 1941.1.1 
				ITA = { 
					surrender_progress < 0.03
					is_major = yes
					has_government = fascism
					is_in_faction_with = GER
				}
				GER = {
					surrender_progress < 0.03
					is_major = yes
					has_government = fascism
					exists = yes
				}
				YUG = { 
					exists = yes
					is_neighbor_of = GER
					is_neighbor_of = ITA
					NOT = {
						OR = {
							is_in_faction_with = ITA
							is_in_faction_with = GER
						}
					}
				}
			}
		}

		targets = { YUG CRO MNT } #These are all tags included in scripted trigger "BUL_is_balkan_nation = yes"

		target_trigger = {
			ITA_basic_ultimatum_triggers = yes
		}

		target_root_trigger = {
			has_completed_focus = ITA_balkan_ambition
			is_Subject = no
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			FROM = {
				NOT = { has_war_with = ROOT }
				is_subject = no
			}
		}

		visible = {
		}

		cost = ITA_send_ultimatum_to_country_cost

		days_remove = ITA_ultimatum_days

		remove_effect = {
			FROM = {
				set_country_flag = ITA_ultimatum_sent_flag
				country_event = { id = NSB_soviet_foreign_politics_events.200 hours = 16 random_hours = 8 }
			}
			custom_effect_tooltip = SOV_ultimatum_generic_effects_tt
			custom_effect_tooltip = SOV_decision_will_be_locked_tt
		}
	}

	ITA_fight_alongside_country_comrades_balkan = {
		priority = 100

		icon = generic_prepare_civil_war

		ai_will_do = {
			base = 0
			modifier = {
				add = 0.01
				has_stability > 0.4
				FROM = {  #Join if it will not lead to a new war against a major
					all_enemy_country = {
						OR = {
							is_major = no
							has_war_with = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 2
				has_war = no
			}
			modifier = {
				factor = 1.5
				has_manpower > 100000
			}
			modifier = {
				factor = 10
				FROM = { is_neighbor_of = ROOT }
			}
		}

		targets = { BUL GRE YUG ALB ROM TUR SLV BOS HRZ MAC SER CRO KOS MNT TRA } #These are all tags included in scripted trigger "BUL_is_balkan_nation = yes"

		target_trigger = {
			SOV_basic_fight_alongside_comrades_triggers = yes
		}

		target_root_trigger = {
			has_completed_focus = ITA_potential_allies_in_the_balkans
			is_subject = no
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			has_war_support > 0.15
			has_stability > 0.25
			NOT = { has_war_with = FROM }
		}

		visible = {
		}

		complete_effect = {
			hidden_effect = {
				random_country = {
					limit = {
						original_tag = FROM
						has_civil_war = yes
						NOT = { has_government = ROOT }
					}
					ROOT = { add_to_war = { targeted_alliance = FROM enemy = PREV hostility_reason = asked_to_join } }
				}
			}
			custom_effect_tooltip = BUL_fight_alongside_country_comrades_join_cw_tt #This tt works just fine :)

			effect_tooltip = {
				give_military_access = FROM
				FROM = { give_military_access = ROOT }
			}
			hidden_effect = {
				diplomatic_relation = {
					country = FROM
					relation = military_access
					active = yes
				}
				FROM = {
					diplomatic_relation = {
						country = ROOT
						relation = military_access
						active = yes
					}
				}
			}
		}
	}

	ITA_coronate_prince_aimone = {
		priority = 70

		icon = GFX_decision_eng_ally_imperialist_coup

		ai_will_do = {
			base = 20
			modifier = {
				factor = 10
				is_in_faction_with = CRO
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			CRO = {
				exists = yes
				NOT = { has_war_with = ITA }
				OR = {
					is_subject = no
					is_subject_of = ITA
				}
				OR = {
					has_government = fascism
					has_government = neutrality
				}
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			NOT = {
				has_country_flag = ITA_aimones_coronation
			}
		}

		cost = 75

		days_remove = 7

		remove_effect = {
			IF = {
				limit = {
					CRO = {
						NOT = {
							is_subject_of = ITA
						}
					}
				}
				CRO = {
					country_event = {
					    id = BBA_italy_interaction_events.4
					    days = 1
					    random = 2
					}
				}
			}
			set_country_flag = ITA_aimones_coronation
			hidden_effect = {
				ITA_prince_aimone = {
					set_nationality = CRO
				}
			}
		}
	}

	ITA_demand_tomislavs_absolute_reign = {
		priority = 69

		icon = GFX_decision_eng_abdication_crisis

		ai_will_do = {
			base = 10
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			CRO = {
				exists = yes
				is_subject_of = ITA
			}
			has_country_flag = ITA_aimones_coronation
		}

		visible = {
			has_country_flag = ITA_aimones_coronation
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			NOT = {
				has_country_flag = ITA_aimones_absolute_reign
			}
		}

		cost = 75

		days_remove = 7

		remove_effect = {
			IF = {
				limit = { has_dlc = "Together for Victory" }
				ITA = {
					set_autonomy = {
					    target = CRO
					    autonomy_state = autonomy_reichskommissariat
					    end_wars = no
					    end_civil_wars = no
					}
				}
			}
			IF = {
				limit = { ITA = { has_government = fascism } }
				CRO = {
					ITA_prince_aimone = {
						add_country_leader_role = {
						  character = ITA_tomislav
						  promote_leader = yes
						  country_leader = {
						    ideology = fascism_ideology
						    expire = "1970.1.1.1"
						    traits = { ITA_tomislav_of_croatia }
						  }
						}
					}
				}
			}
			IF = {
				limit = { ITA = { has_government = neutrality } }
				CRO = {
					ITA_prince_aimone = {
						add_country_leader_role = {
						  character = ITA_tomislav
						  promote_leader = yes
						  country_leader = {
						    ideology = despotism
						    expire = "1970.1.1.1"
						    traits = { ITA_tomislav_of_croatia }
						  }
						}
					}
				}
			}
			CRO = {
				add_political_power = 75
				division_template = {
				    name = "Tomislav's Royal Guards"
				    is_locked = yes
				    division_names_group = ITA_INF_01
				    regiments = {
				        infantry = { x = 0 y = 0 }
				        infantry = { x = 0 y = 1 }
				        infantry = { x = 0 y = 2 }
				        infantry = { x = 1 y = 0 }
				        infantry = { x = 1 y = 1 }
				        infantry = { x = 1 y = 2 }
				    }
				}
			}
			109 = {
				create_unit = {
				    division = "name = \"Tomislav's Royal Guards\" division_template = \"Tomislav's Royal Guards\" start_experience_factor = 0.5 start_equipment_factor = 1.0 start_manpower_factor = 1.0"
				    owner = CRO
				}
			}

			set_country_flag = ITA_aimones_absolute_reign
		}
	}

	ITA_establish_the_regno_albania = {
		priority = 40

		icon = GFX_decision_eng_trade_unions_support

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				ITA_is_monarchist_ai = yes
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			ALB = {
				exists = no
			}
			44 = {
				is_controlled_by = ITA
				compliance > 10		#prevents initial release and adds plausibility
			}
			805 = {
				is_controlled_by = ITA
				compliance > 10		#prevents initial release and adds plausibility
			}
			910 = {
				is_controlled_by = ITA
				compliance > 10		#prevents initial release and adds plausibility
			}			
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			44 = {
				is_controlled_by = ITA
			}
			NOT = {
				has_country_flag = ITA_established_albania
			}
		}

		cost = 50

		complete_effect = {
			ALB = {
				transfer_state = 44
				transfer_state = 805
				transfer_state = 910
				IF = {
					limit = {
						802 = {
							is_controlled_by = ITA
						}
					}
					transfer_state = 802
				}
				add_ideas = ITA_ALB_italian_settlers
			}
			802 = {
				add_core_of = ALB
			}
			IF = {
				limit = {
					has_dlc = "Together for Victory"
				}
				ITA = {
					set_autonomy = {
					    target = ALB
					    autonomy_state = autonomy_reichsprotectorate
					    end_wars = no
					    end_civil_wars = no
					}
				}
			}
			IF = {
				limit = {
					NOT = {
						has_dlc = "Together for Victory"
					}
				}
				ITA = {
					puppet = ALB
				}
			}
			hidden_effect = {
				set_country_flag = ITA_established_albania
			}
		}
	}


	ITA_establish_the_governato_del_montenegro = {
		priority = 39

		icon = GFX_decision_eng_trade_unions_support

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				ITA_is_monarchist_ai = yes
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			MNT = {
				exists = no
			}
			105 = {
				is_controlled_by = ITA
				compliance > 15		#prevents initial release and adds plausibility
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			105 = {
				is_controlled_by = ITA
			}
			NOT = {
				has_country_flag = ITA_established_montenegro
			}
		}

		cost = 50

		complete_effect = {
			MNT = {
				transfer_state = 105
			}
			IF = {
				limit = {
					has_dlc = "Together for Victory"
				}
				ITA = {
					set_autonomy = {
					    target = MNT
					    autonomy_state = autonomy_reichskommissariat
					    end_wars = no
					    end_civil_wars = no
					}
				}
			}
			IF = {
				limit = {
					NOT = {
						has_dlc = "Together for Victory"
					}
				}
				ITA = {
					puppet = MNT
				}
			}
			MNT = {
				division_template = {
				    name = "Montenegrin Chetniks"
				    is_locked = yes
				    division_names_group = ITA_INF_01
				    regiments = {
				        mountaineers = { x = 0 y = 0 }
				        mountaineers = { x = 0 y = 1 }
				        mountaineers = { x = 0 y = 2 }
				        mountaineers = { x = 1 y = 0 }
				        mountaineers = { x = 1 y = 1 }
				        mountaineers = { x = 1 y = 2 }
				    }
				}
			}
			105 = {
				create_unit = {
				    division = "name = \"First Montenegrin Chetnik Brigade\" division_template = \"Montenegrin Chetniks\" start_experience_factor = 0.5 start_equipment_factor = 1.0 start_manpower_factor = 1.0"
				    owner = MNT
				}

				create_unit = {
				    division = "name = \"Second Montenegrin Chetnik Brigade\" division_template = \"Montenegrin Chetniks\" start_experience_factor = 0.5 start_equipment_factor = 1.0 start_manpower_factor = 1.0"
				    owner = MNT
				}

				create_unit = {
				    division = "name = \"Third Montenegrin Chetnik Brigade\" division_template = \"Montenegrin Chetniks\" start_experience_factor = 0.5 start_equipment_factor = 1.0 start_manpower_factor = 1.0"
				    owner = MNT
				}
			}

			hidden_effect = {
				set_country_flag = ITA_established_montenegro
				MNT = {
					country_event = {
					    id = BBA_italy_interaction_events.7
					    days = 0
					}
				}
			}
		}
	}

	ITA_demand_recognition_of_the_bashkimi_kombetar = {
		priority = 38

		icon = GFX_decision_generic_operation

		ai_will_do = {
			base = 5
			modifier = {
				factor = 0
				105 = {
					controller = {	#don't go suicidal if major country guaranteed the nation
						any_other_country = {
							is_major = yes
							is_subject = no
							has_guaranteed = PREV
							num_of_factories > 50		#just a check to prevent memes
						}
					}
				}
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			ALB = {
				exists = yes
				is_subject_of = ITA
			}
			802 = {
				OR = {
					is_controlled_by = ALB
					is_controlled_by = ITA
					is_controlled_by = YUG
				}
			}
			YUG = {
				exists = yes
				OR = {
					is_subject_of = ITA
					is_in_faction_with = ITA
				}
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			ALB = {
				exists = yes
				is_subject_of = ITA
			}
			NOT = {
				has_country_flag = ITA_bashkimi_kombetar
			}
		}

		cost = 25

		complete_effect = {
			YUG = {
				country_event = {
					id = BBA_italy_interaction_events.29
					hours = 8
					random_hours = 4
				}
			}
			hidden_effect = {
				set_country_flag = ITA_bashkimi_kombetar
			}
		}
	}

	ITA_demand_dalmatia = {
		priority = 38

		icon = GFX_decision_generic_civil_support

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				105 = {
					controller = {	#don't go suicidal if major country guaranteed the nation
						any_other_country = {
							is_major = yes
							is_subject = no
							has_guaranteed = PREV
							num_of_factories > 50		#just a check to prevent memes
						}
					}
				}
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			any_country = {
				OR = {
					is_in_faction_with = ITA
					is_subject_of = ITA
				}
				controls_state = 103
			}
			NOT = {
				103 = {
					is_controlled_by = ITA
				}
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			NOT = {
				has_country_flag = ITA_demanded_dalmatia
			}
		}

		cost = 75

		complete_effect = {
			random_country = {
				limit = { controls_state = 103 }
				country_event = {
				    id = BBA_italy_interaction_events.8
				    days = 2
				    random = 3
				}
			}
			hidden_effect = {
				set_country_flag = ITA_demanded_dalmatia
			}
		}
	}

	ITA_claim_the_montengrin_throne = {
		priority = 37

		icon = GFX_decision_eng_support_imperialist_coup

		ai_will_do = {
			base = 5
			modifier = {
				factor = 0
				105 = {
					controller = {	#don't go suicidal if major country guaranteed the nation
						any_other_country = {
							is_major = yes
							is_subject = no
							has_guaranteed = PREV
							num_of_factories > 50		#just a check to prevent memes
						}
					}
				}
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			OR = {
				44 = {
					is_controlled_by = ITA
				}
				any_subject_country = {
					controls_state = 44
				}
				103 = {
					is_controlled_by = ITA
				}
			}
			NOT = {
				105 = {
					is_controlled_by = ITA
				}
				any_subject_country = {
					original_tag = MNT
					controls_state = 105
				}
			}
			any_country = {
				is_subject_of = ITA
				NOT = {
					controls_state = 105
				}
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			OR = {
				44 = {
					is_controlled_by = ITA
				}
				ITA = {
					any_subject_country = {
						controls_state = 44
					}
				}
				103 = {
					is_controlled_by = ITA
				}
			}
			NOT = {
				has_country_flag = ITA_demanded_montenegro
			}
		}

		cost = 100

		complete_effect = {
			random_country = {
				limit = { controls_state = 105 }
				country_event = {
				    id = BBA_italy_interaction_events.11
				    days = 2
				    random = 3
				}
			}
			hidden_effect = {
				set_country_flag = ITA_demanded_montenegro
			}
		}
	}


	ITA_support_the_hungarians = {
		priority = 30

		icon = GFX_decision_generic_speech

		ai_will_do = {
			base = 0.1
			modifier = {
				factor = 100
				HUN = { is_ai = no }
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			IF = {
				limit = {
					ITA = {
						has_government = fascism
					}
				}
				HUN = {
					has_government = fascism
				}
			}
			IF = {
				limit = {
					ITA = {
						has_government = neutrality
					}
				}
				HUN = {
					has_government = neutrality
				}
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			NOT = {
				has_country_flag = ITA_appeased_hungary
			}
		}

		cost = 75

		complete_effect = {

			HUN = {
				country_event = {
					id = BBA_italy_interaction_events.30
					hours = 2
					random_hours = 5
				}
			}

			hidden_effect = {
				set_country_flag = ITA_appeased_hungary
			}
		}
	}

	ITA_demand_turkish_demilitarization = {
		priority = 20

		icon = GFX_decision_generic_operation

		ai_will_do = {
			base = 2
			modifier = {
				factor = 0.5
				342 = {
					controller = {
						is_ai = no
					}
				}
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			ITA = {
				has_completed_focus = ITA_befriend_greece
			}
			any_country = {
				controls_state = 342
				controls_state = 339
				has_war = no
				NOT = {
					is_in_faction_with = ITA
				}
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			NOT = {
				has_country_flag = ITA_antalya_demilitarized
			}
		}

		cost = 100

		complete_effect = {
			random_country = {
				limit = { controls_state = 342 }
				country_event = {
				    id = BBA_italy_interaction_events.14
				    days = 1
				    random = 4
				}
			}

			hidden_effect = {
				set_country_flag = ITA_antalya_demilitarized
			}
		}
	}


	ITA_give_the_dodecanese_islands_to_greece_for_an_alliance = {
		priority = 25

		icon = GFX_decision_eng_trade_unions_support

		ai_will_do = {
			base = 10
			modifier = {
				factor = 10
				GRE = { is_ai = no }
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			ITA = {
				has_completed_focus = ITA_befriend_greece
				is_faction_leader = yes
				controls_state = 164
			}
			GRE = {
				has_civil_war = no
				NOT = {
					has_government = communism
				}
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
				controls_state = 164
			}
			NOT = {
				has_country_flag = ITA_dodecanese_offered_to_greece
			}
		}

		cost = 75

		complete_effect = {

			random_country = {
				limit = {
					original_tag = GRE
					has_civil_war = no
					NOT = {
						has_government = communism
					}
				}
				country_event = {
				    id = BBA_italy_interaction_events.18
				    days = 1
				    random = 4
				}
			}

			hidden_effect = {
				set_country_flag = ITA_dodecanese_offered_to_greece
			}
		}
	}


	ITA_give_the_dodecanese_islands_to_turkey_for_an_alliance = {
		priority = 24

		icon = GFX_decision_eng_trade_unions_support

		ai_will_do = {
			base = 7
			modifier = {
				factor = 10
				TUR = { is_ai = no }
			}
		}

		allowed = {
			original_tag = ITA
		}

		available = {
			ITA = {
				has_completed_focus = ITA_befriend_turkey
				is_faction_leader = yes
				controls_state = 164
			}
			TUR = {
				has_civil_war = no
				NOT = {
					has_government = communism
				}
			}
		}

		visible = {
			ITA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
				controls_state = 164
			}
			NOT = {
				has_country_flag = ITA_dodecanese_offered_to_turkey
			}
		}

		cost = 75

		complete_effect = {

			random_country = {
				limit = {
					original_tag = TUR
					has_civil_war = no
					NOT = {
						has_government = communism
					}
				}
				country_event = {
				    id = BBA_italy_interaction_events.21
				    days = 1
				    random = 4
				}
			}

			hidden_effect = {
				set_country_flag = ITA_dodecanese_offered_to_turkey
			}
		}
	}

}


##     ##    ###    ##       ##        #######        ###    ##       ########  #### ##    ##  #######
##     ##   ## ##   ##       ##       ##     ##      ## ##   ##       ##     ##  ##  ###   ## ##     ##
##     ##  ##   ##  ##       ##       ##     ##     ##   ##  ##       ##     ##  ##  ####  ## ##     ##
##     ## ##     ## ##       ##       ##     ##    ##     ## ##       ########   ##  ## ## ## ##     ##
 ##   ##  ######### ##       ##       ##     ##    ######### ##       ##         ##  ##  #### ##     ##
  ## ##   ##     ## ##       ##       ##     ##    ##     ## ##       ##         ##  ##   ### ##     ##
   ###    ##     ## ######## ########  #######     ##     ## ######## ##        #### ##    ##  #######


ITA_vallo_alpino_del_littorio_dec_cat = {
	ITA_vallo_alpino_occidentale = {
		priority = 10

		icon = GFX_decision_generic_mountain_fortification

		ai_will_do = {
			base = 1
		}

		available = {
			has_full_control_of_state = 158 #PIEDMONT
			NOT = { has_country_flag = ITA_vallo_alpino_project_ongoing_flag }
		}

		days_remove = ITA_vallo_alpino_days

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > ITA_vallo_alpino_cp_cost
			has_political_power > ITA_vallo_alpino_pp_cost
		}
		custom_cost_text = decision_cost_CP_25_pp_15

		modifier = {
			civilian_factory_use = 3
		}

		cancel_trigger = {
			NOT = { has_full_control_of_state = 158 }
		}

		cancel_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag
		}

		complete_effect = {
			set_country_flag = ITA_vallo_alpino_project_ongoing_flag

			hidden_effect = {
				add_command_power = ITA_vallo_alpino_cp_cost_negative
				add_political_power = ITA_vallo_alpino_pp_cost_negative
			}
		}

		remove_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag

			custom_effect_tooltip = ITA_vallo_alpino_occidentale_tt
			hidden_effect = {
				158 = { #PIEDMONT
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11891
							id = 11721
							id = 9738
							id = 6780
							id = 611
						}
						instant_build = yes
					}
				}
			}
		}
	}

	ITA_vallo_alpino_settentrionale_west = {
		priority = 8

		icon = GFX_decision_generic_mountain_fortification

		ai_will_do = {
			base = 1
		}

		available = {
			has_full_control_of_state = 158 #PIEDMONT
			has_full_control_of_state = 159 #LOMBARDY
			NOT = { has_country_flag = ITA_vallo_alpino_project_ongoing_flag }
		}

		days_remove = ITA_vallo_alpino_days

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > ITA_vallo_alpino_cp_cost
			has_political_power > ITA_vallo_alpino_pp_cost
		}
		custom_cost_text = decision_cost_CP_25_pp_15

		modifier = {
			civilian_factory_use = 3
		}

		cancel_trigger = {
			OR = {
				NOT = { has_full_control_of_state = 158 } #PIEDMONT
				NOT = { has_full_control_of_state = 159 } #LOMBARDY
			}
		}

		cancel_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag
		}

		complete_effect = {
			set_country_flag = ITA_vallo_alpino_project_ongoing_flag

			hidden_effect = {
				add_command_power = ITA_vallo_alpino_cp_cost_negative
				add_political_power = ITA_vallo_alpino_pp_cost_negative
			}
		}

		remove_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag

			custom_effect_tooltip = ITA_vallo_alpino_settentrionale_west_tt
			hidden_effect = {
				158 = { #PIEDMONT
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6635
						}
						instant_build = yes
					}
				}
				159 = { #LOMBARDY
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 607
							id = 9584
							id = 6661
							id = 11568
						}
						instant_build = yes
					}
				}
			}
		}
	}

	ITA_vallo_alpino_settentrionale_east = {
		priority = 6

		icon = GFX_decision_generic_mountain_fortification

		ai_will_do = {
			base = 1
		}

		available = {
			has_full_control_of_state = 850 #TRENTINO
			has_full_control_of_state = 39 #ALTO ADIGE
			NOT = { has_country_flag = ITA_vallo_alpino_project_ongoing_flag }
		}

		days_remove = ITA_vallo_alpino_days

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > ITA_vallo_alpino_cp_cost
			has_political_power > ITA_vallo_alpino_pp_cost
		}
		custom_cost_text = decision_cost_CP_25_pp_15

		modifier = {
			civilian_factory_use = 3
		}

		cancel_trigger = {
			OR = {
				NOT = { has_full_control_of_state = 850 } #TRENTINO
				NOT = { has_full_control_of_state = 39 } #ALTO ADIGE
			}
		}

		cancel_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag
		}

		complete_effect = {
			set_country_flag = ITA_vallo_alpino_project_ongoing_flag

			hidden_effect = {
				add_command_power = ITA_vallo_alpino_cp_cost_negative
				add_political_power = ITA_vallo_alpino_pp_cost_negative
			}
		}

		remove_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag

			custom_effect_tooltip = ITA_vallo_alpino_settentrionale_east_tt
			hidden_effect = {
				850 = { #TRENTINO
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6631
							id = 9598
						}
						instant_build = yes
					}
				}
				39 = { #ALTO ADIGE
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11598
							id = 656
							id = 11615
						}
						instant_build = yes
					}
				}
			}
		}
	}

	ITA_vallo_alpino_orientale = {
		priority = 4

		icon = GFX_decision_generic_mountain_fortification

		ai_will_do = {
			base = 1
		}

		available = {
			has_full_control_of_state = 160 #VENETO
			has_full_control_of_state = 736 #LITORALE
			has_full_control_of_state = 852 #ISTRIA
			NOT = { has_country_flag = ITA_vallo_alpino_project_ongoing_flag }
		}

		days_remove = ITA_vallo_alpino_days

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > 24#ITA_vallo_alpino_cp_cost
			has_political_power > 14 #ITA_vallo_alpino_pp_cost
		}
		custom_cost_text = decision_cost_CP_25_pp_15

		modifier = {
			civilian_factory_use = 3
		}

		cancel_trigger = {
			OR = {
				NOT = { has_full_control_of_state = 160 } #TRENTINO
				NOT = { has_full_control_of_state = 736 } #ALTO ADIGE
				NOT = { has_full_control_of_state = 852 } #ISTRIA
			}
		}

		cancel_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag
		}

		complete_effect = {
			set_country_flag = ITA_vallo_alpino_project_ongoing_flag

			hidden_effect = {
				add_command_power = ITA_vallo_alpino_cp_cost_negative
				add_political_power = ITA_vallo_alpino_pp_cost_negative
			}
		}

		remove_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag

			custom_effect_tooltip = ITA_vallo_alpino_orientale_tt
			hidden_effect = {
				160 = { #VENETO
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 3657
							id = 9613
						}
						instant_build = yes
					}
				}
				736 = { #LITORALE
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11595
							id = 599
						}
						instant_build = yes
					}
				}
				852 = { #ISTRIA
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11735
							id = 11564
						}
						instant_build = yes
					}
				}
			}
		}
	}
}

political_actions = {
	ITA_vittorio_abdicate = {
		priority = 10

		icon = GFX_decision_generic_monarchy

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_power_to_the_king
			has_country_leader = {
				character = ITA_vittorio_emanuele_iii
				ruling_only = yes
			}
		}

		available = {
			has_country_leader = {
				character = ITA_vittorio_emanuele_iii
				ruling_only = yes
			}
		}

		complete_effect = {
			ITA_promote_umberto_to_country_leader = yes #This effect also retires Vittorio
		}
	}
}

ITA_italian_mafia_dec_cat = {
	ITA_suppress_mafia_in_state = {
		icon = GFX_decision_oppression
		target_trigger = {
			FROM = {
				ITA_state_has_any_version_of_mafia_rising_modifier = yes
			}
		}
		target_root_trigger = {
			any_controlled_state = {
				ITA_state_has_any_version_of_mafia_rising_modifier = yes
			}
			OR = {
				NOT = { original_tag = ITA }
				has_completed_focus = ITA_crush_the_mafia
			}
		}
		state_target = yes
		on_map_mode = map_only

		custom_cost_trigger = {
			has_equipment = {
				infantry_equipment > 499
			}
			has_manpower > 999
			command_power > 24
		}
		custom_cost_text = decision_cost_ie_500_MP_500_CP_25

		days_remove = 90

		available = {
			FROM = {
				ITA_state_has_any_version_of_mafia_rising_modifier = yes
			}
		}

		complete_effect = {

		}

		remove_effect = {
			FROM = {
				if = {
					limit = {
						has_dynamic_modifier = { modifier = ITA_mafia_on_the_rise }
					}
					remove_dynamic_modifier = { modifier = ITA_mafia_on_the_rise }
				}
				else = {
					remove_dynamic_modifier = { modifier = ITA_mafia_on_the_rise_no_lar }
				}
			}
		}

		ai_will_do = {
			base = 0.1
		}
	}
}

operations = {
	ITA_human_torpedo_raid = {
		icon = GFX_decision_generic_human_torpedo

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_decima_flottiglia_mas
		}

		available = {
			any_enemy_country = {
				any_controlled_state = {
					state_is_in_the_mediterranean_sea = yes
					PREV = {
						OR = {
							ships_in_state_ports = {
								type = capital_ship
								size > 0
								state = PREV
							}
							ships_in_state_ports = {
								type = screen_ship
								size > 0
								state = PREV
							}
						}
					}
				}
			}
		}

		ai_hint_pp_cost = 0
		custom_cost_trigger = {
			command_power > 24
		}
		custom_cost_text = decision_cost_CP_25

		fire_only_once = yes

		complete_effect = {
			if = {
				limit = {
					any_enemy_country = {
						is_major = yes
						any_controlled_state = {
							state_is_in_the_mediterranean_sea = yes
							PREV = {
								OR = {
									ships_in_state_ports = {
										type = capital_ship
										size > 0
										state = PREV
									}
									ships_in_state_ports = {
										type = screen_ship
										size > 0
										state = PREV
									}
								}
							}
						}
					}
				}
				random_enemy_country = {
					limit = {
						is_major = yes
						any_controlled_state = {
							state_is_in_the_mediterranean_sea = yes
							PREV = {
								OR = {
									ships_in_state_ports = {
										type = capital_ship
										size > 0
										state = PREV
									}
									ships_in_state_ports = {
										type = screen_ship
										size > 0
										state = PREV
									}
								}
							}
						}
					}
					random_controlled_state = {
						limit = {
							state_is_in_the_mediterranean_sea = yes
							PREV = {
								OR = {
									ships_in_state_ports = {
										type = capital_ship
										size > 0
										state = PREV
									}
									ships_in_state_ports = {
										type = screen_ship
										size > 0
										state = PREV
									}
								}
							}
						}
						prioritize = { 447 }
						damage_units = {
							state = THIS # optional
							limit = {
								OR = {
									tag = PREV
									is_in_faction_with = PREV
								}
							}
							damage = 0.5
							str_damage = 0.65
							ratio = yes
							army = no
							navy = yes
						}
						set_variable = { ITA.ITA_raided_state_var = THIS }
					}
					custom_effect_tooltip = ITA_human_torpedo_effect_tt
					hidden_effect = {
						country_event = { id = BBA_italy_human_torpedo_raid.1 hours = 1}
					}
				}
			}
			else = {
				random_enemy_country = {
					limit = {
						any_controlled_state = {
							state_is_in_the_mediterranean_sea = yes
							PREV = {
								OR = {
									ships_in_state_ports = {
										type = capital_ship
										size > 0
										state = PREV
									}
									ships_in_state_ports = {
										type = screen_ship
										size > 0
										state = PREV
									}
								}
							}
						}
					}
					random_controlled_state = {
						limit = {
							state_is_in_the_mediterranean_sea = yes
							PREV = {
								OR = {
									ships_in_state_ports = {
										type = capital_ship
										size > 0
										state = PREV
									}
									ships_in_state_ports = {
										type = screen_ship
										size > 0
										state = PREV
									}
								}
							}
						}
						prioritize = { 447 }
						damage_units = {
							state = THIS # optional
							limit = {
								OR = {
									tag = PREV
									is_in_faction_with = PREV
								}
							}
							damage = 0.5
							str_damage = 0.65
							ratio = yes
							army = no
							navy = yes
						}
						set_variable = { ITA.ITA_raided_state_var = THIS }
					}
					custom_effect_tooltip = ITA_human_torpedo_effect_tt
					hidden_effect = {
						country_event = { id = BBA_italy_human_torpedo_raid.1 hours = 1 }
					}
				}
			}

			custom_effect_tooltip = decision_only_once_tt
		}

		ai_will_do = {
			base = 0
		}
	}
}



form_nation_mod_category = {
	SAD_move_capital_to_turin = {

		icon = generic_nationalism

		allowed = {
			original_tag = SAD
		}

		cost = 50

		available = {
			owns_state = 114
			owns_state = 158
			has_full_control_of_state = 158
		}
		
		fire_only_once = yes	
		visible = {
			has_cosmetic_tag = SAD_PIEDMONT
		}

		complete_effect = {						
			add_stability = 0.03	
			set_capital = { state = 158 }
			add_victory_points = {
				province = 6780
				value = 10    
			}						
		}			
		ai_will_do = {
			factor = 50
		}
	}
	ITA_REBORN_move_capital_to_rome = {

		icon = generic_nationalism

		allowed = {
			OR = {
				original_tag = SAD
				original_tag = VNZ
				original_tag = NAP
				original_tag = SIC
			}
			
		}

		cost = 50

		available = {
			owns_state = 2
			has_full_control_of_state = 2
		}
		
		fire_only_once = yes	
		visible = {
			has_cosmetic_tag = ITA_REBORN
		}

		complete_effect = {						
			add_stability = 0.03	
			set_capital = { state = 2 }				
		}			
		ai_will_do = {
			factor = 50
		}
	}	
}
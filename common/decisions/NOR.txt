 NOR_debug_decisions_category = {
 	NOR_add_to_faction = {
 		available = {
 		}
		custom_cost_text = decision_cost_40_convoy
		custom_cost_trigger = {
			always = yes
		}

 		complete_effect = {
 			create_faction = NORDICSSSSSS
 			every_other_country = {
 				limit = {
 					NORDIC_is_nordic = yes 
 					is_subject = no 
 				}
 				ROOT = {
 					add_to_faction = PREV
 				} 
 			}
 		}
 	}
	NOR_remove_all_convoys = {
		complete_effect = {
			add_equipment_to_stockpile = {
				type = convoy_1
				amount = -1000
			}
		}
	}
	NOR_reset_prep = {
		complete_effect = {
			NOR_reset_prep_system = yes 
		}
	}
	debug_num_convoys = {
		available = {
			check_variable = {
				var = num_equipment@convoy
				value = 10
				compare = greater_than_or_equals
			}
		}
		complete_effect = {
			log = "[?num_equipment@convoy] convoys in stockpile"
		}
	}
	NOR_debug_add_convoys ={
		complete_effect = {
			add_equipment_to_stockpile = {
				type = convoy_1
				amount = 1000
			}
		}
	}
	start_dem_prep = {
		complete_effect = { 
			complete_national_focus = NOR_continue_nygaardsvold_government
			complete_national_focus = NOR_weathering_the_storm_to_come
			complete_national_focus = NOR_broken_gun_policies 
			complete_national_focus = NOR_restart_public_investment
			complete_national_focus = NOR_rearm_for_defense
			complete_national_focus = NOR_patrol_our_coast
		}
	}

	NOR_start_allied_prep = {
		complete_effect = {
			complete_national_focus = NOR_vote_of_no_confidence
		}

	}

	start_comm_prep = {
		complete_effect = {
			complete_national_focus = NOR_compromise_with_the_nkp 
			complete_national_focus = NOR_the_seeds_of_the_revolution
		}
	}

	NOR_start_mon_prep = {
		complete_effect = {
			complete_national_focus = NOR_the_stumbling_storting
			complete_national_focus = NOR_the_chamberlains_overture
		}
	}

	NOR_start_fas_prep = {
		complete_effect = {
			complete_national_focus = NOR_the_stumbling_storting
			complete_national_focus = NOR_lurk_in_the_shadows
		}
	}

	start_defensive_war = {
		complete_effect = {
			DEN = { 
				declare_war_on = {
					target = NOR
					type = annex_everything
				}
			}
		}
	}
	NOR_stop_the_war = {
		complete_effect = {
			every_other_country = {
				limit = {
					has_war_with = ROOT 
				}
				white_peace = {
					tag = ROOT
				}
			}
		}
	}
	NOR_prep_all_states = {
		complete_effect = {
			every_owned_state = {
				NOR_start_state_preparation = yes 
				NOR_start_state_preparation = yes 
				NOR_start_state_preparation = yes 
			}
		}
	}

	NOR_test_fascist_civil_war = {
		complete_effect = {
			add_popularity = {
				ideology = fascism
				popularity = 0.2
			}
			GER = {
				create_wargoal = {
					type = annex_everything 
					target = NOR 
				}
				declare_war_on = {
					target = NOR 
					type = annex_everything
				}
			}
		}
	}

	NOR_test_communist_civil_war = {
		complete_effect = {
			NOR_start_communist_civil_war = yes 
		}
	}

	NOR_debug_nordic_tack = {
		complete_effect = {
			clr_country_flag = im_not_here_to_make_friends
			set_country_flag = nordic_debug_decisions_tack
		}
	}

	NOR_debug_vanilla_tack = {
		complete_effect ={
			if = {
				limit = {
					has_country_flag = NOR_vanilla_debug_tack
				}
				clr_country_flag = NOR_vanilla_debug_tack
			}
			else = {
				set_country_flag = NOR_vanilla_debug_tack
			}
		}
	}

	NOR_open_NORDIC_debug = {
		complete_effect = {
			set_country_flag = nordic_debug_decisions_tack
		}
	}

	NOR_send_event = {
		complete_effect = {
			SOV = {
				country_event = {
					id = AAT_norway_communist.4
					hours = 2
				}
			}
		}
	}

	NOR_check_hydro = {

		complete_effect = {
			complete_national_focus = NOR_nationalize_the_hydro_plants

		}
	}

	NOR_test_mobile_gov = {
		complete_effect = {
			NOR_set_mobile_government_variables = yes 
			110 = {
				NOR_set_as_government_hq = yes 		
			}
			complete_national_focus = NOR_continue_nygaardsvold_government
			complete_national_focus = NOR_weathering_the_storm_to_come
			complete_national_focus = NOR_broken_gun_policies 
			complete_national_focus = NOR_restart_public_investment
			complete_national_focus = NOR_rearm_for_defense
			complete_national_focus = NOR_patrol_our_coast			
			every_owned_state = {
				limit = {
					NOT = {
						state = 922
					}
				}
				NOR_start_state_preparation = yes 
				NOR_start_state_preparation = yes 
				NOR_start_state_preparation = yes 
			}
		}
	}
	NOR_test_exile = {
		complete_effect = {
			GER = {
				create_wargoal = {
					type = annex_everything 
					target = NOR 
				}
				declare_war_on = {
					target = NOR 
					type = annex_everything
				}
			}
			ENG = { add_to_faction = NOR }
			every_controlled_state = {
				limit = {
					NOT = { state = 110 }
				}
				set_state_controller_to = GER
			}
			become_exiled_in = { 
				target = ENG 
				legitimacy = 100 
			}
		}
	}

	NOR_generate_militias = {
		complete_effect = {
			set_country_flag = NOR_going_dem_historical
			110 = {
				NOR_spawn_militias_in_state = yes 
				NOR_spawn_militias_in_state = yes 
				NOR_spawn_militias_in_state = yes 
			}
		}
	}
}

NOR_exile_decisions_category = { # Unique versions of normal in exile decisiosn for Norway 
	NOR_request_reinstatement = {

		icon = generic_independence

		days_re_enable = 120 # Prevent event spam

		custom_cost_text = decision_cost_50_convoy_25_pp

		custom_cost_trigger = {
			has_political_power > 24
			NOR_has_50_convoys = yes 		
		}

		available = {
			has_capitulated = no 
			110 = {
				OR = {
					is_fully_controlled_by = ROOT 
					is_fully_controlled_by = FROM 
				}
			}
			has_legitimacy > 75
		}

		visible = {
			has_legitimacy > 60
			FROM = { is_hosting_exile = ROOT }
			any_owned_state = {
				is_controlled_by = ROOT
			}
		}


		targets = { host }

		target_trigger = { FROM = { is_hosting_exile = ROOT } }

		complete_effect = {
			hidden_effect = { 
				add_political_power = -25 
				NOR_remove_50_convoys = yes 
			}
			
			FROM = {
				NOR_add_25_convoys = yes 
				country_event = { id = mtg_exile_government.2 }
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	NOR_lobby_for_parliamentary_support = {

		icon = eng_install_government

		visible = {
			FROM = { is_hosting_exile = ROOT }
		    has_legitimacy < 100
		}


		targets = { host }

		target_trigger = { FROM = { is_hosting_exile = ROOT } }

		modifier = {
			legitimacy_daily = 0.07
		}

		days_remove = 60

		custom_cost_text = decision_cost_50_convoy_25_pp

		custom_cost_trigger = {
			has_political_power > 24
			NOR_has_50_convoys = yes 
		}

		complete_effect = {
			hidden_effect = { add_political_power = -25 }
			NOR_remove_50_convoys = yes 
			FROM = { NOR_add_25_convoys = yes } 
		}

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 0
				has_war = no
			}
		}
	}

	NOR_bring_soldiers_from_norway = {

		icon = eng_propaganda_campaigns

		days_remove = 140

		available = {
	    	has_legitimacy > 20
	    }

		visible = {
			has_war = yes
			FROM = { is_hosting_exile = ROOT }
		    has_legitimacy > 10
		}

		target_trigger = {
			FROM = { is_hosting_exile = ROOT }
		}

		targets = { host }

		modifier = {
			exiled_government_weekly_manpower = 200
		}
		custom_cost_trigger = {
			has_political_power > 39
			NOR_has_75_convoys = yes 
		}

		custom_cost_text = decision_cost_75_convoy_40_pp

		complete_effect = {
			hidden_effect = { add_political_power = -40 }
			FROM = { NOR_add_50_convoys = yes }
			NOR_remove_75_convoys = yes 
		}

		ai_will_do = {
		}
	}

	NOR_weapons_for_the_resistance = {

		icon = generic_ignite_civil_war

		visible = {
			has_completed_focus = NOR_establish_milorg
	    	has_legitimacy > 25
			any_enemy_country = {
				ROOT = {
					any_owned_state = {
						is_controlled_by = PREV.PREV
					}
				}
			}
		}
		
		available = {
			has_legitimacy > 45
		}

		target_trigger = {
			FROM = { is_hosting_exile = ROOT }
		}		

		targets = { host }


		custom_cost_text = decision_cost_50_convoy_25_cp

		custom_cost_trigger = {
			command_power > 24
			NOR_has_50_convoys = yes 
		}

		days_remove = 120

		complete_effect = {
			hidden_effect = { add_command_power = -25 }
			NOR_remove_50_convoys = yes 
			FROM = { NOR_add_25_convoys = yes } 
			add_timed_idea = {
				idea = idea_weapons_for_the_resistance
				days = 120
			}
			add_equipment_to_stockpile = { 
				type = infantry_equipment
				amount = 2000
				producer = FROM
			}
		}

		ai_will_do = {
			factor = 0.01
		}
	}

	NOR_unity_parade = {

		icon = generic_nationalism

		available = {
	    	has_legitimacy > 50
	    	any_war_score > 2
		    has_war_support < 0.8
		}

		visible = {
			has_legitimacy > 25
			has_war = yes
		}

		fire_only_once = yes

		target_trigger = {
			FROM = { is_hosting_exile = ROOT }
		}		

		targets = { host }

		custom_cost_text = decision_cost_25_convoy_20_pp

		custom_cost_trigger = {
			has_political_power > 19
			NOR_has_25_convoys = yes 
		}

		targeted_modifier = {
			tag = FROM
			war_support_weekly = 0.015
		}

		modifier = {
			legitimacy_daily = -0.3
			war_support_weekly = 0.01
			political_power_gain = 0.25

		}

		days_remove = 45

		complete_effect = {
			hidden_effect = { add_political_power = -20}
			NOR_remove_25_convoys = yes 
			FROM = { NOR_add_10_convoys = yes }
		}

		ai_will_do = {
			factor = 0.03
			modifier = {
				factor = 0
		    	has_war_support > 0.7
			}
			modifier = {
				has_political_power < 150
				political_power_daily < 0.85
				factor = 0
			}
			modifier = {
				has_war_support < 0.5
				factor = 2
			}
			modifier = {
				has_war_support < 0.3
				factor = 10
			}
		}
	}

	NOR_joint_training_exercise = {

		icon = eng_blackshirt_march

		
		days_re_enable = 225

		custom_cost_trigger = {
			NOR_has_50_convoys = yes 
			has_political_power > 24
		}

		custom_cost_text = decision_cost_50_convoy_25_pp

		available = {
	    	has_legitimacy > 35
	    	any_war_score > 9
		}

		visible = {
			has_completed_focus = NOR_establish_milorg
		    has_legitimacy > 20
			has_war = yes
		}

		target_trigger = {
			FROM = { is_hosting_exile = ROOT }
		}		

		targets = { host }

		complete_effect = {
			hidden_effect = { add_political_power = -25 } 
			NOR_remove_50_convoys = yes 
			add_political_power = -25
			add_command_power = 10
			army_experience = 25
			air_experience = 50
			navy_experience = 50
			FROM = {
				NOR_add_25_convoys = yes
				add_command_power = 10
				army_experience = 25
				air_experience = 50
				navy_experience = 50
			}
		}

		ai_will_do = {
			factor = 0.05
			modifier = {
				OR = {
					has_army_experience < 25
					has_air_experience < 25
					has_navy_experience < 25
				}
				factor = 2
			}

			modifier = {
				factor = 0 # Save for more immediately useful stuff
				command_power < 50
			}
			modifier = {
				factor = 100
				command_power > 98 # Not doing you any good so spend it
			}
			modifier = {
				factor = 0.1 # Reached limit of an experience type
				OR = {
					has_army_experience > 475
					has_air_experience > 450
					has_navy_experience > 450
				}
			}
			modifier = {
				factor = 0 # Spend some of your damn experience!!
				has_army_experience > 475
				has_air_experience > 450
				has_navy_experience > 450
			}
		}
	}

	NOR_expand_industrial_capacity = {
		icon = ger_military_buildup

		days_remove = 120

		available = {
			has_legitimacy > 50
		}

		visible = {
			has_war = yes
			FROM = { is_hosting_exile = ROOT }
		    has_legitimacy > 25
		}
		
		target_trigger = {
			FROM = { is_hosting_exile = ROOT }
		}

		targets = { host }

		custom_cost_trigger = {
			NOR_has_75_convoys = yes 
		}

		custom_cost_text = decision_cost_75_convoy_40_pp

		complete_effect = {
			FROM = { NOR_add_50_convoys = yes }
			NOR_remove_75_convoys = yes 
			hidden_effect = {
				add_political_power = -40
			}
		}

		remove_effect = {
			add_offsite_building = {
				type = dockyard
				level = 1
			}
			add_offsite_building = {
				type = industrial_complex
				level = 1
			}
			add_offsite_building = {
				type = arms_factory
				level = 1
			}
		}
	}

	NOR_foment_resistance_in_state = {
		icon = GFX_decision_generic_civil_support

		available = {
			has_legitimacy > 50
			FROM = {
				resistance > 50
			}
		}
		
		state_target = yes
		
		targets = {
			state = 110 # Ostlandet - Oslofjord in vanilla
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		visible = {
			has_completed_focus = NOR_use_xu 
			FROM = {
				resistance > 10
				resistance < 100
			}
		}

		target_trigger = {
			FROM = { 
				is_core_of = ROOT
				resistance > 35
				NOT = { is_controlled_by = ROOT }   
			}
		}

		custom_cost_trigger = {
			NOR_has_25_convoys = yes 
			has_political_power > 19
		}

		custom_cost_text = decision_cost_25_convoy_20_pp

		complete_effect = {
			NOR_remove_25_convoys = yes
			hidden_effect = {
				add_political_power = -20
			} 
		}

		days_remove = 90

		remove_effect = {
			FROM = {
				add_resistance_target = 15
				set_state_flag = NOR_resistance_fomented  
			}
		}
	}

	NOR_support_rebellion = {
		icon = GFX_decision_revolt

		fire_only_once = yes
		
		days_remove = 30

		visible = {
			has_completed_focus = NOR_preparing_the_return_to_norway
			has_legitimacy > 65
			NOT = {
				has_country_flag = NOR_already_done_rebellion
			}
		}

		available = {
			has_legitimacy > 80 
			FROM = {
				resistance > 90
			}
		}

		state_target = yes 

		targets = {	#same as foment resistance except the capital
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		target_trigger = {
			FROM = { 
				is_core_of = ROOT 
				resistance > 75 
			} 
		}

		custom_cost_trigger = { 
			NOR_has_100_convoys = yes 
			has_political_power > 49
		}

		custom_cost_text = decision_cost_100_convoy_50_pp

		complete_effect = {
			NOR_remove_100_convoys = yes
			hidden_effect = {
				add_political_power = -50
			} 
		}

		remove_effect = {
			FROM = {
				set_state_controller_to = ROOT 
				NOR_spawn_resistance = yes 

			}
			set_country_flag = NOR_already_done_rebellion
		}
	}
}

NOR_democratic_preparation_decisions_category = {
	
	######              ######  
	######  HISTORICAL  ######  
	######              ###### 

	NOR_prepare_state_historical = { # Decision to prepare the state
	
		icon = {
			key = GFX_decision_NOR_prepare_state_dem_0
			trigger = {
				FROM = {
					NOT = {
						has_variable = NOR_state_preparation
					}  
				}
			}
		}		
		icon = {
			key = GFX_decision_NOR_prepare_state_dem_1
			trigger = {
				FROM ={
					check_variable = { NOR_state_preparation = 1 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_dem_2
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 2 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_dem_3
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 3 }
				}
			}
		}

		visible = {
			has_completed_focus = NOR_broken_gun_policies
			has_war = no 
			OR = {
				ROOT = {
					has_country_flag = NOR_going_dem_historical
					#NOT = { has_country_flag = NOR_active_preparation }
				}
				FROM = {
					has_state_flag = NOR_preparing_state
				}
			}
		}

		available = {
			FROM = {
				check_variable = { NOR_state_preparation < 3 } 
			}
		}

		state_target = yes


		targets = {
			state = 110 # Ostlandet - Oslofjord in vanilla
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		target_trigger = {
			FROM = {
				is_core_of = NOR
				NOT = {	state = 914	} # Not Jan Mayen 
				OR = {
					NOT = { has_variable = NOR_state_preparation }
					check_variable = { NOR_state_preparation < 3 }
					has_state_flag = NOR_preparing_state
				}
			}
		}

		cost = 60
		
		days_remove = NOR_prep_his_remove_days
	 
		complete_effect = {
			FROM = { 
				NOR_start_state_preparation = yes 
			} 
		}

		remove_effect = {
			FROM = { NOR_end_state_preparation = yes }
		}
	}

	NOR_focus_on_training = {
		
		visible = {
			has_completed_focus = NOR_rearm_for_defense
			OR = {
				has_country_flag = NOR_going_dem_historical
				has_country_flag = NOR_going_dem_allied
			}		
		}

		available = {
			NOT = {
				ROOT = {
					has_country_flag = NOR_ongoing_countrywide_program
				}
			}
			has_equipment = {
				convoy > NOR_prep_his_program_min_convoy
			}		
		}

		cost = 50
		
		days_remove = 45 

		complete_effect = {
			ROOT = { set_country_flag = NOR_ongoing_countrywide_program }
		}

		modifier = {
			training_time_factor = -0.15
			consumer_goods_factor = 0.05
			production_factory_max_efficiency_factor = -0.1
		}

		remove_effect = {
			ROOT = { clr_country_flag = NOR_ongoing_countrywide_program }
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}

	NOR_public_investment_drive = {
		
		visible = {
			has_completed_focus = NOR_restart_public_investment
			OR = {
				has_country_flag = NOR_going_dem_historical
				has_country_flag = NOR_going_dem_allied
			}		
		}

		available = {
			NOT = {
				ROOT = {
					has_country_flag = NOR_ongoing_countrywide_program
				}
			}
			has_equipment = {
				convoy > NOR_prep_his_program_min_convoy
			}		
		}

		cost = 50

		days_remove = 45 

		complete_effect = {
			ROOT = { set_country_flag = NOR_ongoing_countrywide_program }
		}

		modifier = { 
			production_speed_buildings_factor = 0.2
			training_time_factor = 0.10
			production_factory_max_efficiency_factor = -0.1
			industrial_capacity_factory = -0.15
		} 

		remove_effect = {
			ROOT = { clr_country_flag = NOR_ongoing_countrywide_program }
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}

	NOR_modernize_armed_forces_decision = {
		
		visible = {
			has_completed_focus = NOR_rearm_for_defense
			OR = {
				has_idea = NOR_obsolete_armed_forces_ns_1
				has_idea = NOR_obsolete_armed_forces_ns_2
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = NOR_country_prep_modernize_armed_forces_TT
				check_variable = {
					var = NOR_country_preparedness
					value > 15 
				}
			}
			
		}
		custom_cost_text = decision_cost_modernize_armed_forces_convoy_cp

		custom_cost_trigger = {
			command_power > 29
			has_equipment = {
				convoy > 99
			}
		}

		days_remove = 60

		complete_effect = {
			add_command_power = -25
			add_equipment_to_stockpile = { 
				type = convoy_1
				amount = -100
			}
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = NOR_obsolete_armed_forces_ns_1
				}
				swap_ideas = {
					remove_idea = NOR_obsolete_armed_forces_ns_1
					add_idea = NOR_obsolete_armed_forces_ns_2
				}
			}
			else_if = {
				limit = {
					has_idea = NOR_obsolete_armed_forces_ns_2
				}
				remove_ideas = { NOR_obsolete_armed_forces_ns_2	}
			}
		}
	}

	NOR_naval_expanion = {
		
		visible = {
			has_completed_focus = NOR_patrol_our_coast
			OR = {
				has_country_flag = NOR_going_dem_historical
			}
		}

		available = {
			NOT = {
				ROOT = {
					has_country_flag = NOR_ongoing_countrywide_program
				}
			}
			has_equipment = {
				convoy > NOR_prep_his_program_min_convoy
			}		
		}

		cost = 50	

		days_remove = 45 

		complete_effect = {
			ROOT = { set_country_flag = NOR_ongoing_countrywide_program }
		}

		modifier = {
			production_speed_industrial_complex_factor = -0.15
			production_speed_arms_factory_factor = -0.15
			industrial_capacity_factory = -0.2 
			production_speed_dockyard_factor = 0.25
			experience_gain_navy = 0.15
			industrial_capacity_dockyard = 0.25
		}

		remove_effect = {
			ROOT = { clr_country_flag = NOR_ongoing_countrywide_program }
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}
}

NOR_historical_deploy_prep_decisions_category = {
	
	NOR_deploy_state_preparation_historical = { # Decision to deploy the preparation of the state 
		
		priority = 90 
		
		icon = {
			key = GFX_decision_NOR_deploy_prep_dem_1
			trigger = {
				FROM ={
					check_variable = { NOR_state_preparation = 1 }
				}
			}
		} 
		icon = {
			key = GFX_decision_NOR_deploy_prep_dem_2
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 2 }
				} 
			}
		}
		icon = {
			key = GFX_decision_NOR_deploy_prep_dem_3
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 3 }
				}
			}
		}

		visible = {
			ROOT = {
				has_completed_focus = NOR_broken_gun_policies
				has_country_flag = NOR_going_dem_historical
				has_defensive_war = yes
				OR = {
					NOT = { has_country_flag = NOR_state_prep_deployment_in_progress } 
					FROM = { has_state_flag = NOR_deploying_prep_in_state } 
				}
			}
		}

		available = {
			has_equipment = {
				convoy > NOR_prep_his_cost_convoys
			}
		}

		state_target = yes 

		targets = {
			state = 110 # Ostlandet - Oslofjord in vanilla
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		target_root_trigger = {
			has_completed_focus = NOR_broken_gun_policies
			has_country_flag = NOR_going_dem_historical
			has_defensive_war = yes
			OR = {
				NOT = { has_country_flag = NOR_state_prep_deployment_in_progress } 
				FROM = { has_state_flag = NOR_deploying_prep_in_state } 
			}
		}

		target_trigger = {
			FROM = {
				is_core_of = ROOT 
				is_controlled_by = ROOT
				OR = {
					has_variable = NOR_state_preparation
					has_state_flag = NOR_deploying_prep_in_state
				}
			}
		}

		custom_cost_text = decision_cost_his_prepare_convoy_pp

		custom_cost_trigger = {
			has_equipment = {
				convoy > NOR_prep_his_cost_convoys_trigger
			}
			has_political_power > NOR_prep_his_cost_pp_trigger
		}

		days_remove = 7

		complete_effect = {
			FROM = { start_deploying_prep = yes }
		}

		remove_effect = {
			FROM = { NOR_deploy_prep_dem = yes } 
		}
	}

	# Mobile Government Stuff  
	NOR_prepare_exile = {

		priority = 100

		icon = GFX_decision_hol_draw_up_staff_plans

		visible = {
			has_mtg = yes 
			has_capitulated = no 
			has_completed_focus = NOR_the_kings_no
			NOT = { has_country_flag = NOR_capitulation_prepared  }
		}
		available = {
			has_mtg = yes
			surrender_progress > 0.65
			is_in_faction = yes
		}

		custom_cost_text = NOR_decision_prepare_exile_convoys_cost

		custom_cost_trigger = {
			has_equipment = {
				convoy > 199 
			}
			has_political_power > 49
		}

		days_remove = 7

		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = { 
					type = convoy_1
					amount = -200
				}
				add_political_power = -50
			}
		}

		cancel_trigger = {
			has_country_flag = NOR_moving_government
		}

		cancel_effect = {
			add_equipment_to_stockpile = { 
				type = convoy_1
				amount = 200
			}
		}

		remove_effect = {
			set_country_flag = NOR_capitulation_prepared
			custom_effect_tooltip = NOR_exile_decisions_unlock_TT
			custom_effect_tooltip = NOR_when_exiled_TT
			add_to_variable = {
				var = NOR_exiled_convoys
				value = 250
				tooltip = NOR_exiled_convoys_TT 
			}
			add_to_variable = {
				var = NOR_exiled_pp
				value = 150
				tooltip = NOR_exiled_pp_TT
			}
			add_to_variable = {
				var = NOR_exiled_legitimacy
				value = 45
				tooltip = NOR_exiled_legitimacy_TT
			}
			add_to_variable = {
				var = NOR_exiled_manpower 
				value = 2500
				tooltip = NOR_exiled_manpower_TT 
			}
		}
	}

	NOR_move_government_headquarters_decision = {
		
		priority = 99

		available = {
			FROM = {
				is_fully_controlled_by = ROOT 
			} 
		}

		visible = {
			has_completed_focus = NOR_the_kings_no  
		}

		state_target = yes 
		
		 
		target_trigger = {
			FROM = {
				NOT = {	state = 914	} # Not Jan Mayen 
				is_core_of = ROOT 
				any_neighbor_state = { state = NOR.NOR_mobile_government_hq }
				has_variable = NOR_state_preparation
			}
		}
		
		targets = {
			state = 110 # Ostlandet - Oslofjord in vanilla
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		cost = 10

		days_remove = NOR_mobile_gov_days_remove

		complete_effect = {
			NOR = {
				set_country_flag = NOR_moving_government
			}
		}

		remove_effect = {
			set_variable = {
				NOR.NOR_mobile_government_hq = FROM  
			}
			NOR = { clr_country_flag = NOR_moving_government }
			set_capital = { state = FROM }
		} 
	}

	NOR_expedite_training = {
		
		icon = GFX_decision_generic_prepare_civil_war

		visible = {
			has_completed_focus = NOR_weathering_the_storm_to_come
			check_variable = { NOR.NOR_country_preparedness > 0 } 
		}

		custom_cost_text = decision_cost_CP_25_pp_25

		custom_cost_trigger = {
			has_political_power > 24
			command_power > 24 
		}

		days_remove = 35

		modifier = {
			training_time_factor = -0.35
			weekly_manpower = 50
		}
	}

	NOR_dem_his_integrate_militias = {
		available = {
			any_country_division = {
				division_has_majority_template = militia
			}
		}

		visible = {
			any_country_division = {
				division_has_majority_template = militia
			}
		}
		custom_cost_trigger = {
			has_equipment = {
				convoy_1 > 49
			}
			has_army_experience > 79
		}

		custom_cost_text = decision_cost_convy_army_xp

		days_remove = 30

		remove_effect = {
			NOR_make_militias_into_regulars = yes 
		}
	}
}


	######              ######  
	######    ALT-DEM   ######  
	######              ###### 


NOR_allied_democratic_preparation_decisions_category = {
	NOR_prepare_state_alt_dem = { # Decision to prepare the state for Alt Democratic
	
		icon = {
			key = GFX_decision_NOR_prepare_state_dem_0
			trigger = {
				FROM = {
					NOT = {
						has_variable = NOR_state_preparation
					}  
				}
			}
		}		
		icon = {
			key = GFX_decision_NOR_prepare_state_dem_1
			trigger = {
				FROM ={
					check_variable = { NOR_state_preparation = 1 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_dem_2
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 2 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_dem_3
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 3 }
				}
			}
		}

		visible = {
			has_completed_focus = NOR_vote_of_no_confidence
			NOT = { has_country_flag = NOR_preps_system_has_been_reset }
			has_war = no 
			OR = {
				ROOT = {
					has_country_flag = NOR_going_dem_allied
					#NOT = { has_country_flag = NOR_active_preparation }
				}
				FROM = {
					has_state_flag = NOR_preparing_state
				}
			}
		}

		available = {
			FROM = {
				check_variable = { NOR_state_preparation < 3 } 
			}
		}

		state_target = yes

		custom_cost_trigger = {
			has_equipment = {
				convoy_1 > NOR_prep_alt_dem_convoy_cost_trigger
			}
			has_political_power > NOR_prep_alt_dem_pp_cost_trigger
		}

		custom_cost_text = decision_cost_alt_dem_prepare_convoy_pp
		
		targets = {
			state = 110 # Ostlandet - Oslofjord in vanilla
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		target_trigger = {
			FROM = {
				is_core_of = NOR
				NOT = {	state = 914	} # Not Jan Mayen 
				OR = {
					NOT = { has_variable = NOR_state_preparation }
					check_variable = { NOR_state_preparation < 3 }
					has_state_flag = NOR_preparing_state
				}
			}
		}

		
		days_remove = NOR_prep_his_remove_days
	 
		complete_effect = {
			FROM = { 
				NOR_start_state_preparation = yes 
			} 
		}

		modifier = {
			stability_weekly = -0.01
		}

		remove_effect = {
			FROM = { NOR_end_state_preparation = yes }
		}
	}

	NOR_alt_dem_naval_expansion = {
		
		visible = {
			has_completed_focus = NOR_patrol_our_coast
			NOT = { has_country_flag = NOR_preps_system_has_been_reset }
			has_war = no
		}

		available = {
			NOT = {
				ROOT = {
					has_country_flag = NOR_ongoing_countrywide_program
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { NOR_country_preparedness > 0 }
		}

		custom_cost_text = decision_cost_alt_dem_preparedness

		days_remove = 90

		complete_effect = {
			hidden_effect = {
				subtract_from_variable = { NOR_country_preparedness = 1	}
				set_country_flag = NOR_ongoing_countrywide_program
			}
		}

		modifier = {
			production_speed_dockyard_factor = 0.15
			production_speed_naval_base_factor = 0.2
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}

	NOR_alt_dem_military_industry_expansion = {
		
		visible = {
			has_completed_focus = NOR_prepare_for_war
			NOT = { has_country_flag = NOR_preps_system_has_been_reset }
			has_war = no
		}

		available = {
			NOT = {
				ROOT = {
					has_country_flag = NOR_ongoing_countrywide_program
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { NOR_country_preparedness > 0 }
		}

		custom_cost_text = decision_cost_alt_dem_preparedness

		days_remove = 90

		complete_effect = {
			hidden_effect = {
				subtract_from_variable = { NOR_country_preparedness = 1	}
				set_country_flag = NOR_ongoing_countrywide_program
			}
		}

		modifier = {
			production_speed_arms_factory_factor = 0.3
			production_speed_bunker_factor = 0.1
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}
	
	NOR_alt_dem_economic_relief_measures = {
		
		visible = {
			has_completed_focus = NOR_restore_public_trust_in_the_storting
		}

		available = {
			NOT = {
				ROOT = {
					has_country_flag = NOR_ongoing_countrywide_program
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { NOR_country_preparedness > 0 }
		}

		custom_cost_text = decision_cost_alt_dem_preparedness

		days_remove = 60

		complete_effect = {
			hidden_effect = {
				subtract_from_variable = { NOR_country_preparedness = 1	}
				set_country_flag = NOR_ongoing_countrywide_program
			}
		}

		modifier = {
			consumer_goods_factor = 0.2
			political_power_gain = 1
			stability_weekly = 0.01
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			}
 			NOR_reduce_hard_thirties_ns = yes 
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}

	NOR_alt_dem_modernize_armed_forces_decision = {
		
		visible = {
			has_completed_focus = NOR_reform_the_army 
			OR = {
				has_idea = NOR_obsolete_armed_forces_ns_1
				has_idea = NOR_obsolete_armed_forces_ns_2
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = NOR_country_prep_modernize_armed_forces_TT
				check_variable = {
					var = NOR_country_preparedness
					value > 15 
				}
			}
			
		}
		custom_cost_text = decision_cost_modernize_armed_forces_convoy_cp

		custom_cost_trigger = {
			command_power > 29
			has_equipment = {
				convoy > 99
			}
		}

		days_remove = 45

		complete_effect = {
			add_command_power = -25
			add_equipment_to_stockpile = { 
				type = convoy_1
				amount = -100
			}
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = NOR_obsolete_armed_forces_ns_1
				}
				swap_ideas = {
					remove_idea = NOR_obsolete_armed_forces_ns_1
					add_idea = NOR_obsolete_armed_forces_ns_2
				}
			}
			else_if = {
				limit = {
					has_idea = NOR_obsolete_armed_forces_ns_2
				}
				remove_ideas = { NOR_obsolete_armed_forces_ns_2	}
			}
		}
	}
}
NOR_allied_democratic_deploy_prep_decisions_category = {
	NOR_alt_dem_expedite_training = {
		
		visible = {
			always = yes 
		}

		available = {
			NOT = {	has_country_flag = NOR_ongoing_countrywide_program }
		}

		custom_cost_trigger = {
			check_variable = { NOR_country_preparedness > 0 }
		}

		custom_cost_text = decision_cost_alt_dem_preparedness

		days_remove = 45 

		complete_effect = {
			hidden_effect = {
				subtract_from_variable = { NOR_country_preparedness = 1	}
				set_country_flag = NOR_ongoing_countrywide_program
			}
		}

		modifier = {
			training_time_factor = -0.35
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}	

	NOR_alt_dem_prioritize_production = {
		
		visible = {
			always = yes 
		}

		available = {
			NOT = {	has_country_flag = NOR_ongoing_countrywide_program }
		}

		custom_cost_trigger = {
			check_variable = { NOR_country_preparedness > 0 }
		}

		custom_cost_text = decision_cost_alt_dem_preparedness

		days_remove = 45 

		complete_effect = {
			hidden_effect = {
				subtract_from_variable = { NOR_country_preparedness = 1	}
				set_country_flag = NOR_ongoing_countrywide_program
			}
		}

		modifier = {
			production_factory_efficiency_gain_factor = 0.2
			production_factory_max_efficiency_factor = 0.15
			production_lack_of_resource_penalty_factor = -0.2
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}

	NOR_alt_dem_offensive_push = {
		
		visible = {
			always = yes 
		}

		available = {
			NOT = {	has_country_flag = NOR_ongoing_countrywide_program }
		}

		custom_cost_trigger = {
			check_variable = { NOR_country_preparedness > 0 }
		}

		custom_cost_text = decision_cost_alt_dem_preparedness

		days_remove = 45 

		complete_effect = {
			hidden_effect = {
				subtract_from_variable = { NOR_country_preparedness = 1	}
				set_country_flag = NOR_ongoing_countrywide_program
			}
		}

		modifier = {
			army_attack_factor = 0.25
			army_speed_factor = 0.15
			breakthrough_factor = 0.3
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}

	NOR_alt_dem_focus_on_defense = {
		
		visible = {
			always = yes 
		}

		available = {
			NOT = {	has_country_flag = NOR_ongoing_countrywide_program }
		}

		custom_cost_trigger = {
			check_variable = { NOR_country_preparedness > 0 }
		}

		custom_cost_text = decision_cost_alt_dem_preparedness

		days_remove = 45 

		complete_effect = {
			hidden_effect = {
				subtract_from_variable = { NOR_country_preparedness = 1	}
				set_country_flag = NOR_ongoing_countrywide_program
			}
		}

		modifier = {
			army_org_regain = 0.15
			army_core_defence_factor = 0.25
			army_defence_factor = 0.2
		}

		remove_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}

		cancel_effect = {
			hidden_effect = {
				clr_country_flag = NOR_ongoing_countrywide_program
			} 
		}
	}
	NOR_alt_dem_integrate_militias = {
		available = {
			any_country_division = {
				division_has_majority_template = militia
			}
		}

		visible = {
			any_country_division = {
				division_has_majority_template = militia
			}
		}
		custom_cost_trigger = {
			has_equipment = {
				convoy_1 > 49
			}
			has_army_experience > 79
		}

		custom_cost_text = decision_cost_convy_army_xp

		days_remove = 3

		remove_effect = {
			NOR_make_militias_into_regulars = yes 
		}
	}
}


	######              ######  
	######   FASCIST    ######  
	######              ###### 

NOR_fascist_preparation_decisions_category = {

	NOR_prepare_state_fascist = { # Decision to prepare the state
	
		icon = {
			key = GFX_decision_NOR_prepare_state_fasc_0
			trigger = {
				FROM = {
					NOT = {
						has_variable = NOR_state_preparation
					}  
				}
			}
		}		
		icon = {
			key = GFX_decision_NOR_prepare_state_fasc_1
			trigger = {
				FROM ={
					check_variable = { NOR_state_preparation = 1 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_fasc_2
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 2 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_fasc_3
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 3 }
				}
			}
		}

		visible = {
			has_completed_focus = NOR_lurk_in_the_shadows
			has_war = no 
			NOT = { has_global_flag = NOR_quislings_coup_happened }
			OR = {
				ROOT = {
					has_country_flag = NOR_going_fascist
					#NOT = {  has_country_flag = NOR_active_preparation }
				}
				FROM = {
					has_state_flag = NOR_preparing_state
				}
			}
		}

		available = {
			FROM = {
				check_variable = { NOR_state_preparation < 3 } 
			}
		}

		state_target = yes

		targets = {
			state = 110 # Ostlandet - Oslofjord in vanilla
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		target_trigger = {
			FROM = {
				is_core_of = NOR
				NOT = {	state = 914	} # Not Jan Mayen 
				OR = {
					check_variable = { NOR_state_preparation < 3 }
					has_state_flag = NOR_preparing_state
				}
			}
		}

		custom_cost_text = decision_cost_fasc_prepare_convoy_pp

		custom_cost_trigger = {
			has_equipment = {
				convoy > NOR_prep_fasc_cost_convoy_trigger
			}
			has_political_power > NOR_prep_fasc_cost_pp
		}

		days_remove = NOR_prep_fasc_remove_days
	 
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = { 
					type = convoy_1
					amount = NOR_prep_fasc_cost_convoy_remove
					producer = NOR
				}
				add_political_power = NOR_prep_fasc_cost_pp_remove
			}
			FROM = { 
				NOR_start_state_preparation = yes 
			} 
		}

		remove_effect = {
			FROM = { NOR_end_state_preparation = yes }
		}

		cancel_trigger = {
			has_war = yes
		}

		cancel_effect = {
			FROM = { NOR_end_state_preparation = yes }
		}

		ai_will_do = {
			base = 100
			modifier = {
				factor = 0.2
				has_completed_focus = NOR_nasjonal_samling
			}

			modifier = {
				factor = 0
				has_completed_focus = NOR_quislings_coup
			}
		}
	}

	NOR_invite_fascist_to_invade = {
		
		visible = {
			if = {
				limit = {
					var:GLOBAL.platonic_fascist_bully = {
						capital_scope = {
							is_on_continent = europe 
						}
					}		
				}
				var:GLOBAL.platonic_fascist_bully = {
					ROOT = {
						NOT = { has_country_flag = NOR_already_asked_a_fascist@PREV } 
					}
				}
			}
			else = {
				var:platonic_local_dangerous_fascist = {
					ROOT = {
						NOT = { has_country_flag = NOR_already_asked_a_fascist@PREV } 
					}
				}
			}
			has_country_flag = NOR_going_fascist
			has_completed_focus = NOR_nasjonal_samling
			has_war = no
			NOT = { has_government = fascism } 
		}
		
		available = {
			fascism > 0.5
		}

		complete_effect = {
			find_global_platonic_countries = yes
			if = {
				limit = {
					has_variable = GLOBAL.platonic_fascist_bully
					var:GLOBAL.platonic_fascist_bully = {
						capital_scope = {
							is_on_continent = europe 
						}
					}
				}
				var:GLOBAL.platonic_fascist_bully = {
					country_event = {
						id = AAT_norway_fascist.1
						hours = 3 
					}
					hidden_effect = {
						ROOT = {
							set_country_flag = NOR_already_asked_a_fascist@PREV

						}
					}
				}
			}
			else_if = {
				limit = {
					any_other_country = {
						original_tag = GER 
						has_government = fascism 
					}
				}
				random_other_country = {
					limit = {
						original_tag = GER 
						has_government = fascism 
					}
					country_event = {
						id = AAT_norway_fascist.1
						hours = 3 
					}
					hidden_effect = {
						ROOT = {
							set_country_flag = NOR_already_asked_a_fascist@PREV
						}
					}				
				}
			}
			else_if = {
				limit = {
					has_variable = platonic_local_dangerous_fascist
				}
				var:platonic_local_dangerous_fascist = {
					country_event = {
						id = AAT_norway_fascist.1
						hours = 3 
					}
					hidden_effect = {
						ROOT = {
							set_country_flag = NOR_already_asked_a_fascist@PREV
						}
					}				
				}
			}
			else = {
				var:GLOBAL.platonic_fascist_bully = {
					country_event = {
						id = AAT_norway_fascist.1
						hours = 3 
					}
					hidden_effect = {
						ROOT = {
							set_country_flag = NOR_already_asked_a_fascist@PREV

						}
					}					
				}	
			}
		}
	}
}
NOR_fascist_deploy_prep_decisions_category = {

	NOR_deploy_state_preparation_fascist = { # Decision to deploy the preparation of the state 
				
		icon = {
			key = GFX_decision_NOR_deploy_prep_fasc_1
			trigger = {
				FROM ={
					check_variable = { NOR_state_preparation = 1 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_deploy_prep_fasc_2
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 2 }
				} 
			}
		}
		icon = {
			key = GFX_decision_NOR_deploy_prep_fasc_3
			trigger = {
				FROM = {
					check_variable = { NOR_state_preparation = 3 }
				}
			}
		}

		visible = {
			has_war = yes 
			OR = {
				ROOT = {
					has_completed_focus = NOR_lurk_in_the_shadows
					has_country_flag = NOR_going_fascist
					NOT = { has_country_flag = NOR_state_prep_deployment_in_progress }
				}
				AND = {
					ROOT = { has_country_flag = NOR_state_prep_deployment_in_progress }  
					FROM = { has_state_flag = NOR_deploying_prep_in_state } 
				}
			}
		}

		available = {
			FROM = {
				is_capital = no 
				NOT = {
					any_state_division = {
						OWNER = {	
							tag = ROOT 
							is_in_faction_with = ROOT 
						
						}
					}	
				} 	
			} 
		}

		state_target = yes 

		targets = {
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		target_root_trigger = {
			has_war = yes
			OR = {
				ROOT = {
					has_completed_focus = NOR_lurk_in_the_shadows
					has_country_flag = NOR_going_fascist
					NOT = { has_country_flag = NOR_state_prep_deployment_in_progress }
				}
				AND = {
					ROOT = { has_country_flag = NOR_state_prep_deployment_in_progress }
					FROM = { has_state_flag = NOR_deploying_prep_in_state }
				}
			}
		}

		target_trigger = {
			FROM = {
				is_core_of = ROOT 
				NOT = {	state = 914	} # Not Jan Mayen 
				OR = {
					has_variable = NOR_state_preparation
					has_state_flag = NOR_deploying_prep_in_state 
				}
			}
		}

		custom_cost_text = decision_cost_fasc_deploy_convoy_cp

		custom_cost_trigger = {
			has_equipment = {
				convoy > NOR_prep_fasc_cost_convoys
			}
			command_power > NOR_deploy_fasc_cost_cp
		}

		days_remove = 7

		complete_effect = {
			FROM = { start_deploying_prep = yes }
		}

		remove_effect = {
			FROM = { NOR_deploy_prep_fasc = yes } 
		}
	}
}	

	######              ######  
	######   COMMUNIST  ######  
	######              ###### 
	
NOR_communist_preparation_decisions_category = {

	NOR_prepare_state_communist = { # Decision to prepare the state
	
		icon = {
			key = GFX_decision_NOR_prepare_state_comm_0
			trigger = {
				has_country_flag = NOR_going_stalinist
				FROM = {
					NOT = {	has_variable = NOR_state_preparation }  
				}
			}
		}		
		icon = {
			key = GFX_decision_NOR_prepare_state_comm_1
			trigger = {
				has_country_flag = NOR_going_stalinist
				FROM ={
					check_variable = { NOR_state_preparation = 1 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_comm_2
			trigger = {
				has_country_flag = NOR_going_stalinist
				FROM = {
					check_variable = { NOR_state_preparation = 2 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_comm_3
			trigger = {
				has_country_flag = NOR_going_stalinist
				FROM = {
					check_variable = { NOR_state_preparation = 3 }
				}
			}
		}

		icon = {
			key = GFX_decision_NOR_prepare_state_trot_0
			trigger = {
				has_country_flag = NOR_going_against_stalin
				FROM = {
					NOT = {	has_variable = NOR_state_preparation }  
				}
			}
		}		
		icon = {
			key = GFX_decision_NOR_prepare_state_trot_1
			trigger = {
				has_country_flag = NOR_going_against_stalin
				FROM ={
					check_variable = { NOR_state_preparation = 1 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_trot_2
			trigger = {
				has_country_flag = NOR_going_against_stalin
				FROM = {
					check_variable = { NOR_state_preparation = 2 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_trot_3
			trigger = {
				has_country_flag = NOR_going_against_stalin
				FROM = {
					check_variable = { NOR_state_preparation = 3 }
				}
			}
		}

		visible = {  
			has_war = no 
			has_completed_focus = NOR_the_seeds_of_the_revolution
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = NOR_communist_prep_max_preparedness_trigger_TT
				check_variable = { NOR_country_preparedness < NOR_comm_prep_max_preparedness }
			}
			FROM = {
				OR = {
					infrastructure > 2
					non_damaged_building_level = {
						building = arms_factory
						level > 1
					}
					non_damaged_building_level = {
						building = industrial_complex
						level > 1 
					}
					non_damaged_building_level = {
						building = dockyard 
						level > 1 
					}
				}
				if = {
					limit = {
						check_variable = { NOR_state_preparation = 2 }
					}
					ROOT = { has_completed_focus = NOR_organize_partisan_militias }
				}
			}
		}

		ai_will_do = {
			base = 1
			modifier = {
				factor = 200
	 			check_variable = { NOR_country_preparedness < 11 }
			}	
			modifier = {
				factor = 0.2
	 			check_variable = { NOR_country_preparedness > 11 }
			}
			modifier = {
				factor = 0
	 			has_completed_focus = NOR_workers_and_farmers_rise
			}
		}

		on_map_mode = map_and_decisions_view

		state_target = yes

		targets = {	
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}

		target_trigger = {
			FROM = {
				is_core_of = NOR
				NOT = {	state = 914	} # Not Jan Mayen 
				NOT = { state = 110 } # Not Oslofjord 
				OR = {
					check_variable = { NOR_state_preparation < 3 }
					has_state_flag = NOR_preparing_state
				}
			}
		}

		cost = 50   
		
		days_remove = 30 
	 
		complete_effect = {
			FROM = { 
				NOR_start_state_preparation = yes 
			} 
		}

		remove_effect = {
			FROM = { NOR_end_state_preparation = yes }
		}
	}

	NOR_communist_propaganda_campaign = {
		icon = GFX_decision_eng_propaganda_campaigns

		visible = {
			has_completed_focus = NOR_the_voice_of_the_people
		}

		cost = 60 

		days_remove = 45

		remove_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
			add_stability = -0.05
		}
	}
}

######              ######  
######  MONARCHIST  ######  
######              ###### 
	
NOR_monarchist_preparation_decisions_category = {
	NOR_prepare_state_monarchist = { # Decision to prepare the state
		icon = {
			key = GFX_decision_NOR_prepare_state_mon_0
			trigger = {
				has_country_flag = NOR_going_monarchist
				FROM = {
					NOT = {	has_variable = NOR_state_preparation }  
				}
			}
		}		
		icon = {
			key = GFX_decision_NOR_prepare_state_mon_1
			trigger = {
				has_country_flag = NOR_going_monarchist
				FROM ={
					check_variable = { NOR_state_preparation = 1 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_mon_2
			trigger = {
				has_country_flag = NOR_going_monarchist
				FROM = {
					check_variable = { NOR_state_preparation = 2 }
				}
			}
		}
		icon = {
			key = GFX_decision_NOR_prepare_state_mon_3
			trigger = {
				has_country_flag = NOR_going_monarchist
				FROM = {
					check_variable = { NOR_state_preparation = 3 }
				}
			}
		}

		visible = {  
			has_war = no 
			has_completed_focus = NOR_the_chamberlains_overture
			NOT = { has_completed_focus = NOR_the_kingdom_of_norway }
		}

		available = {
			NOT = { has_country_flag = NOR_mon_stabilizing_effects }
		}

		on_map_mode = map_and_decisions_view

		state_target = yes

		targets = {	
			state = 110 # Ostlandet - Oslofjord in vanilla
			state = 1032 # Telemark - 921 in vanilla
			state = 967 # Sorlandet - 922 and Agder in vanilla
			state = 142 # Vestlandet
			state = 1031 # Opplandene - 920 in vanilla
			state = 143 # Trondelag
			state = 1033 # Helgeland - 923 in vanilla
			state = 144 # Nordland 
			state = 1034 # Troms - 924 in vanilla
			state = 1035 # Finnmark 925 - in vanilla
		}
		
		target_trigger = {
			FROM = {
				is_core_of = NOR
				NOT = {	state = 914	} # Not Jan Mayen 
				OR = {
					check_variable = { NOR_state_preparation < 3 }
					has_state_flag = NOR_preparing_state
				}
			}
		}

		custom_cost_text = decision_cost_MP_300_PP_15
		
		custom_cost_trigger = {
			ROOT = {
				has_manpower > 299
				has_political_power > 14
			}
		}

		days_remove = 30 
	 
		complete_effect = {
			hidden_effect = {
				add_manpower = -300 
				add_political_power = -15
			}
			FROM = { 
				NOR_start_state_preparation = yes 
			} 
		}

		remove_effect = {
			FROM = { NOR_end_state_preparation = yes }
		}

		ai_will_do = {
			base = 1
			modifier = {
				check_variable = { NOR_country_preparedness < 6 }
				factor = 300
			}

			modifier = {
				factor = 0
				OR = {
					has_manpower < 10000
					check_variable = { NOR_country_preparedness > 12 }
				}
			}
		}
	}

	NOR_prop_up_the_economy = {
		icon = GFX_decision_generic_consumer_goods
			
		visible = {
			has_completed_focus = NOR_assure_the_population
			OR = {
				has_idea = NOR_the_hard_thirties_ns 
				has_idea = NOR_the_hard_thirties_ns_2 
				has_idea = NOR_the_hard_thirties_ns_3 
			}  		}

		available = {
			NOT = {
				has_country_flag = NOR_active_preparation
				has_country_flag = NOR_mon_stabilizing_effects
			}
		}

		complete_effect = {
			set_country_flag = NOR_mon_stabilizing_effects
		}

		modifier = {
			consumer_goods_factor = 0.2
			stability_weekly = 0.005
		}

		days_remove = 35

		cost = 40

		remove_effect =	{ 
			clr_country_flag = NOR_mon_stabilizing_effects
			NOR_reduce_hard_thirties_ns = yes 
		}
	}

	NOR_make_assurances_to_the_people = {
		icon = GFX_decision_generic_political_address
		visible = {
			has_completed_focus = NOR_assure_the_population
			NOT = { has_completed_focus = NOR_the_kingdom_of_norway }		
		}
		available = {
			NOT = {
				has_country_flag = NOR_active_preparation
				has_country_flag = NOR_mon_stabilizing_effects
			}
		}

		cost = 50

		complete_effect = {
			set_country_flag = NOR_mon_stabilizing_effects
		}

		modifier = {
			stability_weekly = 0.015
		}

		days_remove = 70

		remove_effect =	{ 
			clr_country_flag = NOR_mon_stabilizing_effects
		}
	}

	NOR_promote_the_armed_defense_of_the_country = {
		icon = GFX_decision_generic_protection
		visible = {
			has_completed_focus = NOR_assure_the_population
			NOT = { has_completed_focus = NOR_the_kingdom_of_norway }
		}
		available = {
			NOT = {
				has_country_flag = NOR_active_preparation
				has_country_flag = NOR_mon_stabilizing_effects
			}
		}

		cost = 50

		complete_effect = {
			set_country_flag = NOR_mon_stabilizing_effects
		}

		modifier = {
			war_support_weekly = 0.01
		}

		days_remove = 30

		remove_effect =	{ 
			clr_country_flag = NOR_mon_stabilizing_effects
		}
	}
}

economy_decisions = {
	refit_to_destroyer_nor = {
		icon = GFX_decision_generic_merge_plant_ship
		fire_only_once = no

		custom_cost_text = decision_cost_4_convoy

		custom_cost_trigger = {
			NOR_has_4_convoys = yes
		}

		visible = {
			has_country_flag = refit_convoy_ships_flag_nor
		}

		available = {	
			NOT = { 
				has_country_flag = nor_building_ship 
			}
			has_dlc = "Man the Guns"
			has_tech = early_ship_hull_light
	  		if = {
	  			limit = {
	  			}
	  		}
	  		if = {
	  			limit = {
					NOT = { has_dlc = "Man the Guns" }
					has_tech = early_destroyer
	  			}
	  		}
		}
		days_remove = 14

		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = { 
					type = convoy_1
					amount = -4
				}
			}
			set_country_flag = {
				flag = nor_building_ship
				days = 14
				value = 1
			}
		}
		remove_effect = {
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = {
						NOT = {	has_country_flag = refit_to_destroyer_flag_nor } 
					}			
					set_country_flag = refit_to_destroyer_flag_nor
	
					create_equipment_variant = {	
						name = "Refitted Destroyer Class" 		
						type = ship_hull_light_1
						name_group = "NOR_DD_HISTORICAL" #Note: Doesn't matter if ROOT is not DEN, the effect will grab the appropriate country-specific name list anyways
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = empty
							fixed_ship_fire_control_system_slot = empty
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_1
							fixed_ship_torpedo_slot = empty
							mid_1_custom_slot = empty
							rear_1_custom_slot = empty
						}
					obsolete = yes
					}
				}
				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}
			}
			#NO MTG
			else_if = {
				limit = {
					NOT = {
						has_dlc = "Man the Guns"
					}
				}
				if = {
					limit = {
						NOT = {	has_country_flag = refit_to_destroyer_flag }
					}			
					set_country_flag = refit_to_destroyer_flag

					create_equipment_variant = {
						name = "Refitted Destroyer Class"
						type = destroyer_1
						upgrades = {
							ship_torpedo_upgrade = 0
							destroyer_engine_upgrade = 0
							ship_ASW_upgrade = 0
							ship_anti_air_upgrade = 0
						}
						obsolete = yes
					}
				}
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}		
			}
		}
	}

		refit_to_destroyer_mass_nor = {
		icon = GFX_decision_generic_merge_plant_ship
		fire_only_once = no

		custom_cost_text = decision_cost_40_convoy

		custom_cost_trigger = {
			NOR_has_40_convoys = yes
		}

		visible = {
			has_country_flag = refit_convoy_ships_flag_nor
		}
			
		available = {	
			NOT = { 
				has_country_flag = nor_building_ship 
			}
	  		if = {
	  			limit = {
					has_dlc = "Man the Guns"
					has_tech = early_ship_hull_light
	  			}
	  		}
	  		if = {
	  			limit = {
					NOT = { has_dlc = "Man the Guns" }
					has_tech = early_destroyer
	  			}
	  		}
		}
		days_remove = 105 #Less than the single conversions to encourage players to use it, and not have to min/max

		complete_effect = {
			add_equipment_to_stockpile = { 
				type = convoy_1
				amount = -40
			}
			set_country_flag = {
				flag = nor_building_ship
				days = 105
				value = 1
			}
		}
		remove_effect = {
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = {
						NOT = {	has_country_flag = refit_to_destroyer_flag_nor } 
					}			
					set_country_flag = refit_to_destroyer_flag_nor
	
					create_equipment_variant = {	
						name = "Refitted Destroyer Class" 		
						type = ship_hull_light_1
						name_group = "NOR_DD_HISTORICAL" #Note: Doesn't matter if ROOT is not DEN, the effect will grab the appropriate country-specific name list anyways
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = empty
							fixed_ship_fire_control_system_slot = empty
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = light_ship_engine_1
							fixed_ship_torpedo_slot = empty
							mid_1_custom_slot = empty
							rear_1_custom_slot = empty
						}
						obsolete = yes
					}
				}
				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}

				create_ship = {
					type = ship_hull_light_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer" 
				}
			}
			#NO MTG
			else_if = {
				limit = {
					NOT = {
						has_dlc = "Man the Guns"
					}
				}
				if = {
					limit = {
						NOT = {	has_country_flag = refit_to_destroyer_flag }
					}			
					set_country_flag = refit_to_destroyer_flag

					create_equipment_variant = {
						name = "Refitted Destroyer Class"
						type = destroyer_1
						upgrades = {
							ship_torpedo_upgrade = 0
							destroyer_engine_upgrade = 0
							ship_ASW_upgrade = 0
							ship_anti_air_upgrade = 0
						}
						obsolete = yes
					}
				}
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}		
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}	
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}					
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}		
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}	
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}	
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}		
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}	
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}	
				create_ship = {
					type = destroyer_1
					equipment_variant = "Refitted Destroyer Class"
					creator = ROOT
					name = "Refitted Destroyer"
				}	
			}
		}
	}
}
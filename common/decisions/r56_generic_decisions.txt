game_rules_reminder_category = {
	game_rules_reminder = {
		icon = generic_political_discourse

		available = {
			hidden_trigger = {
				NOT = { has_country_flag = r56_cflg_multiplayer }
			}
		}
		activation = {
			has_country_flag = r56_cflg_multiplayer #Only shows up when clicking 'Single Player' at start.
		}
		days_mission_timeout = 21
		fire_only_once = yes
		is_good = yes
	}
}

naval_decision_category = {
	dockyard_xp = {
		icon = generic_naval
		available = {
			num_of_naval_factories > 0
		}
		visible = {
			has_country_flag = started_out_as_landlocked
		}
		ai_will_do = {
			base = 100
		}

		cost = 25

		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision dockyard_xp"
			set_temp_variable = {
				xp_dockyards = num_of_naval_factories
			}
			multiply_temp_variable = {
				xp_dockyards = 5
			}
			add_to_temp_variable = {
				xp_dockyards = 10
			}
			navy_experience = var:xp_dockyards
			set_country_flag = took_dockyard_xp
		}
	}

	get_generic_DD_template = {
		icon = generic_naval
		allowed = {
			has_dlc = "Man the Guns"
		}
		available = {
			has_tech = basic_battery
			has_tech = electronic_mechanical_engineering
			has_tech = early_ship_hull_light
			has_tech = basic_torpedo
			has_tech = basic_depth_charges
			num_of_naval_factories > 1
		}
		visible = {
			has_country_flag = took_dockyard_xp
			NOT = { has_country_flag = has_generic_DD_template }
		}
		ai_will_do = {
			base = 100
		}

		custom_cost_trigger = {
			command_power > 14
			has_political_power > 14
		}
		custom_cost_text = decision_cost_CP_15_pp_15

		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes

		days_remove = 60

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision get_generic_DD_template"
			hidden_effect = {
				add_command_power = -15
				add_political_power = -15
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove get_generic_DD_template"
			custom_effect_tooltip = get_generic_DD_template
			generic_DD_template = yes
		}
	}
	get_generic_CL_template = {
		icon = generic_naval
		allowed = {
			has_dlc = "Man the Guns"
		}
		available = {
			has_tech = basic_battery
			has_tech = electronic_mechanical_engineering
			has_tech = early_ship_hull_cruiser
			num_of_naval_factories > 2
		}
		visible = {
			has_country_flag = took_dockyard_xp
			NOT = { has_country_flag = has_generic_CL_template }
		}
		ai_will_do = {
			base = 100
		}

		custom_cost_trigger = {
			command_power > 24
			has_political_power > 24
		}
		custom_cost_text = decision_cost_CP_25_pp_25

		modifier = {
			civilian_factory_use = 3
		}

		fire_only_once = yes

		days_remove = 60

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision get_generic_CL_template"
			hidden_effect = {
				add_command_power = -25
				add_political_power = -25
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove get_generic_CL_template"
			custom_effect_tooltip = get_generic_CL_template
			generic_CL_template = yes
		}
	}
	get_generic_BB_template = {
		icon = generic_naval
		allowed = {
			has_dlc = "Man the Guns"
		}
		available = {
			has_tech = basic_battery
			has_tech = electronic_mechanical_engineering
			has_tech = early_ship_hull_heavy
			#has_tech = basic_secondary_battery
			num_of_naval_factories > 4
		}
		visible = {
			has_country_flag = took_dockyard_xp
			NOT = { has_country_flag = has_generic_BB_template }
		}
		ai_will_do = {
			base = 100
		}
		fire_only_once = yes

		custom_cost_trigger = {
			command_power > 34
			has_political_power > 34
		}
		custom_cost_text = decision_cost_CP_35_pp_35

		modifier = {
			civilian_factory_use = 4
		}

		days_remove = 80

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision get_generic_BB_template"
			hidden_effect = {
				add_command_power = -35
				add_political_power = -35
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove get_generic_BB_template"
			custom_effect_tooltip = get_generic_CL_template
			generic_BB_template = yes
		}
	}
	get_generic_CA_template = {
		icon = generic_naval
		allowed = {
			has_dlc = "Man the Guns"
		}
		available = {
			has_tech = basic_battery
			has_tech = gw_artillery
			has_tech = electronic_mechanical_engineering
			has_tech = early_ship_hull_cruiser
			#has_tech = basic_secondary_battery
			has_tech = basic_torpedo
			num_of_naval_factories > 3
		}
		visible = {
			has_country_flag = took_dockyard_xp
			NOT = { has_country_flag = has_generic_CA_template }
		}
		ai_will_do = {
			base = 100
		}

		custom_cost_trigger = {
			command_power > 24
			has_political_power > 24
		}
		custom_cost_text = decision_cost_CP_25_pp_25

		modifier = {
			civilian_factory_use = 3
		}

		fire_only_once = yes

		days_remove = 60

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision get_generic_CA_template"
			hidden_effect = {
				add_command_power = -25
				add_political_power = -25
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove get_generic_CA_template"
			custom_effect_tooltip = get_generic_CA_template
			generic_CA_template = yes
		}
	}
	get_generic_SS_template = {
		icon = generic_naval
		allowed = {
			has_dlc = "Man the Guns"
		}
		available = {
			has_tech = early_ship_hull_submarine
		}
		visible = {
			has_country_flag = took_dockyard_xp
			NOT = { has_country_flag = has_generic_SS_template }
		}
		ai_will_do = {
			base = 100
		}

		custom_cost_trigger = {
			command_power > 14
			has_political_power > 14
		}
		custom_cost_text = decision_cost_CP_15_pp_15

		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes

		days_remove = 60

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision get_generic_SS_template"
			hidden_effect = {
				add_command_power = -15
				add_political_power = -15
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove get_generic_SS_template"
			custom_effect_tooltip = get_generic_SS_template
			generic_SS_template = yes
		}
	}

}

the_return_of_the_old_guard_category = {

	hold_the_neutrality_national_referendum = {
		icon = generic_political_discourse

		available = {
			neutrality > 0.6
		}

		visible = {			
			NOT = { has_government = neutrality }
			neutrality > 0.6
			has_country_flag = open_up_political_discourse_neutrality
			OR = {
				has_idea_with_trait = staunch_monarchist
				has_idea_with_trait = staunch_traditionalist
			}
			#check_has_focus_tree_to_switch_to_neutrality = yes
			NOT = {
				original_tag = GER		#to prevent the bug from happening with generic leader
			}
		}

		fire_only_once = yes

		cost = 100

		complete_effect = {
			set_politics = {
				ruling_party = neutrality
			}
			add_stability = -0.05
		}

		ai_will_do = {
			factor = 10
			modifier = {
				neutrality > 0.75
				factor = 20
			}
		}
	}
	open_up_political_discourse_neutrality = {

		icon = generic_political_discourse

		available = {
			fascism < 0.9
			democratic < 0.9
			communism < 0.9
			neutrality < 0.9
		}

		visible = {
			OR = {
				has_idea_with_trait = staunch_monarchist
				has_idea_with_trait = staunch_traditionalist
			}
			NOT = { has_country_flag = open_up_political_discourse_neutrality }
			NOT = { has_government = neutrality }
		}
		
		fire_only_once = yes
		
		cost = 75
		
		complete_effect = {
			set_country_flag = open_up_political_discourse_neutrality
		}
		
		ai_will_do = {
			factor = 3
		}
	}
	
	discredit_government_neutrality = {

		icon = generic_speech

		available = {
			fascism < 0.8
			democratic < 0.8
			communism < 0.8
			neutrality < 0.8
			OR = {
				has_idea_with_trait = staunch_monarchist
				has_idea_with_trait = staunch_traditionalist
			}
		}

		visible = {
			has_country_flag = open_up_political_discourse_neutrality
			OR = {
				has_idea_with_trait = staunch_monarchist
				has_idea_with_trait = staunch_traditionalist
			}
			NOT = { has_government = neutrality }
		}
		
		remove_trigger = {
			has_government = neutrality
		}
		
		fire_only_once = yes
		
		cost = 70
		days_remove = 30
		remove_effect = {
			add_stability = -0.010
			if = {
				limit = {
					has_government = democratic
				}
				add_popularity = {
					ideology = democratic
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = communism
				}
				add_popularity = {
					ideology = communism
					popularity = -0.1
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				add_popularity = {
					ideology = fascism
					popularity = -0.1
				}
			}
		}
		
		
		ai_will_do = {
			factor = 2
		}
	}	
}

crisis = {
	r56_alone_faction_leader = {
		icon = generic_civil_support

		allowed = {

		}

		#Fail trigger
		available = {
			OR = {
				num_faction_members > 1
				is_faction_leader = no
			}
		}

		days_mission_timeout = 365

		fire_only_once = yes

		is_good = no

		activation = {
			is_faction_leader = yes
			num_faction_members < 2
			NOT = {
				OR = {
					AND = {
						original_tag = MEX
						OR = {
							has_completed_focus = MEX_focus_bolivarian_alliance
							has_completed_focus = MEX_focus_hispanic_alliance
						}
					}
					AND = {
						original_tag = GER
						OR = {
							has_government = fascism
							has_government = neutrality
						}

					}
					AND = {
						original_tag = JAP
						has_government = fascism
					}
					AND = {
						original_tag = SOV
						#has_government = communism
					}
					AND = {
						original_tag = ENG
						has_government = democratic
					}
					AND = {
						original_tag = SWE
						has_government = communism
						has_completed_focus = SWE_nordic_collaboration
					}
				}
			}
		}

		#Fail
		timeout_effect = {
			dismantle_faction = yes
			hidden_effect = {
				news_event = { id = r56i.event.15 }
			}
		}

		#Success
		complete_effect = {
			add_stability = 0.02
		}
	}
}

political_actions = {
	#At large fighting UPA decisions
	r56_defeat_the_upa_in_199 = {

		name = SOV_defeat_the_upa_in_199

		icon = generic_police_action

		on_map_mode = map_and_decisions_view

		highlight_states = {
			highlight_state_targets = {
				state = 199
			} 
		}

		priority = 100

		available = {
			ROOT = {
				has_tech = tech_military_police
				hidden_trigger = {
					NOT = {
						has_country_flag = r56_UPA_decision_inprogress
					}
					NOT = {
						original_tag = SOV
					}
				}		
			}
			199 = {
				is_fully_controlled_by = ROOT
				OR = {
					is_core_of = UKR
					is_core_of = RUT
				}
				OR = {
					compliance > 25
					is_core_of = ROOT
				}
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}			
			}			
		}

		allowed = {
			NOT = {
				original_tag = SOV
			}
		}

		cost = 25
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}
		
		fire_only_once = yes
		
		days_remove = 70

		ai_will_do = {
			factor = 10
		}

		visible = {
			ROOT = {
				NOT = {
					original_tag = SOV
				}
			}
			UKR = {
				OR = {
					exists = no
					is_puppet_of = ROOT
				}
			}
			199 = { #if the main Ukrainian lands did not lose cores, only allow integration of Bessarabia to show up when its controlled
				is_core_of = UKR
				is_controlled_by = ROOT
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}		
			}
		}

		modifier = {
			resistance_damage_to_garrison = 0.05
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = r56_UPA_decision_inprogress
			}
		}
		
		remove_effect = {	
			hidden_effect = {
				add_command_power = -25
				clr_country_flag = r56_UPA_decision_inprogress
			}
			199 = {
				remove_dynamic_modifier = { modifier = r56_upa_state_modifier } 
			}					
		}		
	}

	r56_defeat_the_upa_in_91 = {

		name = SOV_defeat_the_upa_in_91

		icon = generic_police_action

		on_map_mode = map_and_decisions_view

		highlight_states = {
			highlight_state_targets = {
				state = 91
			} 
		}

		priority = 100

		available = {
			ROOT = {
				has_tech = tech_military_police
				hidden_trigger = {
					NOT = {
						has_country_flag = r56_UPA_decision_inprogress
					}
				}		
			}
			91 = {
				is_fully_controlled_by = ROOT
				is_core_of = RUT
				OR = {
					compliance > 25
					is_core_of = ROOT
				}
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}			
			}			
		}

		allowed = {
			NOT = {
				original_tag = SOV
			}
		}

		cost = 25
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}
		
		fire_only_once = yes
		
		days_remove = 70

		ai_will_do = {
			factor = 10
			modifier = { #make it a soviet problem 
				original_tag = POL
				date < 1940.1.1 
				factor = 0 
			}
		}

		visible = {
			ROOT = {
				NOT = {
					original_tag = SOV
				}
			}
			91 = { 
				is_core_of = RUT
				is_controlled_by = ROOT
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}		
			}
		}

		modifier = {
			resistance_damage_to_garrison = 0.05
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = r56_UPA_decision_inprogress
			}
		}

		
		remove_effect = {	
			hidden_effect = {
				add_command_power = -25
				hidden_effect = {
					clr_country_flag = r56_UPA_decision_inprogress
				}
			}
			91 = {
				remove_dynamic_modifier = { modifier = r56_upa_state_modifier } 
			}					
		}		
	}

	r56_defeat_the_upa_in_89 = {

		icon = generic_police_action

		name = SOV_defeat_the_upa_in_89

		
		priority = 100

		on_map_mode = map_and_decisions_view

		highlight_states = {
			highlight_state_targets = {
				state = 89
			} 
		}

		available = {
			ROOT = {
				has_tech = tech_military_police
				hidden_trigger = {
					NOT = {
						has_country_flag = r56_UPA_decision_inprogress
					}
				}	
			}
			89 = {
				is_fully_controlled_by = ROOT
				is_core_of = RUT
				OR = {
					compliance > 25
					is_core_of = ROOT
				}
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}			
			}			
		}

		allowed = {
			NOT = {
				original_tag = SOV
			}
		}

		cost = 25
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}
		
		fire_only_once = yes
		
		days_remove = 70

		ai_will_do = {
			factor = 10
			modifier = { #make it a soviet problem 
				original_tag = POL
				date < 1940.1.1 
				factor = 0 
			}
		}

		visible = {
			ROOT = {
				NOT = {
					original_tag = SOV
				}
			}
			89 = {
				is_core_of = RUT
				is_controlled_by = ROOT
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}		
			}
		}

		modifier = {
			resistance_damage_to_garrison = 0.05
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = r56_UPA_decision_inprogress
			}
		}
		
		remove_effect = {	
			hidden_effect = {
				add_command_power = -25
				clr_country_flag = r56_UPA_decision_inprogress
			}
			89 = {
				remove_dynamic_modifier = { modifier = r56_upa_state_modifier } 
			}					
		}		
	}

	r56_defeat_the_upa_in_80 = {

		icon = generic_police_action

		on_map_mode = map_and_decisions_view

		name = SOV_defeat_the_upa_in_80

		highlight_states = {
			highlight_state_targets = {
				state = 80
			} 
		}

		priority = 100

		available = {
			ROOT = {
				has_tech = tech_military_police
				hidden_trigger = {
					NOT = {
						has_country_flag = r56_UPA_decision_inprogress
					}
					NOT = {
						original_tag = SOV
					}
				}		
			}
			80 = {
				is_fully_controlled_by = ROOT
				is_core_of = RUT
				OR = {
					compliance > 25
					is_core_of = ROOT
				}
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}			
			}			
		}

		allowed = {
			NOT = {
				original_tag = SOV
			}
		}

		cost = 25
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}
		
		fire_only_once = yes
		
		days_remove = 70

		ai_will_do = {
			factor = 10
		}

		visible = {
			ROOT = {
				NOT = {
					original_tag = SOV
				}
			}
			80 = { 
				is_core_of = RUT
				is_controlled_by = ROOT
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}		
			}
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = r56_UPA_decision_inprogress
			}
		}

		modifier = {
			resistance_damage_to_garrison = 0.05
		}
		
		remove_effect = {	
			hidden_effect = {
				add_command_power = -25
				clr_country_flag = r56_UPA_decision_inprogress
			}
			80 = {
				remove_dynamic_modifier = { modifier = r56_upa_state_modifier } 
			}					
		}		
	}
	
	r56_defeat_the_upa_in_73 = {

		icon = generic_police_action

		on_map_mode = map_and_decisions_view

		name = SOV_defeat_the_upa_in_73

		highlight_states = {
			highlight_state_targets = {
				state = 73
			} 
		}

		priority = 100

		available = {
			ROOT = {
				has_tech = tech_military_police
				hidden_trigger = {
					NOT = {
						has_country_flag = r56_UPA_decision_inprogress
					}
					NOT = {
						original_tag = SOV
					}
				}		
			}
			73 = {
				is_fully_controlled_by = ROOT
				is_core_of = RUT
				OR = {
					compliance > 25
					is_core_of = ROOT
				}
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}			
			}			
		}

		allowed = {
			NOT = {
				original_tag = SOV
			}
		}

		cost = 25
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}
		
		fire_only_once = yes
		
		days_remove = 70

		ai_will_do = {
			factor = 10
		}

		visible = {
			ROOT = {
				NOT = {
					original_tag = SOV
				}
			}
			73 = { 
				is_core_of = RUT
				is_controlled_by = ROOT
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}		
			}
		}

		modifier = {
			resistance_damage_to_garrison = 0.05
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = r56_UPA_decision_inprogress
			}
		}
		
		remove_effect = {	
			hidden_effect = {
				add_command_power = -25
				clr_country_flag = r56_UPA_decision_inprogress
			}
			73 = {
				remove_dynamic_modifier = { modifier = r56_upa_state_modifier } 
			}					
		}		
	}
	
	r56_defeat_the_upa_in_996 = {

		icon = generic_police_action

		on_map_mode = map_and_decisions_view

		name = SOV_defeat_the_upa_in_73

		highlight_states = {
			highlight_state_targets = {
				state = 996
			} 
		}

		priority = 100

		available = {
			ROOT = {
				has_tech = tech_military_police
				hidden_trigger = {
					NOT = {
						has_country_flag = r56_UPA_decision_inprogress
					}
					NOT = {
						original_tag = SOV
					}
				}		
			}
			996 = {
				is_fully_controlled_by = ROOT
				is_core_of = RUT
				OR = {
					compliance > 25
					is_core_of = ROOT
				}
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}			
			}			
		}

		allowed = {
			NOT = {
				original_tag = SOV
			}
		}

		cost = 25
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}
		
		fire_only_once = yes
		
		days_remove = 70

		ai_will_do = {
			factor = 10
		}

		visible = {
			ROOT = {
				NOT = {
					original_tag = SOV
				}
			}
			996 = { 
				is_core_of = RUT
				is_controlled_by = ROOT
				has_dynamic_modifier = {
					modifier = r56_upa_state_modifier
				}		
			}
		}

		modifier = {
			resistance_damage_to_garrison = 0.05
		}

		complete_effect = {
			hidden_effect = {
				set_country_flag = r56_UPA_decision_inprogress
			}
		}
		
		remove_effect = {	
			hidden_effect = {
				add_command_power = -25
				clr_country_flag = r56_UPA_decision_inprogress
			}
			996 = {
				remove_dynamic_modifier = { modifier = r56_upa_state_modifier } 
			}					
		}		
	}
	
	r56_declare_independence = {
		icon = eng_trade_unions_demand

		allowed = {
			tag = CAN
		}

		days_re_enable = 120
		fire_only_once = yes
		available = {
			compare_autonomy_progress_ratio > 0.5
			surrender_progress < 0.3
		}
		visible = {
			#is_ai = yes
			NOT = {
				has_country_flag = has_declared_independence
			}
			#high autonomy state
			is_subject = yes
			is_puppet = no
		}
		cost = 25
		complete_effect = {
			hidden_effect = {
				news_event = { id = r56i.event.13 }
				set_country_flag = has_declared_independence
			}
			OVERLORD = {
				end_puppet = ROOT
			}
			every_country = {
				limit = {
					is_in_faction_with = ROOT
				}
				add_opinion_modifier = {
					modifier = faction_traitor
					target = ROOT
					days = 730
				}
				add_opinion_modifier = {
					modifier = faction_traitor_trade
					target = ROOT
					days = 730
				}
			}
			leave_faction = yes
			drop_cosmetic_tag = yes

			every_country = {
				limit ={
					has_war_with = ROOT
					OR = {
						AND = {
							is_in_faction = no
							has_government = ROOT
						}
						AND = {
							is_faction_leader = yes
							has_government = ROOT
						}
						AND = {
							is_in_faction = yes
							any_country = {
								is_faction_leader = yes
								is_in_faction_with = PREV
								has_government = ROOT
							}
						}
					}
				}
				white_peace = ROOT
			}
		}
        ai_will_do = {
			factor = 5000
		}
	}

	r56_allow_militia_formation = {
		icon = ger_military_buildup

		allowed = {
			always = yes
		}

		visible = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
					original_tag = SWI
				}
				has_global_flag = SWI_R56_focus_tree
			}
		}

		fire_only_once = yes

		available = {
			hidden_trigger = {
				NOT = {
					has_tech = r56_militia_tech
				}
			}
			has_war_support > 0.49
			if = {
				limit = {
					NOT = {
						has_government = democratic
					}
				}
				OR = {
					has_defensive_war = yes
					surrender_progress > 0.25
					has_tech = r56_milita_formation
				}
			}
			else = {
				OR = {
					surrender_progress > 0.35
					has_tech = r56_milita_formation 
				}
			}
			command_power > 24
			has_political_power > 24
		}

		visible = {
			has_war_support > 0.15
			NOT = {
				has_tech = r56_militia_tech
			}
		}

		cost = 25
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}

		days_remove = 25

		remove_effect = {
			hidden_effect = {
				add_command_power = -25
			}
			#order of effects matter, don't change - SpicyAlfredo
			custom_effect_tooltip = r56_militia_tt
			hidden_effect = {
				set_technology = {
					r56_militia_tech = 1
				}
			}
			If = {
				limit = {
					NOT = {
						has_country_flag = r56_militia_formation_flag
					}
				}
				hidden_effect = {
					load_oob = "r56_unlock_militia"
				}
				custom_effect_tooltip = UNLOCK_DIVISION_TEMPLATE
			}
			set_country_flag = r56_militia_formation_flag
		}
	}

	r56_deploy_heavy_aa_capital = {
		icon = ger_military_buildup

		allowed = {
			always = yes
		}

		available = {
			any_owned_state = {
				is_capital = yes
				is_fully_controlled_by = ROOT
				free_building_slots = {
					building = anti_air_building
					size > 3
				}
			}
			ROOT = {
				OR = {
					has_war = yes
					threat > 0.5
					any_neighbor_country = {
						OR = {
							has_added_tension_amount > 4
						}
						is_justifying_wargoal_against = ROOT
						has_wargoal_against = ROOT
					}
				}
				OR = {
					has_equipment = {
						anti_air_equipment_2 > 409
					}
					has_equipment = {
						anti_air_equipment_3 > 349
					}
				}
			}
			command_power > 24
			has_political_power > 24
		}

		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}

		visible = {
			has_tech = interwar_antiair
		}

		cost = 25 #change to command power
		days_remove = 50

		remove_effect = {
			capital_scope = {
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}
		complete_effect = {
			hidden_effect = {
				add_political_power = -25
			}
			if = {
				limit = {
					has_equipment = {
					    anti_air_equipment_3 > 349
					}
				}
				add_equipment_to_stockpile = {
				    type = anti_air_equipment_3
				    amount = -410
				}
			}
			else_if = {
				limit = {
					has_equipment = {
					    anti_air_equipment_2 > 409
					}
				}
				add_equipment_to_stockpile = {
				    type = anti_air_equipment_2
				    amount = -410
				}
			}
		}
	}
	#removing now useless advisors as government is secured should make the AI slightly more efficient
	r56_dismiss_communist_revolutionary = { #
		icon = political_actions

		allowed = {
			always = yes
		}


		available = {
			has_idea_with_trait = communist_revolutionary
			has_government = communism
			communism > 0.99
		}

		visible = {
			is_ai = yes
		}

		cost = 10

		days_remove = 5

		remove_effect = {
			remove_ideas_with_trait = communist_revolutionary
		}
		ai_will_do = {
			factor = 0
			modifier = { 
				has_political_power > 100
				add = 3
			}			
		}		
	}	
	r56_dismiss_fascist_demagogue = { #
		icon = political_actions

		allowed = {
			always = yes
		}


		available = {
			has_idea_with_trait = fascist_demagogue
			has_government = fascism
			fascism > 0.99
		}

		visible = {
			is_ai = yes
		}

		cost = 10

		days_remove = 5

		remove_effect = {
			remove_ideas_with_trait = fascist_demagogue
		}
		ai_will_do = {
			factor = 0
			modifier = { 
				has_political_power > 100
				add = 3
			}			
		}		
	}	
	r56_dismiss_democratic_reformer = { #
		icon = political_actions

		allowed = {
			always = yes
		}


		available = {
			has_idea_with_trait = democratic_reformer
			has_government = democratic
			democratic > 0.99
		}

		visible = {
			is_ai = yes
		}

		cost = 10

		days_remove = 5

		remove_effect = {
			remove_ideas_with_trait = democratic_reformer
		}
		ai_will_do = {
			factor = 0
			modifier = { 
				has_political_power > 100
				add = 3
			}			
		}		
	}
	r56_dismiss_neutrality_advisor = { #
		icon = political_actions

		allowed = {
			always = yes
		}


		available = {
			OR = {
				has_idea_with_trait = staunch_monarchist
				has_idea_with_trait = staunch_traditionalist
			}
			has_government = neutrality
			neutrality > 0.99
		}

		visible = {
			is_ai = yes
		}

		cost = 10

		days_remove = 5

		remove_effect = {
			remove_ideas_with_trait = staunch_monarchist
			remove_ideas_with_trait = staunch_traditionalist
		}
		ai_will_do = {
			factor = 0
			modifier = { 
				has_political_power > 100
				add = 3
			}			
		}		
	}			
}

economy_decisions = {
	r56_coordinate_land_equipment_manufacturers = {
		icon = generic_industry

		allowed = {
			#always = yes
			NOT = {	#MIO system does not use manufacturer hiring - can be changed later, probably requiring multiple large size MIOs
				has_dlc = "Arms Against Tyranny"
			}
		}

		available = {
			amount_taken_ideas = {
			    amount > 0
			    slots = {
			        tank_manufacturer
			    }
			}
			amount_taken_ideas = {
			    amount > 0
			    slots = {
			        materiel_manufacturer
			    }
			}
			amount_taken_ideas = {
			    amount > 0
			    slots = {
			        industrial_concern
			    }
			}
		}

		cost = 50
		days_remove = 365

		remove_effect = {
		}

		complete_effect = {
			add_timed_idea = {
			    idea = r56_land_equipment_manufacturers_coordination
			    days = 365
			}
		}
	}

	r56_coordinate_naval_equipment_manufacturers = {
		icon = generic_naval

		allowed = {
			#always = yes
			NOT = {	#MIO system does not use manufacturer hiring - can be changed later, probably requiring multiple large size MIOs
				has_dlc = "Arms Against Tyranny"
			}
		}

		available = {
			amount_taken_ideas = {
			    amount > 0
			    slots = {
			        naval_manufacturer
			    }
			}
			amount_taken_ideas = {
			    amount > 0
			    slots = {
			        materiel_manufacturer
			    }
			}
			amount_taken_ideas = {
			    amount > 0
			    slots = {
			        industrial_concern
			    }
			}
			any_controlled_state = {
				is_coastal = yes
			}
		}
		cost = 50
		days_remove = 365

		complete_effect = {
			add_timed_idea = {
			    idea = r56_naval_equipment_manufacturers_coordination
			    days = 365
			}
		}
	}
	
	r56_generic_investments = {
		icon = hol_attract_foreign_investors
		cost = 120
		target_trigger = {
			FROM = {
				OR = {
					is_major = yes
					is_faction_leader = yes
				}
				has_government = democratic
				NOT = {
					has_war_with = ROOT
				}
			}
	   	}
		fire_only_once = yes
		allowed = {
			OR = {	#feel free to use for other countries
				tag = DEN
				tag = RAJ
			}
		}
		ai_will_do = {
			factor = 10
		}
		cancel_if_not_visible = yes
		visible = {
			has_country_flag = r56_generic_investments
			OR = {
				has_government = democratic
				has_government = neutrality
			}
		}
		available = {
			has_country_flag = r56_generic_investments
			FROM = {
				num_of_civilian_factories > 20
				OR = {
					has_government = democratic
					AND = {
						has_government = neutrality
						has_offensive_war = no
					}
				}
			}
			NOT = { has_country_flag = r56_generic_investment_running }
		}
		complete_effect = {
			set_country_flag = r56_generic_investment_running
		}
		remove_effect = {
			clr_country_flag = r56_generic_investment_running
			add_offsite_building = {
				type = industrial_complex
				level = 1
			}
		}
		days_remove = 120
	}
}

war_measures = {

	r56_collect_civilian_aluminium_utensils = {
		icon = aluminium

		allowed = {
			always = yes
		}

		fire_only_once = yes

		available = {
			any_owned_state = {
				is_fully_controlled_by = ROOT
				is_core_of = ROOT
				OR = {
					has_state_category = megalopolis
					has_state_category = metropolis
					has_state_category = large_city
				}
			}
			ROOT = {
				has_war = yes
	        	OR = {
	        		has_idea = war_economy
	        		has_idea = tot_economic_mobilisation
	        	}
			}
			has_war_support > 0.6
		}


		visible = {
			any_owned_state = {
				is_fully_controlled_by = ROOT
				is_core_of = ROOT
				OR = {
					has_state_category = megalopolis
					has_state_category = metropolis
					has_state_category = large_city
				}
			}
		}

		cost = 50
		days_remove = 180

		ai_will_do = {
			factor = 0
			modifier = {
				add = 1
				aluminium < 1
			}
			modifier = {
				add = 4
				aluminium < 4
			}
			modifier = {
				add = 4
				aluminium < 6
			}
		}

		complete_effect = {
			every_state = {
				limit = {
					is_core_of = ROOT
					is_owned_and_controlled_by = ROOT
					OR = {
						has_state_category = megalopolis
						has_state_category = metropolis
						has_state_category = large_city
					}
				}
				set_state_flag = r56_aluminium_collection
				add_resource = {
					type = aluminium
					amount = 1
				}
			}
		}

		remove_effect = {
			every_state = {
				limit = {
					is_core_of = ROOT
					OR = {
						has_state_category = megalopolis
						has_state_category = metropolis
						has_state_category = large_city
					}
					has_state_flag = r56_aluminium_collection
				}
				add_resource = {
					type = aluminium
					amount = -1
				}
				clr_state_flag = r56_aluminium_collection
			}
		}
	}

	r56_collect_scrap_resources = {
		icon = generic_civil_support

		allowed = {
			always = yes
		}

		fire_only_once = yes

		available = {
			has_capitulated = no
			has_war = yes
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}

			has_war_support > 0.6
		}


		visible = {

		}
		custom_cost_text = decision_cost_WS_15_pp_50
		custom_cost_trigger = {
			has_war_support > 0.14
			has_political_power > 49
		}

		cost = 50
		days_remove = 180

		ai_will_do = {
			factor = 0
			modifier = { #they may need it at that point and I can't really calculate that more easily.
				add = 10
				date > 1944.01.01
			}
			#modifier = {
			#	add = 1
			#	steel < 1
			#}
			#modifier = {
			#	add = 4
			#	steel < 4
			#}
			#modifier = {
			#	add = 4
			#	steel < 6
			#}
		}

		complete_effect = {

			add_war_support = -0.15
			add_political_power = -50
			add_timed_idea = { idea = idea_r56_scrap_collection_campaign days = 180  }
		}

		remove_effect = {
			add_war_support = 0.05
		}
	}

	recruit_women_pilots = {
		icon = generic_air

        allowed = {
        	#add countries as time goes on
        	OR = {
        		tag = AST
        		tag = ARG
        		tag = BRA
        		tag = CAN
        		tag = CAT
        		tag = CHI
        		tag = DEN
        		tag = ENG
        		tag = EST
        		tag = EGY
        		tag = GER
        		tag = ITA
        		tag = NOR
				tag = POL
        		tag = ROM
        		tag = SOV
				tag = SPR
        		tag = VEN
        		tag = USA
        		tag = NZL
        	}
        }

        fire_only_once = yes

        available = {
            has_war = yes
            has_idea = tot_economic_mobilisation
            #OR = {
            #	has_idea = r56i_laws_gender_limited
            #	has_idea = r56i_laws_gender_equality
            #}
            has_decision = women_in_the_workforce
            if = {
            	limit = {
            		original_tag = CAT
            	}
            	NOT = {
            		SPR = {
            			has_decision = recruit_women_pilots
            		}
            	}
            }
            if = {
            	limit = {
            		tag = SPR
            	}
				NOT = {
					OR = {
						has_government = fascism
						country_exists = CAT
					}
				}
			}
            OR = {
                AND = {
                    has_government = democratic
                    has_war_support > 0.79
                }
                AND = {
                    has_government = communism
                    has_war_support > 0.79
                }
                AND = {
                    has_government = fascism
                    OR = {
                        has_war_support > 0.89
                        surrender_progress > 0
                    }
                }
                AND = {
                    has_government = neutrality
                    has_war_support > 0.84
                    has_stability > 0.7
                }
            }
        }
        visible = {
            has_war = yes
        }

        cost = 50
		
        ai_will_do = {
			factor = 20
		}
		complete_effect = {
			set_rule = {
				can_generate_female_aces = yes
			}
			if = {
				limit = {
					tag = AST
				}
				add_ace = {
					name = "Margaret"
					surname = "Adams"
					callsign = "Socks"
					type = fighter_good
					is_female = yes
				}
				add_ace = {
					name = "Nancy-Bird"
					surname = "Walton"
					callsign = "Angel of the Outback"
					type = fighter_good_agility
					is_female = yes
				}
			}

			if = {
				limit = {
					tag = ARG
				}
				add_ace = {
					name = "Susana"
					surname = "Ferrari Billinghurst"
					callsign = "Reina de los cielos"
					type = fighter_good_agility
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = BRA
				}
				add_ace = {
					name = "Ada"
					surname = "Rogato"
					callsign = "Skydiving"
					type = fighter_good_attack
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = CAN
				}
				add_ace = {
					name = "Violet"
					surname = "Milstead"
					callsign = "Vi"
					type = fighter_good
					is_female = yes
				}
				add_ace = {
					name = "Moretta"
					surname = "Reilly"
					callsign = "Molly"
					type = bomber_good_range #bomber?
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = CAT
				}
				add_ace = {
					name = "Dolors"
					surname = "Vives i Rodon"
					callsign = "ales"
					type = fighter_good
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = CHI
				}
				add_ace = {
					name = "Sui Fun"
					surname = "Cheung"
					callsign = "Katherine"
					type = fighter_good
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = DEN
				}
				add_ace = {
					name = "Vera"
					surname = "Strodl Dowling"
					callsign = "Jacket"
					type = fighter_good_agility #anything?
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = EGY
				}
				add_ace = {
					name = "Lotfita"
					surname = "Elnadi"
					callsign = "Nur"
					type = fighter_good
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = ENG
				}
				#Mrs Victor Bruce
				add_ace = {
					name = "Lettice"
					surname = "Curtis"
					callsign = "Gull"
					type = bomber_good_range #heavy bomber
					is_female = yes
				}
				add_ace = {
					name = "Mary"
					surname = "Wilkins"
					callsign = "Rose"
					type = support_good_agility #anything?
					is_female = yes
				}
				add_ace = {
					name = "Maureen"
					surname = "Dunlop"
					callsign = "Rubber"
					type = fighter_good #portrait already in game
					is_female = yes
				}
				add_ace = {
					name = "Diana"
					surname = "Barnato"
					callsign = "Diamond"
					type = bomber_good_bombing #anything?
					is_female = yes
				}
			# Add Molly Rose (born Marshall)?
			}
			if = {
				limit = {
					tag = EST
				}
				add_ace = {
					name = "Alviine-Johanna"
					surname = "Kalep"
					callsign = ""
					type = fighter_good_agility
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = GER
					NOT = {
						has_government = communism
					}
				}
				add_ace = {
					name = "Elly"
					surname = "Beinhorn"
					callsign = "Schwalbe"
					type = fighter_good
					is_female = yes
				}
				add_ace = {
					name = "Hanna"
					surname = "Reitsch"
					callsign = "Flugkapitän" #change?
					type = fighter_good_agility #range?
					is_female = yes
				}
				#born Melitta Schiller
				add_ace = {
					name = "Melitta"
					surname = "Schenk Gräfin von Stauffenberg"
					callsign = "Zaunkönig"
					type = support_good_bombing #range
					is_female = yes
				}
				add_ace = {
					name = "Thea"
					surname = "Knorr"
					callsign = "Elster"
					type = bomber_good_range #range
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = GER
					has_government = communism
				}
				add_ace = {
					name = "Elly"
					surname = "Beinhorn"
					callsign = "Schwalbe"
					type = fighter_good
					is_female = yes
				}
				add_ace = {
					name = "Hanna"
					surname = "Reitsch"
					callsign = "Flugkapitän" #change?
					type = fighter_good_agility #range?
					is_female = yes
				}
				#born Melitta
				add_ace = {
					name = "Melitta"
					surname = "Schiller"
					callsign = "Zaunkönig"
					type = support_good_bombing #range
					is_female = yes
				}
				add_ace = {
					name = "Thea"
					surname = "Knorr"
					callsign = "Elster"
					type = bomber_good_range #range
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = ITA
				}
				add_ace = {
					name = "Carina"
					surname = "Massone Negrone"
					callsign = "Marchesa"
					type = fighter_good #range maybe create a fighter range category
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = NOR
				}
				add_ace = {
					name = "Gidsken"
					surname = "Nilsine Jakobsen"
					callsign = "Snøfnugg"
					type = fighter_good #range
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = NZL
				}
				add_ace = {
					name = "Jean"
					surname = "Gardner Batten"
					callsign = "Hine-o-te-Rangi"
					type = fighter_good
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = SPR
				}
				add_ace = {
					name = "Dolors"
					surname = "Vives i Rodon"
					callsign = "Alas"
					type = fighter_good
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = POL
				}
				add_ace = {
					name = "Jadwiga"
					surname = "Piłsudska"
					callsign = "Marszałek"
					type = fighter_good
					is_female = yes
				}
				add_ace = {
					name = "Janina"
					surname = "Lewandowska"
					callsign = "Generał"
					type = fighter_good
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = ROM
				}
				add_ace = {
					name = "Mariana"
					surname = "Dragescu"
					callsign = "Asistenta"
					type = bomber_good_range #transport
					is_female = yes
				}
				add_ace = {
					name = "Nadejda"
					surname = "Brjozovska"
					callsign = "Vulturul"
					type = fighter_good
					is_female = yes
				}
				add_ace = {
					name = "Marina "
					surname = "Stirbei"
					callsign = "Alb înger"
					type = bomber_good #transport
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = SOV
				}
				add_ace = {
					name = "Valentina"
					surname = "Grizodubova"
					callsign = ""
					type = bomber_good_range #transport/bomber range
					is_female = yes
				}
				add_ace = {
					name = "Lydia"
					surname = "Litvyak"
					callsign = "Belaya liliya Stalingrada"
					type = fighter_good_agility #real ace
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = VEN
				}
				add_ace = {
					name = "Mary"
					surname = "Calcaño"
					callsign = "Neoyorquina"
					type = fighter_good
					is_female = yes
				}
			}
			if = {
				limit = {
					tag = USA
				}
				add_ace = {
					name = "Jacqueline"
					surname = "Cochran"
					callsign = "Jackie"
					type = fighter_good
					is_female = yes
				}
				add_ace = {
					name = "Nancy"
					surname = "Harkness Love"
					callsign = "Bee"
					type = bomber_good #bomber
					is_female = yes
				}
				add_ace = {
					name = "Betty"
					surname = "Huyler Gillies"
					callsign = "Butterfly"
					type = bomber_good_range #bomber
					is_female = yes
				}
				add_ace = {
					name = "Mildred"
					surname = "Axton"
					callsign = "Butterfly"
					type = support_good #bomber
					is_female = yes
				}
				#Ruth Rowland Nichols, Phoebe Omlie, Ola Mildred Rexroat (really nicknamed Sexy Rexy) -to add?
				#Willa Brown if can get afro american w
				#Maggie Gee and Hazel Ying Lee 2 chinese american wasps, although Hazel Ying wanted to fight for China
				#Rose Lok was one of a handful of Chinese-American women who earned their pilot's licenses during the 1930s, along with Hazel Ying Lee, Leah Hing, Hilda Yen, and Lee Ya-Ching
			}
        }
	}
}

industrial_requisition_category = {
	seize_machine_toolings_in_state = {
		icon = generic_factory


 		allowed = {
			always = yes
		}
		target_root_trigger = { #This is evaluated before target_trigger, visible or available (but after allowed) and only accepts conditions for ROOT (not changes of scope possible here)
			NOT = { has_government = democratic } #Discard democracies before checking states.
		}
		state_target = yes
		target_array = controlled_states
		#on_map_mode = map_only
		target_trigger = { #Once a state is added to the list of valid targets, it's never removed again (short of typing "reload decision" on console).
			FROM = {
				NOT = {
					OR = {
						is_owned_by = ROOT
						is_core_of = ROOT
						is_claimed_by = ROOT
						is_border_conflict = yes
						has_state_flag = machine_tooling_looted
					}
				}
				owner = {
					has_war_with = ROOT
				}
				non_damaged_building_level = {
					building = arms_factory
					level > 0
				}
				OR = {
					has_state_category = city
					has_state_category = large_city
					has_state_category = metropolis
					has_state_category = megalopolis
				}

				resistance < 50
			}
		}

        available = {
        	OR = {
        		has_idea = war_economy
        		has_idea = tot_economic_mobilisation
			}
			NOT = {
				has_government = democratic
			}
		}

		visible = {
			FROM = {
				is_controlled_by = ROOT
				NOT = { is_core_of = ROOT } #This solves a clear false positive.
				NOT = { has_state_flag = machine_tooling_looted }#And this removes the need for fire_only_once.
				non_damaged_building_level = { #Not visible if there are no factories to loot.
					building = arms_factory
					level > 0
				}
			}
			NOT = {
				has_government = democratic
			}
        	any_owned_state = {
        		is_fully_controlled_by = ROOT
        		is_core_of = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 1
				    include_locked = no
				}
				NOT = {
					has_state_flag = machine_tooling_beneficiary
				}
        	}
		}

		cost = 30

		days_remove = 60

		remove_effect = {
			FROM = {
				set_state_flag = machine_tooling_looted
				remove_building = {
					type = arms_factory
					level = 1
				}
				add_compliance = -5
				add_resistance = 5
				add_dynamic_modifier = { modifier = looting_resistance days = 365 }
				#add_state_modifier = looting_resistance
			}
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = no
					}
					is_in_home_area = yes
					is_core_of = ROOT
				}

				add_building_construction = {
				    type = arms_factory
				    level = 1
				    instant_build = yes
				}
				set_state_flag = machine_tooling_beneficiary
			}
		}
	}
}

foreign_politics = {
	r56_abandon_the_balkan_pact = {
		allowed = {
			OR = {
				original_tag = GRE
				original_tag = TUR
				original_tag = ROM
				original_tag = YUG
			}
		}

		available = {
			has_idea = r56_ROM_balkan_pact
		}

		visible = {
			has_idea = r56_ROM_balkan_pact
		}

		cost = 50
		days_remove = 35

		ai_will_do = {
			factor = 0
		}

		remove_effect = {
			remove_ideas = r56_ROM_balkan_pact
		}
	}
	r56_abandon_the_little_entente = {
		allowed = {
			OR = {
				original_tag = CZE
				original_tag = ROM
				original_tag = YUG
			}
		}

		available = {
			has_idea = r56_YUG_little_entente
		}

		visible = {
			has_idea = r56_YUG_little_entente
		}

		cost = 50
		days_remove = 35

		ai_will_do = {
			factor = 0
		}

		remove_effect = {
			remove_ideas = r56_YUG_little_entente
		}
	}
}
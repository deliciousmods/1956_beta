den_debug = {

	den_generate_violence_2 = {
		complete_effect = {
			den_generate_violence_name = yes
		}
	}

	den_capitulation_event = {
		complete_effect = {
			country_event = denmark.102
		}
	}

	den_increase_influence_large = {
		complete_effect = {
			add_to_variable = {
				den_lower_influence = 50
			}
			add_to_variable = { 
				den_middle_influence = 50
			}
			add_to_variable = {
				den_upper_influence = 50
			}
		}
	}
	den_increase_influence = {
		complete_effect = {
			add_to_variable = {
				den_lower_influence = 10
			}
			add_to_variable = { 
				den_middle_influence = 10
			}
			add_to_variable = {
				den_upper_influence = 10
			}
		}
	}
	den_decrease_influence = {
		complete_effect = {
			add_to_variable = {
				den_lower_influence = -10
			}
			add_to_variable = {
				den_middle_influence = -10
			}
			add_to_variable = {
				den_upper_influence = -10
			}
		}
	}
	den_lower_increase_loy = {
		complete_effect = {
			add_to_variable = {
				den_lower_loyalty = 10
			}
			add_to_variable = {
				den_middle_loyalty = 10
			}
			add_to_variable = {
				den_upper_loyalty = 10
			}
		}
	}
	den_lower_decrease_loy = {
		complete_effect = {
			add_to_variable = {
				den_lower_loyalty = -10
			}
			add_to_variable = {
				den_middle_loyalty = -10
			}
			add_to_variable = {
				den_upper_loyalty = -10
			}
		}
	}
	den_calculate = {
		complete_effect = {
			den_calculate_stratas = yes
		}
	}
}
DEN_political_landscape = {
	### STRATA INTERACTION

	DEN_Seize_Agricultural_Property = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_lower_eqilibrium_20_trigger
				check_variable = {
					den_lower_equilibrium > 20
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_lower_loyalty_40_trigger
				check_variable = {
					den_lower_loyalty > 40
				}
			}
			#A year has passed since the focus Ally the Peasents was taken
			if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				OR = {
					NOT = {
						has_completed_focus = DEN_Ally_the_Peasents
					}
					has_completed_focus = DEN_Collectivization_of_Agriculture
				}
			}
			else_if = {
				limit = {
					OR = {
						has_completed_focus = DEN_Initiate_Economic_Reforms
						has_completed_focus = DEN_Strengthen_the_Labour_Unions
					}
				}
				OR = {
					NOT = {
						has_completed_focus = DEN_Increase_Rural_Developement
					}
					has_completed_focus = DEN_Social_Democratic_Majority
					has_completed_focus = DEN_Conservative_Majority
				}
			}
		}
		visible = {
			check_variable = {
				den_lower_influence > 29
			}
		}
		ai_will_do = {
			factor = 1
		}
		cost = 30
		complete_effect = {
			add_to_variable = {
				den_lower_equilibrium = -10
				tooltip = den_lower_equilibrium_tooltip
			}
			add_to_variable = {
				den_lower_loyalty = -20
				tooltip = den_lower_loyalty_tooltip
			}
			den_calculate_lower = yes
			den_calculate_eqilibirum = yes
		}
		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = DEN
				}
				add_extra_state_shared_building_slots = 1
			}
		}
		days_remove = 70
		days_re_enable = 140
	}

	DEN_Confiscate_Civilian_Vessels = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_middle_eqilibrium_20_trigger
				check_variable = {
					den_middle_equilibrium > 20
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_middle_loyalty_40_trigger
				check_variable = {
					den_middle_loyalty > 40
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				add = 49
				has_equipment = {
					convoy < 20
				}
			}
		}
		visible = {
			check_variable = {
				den_middle_influence > 29
			}
		}
		cost = 80
		complete_effect = {
			add_to_variable = {
				den_middle_equilibrium = -10
				tooltip = den_middle_equilibrium_tooltip
			}
			add_to_variable = {
				den_middle_loyalty = -20
				tooltip = den_middle_loyalty_tooltip
			}
			add_to_variable = {
				den_upper_equilibrium = -5
				tooltip = den_upper_equilibrium_tooltip
			}
			add_to_variable = {
				den_upper_loyalty = -10
				tooltip = den_upper_loyalty_tooltip
			}
			den_calculate_stratas = yes
			den_calculate_eqilibirum = yes
		}
		remove_effect = {
			add_equipment_to_stockpile = {
				type = convoy
				producer = DEN
				amount = 35
			}
		}
		days_remove = 70
		days_re_enable = 200
	}



	DEN_Nationalize_Vital_Industries = {
		icon = eng_trade_unions_demand
		available = {
			custom_trigger_tooltip = {
				tooltip = den_upper_eqilibrium_20_trigger
				check_variable = {
					den_upper_equilibrium > 20
				}
			}
			custom_trigger_tooltip = {
				tooltip = den_upper_loyalty_40_trigger
				check_variable = {
					den_upper_loyalty > 40
				}
			}
			OR = {
				AND = {
					has_government = democratic
					has_completed_focus = DEN_Tactical_Nationalizations
				}
				has_government = communism
				#fascism if a year has passed after completing industrialists support
				AND = {
					has_government = fascism
					has_completed_focus = DEN_Consolidate_Media_Institutions
				}
				AND = {
					has_government = neutrality
					custom_trigger_tooltip = {
						tooltip = den_upper_loyalty_80_trigger
						check_variable = {
							den_upper_loyalty > 80
						}
					}
				}
			}
			any_owned_state = {
				is_core_of = DEN
				free_building_slots = {
					building = industrial_complex
					size > 0
					include_locked = no
				}
			}
		}
		ai_will_do = {
			factor = 3
		}
		visible = {
			check_variable = {
				den_upper_influence > 29
			}
		}
		cost = 100
		complete_effect = {
			add_to_variable = {
				den_upper_equilibrium = -20
				tooltip = den_upper_equilibrium_tooltip
			}
			add_to_variable = {
				den_upper_loyalty = -30
				tooltip = den_upper_loyalty_tooltip
			}
			den_calculate_upper = yes
			den_calculate_eqilibirum = yes
		}
		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = DEN
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = no
					}
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		days_remove = 70
		days_re_enable = 500
	}

	DEN_Reduce_Lower_Strata_Influence = {
		icon = eng_trade_unions_demand
		#available = {
		#	custom_trigger_tooltip = {
		#		tooltip = den_lower_influence_20_trigger
		#		check_variable = {
		#			den_lower_influence > 20
		#		}
		#	}
		#}
		visible = {
			NOT = {
				has_country_flag = den_lower_stratas_disabled
			}
		}
		ai_will_do = {
			factor = 1
		}
		cost = 75
		complete_effect = {
			if = {
				limit = {
					check_variable = {
						den_lower_influence < 21
					}
				}
				custom_effect_tooltip = den_remove_lower_tt
				set_country_flag = den_lower_stratas_disabled
				remove_dynamic_modifier = {
					scope = DEN
					modifier = r56_danish_lower_strata 
				}
			}
			else = {
				add_to_variable = {
					den_lower_loyalty = -25
					tooltip = den_lower_loyalty_tooltip
				}
				add_to_variable = {
					den_lower_influence = -20
					tooltip = den_lower_influence_tooltip
				}
			}
			den_calculate_lower = yes
		}
		days_re_enable = 180
	}

	DEN_Reduce_Middle_Strata_Influence = {
		icon = eng_trade_unions_demand
		#available = {
		#	custom_trigger_tooltip = {
		#		tooltip = den_middle_influence_20_trigger
		#		check_variable = {
		#			den_middle_influence > 20
		#		}
		#	}
		#}
		visible = {
			NOT = {
				has_country_flag = den_middle_stratas_disabled
			}
		}
		ai_will_do = {
			factor = 1
		}
		cost = 75
		complete_effect = {
			if = {
				limit = {
					check_variable = {
						den_middle_influence < 21
					}
				}
				custom_effect_tooltip = den_remove_middle_tt
				set_country_flag = den_middle_stratas_disabled
				remove_dynamic_modifier = {
					scope = DEN
					modifier = r56_danish_middle_strata 
				}
			}
			else = {
				add_to_variable = {
					den_middle_loyalty = -25
					tooltip = den_middle_loyalty_tooltip
				}
				add_to_variable = {
					den_middle_influence = -20
					tooltip = den_middle_influence_tooltip
				}
			}
			den_calculate_middle = yes
		}
		days_re_enable = 180
	}
	DEN_Reduce_Upper_Strata_Influence = {
		icon = eng_trade_unions_demand
		#available = {
		#	custom_trigger_tooltip = {
		#		tooltip = den_upper_influence_20_trigger
		#		check_variable = {
		#			den_upper_influence > 20
		#		}
		#	}
		#}
		visible = {
			NOT = {
				has_country_flag = den_upper_stratas_disabled
			}
		}
		ai_will_do = {
			factor = 1
		}
		cost = 75
		complete_effect = {
			if = {
				limit = {
					check_variable = {
						den_upper_influence < 21
					}
				}
				custom_effect_tooltip = den_remove_upper_tt
				set_country_flag = den_upper_stratas_disabled
				remove_dynamic_modifier = {
					scope = DEN
					modifier = r56_danish_upper_strata 
				}
			}
			else = {
				add_to_variable = {
					den_upper_loyalty = -25
					tooltip = den_upper_loyalty_tooltip
				}
				add_to_variable = {
					den_upper_influence = -20
					tooltip = den_upper_influence_tooltip
				}
			}
			den_calculate_upper = yes
		}
		days_re_enable = 180
	}
	den_oligarchy_coup = {
		icon = decision_attache
		activation = {
			always = no
		}
		allowed = {
			tag = DEN
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = den_upper_influence_90_trigger
				check_variable = {
					den_upper_influence < 90
				}
			}
		}
		priority = 50
		is_good = no
		days_mission_timeout = 150
		complete_effect = {
			add_political_power = 15
		}
		timeout_effect = {
			add_stability = -0.2
			remove_ideas = DEN_King_Christian_X
			set_country_flag = den_monarchy_abolished
			set_cosmetic_tag = DEN_REP
			retire_ideology_leader = democratic
			create_country_leader = {
				name = "Arnold Peter MÃ¸ller"	#https://apmoller.com/wp-content/uploads/2020/10/VRO_187_APMoller.jpg
				picture = "Portrait_Europe_Generic.dds"
				expire = "1965.1.1"
				ideology = oligarchic_democracy
			}
			set_party_name = {
				ideology = democratic
				name = "Council of Directors"
				long_name = "Council of Directors"
			}
			hidden_effect = {	
				set_party_name = {
					ideology = neutrality
					name = "Grand Democratic Coalition"
					long_name = "Socialdemokratiet - Venstre - Radikale Venstre - Konservative Folkeparti - Bondepartiet"
				}
			}
			#Oligarch takes over the country -> institutes "republic"
		}
	}
	den_lower_class_coup = {
		icon = generic_scales
		activation = {
			always = no
		}
		allowed = {
			tag = DEN
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = den_lower_influence_90_trigger
				check_variable = {
					den_lower_influence < 90
				}
			}
		}
		priority = 50
		is_good = no
		days_mission_timeout = 150
		complete_effect = {
			add_political_power = 15
		}
		timeout_effect = {
			add_stability = -0.2
			remove_ideas = DEN_King_Christian_X
			set_country_flag = den_monarchy_abolished
			set_cosmetic_tag = DEN_REP
			#Lower Class forces King to resign -> Republic of Denmark
		}
	}
	### 
	DEN_reconsider_the_status_of_the_straits = {
		available = {
			NOT = {
				has_country_flag = {
					flag = straits_laws_changed
					days > 100
				}
			}
		}
		visible = {
			tag = DEN
			controls_state = 99
			controls_state = 37
			has_global_flag = copenhagen_convention_revoked
		}
		complete_effect = {
			clr_country_flag = straits_laws_changed
			country_event = {
				id = denmark.3
				hours = 0
			}
			set_country_flag = straits_laws_changed
		}
	}
	den_ships_seized = {
		
		icon = generic_political_discourse

		available = {
			has_completed_focus = DEN_Scuttle_the_Ships
		}

		days_mission_timeout = 365

		fire_only_once = yes

		activation = {
			always = no
		}
		visible = {
			hidden_trigger = {
				has_focus_tree = free_denmark
			}
		}
		cancel_if_not_visible = yes

		is_good = no
		
		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			add_war_support = 0.05
			GER = {
				add_war_support = -0.05
			}
			set_country_flag = den_ships_scuttled
		}

		timeout_effect = {
			add_war_support = -0.1
			set_country_flag = den_ships_seized
		}
	}
	
	#den_invite_select_communist_ministers = {
	#	cost = 35
	#	available = {
	#		communism > 0.1
	#		has_country_flag = political_violence_resolved
	#	}
	#	ai_will_do = {
	#		factor = 15
	#	}
	#	visible = {
	#		has_completed_focus = DEN_Popular_Front_against_Fascism
	#		has_completed_focus = DEN_Strengthen_the_Labour_Unions
	#		has_government = democratic
	#	}
	#	complete_effect = {
	#		#Adds some lukewarm communist ministers
	#	}
	#}
	den_encourage_volunteering_in_spain = {
		cost = 45
		icon = generic_military
		available = {
			SPR_scw_in_progress = yes
			has_manpower > 500
			any_country = {
				original_tag = SPR
				has_war = yes
				OR = {
					has_government = democratic
					has_government = communism
				}
			}
		}
		ai_will_do = {
			factor = 10
		}
		fire_only_once = yes
		visible = {
			OR = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			NOT = { 
				has_global_flag = scw_over 
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			add_manpower = -500	
			set_rule = { can_send_volunteers = yes }		
		}
		remove_effect = {
			set_country_flag = den_scw_volunteers_sent
			random_country = {
				limit = {
					original_tag = SPR
					has_war = yes
					OR = {
						has_government = democratic
						has_government = communism
					}
				}
				add_manpower = 500
				add_opinion_modifier = {
					target = DEN
					modifier = POR_helped_in_civil_war
				}
				save_global_event_target_as = den_scw_volunteer_receiver
			}
			custom_effect_tooltip = den_scw_volunteering_tt
		}
		days_remove = 45
	}
	den_support_the_spanish_nationalists = {
		cost = 50
		icon = generic_military
		available = {
			SPR_scw_in_progress = yes
			has_manpower > 500
			any_country = {
				original_tag = SPR
				has_war = yes
				OR = {
					has_government = fascism
					has_government = neutrality
				}
			}
			has_government = fascism
		}
		remove_trigger = {
			has_global_flag = scw_over
		}
		ai_will_do = {
			factor = 3
		}
		complete_effect = {
			add_manpower = -500
			set_rule = { can_send_volunteers = yes }
			add_timed_idea = {
				idea = r56_CHL_spanish_civil_war_involvement
				days = 730
			}
		}
		days_remove = -1
		modifier = {
			experience_gain_army = 0.03
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			NOT = { 
				has_global_flag = scw_over 
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
	}
}

DEN_political_integration = {	#TODO: use targets so the decisions arent horrendously boring
	
	den_integrate_sweden_r56 = {
		cost = 150
		icon = generic_form_nation
		available = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = den_is_den_nor_tt
					has_cosmetic_tag = DEN_NOR
				}
				custom_trigger_tooltip = {
					tooltip = "Has cores on all Norwegian states."
					
					controls_state = 110
					controls_state = 142
					controls_state = 143
					controls_state = 144
					controls_state = 967
					110 = { is_core_of = ROOT }
					142 = { is_core_of = ROOT }
					143 = { is_core_of = ROOT }
					144 = { is_core_of = ROOT }
					967 = { is_core_of = ROOT }
				}
			}
			controls_state = 124
			controls_state = 138
			controls_state = 139
			controls_state = 140
			controls_state = 141
			controls_state = 38
			controls_state = 666
			controls_state = 968
			controls_state = 969
			core_compliance = {
				occupied_country_tag = SWE
				value > 50
			}
		}
		ai_will_do = {
			factor = 100
		}
		visible = {
			NOT = {
				is_in_faction_with = SWE
			}
		}
		complete_effect = {
			if = {
				limit = {
					has_cosmetic_tag = DEN_NOR
				}
				drop_cosmetic_tag = yes
				set_cosmetic_tag = DEN_SCA
				set_country_flag = DEN_SCA_formed
				hidden_effect = {
					set_party_name = {
						ideology = communism
						long_name = "Skandinavisk Kommunistiske Parti"
						name = "SKP"
					}
					set_party_name = {
						ideology = fascism
						long_name = "Skandinaviens Nationalsocialistiske Arbejderparti"
						name = "SNSAP"
					}
				}
				mark_focus_tree_layout_dirty = yes
			}
			else = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = DEN_SWE
			}
		}
		fire_only_once = yes
		complete_effect = {
			every_owned_state = {
				limit = {
					is_core_of = SWE
				}
				add_core_of = ROOT
			}
		}
	}
	den_integrate_norway_r56 = {
		cost = 150
		icon = generic_form_nation
		available = {
			controls_state = 110
			controls_state = 142
			controls_state = 143
			controls_state = 144
			controls_state = 967
			core_compliance = {
				occupied_country_tag = NOR
				value > 50
			}
		}
		ai_will_do = {
			factor = 100
		}
		visible = {
			NOT = {
				is_in_faction_with = NOR
				has_country_flag = focus_den_nor_formed
			}
		}
		fire_only_once = yes
		complete_effect = {
			if = {
				limit = {
					has_cosmetic_tag = DEN_SWE
				}
				drop_cosmetic_tag = yes
				set_cosmetic_tag = DEN_SCA
				set_country_flag = DEN_SCA_formed
				hidden_effect = {
					set_party_name = {
						ideology = communism
						long_name = "Skandinavisk Kommunistiske Parti"
						name = "SKP"
					}
					set_party_name = {
						ideology = fascism
						long_name = "Skandinaviens Nationalsocialistiske Arbejderparti"
						name = "SNSAP"
					}
				}
				mark_focus_tree_layout_dirty = yes
			}
			else = {
				set_cosmetic_tag = DEN_NOR
			}
			set_country_flag = den_integrated_norway
		}
		complete_effect = {
			every_state = {	#Debating wheter or not to give cores on all controlled states
				limit = {
					is_core_of = NOR
				}
				add_core_of = ROOT
			}
		}
	}
	den_integrate_finland_r56 = {
		cost = 100
		icon = generic_form_nation
		available = {
			OR = {
				has_country_flag = DEN_SCA_formed
				has_cosmetic_tag = DEN_SCA				
				custom_trigger_tooltip = {
					tooltip = "Has cores on all Scandinavian states."
					
					controls_state = 110
					controls_state = 142
					controls_state = 143
					controls_state = 144
					controls_state = 967
					
					110 = { is_core_of = ROOT }
					142 = { is_core_of = ROOT }
					143 = { is_core_of = ROOT }
					144 = { is_core_of = ROOT }
					967 = { is_core_of = ROOT }

					controls_state = 124
					controls_state = 138
					controls_state = 139
					controls_state = 140
					controls_state = 141
					controls_state = 38
					controls_state = 666
					controls_state = 968
					controls_state = 969

					124 = { is_core_of = ROOT }
					138 = { is_core_of = ROOT }
					139 = { is_core_of = ROOT }
					140 = { is_core_of = ROOT }
					141 = { is_core_of = ROOT }
					38 = { is_core_of = ROOT }
					666 = { is_core_of = ROOT }
					968 = { is_core_of = ROOT }
					969 = { is_core_of = ROOT }

					controls_state = 37
					controls_state = 99
					controls_state = 964
					
					37 = { is_core_of = ROOT }
					99 = { is_core_of = ROOT }
					964 = { is_core_of = ROOT }
				}
			}
			controls_state = 111
			controls_state = 145
			controls_state = 148
			controls_state = 149
			controls_state = 150
			core_compliance = {
				occupied_country_tag = FIN
				value > 50
			}
		}
		ai_will_do = {
			factor = 100
		}
		visible = {
			NOT = {
				is_in_faction_with = FIN
			}
		}
		fire_only_once = yes
		complete_effect = {
			every_state = {
				limit = {
					is_core_of = FIN
				}
				add_core_of = ROOT
			}
			if = {
				limit = {
					OR = {
						has_government = communism
						has_government = fascism
					}	
				}
				set_cosmetic_tag = DEN_KAL
			}
		}
	}
	den_integrate_the_north_sea_islands = {
		cost = 25
		icon = infiltrate_state
		available = {
			any_controlled_state = {
				is_north_sea_island = yes
				compliance > 50
				NOT = {
					is_core_of = ROOT
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
		visible = {
			OR = {
				has_war_with = ICE
				any_owned_state = {
					is_north_sea_island = yes
					NOT = {
						is_core_of = ROOT
					}
				}
				any_controlled_state = {
					is_north_sea_island = yes
					NOT = {
						is_core_of = ROOT
					}
				}
			}
		}
		fire_only_once = yes
		complete_effect = {
			every_controlled_state = {
				limit = {
					is_north_sea_island = yes
					NOT = {
						is_core_of = ROOT
					}
					compliance > 50
				}
				add_core_of = ROOT
			}
		}
	}
	den_integrate_schleswig = {
		cost = 75
		icon = infiltrate_state
		available = {
			58 = {
				is_fully_controlled_by = DEN
				compliance > 70
			}
		}
		ai_will_do = {
			factor = 100
		}
		visible = {
			58 = {
				NOT = {
					is_core_of = DEN
				}
			}
		}
		fire_only_once = yes
		complete_effect = {
			58 = {
				add_core_of = ROOT
			}
		}
	}
	den_reestablish_danish_administration = {
		cost = 100
		icon = infiltrate_state
		available = {
			58 = {
				is_fully_controlled_by = DEN
				compliance < 80
			}
		}
		ai_will_do = {
			factor = 100
		}
		visible = {
			58 = {
				is_controlled_by = DEN
				NOT = {
					is_core_of = DEN
				}
			}
		}
		cancel_trigger = {
			58 = {
				NOT = {
					is_controlled_by = DEN
				}
				compliance > 80
			}
		}
		fire_only_once = yes
		days_remove = 365
		modifier = {
			compliance_growth = 0.2
		}
		
	}
	den_promote_greenland_to_a_county = {
		cost = 35
		icon = infiltrate_state
		available = {
			101 = {
				compliance > 98
				is_fully_controlled_by = DEN
			}
			has_capitulated = no
		}
		ai_will_do = {
			factor = 2
		}
		visible = {
			NOT = {
				has_government = neutrality
			}
			101 = {
				compliance > 90
			}
		}
		days_remove = 100
		modifier = {
			political_power_cost = 0.2
		}
		remove_effect = {
			add_state_core = 101
		}
	}
	den_grant_greenland_self_rule = {
		cost = 25
		icon = infiltrate_state
		
		available = {
			101 = {
				if = {
					limit = {
						DEN = {
							has_government = communism
						}
					}
					compliance > 70
				}
				else = {
					compliance > 95
				}
				is_fully_controlled_by = DEN
			}
			has_capitulated = no
		}
		ai_will_do = {
			factor = 0
			modifier = {
				add = 50
				has_government = communism
			}
		}
		visible = {
			NOT = {
				has_government = neutrality
			}
			if = {
				limit = {
					has_government = communism
				}
				101 = {
					compliance > 60
				}
			}
			else = {
				101 = {
					compliance > 98
				}
			}
		}
		complete_effect = {
			release = GRL
			if = {
				limit = {
					has_dlc = "Together for Victory"
				}
				set_autonomy = {
					target = GRL
					autonomy_state = autonomy_integrated_puppet
				}
			}
			else = {
				puppet = GRL
			}
			GRL = {
				add_stability = 0.05
				add_offsite_building = {
					type = industrial_complex
					level = 1
				}
				add_offsite_building = {
					type = arms_factory
					level = 1
				}
				hidden_effect = {
					if = {
						limit = {
							has_government = democratic
						}
						set_popularities = {
							democratic = 100
							communism = 0
							neutrality = 0
							fascism = 0
						}
					}
					else_if = {
						limit = {
							has_government = communism
						}
						set_popularities = {
							communism = 100
							democratic = 0
							neutrality = 0
							fascism = 0
						}
					}
				}
			}
		}
	}
}
#									#
#	POLITICAL VIOLENCE WHOOOHOOO	#
#									#

DEN_political_violence = {
	den_upcoming_political_violence = {
		activation = {
			always = no
		}
		available = {
			hidden_trigger = {
				NOT = {
					has_government = democratic
				}
			}
		}
		remove_trigger = {
			hidden_trigger = {
				NOT = {
					has_government = democratic
				}
			}
		}
		priority = 50
		icon = revolt
		is_good = no
		days_mission_timeout = var:den_vio_days
		timeout_effect = {
			if = {
				limit = {
					has_government = democratic
				}
				den_calculate_violence_odds = yes
				random_list = {
					var:com_odds = {	#communists win
						if = {
							limit = {
								has_completed_focus = DEN_Popular_Front_against_Fascism
							}
							country_event = denmark.53
						}
						else = {
							country_event = denmark.50
						}
					}
					var:stale_odds = {	#stalemate
						country_event = denmark.52
					}
					var:fasc_odds = {	#fascists win
						country_event = denmark.51
					}
				}
				den_generate_violence_name = yes
				set_variable = {
					political_violence_consequence = -0.05
				}
			}
		}
	}
	### DEMOCRATIC COUNTER MEASURES
	den_increase_police_presence = {
		cost = 25
		icon = generic_police_action
		visible = {
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Galvanise_the_German_Minority
			}
		}
		ai_will_do = {
			factor = 5
		}
		available = {
			has_active_mission = den_upcoming_political_violence
			OR = {
				has_country_flag = den_started_con
				has_country_flag = den_started_soc
				#has_completed_focus = DEN_Initiate_Economic_Reforms
				#has_completed_focus = DEN_Strengthen_the_Labour_Unions
			}
		}
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		complete_effect = {
			#Reduces the consequences of the upcoming violence
			add_popularity = {
				ideology = democratic
				popularity = 0.005
			}
			add_to_variable = {
				stale_add = 10
				tooltip = den_stale_add
			}
			den_add_violence_chance_stale = yes
			add_to_variable = {
				political_violence_consequence = 0.025
				tooltip = den_political_violence_stability_tooltip
			}
		}
	}
	den_investigate_extremists = {
		cost = 30
		icon = generic_brainwash
		visible = {
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Galvanise_the_German_Minority
			}
		}
		ai_will_do = {
			factor = 2
		}
		available = {
			has_active_mission = den_upcoming_political_violence
			OR = {
				has_country_flag = den_started_con
				has_country_flag = den_started_soc
				#has_completed_focus = DEN_Initiate_Economic_Reforms
				#has_completed_focus = DEN_Strengthen_the_Labour_Unions
			}
		}
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		days_remove = -1
		complete_effect = {
			add_to_variable = {
				stale_add = 5
				tooltip = den_stale_add
			}
			add_popularity = {
				ideology = fascism
				popularity = -0.003
			}
			add_popularity = {
				ideology = communism
				popularity = -0.003
			}
			den_add_violence_chance_stale = yes
			#custom_effect_tooltip = den_slightly_increase_stale_tt
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = 50
			}
		}
	}
	den_deradicalisation_programs = {
		cost = 100
		icon = generic_brainwash
		visible = {
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Galvanise_the_German_Minority
			}
		}
		ai_will_do = {
			factor = 7
		}
		available = {
			has_active_mission = den_upcoming_political_violence
			OR = {
				has_country_flag = den_started_con
				has_country_flag = den_started_soc
				#has_completed_focus = DEN_Initiate_Economic_Reforms
				#has_completed_focus = DEN_Strengthen_the_Labour_Unions
			}
		}
		fire_only_once = yes
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		days_remove = -1
		complete_effect = {
			add_popularity = {
				ideology = fascism
				popularity = -0.01
			}
			add_popularity = {
				ideology = communism
				popularity = -0.01
			}
			set_country_flag = den_deradicalisation_programs
			custom_effect_tooltip = den_permantent_increase_stale_tt
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = 30
			}
		}
	}
	### FASCIST COUNTER MEASURES
	den_recruit_additional_blackshirts = {
		cost = 100
		fire_only_once = yes
		icon = eng_blackshirt_march
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		ai_will_do = {
			factor = 7
		}
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		days_remove = -1
		remove_effect = {
			#Strengthens the Fascists in all future street clashes
			add_popularity = {
				ideology = fascism
				popularity = 0.01
			}
			custom_effect_tooltip = den_additional_blackshirts_tt
			add_to_variable = {
				fasc_add = 5
				tooltip = den_fasc_add
			}
			den_add_violence_chance_fasc = yes
			set_country_flag = den_additional_blackshirts
		}
	}
	den_draw_upon_the_schleswig_germans = {
		cost = 30
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = ger_reichskommissariats
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		ai_will_do = {
			factor = 5
		}
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			add_popularity = {
				ideology = fascism
				popularity = 0.005
			}
			#custom_effect_tooltip = den_strengthen_fascists_tt
			add_to_variable = {
				fasc_add = 5
				tooltip = den_fasc_add
			}
			den_add_violence_chance_fasc = yes
		}
	}
	den_raid_dkp_headquarters = {
		cost = 40
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_scorched_earth
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		ai_will_do = {
			factor = 3
		}
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			#Strengthens the Fascists in next street clash + stab hit
			add_popularity = {
				ideology = communism
				popularity = -0.005
			}
			add_to_variable = {
				com_add = -5
				tooltip = den_com_add
			}
			den_add_violence_chance_com = yes
			add_to_variable = {
				political_violence_consequence = -0.025
				tooltip = den_political_violence_stability_tooltip
			}
		}
	}
	den_industrialist_support = {
		cost = 25
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_industry
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		ai_will_do = {
			factor = 10
		}
		visible = {
			has_completed_focus = DEN_Galvanise_the_German_Minority
			has_completed_focus = DEN_Secure_Industrialists_Support
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			add_popularity = {
				ideology = fascism
				popularity = 0.003
			}
			add_to_variable = {
				fasc_add = 5
				tooltip = den_fasc_add
			}
			den_add_violence_chance_fasc = yes
		}
	}
	### ANTI FASCIST COUNTER MEASURES
	den_mobilize_the_common_worker = {
		cost = 100
		fire_only_once = yes
		icon = generic_political_discourse
		days_remove = -1
		complete_effect = {
			#Strengthens the Communists in all future street clashes
			add_popularity = {
				ideology = communism
				popularity = 0.01
			}
			if = {
				limit = {
					has_completed_focus = DEN_Popular_Front_against_Fascism
				}
				custom_effect_tooltip = den_af_common_worker_tt
			}
			else = {
				custom_effect_tooltip = den_common_worker_tt
			}
			add_to_variable = {
				com_add = 5
				tooltip = den_com_add
			}
			den_add_violence_chance_com = yes
			set_country_flag = den_common_worker
		}
		ai_will_do = {
			factor = 12
		}
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		visible = {
			OR = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
	}
	den_provoke_the_SA = {
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}
		icon = generic_civil_support
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		visible = {
			has_completed_focus = DEN_An_Appeal_to_the_Proletariat
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		ai_will_do = {
			factor = 7
		}
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		complete_effect = {
			hidden_effect = {
				add_command_power = -25
			}
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = -20
			}
			add_to_variable = {
				political_violence_consequence = -0.05
				tooltip = den_political_violence_stability_tooltip
			}
		}
	}
	den_get_the_unions_involved = {
		cost = 45
		icon = eng_trade_unions_support
		available = {
			has_active_mission = den_upcoming_political_violence
			if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				has_completed_focus = DEN_Unify_the_Socialist_Movement
			}
		}
		ai_will_do = {
			factor = 9
		}
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			OR = {
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			#Strengthens the Anti Fascists for the next clash
			add_popularity = {
				ideology = communism
				popularity = 0.003
			}
			add_to_variable = {
				com_add = 5
				tooltip = den_com_add
			}
			den_add_violence_chance_com = yes
			#if = {
			#	limit = {
			#		has_completed_focus = DEN_Popular_Front_against_Fascism
			#	}
			#	custom_effect_tooltip = den_strengthen_anti_fascists_tt
			#}
			#else = {
			#	custom_effect_tooltip = den_strengthen_communists_tt
			#}
		}
	}
	den_rural_support = {
		cost = 30
		icon = generic_shovels
		available = {
			has_active_mission = den_upcoming_political_violence
			has_completed_focus = DEN_Ally_the_Peasents
		}
		visible = {
			has_completed_focus = DEN_An_Appeal_to_the_Proletariat
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		ai_will_do = {
			factor = 5
		}
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		complete_effect = {
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = 10
			}
			add_popularity = {
				ideology = communism
				popularity = 0.005
			}
			add_to_variable = {
				com_add = 10
				tooltip = den_com_add
			}
			den_add_violence_chance_com = yes
			#if = {
			#	limit = {
			#		has_completed_focus = DEN_Popular_Front_against_Fascism
			#	}
			#	custom_effect_tooltip = den_strengthen_anti_fascists_tt
			#}
			#else = {
			#	custom_effect_tooltip = den_strengthen_communists_tt
			#}
		}
	}
	## SOCIAL DEMOCRATIC COUNTER MEASURES

	## COMMUNIST COUNTER MEASURES
	den_expand_social_democratic_participation = {
		cost = 50
		icon = eng_trade_unions_demand
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		ai_will_do = {
			factor = 5
		}
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		visible = {
			has_completed_focus = DEN_An_Appeal_to_the_Proletariat
			has_completed_focus = DEN_Popular_Front_against_Fascism
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			#Strengthens anti fascist for next street clash, slightly increases democratic popularity
			if = {
				limit = {
					has_country_flag = socialdemokratiet_dominating
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.025
				}
			}
			else = {
				add_popularity = {
					ideology = neutrality
					popularity = 0.025
				}
			}
			add_to_variable = {
				com_add = 10
				tooltip = den_com_add
			}
			den_add_violence_chance_com = yes
			#custom_effect_tooltip = den_strengthen_anti_fascists_tt
		}
	}
	### SHARED COUNTER MEASURES
	den_propaganda_efforts = {
		cost = 65
		available = {
			has_active_mission = den_upcoming_political_violence
			if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				has_completed_focus = DEN_Propaganda_Campaigns
			}
		}
		ai_will_do = {
			factor = 3
		}
		icon = eng_propaganda_campaigns
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		visible = {
			OR = {
				has_completed_focus = DEN_Galvanise_the_German_Minority
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		complete_effect = {
			if = {
				limit = {
					has_completed_focus = DEN_Popular_Front_against_Fascism
				}
				#custom_effect_tooltip = den_strengthen_anti_fascists_tt
				add_popularity = {
					ideology = communism
					popularity = 0.005
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.005
				}
				add_to_variable = {
					com_add = 10
					tooltip = den_com_add
				}
				den_add_violence_chance_com = yes
			}
			else_if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				#custom_effect_tooltip = den_strengthen_communists_tt
				add_popularity = {
					ideology = communism
					popularity = 0.01
				}
				add_to_variable = {
					com_add = 10
					tooltip = den_com_add
				}
				den_add_violence_chance_com = yes
			}
			else = {
				#custom_effect_tooltip = den_strengthen_fascists_tt
				add_popularity = {
					ideology = fascism
					popularity = 0.01
				}
				add_to_variable = {
					com_add = 10
					tooltip = den_fasc_add
				}
				den_add_violence_chance_fasc = yes
			}
		}
	}
	den_political_assassination = {
		cost = 50
		custom_cost_text = r56_deploy_heavy_aa_capital_cost
		custom_cost_trigger = {
			command_power > 24
		}
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_assassination
		days_remove = -1
		visible = {
			OR = {
				has_completed_focus = DEN_Galvanise_the_German_Minority
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
			}
			has_active_mission = den_upcoming_political_violence
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
		}
		ai_will_do = {
			factor = 8
		}
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		complete_effect = {
			hidden_effect = {
				add_command_power = -25
			}
			if = {
				limit = {
					has_completed_focus = DEN_Galvanise_the_German_Minority
				}
				add_popularity = {
					ideology = communism
					popularity = -0.005
				}
				add_to_variable = {
					com_add = -10
					tooltip = den_com_add
				}
				den_add_violence_chance_com = yes
				#custom_effect_tooltip = den_lower_com_odds_tt
			}
			else_if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				add_popularity = {
					ideology = fascism
					popularity = -0.005
				}
				add_to_variable = {
					fasc_add = -10
					tooltip = den_fasc_add
				}
				den_add_violence_chance_fasc = yes
				#custom_effect_tooltip = den_lower_fasc_odds_tt
			}
			add_days_mission_timeout = {
				mission = den_upcoming_political_violence
				days = -20
			}
		}
	}
	den_sabotage_police_efforts = {
		cost = 35
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_civil_support
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		ai_will_do = {
			factor = 10
		}
		visible = {
			OR = {
				has_completed_focus = DEN_Galvanise_the_German_Minority
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
			has_active_mission = den_upcoming_political_violence
		}
		complete_effect = {
			#custom_effect_tooltip = den_slightly_decrease_stale_tt
			add_to_variable = {
				stale_add = -5
				tooltip = den_stale_add
			}
			add_popularity = {
				ideology = democratic
				popularity = -0.005
			}
			den_add_violence_chance_stale = yes
			add_to_variable = {
				political_violence_consequence = -0.05
				tooltip = den_political_violence_stability_tooltip
			}
		}
	}
	den_encourage_restraint = {
		cost = 10
		available = {
			has_active_mission = den_upcoming_political_violence
		}
		icon = generic_scales
		days_remove = -1
		remove_trigger = {
			NOT = {
				has_active_mission = den_upcoming_political_violence
			}
		}
		ai_will_do = {
			factor = 0
		}
		visible = {
			OR = {
				has_completed_focus = DEN_Galvanise_the_German_Minority
				has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				has_completed_focus = DEN_Popular_Front_against_Fascism
			}
			NOT = {
				has_completed_focus = DEN_King_Christian_Coup
			}
			has_active_mission = den_upcoming_political_violence
		}
		complete_effect = {
			if = {
				limit = {
					has_completed_focus = DEN_Popular_Front_against_Fascism
				}
				add_to_variable = {
					com_add = -5
					tooltip = den_com_add
				}
				den_add_violence_chance_com = yes
				#custom_effect_tooltip = den_slightly_decreases_anti_fascist_tt
			}
			else_if = {
				limit = {
					has_completed_focus = DEN_An_Appeal_to_the_Proletariat
				}
				add_to_variable = {
					com_add = -5
					tooltip = den_com_add
				}
				den_add_violence_chance_com = yes
				#custom_effect_tooltip = den_slightly_decreases_communist_tt
			}
			else_if = {
				limit = {
					has_completed_focus = DEN_Galvanise_the_German_Minority
				}
				add_to_variable = {
					fasc_add = -5
					tooltip = den_fasc_add
				}
				den_add_violence_chance_fasc = yes
				#custom_effect_tooltip = den_slightly_decreases_fascist_tt
			}
			add_to_variable = {
				political_violence_consequence = 0.05
				tooltip = den_political_violence_stability_tooltip
			}
		}
	}

}
economy_decisions = {
	den_targeted_land_reform = {
		icon = generic_industry
		cost = 35
		ai_will_do = {
			factor = 5
		}
		available = {
			FROM = {
				OR = {
					is_core_of = DEN
					compliance > 40
				}
			}
		}
		ai_will_do = {
			factor = 3
		}
		allowed = {
			tag = DEN
		}
		modifier = {
			political_power_cost = 0.25
		}
		fire_only_once = yes
		state_target = yes
		target_array = controlled_states
		visible = {
			FROM = {
				OR = {
					is_core_of = DEN
					compliance > 30
				}
				state_population > 100000 
			}
			has_country_flag = den_land_reform_dec
		}
		days_remove = 30
		on_map_mode = map_and_decisions_view
		remove_effect = {
			FROM = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	den_devalued_krone = {
		icon = ger_mefo_bills
		activation = {
			always = no
		}
		allowed = {
			tag = DEN
		}
		available = {
			OR = {
				has_completed_focus = DEN_North_Sea_Trade_Agreement
				has_completed_focus = DEN_Nordic_Customs_Union
				has_completed_focus = DEN_Munch_Ribbentrop_Pakt
				has_completed_focus = DEN_Dano_Soviet_Trade_Agreement
			}
		}
		priority = 50
		is_good = no
		days_mission_timeout = 500
		complete_effect = {
			add_political_power = 15
			remove_ideas = DEN_stagnant_economy
		}
		timeout_effect = {
			add_timed_idea = {
				idea = DEN_stagnant_economy_2
				days = 450
			}
		}
	}
	den_protectionist_economy = {
		icon = ger_mefo_bills
		activation = {
			always = no
		}
		allowed = {
			tag = DEN
		}
		available = {
			NOT = {
				has_idea = civilian_economy 
				has_idea = limited_exports
			}
		}
		selectable_mission = no
		priority = 50
		is_good = no
		days_mission_timeout = 365
		complete_effect = {
			add_timed_idea = {
				idea = DEN_stagnant_economy_2
				days = 450
			}
		}
		timeout_effect = {
			add_political_power = 15
		}
	}
}
den_kpd_contacts = {
	den_establish_local_chapter = {
		ai_will_do = {
			factor = 10
		}
		icon = generic_speech
		available = {

		}
		on_map_mode = map_and_decisions_view
		state_target = yes
		visible = {
			FROM = {
				is_fully_controlled_by = GER
				is_core_of = GER
				NOT = {
					has_state_flag = den_kpd_established
				}
			}
		}
		days_remove = 50

		fire_only_once = yes

		cost = 50
		
		targets = {
			66 64 58 54 56 42 763
		}
		
		modifier = {
			political_power_cost = 0.5
		}
		remove_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = den_kpd_init
					}
				}
				GER = {
					country_event = {
						id = denmark.7
						days = 8
					}
				}
			}
			set_country_flag = den_kpd_init
			FROM = {
				set_state_flag = den_kpd_established
			}
			GER = {
				custom_effect_tooltip = den_kpd_chapter_per
				hidden_effect = {
					DEN = {
						set_variable = { den_kpd_ch_calc = random }
						multiply_variable = {
							den_kpd_ch_calc = 3
						}
						round_variable = den_kpd_ch_calc
						add_to_variable = {
							DEN_KPD_Strength = den_kpd_ch_calc
						}
					}
				}
				add_popularity = {
					ideology = communism
					popularity = 0.025
				}
			}
		}
	}

	
	
	den_sabotage_industrial_centers = {
		ai_will_do = {
			factor = 10
		}
		icon = revolt
		available = {
			custom_trigger_tooltip = {
				tooltip = "More than 10% KPD Strength"
				check_variable = {
					DEN_KPD_Strength > 10
				}
			}
			has_war_with = GER
		}
		on_map_mode = map_and_decisions_view
		state_target = yes
		visible = {
			FROM = {
				is_fully_controlled_by = GER
				is_core_of = GER
				has_state_flag = den_kpd_established
			}
		}
		days_remove = 35

		fire_only_once = yes

		cost = 30
		
		targets = {
			66 64 58 56 54 42 763
		}
		
		modifier = {
			political_power_cost = 0.5
			industrial_capacity_factory = -0.3
		}
		complete_effect = {
			DEN = {
				custom_effect_tooltip = den_kpd_minus5
				add_to_variable = {
					DEN_KPD_Strength = -5
				}
			}
		}
		remove_effect = {
			FROM = {
				set_state_flag = den_kpd_sabotage
				random_list = {
					30 = {
						#Sabotage Military Industry
						damage_building = {
							type = infrastructure
							damage = 1
						}
						damage_building = {
							type = arms_factory
							damage = 2
						}
						hidden_effect = {
							DEN = {
								set_variable = {
									den_ger_current_sabotage_state = FROM
								}
							}
							GER = {
								country_event = {
									id = denmark.8
									hours = 0
								}
							}
						}
					}
					40 = {
						#Sabotage Civilian Industry
						damage_building = {
							type = infrastructure
							damage = 1
						}
						damage_building = {
							type = industrial_complex
							damage = 2
						}
						hidden_effect = {
							DEN = {
								set_variable = {
									den_ger_current_sabotage_state = FROM
								}
							}
							GER = {
								country_event = {
									id = denmark.8
									hours = 0
								}
							}
						}
					}
					30 = {
						#Sabotage Failed
						GER = {
							add_popularity = {
								ideology = fascism
								popularity = 0.01
							}
						}
					}
				}
			}
		}
	}
	den_sabotage_frontlines = {
		ai_will_do = {
			factor = 20
		}
		icon = GFX_decision_railroads
		available = {
			has_war_with = GER
			FROM = {
				OR = {
					any_neighbor_state = {
						has_state_flag = den_kpd_established
					}
					FROM = {
						has_state_flag = den_kpd_established
					}
				}
			}
		}
		state_target = yes
		visible = {
			custom_trigger_tooltip = {
				tooltip = "More than 10% KPD Strength"
				check_variable = {
					DEN_KPD_Strength > 10
				}
			}
			FROM = {
				is_controlled_by = GER
				is_core_of = GER
				any_neighbor_state = {
					any_country = {
						OR = {
							tag = DEN
							is_subject_of = DEN
							is_in_faction_with = DEN
						}
						controls_state = PREV
					}
				}
			}
		}
		on_map_mode = map_only
		days_remove = 20

		fire_only_once = yes

		cost = 50
		
		target_array = GER.core_states
		
		modifier = {
			political_power_cost = 0.5
		}

		complete_effect = {
			DEN = {
				custom_effect_tooltip = den_kpd_minus5
				add_to_variable = {
					DEN_KPD_Strength = -5
				}
			}
		}
		remove_effect = {
			FROM = {
				set_state_flag = den_kpd_front_sabotage
				add_dynamic_modifier = {
					modifier = r56_den_sabotaged_frontlines
					days = 90
					scope = GER
				}
				hidden_effect = {
					DEN = {
						set_variable = {
							den_ger_current_sabotage_state = FROM
						}
					}
					GER = {
						country_event = {
							id = denmark.8
							hours = 0
						}
					}
				}
			}
		}
	}
	den_call_upon_the_partisans = {
		ai_will_do = {
			factor = 20
		}
		icon = attache
		available = {
			custom_trigger_tooltip = {
				tooltip = "More than 10% KPD Strength"
				check_variable = {
					DEN_KPD_Strength > 10
				}
			}
			has_war_with = GER
			FROM = {
				has_state_flag = den_kpd_established				
			}
		}
		state_target = yes
		visible = {
			FROM = {
				is_core_of = GER
				is_controlled_by = GER
				has_state_flag = den_kpd_established
				NOT = { has_state_flag = den_kpd_partisan }
			}
		}
		on_map_mode = map_only
		days_remove = 20

		fire_only_once = yes

		cost = 50
		
		targets = {
			66 64 58 56 54 42 763
		}
		
		modifier = {
			political_power_cost = 0.5
		}

		complete_effect = {
			DEN = {
				custom_effect_tooltip = den_kpd_minus5
				add_to_variable = {
					DEN_KPD_Strength = -5
				}
			}
		}
		remove_effect = {
			FROM = {
				set_state_flag = den_kpd_partisan
				hidden_effect = {
					if = {	#Berlin shouldnt get instantly taken
						limit = {
							state = 64
						}
						create_unit = {
							division = "name = \"KPD Partisans\" division_template = \"KPD Partisans\" start_experience_factor = 0.2" 
							allow_spawning_on_enemy_provs = yes
							prioritize_location = 3522
							owner = ROOT
						}
						create_unit = {
							division = "name = \"KPD Partisans\" division_template = \"KPD Partisans\" start_experience_factor = 0.2" 
							allow_spawning_on_enemy_provs = yes
							prioritize_location = 3522
							owner = ROOT
						}
					}
					else = {
						create_unit = {
							division = "name = \"KPD Partisans\" division_template = \"KPD Partisans\" start_experience_factor = 0.2" 
							allow_spawning_on_enemy_provs = yes
							owner = ROOT
						}
						create_unit = {
							division = "name = \"KPD Partisans\" division_template = \"KPD Partisans\" start_experience_factor = 0.2" 
							allow_spawning_on_enemy_provs = yes
							owner = ROOT
						}
					}
				}
				custom_effect_tooltip = den_kpd_partisan_uprising_tt
			}
		}
	}
	
	den_german_propaganda_campaigns = {
		ai_will_do = {
			factor = 20
		}
		icon = eng_propaganda_campaigns
		available = {
			FROM = {
				any_neighbor_state = {
					has_state_flag = den_kpd_established
				}			
			}
		}
		state_target = yes
		visible = {
			FROM = {
				is_core_of = GER
				is_controlled_by = GER
				NOT = {
					has_state_flag = den_kpd_established
				}
				any_neighbor_state = {
					has_state_flag = den_kpd_established
				}
			}
		}
		on_map_mode = map_only
		days_remove = 25

		fire_only_once = yes

		cost = 50
		
		target_array = GER.core_states
		
		modifier = {
			political_power_cost = 1
		}
		remove_effect = {
			GER = {
				custom_effect_tooltip = den_kpd_chapter_per
				DEN = {
					set_variable = {
						den_kpd_ch_calc = random
					}
					multiply_variable = {
						den_kpd_ch_calc = 3
					}
					add_to_variable = {
						DEN_KPD_Strength = den_kpd_ch_calc
					}
					divide_variable = {
						den_kpd_ch_calc = 100
					}
				}
				hidden_effect = {
					add_popularity = {
						ideology = communism
						popularity = den_kpd_ch_calc
					}
				}
			}
		}
	}

	den_the_second_german_revolution = {
		ai_will_do = {
			factor = 20
		}
		icon = SOV_the_stalin_constitution
		available = {
			has_defensive_war_with = GER
			custom_trigger_tooltip = {
				tooltip = "More than 20% KPD Strength"
				check_variable = {
					DEN_KPD_Strength > 20
				}
			}
		}
		priority = 100
		visible = {
			GER = {
				has_civil_war = no
			}
		}
		days_remove = 90

		fire_only_once = yes

		cost = 200
		complete_effect = {
			#ger gets event
			GER = {
				country_event = {
					id = denmark.9
					hours = 0
				}
			}
		}

		remove_effect = {
			GER = {
				set_country_flag = den_kpd_revolution
				random_owned_state = {
					limit = {
						has_state_flag = den_kpd_established
						NOT = {
							state = 763	#isolated in kÃ¶nigsberg
						}
					}
					prioritize = {
						56 58
					}
					GER = {
						set_variable = {
							ger_revolution_origin = PREV
						}
					}
				}
				set_temp_variable = {
					temp_kpd_strength = DEN.DEN_KPD_Strength
				}
				divide_temp_variable = {
					temp_kpd_strength = 100
				}
				start_civil_war = {
					ideology = communism
					size = GER.temp_kpd_strength
					capital = GER.ger_revolution_origin
					keep_political_leader = no
					keep_political_party_members = no
				}
			}
			random_other_country = {
				limit = {
					original_tag = GER
					has_government = communism
				}
				DEN = {
					add_to_war = {
						targeted_alliance = PREV
						enemy = GER
						hostility_reason = asked_to_join
					}
					if = {
						limit = {
							has_dlc = "Together for Victory"
						}
						set_autonomy = {
							target = PREV
							autonomy_state = autonomy_dominion
							end_wars = no
							end_civil_wars = no
						}
					}
					else = {
						puppet = PREV
					}
				}
			}
		}

	}

}
#For now unfitting
#DEN_communist_organisation = {
#	
#	### <> The Union <> ###
#	den_rally_the_light_industrial_workers = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 1
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_union = yes
#			country_event = denmark.51
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 1 }
#		}
#		modifier = {
#			consumer_goods_factor = 0.5
#			production_speed_buildings_factor = -0.33
#		}
#		days_remove = 45
#	}
#	den_rally_the_heavy_industrial_workers = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 2
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_union = yes
#			country_event = denmark.52
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 2 }
#		}
#		modifier = {
#			industrial_capacity_factory = -0.5
#			production_speed_arms_factory_factor = -0.5
#		}
#		days_remove = 45
#	}
#	den_rally_the_mining_workers = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 3
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_union = yes
#			country_event = denmark.53
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 3 }
#		}
#		modifier = {
#			local_resources_factor = -0.33
#		}
#		days_remove = 45
#	}
#	### <> The Party <> ###
#	den_invite_kpd_partisans = {
#		available = {
#			GER = {
#				OR = {
#					has_government = fascism
#					has_government = neutrality
#				}
#			}
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 4
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {	
#			den_strengthen_party = yes	
#			country_event = denmark.61	
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 4 }
#		}
#		modifier = {
#			
#		}
#		days_remove = 45
#	}
#	den_urban_demonstrations = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 5
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {	
#			den_strengthen_party = yes
#			country_event = denmark.62	
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 5 }
#		}
#		modifier = {
#			consumer_goods_factor = 0.2
#		}
#		days_remove = 45
#	}
#	den_rally_the_sailors = {
#		available = {
#			
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 6
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_party = yes
#			country_event = denmark.63
#		}
#		modifier = {
#			experience_gain_navy_factor = -1
#			naval_speed_factor = -0.80
#			industrial_capacity_dockyard = -0.5
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 6 }
#		}
#		days_remove = 45
#	}
#	den_rally_college_students = {
#		available = {
#			has_completed_focus = DEN_Expand_the_Copenhagen_University
#			custom_trigger_tooltip = {
#				tooltip = den_com_other_action_taken_tt
#				NOT = {
#					check_variable = {
#						last_comm_action = 7
#					}
#				}
#			}
#		}
#		fire_only_once = no
#		visible = {
#			has_completed_focus = DEN_Organize_Nationwide_Strikes
#		}
#		complete_effect = {
#			den_strengthen_party = yes
#			country_event = denmark.64
#		}
#		remove_effect = {
#			set_variable = { last_comm_action = 7 }
#		}
#		modifier = {
#			research_speed_factor = -0.1
#		}
#		days_remove = 45
#	}
#}
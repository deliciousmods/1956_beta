#Category allowed for JAP
JAP_intervene_in_china = {

	JAP_china_step_up_war_effort = {

		icon = jap_conquer_china

		visible = {
			JAP_has_idea_JAP_intervene_in_china = yes
			any_enemy_country = {
				is_literally_china = yes
			}
		}

		fire_only_once = no

		ai_will_do = {
			factor = 25
			modifier = {
				has_war_with = USA
				factor = 10 #screw it, kill everything
			}
		}
		modifier = {
			command_power_gain = -0.25
		}

		days_remove = 14
		days_re_enable = 30
	
		cost = 25

		complete_effect = {
			if = {
				limit = {
					USA = {
						has_war = no
					}
				}
				USA = { add_war_support = 0.025 }
			}
			JAP_intervene_in_china_level_down = yes
		}
	}

	JAP_ichi_go = {

		icon = jap_conquer_china

		available = {	
			event_target:WTT_current_china_leader = {
				has_capitulated = no
				exists = yes
			}
		}

		visible = {
			has_completed_focus = JAP_secure_china
			any_enemy_country = {
				is_literally_china = yes
			}
			event_target:WTT_current_china_leader = {
				NOT = { is_puppet_of = JAP }
			}
		}

		fire_only_once = yes

		ai_will_do = {
			factor = 1
			modifier = {
				is_historical_focus_on = yes
				date < 1944.1.1
				controls_state = 609 #East Heibei, to ensure that Japan hasn't been kicked off the mainland
				factor = 0
			}
		}

		cost = 50

		complete_effect = {
			if = {
				limit = {
					USA = {
						has_war = no
					}
				}
				USA = { add_war_support = 0.1 }
			}
			add_ideas = JAP_ichi_go
			activate_mission_tooltip = JAP_conquer_china
			set_country_flag = JAP_conquer_china_activate
		}
	}

	JAP_conquer_china = {

		icon = jap_conquer_china

		available = {
			event_target:WTT_current_china_leader = {
				OR = {
					has_capitulated = yes
					exists = no
					is_subject_of = ROOT
				}
			}
		}

		visible = {
			JAP_has_idea_JAP_intervene_in_china = yes
			any_enemy_country = {
				is_literally_china = yes
			}
		}

		activation = {
			has_country_flag = JAP_conquer_china_activate
		}

		fire_only_once = yes

		is_good = no

		days_mission_timeout = 360
		
		timeout_effect = {
			add_stability = -0.05
			add_war_support = -0.15
		}

		complete_effect = {
			add_stability = 0.03
			add_war_support = 0.07
		}
	}

	
}

JAP_interservice_rivalry = {
	JAP_steel_for_guns = {

		icon = generic_tank

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_steel_for_ships
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_steel_for_ships
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_army = yes
			set_country_flag = JAP_steel_for_guns
		}
	}
	JAP_steel_for_ships = {

		icon = generic_naval

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_steel_for_guns
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_steel_for_guns
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 5
		}
		complete_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_navy = yes
			set_country_flag = JAP_steel_for_ships
		}
	}
	JAP_prioritize_army_aircraft_construction = {

		icon = generic_air

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_prioritize_naval_aircraft_construction
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_prioritize_naval_aircraft_construction
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			add_ideas = JAP_prioritize_army_aircraft_construction
			JAP_interservice_rivalry_towards_army = yes
			set_country_flag = JAP_prioritize_army_aircraft_construction
		}
	}
	JAP_prioritize_naval_aircraft_construction = {

		icon = generic_naval

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_prioritize_army_aircraft_construction
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_prioritize_army_aircraft_construction
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			add_ideas = JAP_prioritize_naval_aircraft_construction
			JAP_interservice_rivalry_towards_navy = yes
			set_country_flag = JAP_prioritize_naval_aircraft_construction
		}
	}
	JAP_everybody_serves = {

		icon = generic_military

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_draft_exemptions
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_draft_exemptions
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		modifier = {
			conscription = 0.02
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_army = yes
			set_country_flag = JAP_everybody_serves
		}
	}
	JAP_draft_exemptions = {

		icon = generic_naval

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_everybody_serves
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_everybody_serves
			}
		}
		cost = 30
		days_remove = -1
		fire_only_once = yes
		ai_will_do = {
			factor = 3
		}
		modifier = {
			industrial_capacity_factory = 0.05
			industrial_capacity_dockyard = 0.05
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_navy = yes
			set_country_flag = JAP_draft_exemptions
		}
	}
	JAP_raiding_regiments = {

		icon = generic_intelligence_operation

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_special_air_landing_force
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_special_air_landing_force
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		modifier = {
			special_forces_cap = 0.02
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			set_country_flag = JAP_raiding_regiments
			JAP_interservice_rivalry_towards_army = yes
		}
	}
	JAP_special_air_landing_force = {

		icon = generic_naval

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_raiding_regiments
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_raiding_regiments
			}
		}
		cost = 30
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		modifier = {
			special_forces_attack_factor = 0.05 
			special_forces_defence_factor = 0.05
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			set_country_flag = JAP_special_air_landing_force
			JAP_interservice_rivalry_towards_navy = yes
		}
	}
	JAP_favor_army = {

		icon = generic_tank

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			AND = {
				OR = { 
					has_country_flag = JAP_raiding_regiments 
					has_country_flag = JAP_special_air_landing_force
				}
				OR = { 
					has_country_flag = JAP_everybody_serves
					has_country_flag = JAP_draft_exemptions
				}
				OR = { 
					has_country_flag = JAP_prioritize_naval_aircraft_construction
					has_country_flag = JAP_prioritize_army_aircraft_construction
				}
				OR = { 
					has_country_flag = JAP_steel_for_guns
					has_country_flag = JAP_steel_for_ships
				}
			}
			
		}
		visible = {
			AND = {
				OR = { 
					has_country_flag = JAP_raiding_regiments 
					has_country_flag = JAP_special_air_landing_force
				}
				OR = { 
					has_country_flag = JAP_everybody_serves
					has_country_flag = JAP_draft_exemptions
				}
				OR = { 
					has_country_flag = JAP_prioritize_naval_aircraft_construction
					has_country_flag = JAP_prioritize_army_aircraft_construction
				}
				OR = { 
					has_country_flag = JAP_steel_for_guns
					has_country_flag = JAP_steel_for_ships
				}
			}
		}
		cost = 30
		fire_only_once = yes
		ai_will_do = {
			factor = 1
		}
		
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_army = yes
		}
	}
	JAP_favor_navy = {

		icon = generic_naval

		available = { 
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			AND = {
				OR = { 
					has_country_flag = JAP_raiding_regiments 
					has_country_flag = JAP_special_air_landing_force
				}
				OR = { 
					has_country_flag = JAP_everybody_serves
					has_country_flag = JAP_draft_exemptions
				}
				OR = { 
					has_country_flag = JAP_prioritize_naval_aircraft_construction
					has_country_flag = JAP_prioritize_army_aircraft_construction
				}
				OR = { 
					has_country_flag = JAP_steel_for_guns
					has_country_flag = JAP_steel_for_ships
				}
			}
			
		}
		visible = {
			AND = {
				OR = { 
					has_country_flag = JAP_raiding_regiments 
					has_country_flag = JAP_special_air_landing_force
				}
				OR = { 
					has_country_flag = JAP_everybody_serves
					has_country_flag = JAP_draft_exemptions
				}
				OR = { 
					has_country_flag = JAP_prioritize_naval_aircraft_construction
					has_country_flag = JAP_prioritize_army_aircraft_construction
				}
				OR = { 
					has_country_flag = JAP_steel_for_guns
					has_country_flag = JAP_steel_for_ships
				}
			}
		}
		cost = 30
		fire_only_once = yes
		ai_will_do = {
			factor = 1
		}
		
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_navy = yes
		}
	}
}

foreign_politics = {
	JAP_sue_for_peace_CHI = {

		allowed = {
			original_tag = JAP
		}
		
		#added otherwise they surrender immeditaly in case of a second war
		fire_only_once = yes 

		available = {
			FROM = { 
				surrender_progress < 0.2 # if they are losing, lets not allow it
			}
			custom_trigger_tooltip = {
				tooltip = JAP_sue_for_peace_TT
				NOT = {
					controls_state = 525
					controls_state = 527
					controls_state = 917
					controls_state = 918
					controls_state = 919
					controls_state = 920
				}
				NOT = {
					any_of = {
						array = CHI.core_states
						var:v = {
							NOT = {
								state = 524
							}
							controller = {
								OR = {
									tag = JAP
									AND = {
										is_subject_of = JAP
										OR = {
											tag = MEN
											tag = MAN
										}
									}
								}
							}
						}
					}
				}
				MAN = {
					OR = {
						exists = no
						NOT = {
							is_subject_of = JAP
						}
						has_capitulated = yes
					}
				}
			}
		}

		target_array = enemies

		target_trigger = {
			#Target is FROM
			FROM = {
				tag = event_target:WTT_current_china_leader
				has_war_with = ROOT
			}
		}

		visible = {
			is_subject = no
			FROM = { exists = yes }
			any_enemy_country = {
				is_literally_china = yes
			}
			any_of = { #hasnt already lost their chinese territories
				array = CHI.core_states
				var:v = {
					owner = {
						OR = {
							tag = JAP
							is_subject_of = JAP
						}
					}
				}
			}
		}

		cost = 0

		ai_will_do = {
			factor = 400
		}

		complete_effect = {
			event_target:WTT_current_china_leader = {
				country_event = { id = wtt_japan.126 days = 1 }
			}
		}
	}

	JAP_sue_for_peace_MAN = {

		allowed = {
			original_tag = JAP
		}
		
		#added otherwise they surrender immeditaly in case of a second war
		fire_only_once = yes 

		available = {
			FROM = { 
				surrender_progress < 0.2 # if they are losing, lets not allow it
			}
			custom_trigger_tooltip = {
				tooltip = JAP_sue_for_peace_TT
				NOT = {
					controls_state = 525
					controls_state = 527
					controls_state = 917
					controls_state = 918
					controls_state = 919
					controls_state = 920
				}
				NOT = {
					any_of = {
						array = CHI.core_states
						var:v = {
							NOT = {
								state = 524
							}
							controller = {
								OR = {
									tag = JAP
									AND = {
										is_subject_of = JAP
										tag = MEN
									}
								}
							}
						}
					}
				}
			}
		}

		targets = { MAN }

		target_trigger = {
			#Target is FROM
			FROM = {
				tag = MAN
				has_war_with = ROOT
			}
		}

		visible = {
			FROM = { exists = yes }
			has_war_with = FROM
			NOT = { has_global_flag = JAP_offered_MAN_peace }
		}

		cost = 0

		ai_will_do = {
			factor = 400
		}

		complete_effect = {
			MAN = {
				country_event = { id = wtt_japan.129 days = 1 }
			}
			set_global_flag = JAP_offered_MAN_peace #prevent repeat spam
		}
	}

	JAP_sue_for_peace_nuke = {

		allowed = {
			original_tag = JAP
		}
		available = {
			has_global_flag = JAP_nuke_1
			has_global_flag = JAP_nuke_2
			has_navy_size = { size < 40 }
			NOT = {
				controls_state = 526
				controls_state = 645
			}
		}

		visible = {
			has_war = yes
			has_global_flag = JAP_nuke_1
		}

		cost = 0

		days_remove = -1
		ai_will_do = {
			factor = 10
			modifier = {
				NOT = {
					controls_state = 525
					controls_state = 527
					controls_state = 917
					controls_state = 918
					controls_state = 919
					controls_state = 920
				}
				factor = 10
			}
		}

		modifier = {
			forced_surrender_limit = -1.0
		}

		remove_effect = {

		}

		remove_trigger = {
			has_war = no
		}
		complete_effect = {
			hidden_effect = {
				clr_global_flag = JAP_nuke_1
				clr_global_flag = JAP_nuke_2
			}
		}
	}
	JAP_sue_for_peace_nuke_mission = {
		available = {
			has_global_flag = JAP_nuke_1
			has_global_flag = JAP_nuke_2
		}

		visible = {
			NOT = {
				OR = {
					controls_state = 536
					controls_state = 533
					controls_state = 534
					controls_state = 532
					controls_state = 282
					controls_state = 530
					controls_state = 531
					controls_state = 528
					controls_state = 529
				}
			}
		}

		modifier = {
			
		}

		days_mission_timeout = 720
		fire_only_once = yes

		activation = {
			has_tech = nukes
			has_war_with = JAP
		}

		complete_effect = {
			JAP = {
				unlock_decision_tooltip = JAP_sue_for_peace_nuke
			}
		}
	}

	JAP_request_soviet_support = {

		icon = generic_prepare_civil_war

		available = {
		}

		visible = {
			tag = JAP
			has_civil_war = yes
			has_government = communism
			SOV = {
				has_government = communism
				has_civil_war = no
			}
		}

		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			SOV = { country_event = { id = wtt_japan.118 } }
		}
	}
}

#Category allowed for JAP
#Not visible if puppet
JAP_southern_expansion = {

	JAP_pressure_france = { 
		icon = eng_trade_unions_demand
		available = {
			16 = { NOT = { is_controlled_by = FRA } } #Paris has fallen
			286 = { 
				CONTROLLER = { 
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				} 
			}
			927 = { 
				CONTROLLER = { 
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				} 
			}
			928 = { 
				CONTROLLER = { 
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				} 
			}
			670 = { 
				CONTROLLER = { 
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				} 
			}
			671 = { 
				CONTROLLER = { 
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				} 
			}
			926 = { 
				CONTROLLER = { 
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				} 
			}
			924 = { 
				CONTROLLER = { 
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				} 
			}
			custom_trigger_tooltip = {
				tooltip = demand_indochina_focus_tt
				NOT = { has_war_with = FRA }
				NOT = { is_in_faction_with = FRA }
				OR = {
					286 = { 
						CONTROLLER = { 
							OR = { 
								tag = FRA 
								tag = VIC
								is_subject_of = FRA
								is_subject_of = VIC 
							} 
						}
					}
					927 = { 
						CONTROLLER = { 
							OR = { 
								tag = FRA 
								tag = VIC
								is_subject_of = FRA
								is_subject_of = VIC 
							} 
						}
					}
					928 = { 
						CONTROLLER = { 
							OR = { 
								tag = FRA 
								tag = VIC
								is_subject_of = FRA
								is_subject_of = VIC 
							} 
						}
					}
					670 = { 
						CONTROLLER = { 
							OR = { 
								tag = FRA 
								tag = VIC 
								is_subject_of = FRA
								is_subject_of = VIC
							} 
						}
					}
					671 = { 
						CONTROLLER = { 
							OR = { 
								tag = FRA 
								tag = VIC 
								is_subject_of = FRA
								is_subject_of = VIC
							} 
						}
					}
					926 = { 
						CONTROLLER = { 
							OR = { 
								tag = FRA 
								tag = VIC
								is_subject_of = FRA
								is_subject_of = VIC 
							} 
						}
					}
					924 = { 
						CONTROLLER = { 
							OR = { 
								tag = FRA 
								tag = VIC
								is_subject_of = FRA
								is_subject_of = VIC 
							} 
						}
					}
				}
			}
		}

		visible = {
			has_completed_focus = JAP_strike_south_doctrine
		}

		fire_only_once = yes

		cost = 75

		ai_will_do = {
			factor = 100	#do it more often instead of 20
			modifier = {
				factor = 0
				FRA = { 
					has_war = no 
					OR = {
						controls_state = 671 #control check
						671 = { CONTROLLER = { is_subject_of = FRA } }
					}
				}
			}
			modifier = { #China war is going poorly. Don't fight allies
				factor = 0
				AND = {
					JAP = { has_war_with = CHI }
					CHI = {
						surrender_progress < 0.05
					}
					FRA = {
						is_in_faction_with = ENG
						OR = { #control check
							controls_state = 286
							286 = { CONTROLLER = { is_subject_of = FRA } }
						}
					}
				}
			}
			modifier = {
				add = 1
				JAP = { has_war = no }
			}
			modifier = {
				factor = 8
				FRA = { 
					has_war = yes 
					OR = { #control check
						controls_state = 286
						286 = { CONTROLLER = { is_subject_of = FRA } }
					}
				} 
				OR = {
					16 = { NOT = { is_controlled_by = FRA } } #Paris
					strength_ratio = {
						tag = FRA
						ratio > 0.9
					}
				}
			}
			modifier = {
				add = 1
				FRA = { 
					has_capitulated = yes
					OR = { #control check
						controls_state = 286
						286 = { CONTROLLER = { is_subject_of = FRA } }
					}
				} 	
			}
		}

		complete_effect = {
			if = {
				limit = {
					FRA = {
						OR = {
							controls_state = 671
							671 = { CONTROLLER = { is_subject_of = FRA } }
							controls_state = 670
							670 = { CONTROLLER = { is_subject_of = FRA } }
							controls_state = 286
							286 = { CONTROLLER = { is_subject_of = FRA } }
							controls_state = 924
							924 = { CONTROLLER = { is_subject_of = FRA } }
							controls_state = 926
							926 = { CONTROLLER = { is_subject_of = FRA } }
							controls_state = 927
							927 = { CONTROLLER = { is_subject_of = FRA } }
							controls_state = 928
							928 = { CONTROLLER = { is_subject_of = FRA } }
						}
					}
				}
				FRA = { country_event = { id = france.1 } }
			}
			else_if = {
				limit = {
					VIC = {
						OR = {
							controls_state = 671
							controls_state = 670
							controls_state = 286
							controls_state = 924
							controls_state = 926
							controls_state = 927
							controls_state = 928
							671 = { CONTROLLER = { is_subject_of = VIC } }
							670 = { CONTROLLER = { is_subject_of = VIC } }
							286 = { CONTROLLER = { is_subject_of = VIC } }
							924 = { CONTROLLER = { is_subject_of = VIC } }
							926 = { CONTROLLER = { is_subject_of = VIC } }
							927 = { CONTROLLER = { is_subject_of = VIC } }
							928 = { CONTROLLER = { is_subject_of = VIC } }
						}
					}
				}
				VIC = { country_event = { id = france.1 } }
			}
		}
	}
}

#Category allowed for JAP
#Visible when has completed JAP_pacific_guardian focus.
#Visible if independent
JAP_pacific_guardian = {

	JAP_release_korea = {

		icon = generic_independence

		available = {
			country_exists = KOR
			country_exists = NKR
		}

		days_mission_timeout = 180

		fire_only_once = yes
		is_good = no 
		activation = {
			has_completed_focus = JAP_the_korean_question
			has_full_control_of_state = 525
			has_full_control_of_state = 527
			has_full_control_of_state = 917
			has_full_control_of_state = 918
			has_full_control_of_state = 919
			has_full_control_of_state = 920
			KOR = { exists = no }
			NKR = { exists = no }
		}

		complete_effect = {
			add_political_power = 50
		}
		timeout_effect = {
			add_stability = -0.1 #naughty
		}
	}

	JAP_guardian_of_INS = {

		icon = jap_pacific_guardian

		available = {
			HOL = {
				#has_capitulated = yes
			}
			"INS" = {
				is_puppet_of = HOL
			}
		}

		fire_only_once = yes


		modifier = {

		}

		days_remove = 0
		days_re_enable = 0

		cost = 50

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			HOL = { country_event = { id = wtt_japan.1 } }
		}
	}

	JAP_guardian_of_MAL = {

		icon = jap_pacific_guardian

		available = {
			ENG = {
				#has_capitulated = yes
			}
			MAL = {
				is_puppet_of = ENG
			}
		}

		fire_only_once = yes


		modifier = {

		}

		days_remove = 0
		days_re_enable = 0

		cost = 50

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			ENG = { country_event = { id = wtt_japan.1 } }
		}
	}

	JAP_guardian_of_indochina = {

		icon = jap_pacific_guardian

		available = {
			OR = {
				FRA = {
					#has_capitulated = yes
					OR = {
						has_full_control_of_state = 670
						has_full_control_of_state = 671
						has_full_control_of_state = 286
						has_full_control_of_state = 741
						has_full_control_of_state = 924
						has_full_control_of_state = 925
						has_full_control_of_state = 926
						has_full_control_of_state = 927
						has_full_control_of_state = 928
					}
				}
				FRI = {
					OR = {
						is_puppet_of = FRA
						is_puppet = no
					}
					
					OR = {
						has_full_control_of_state = 670
						has_full_control_of_state = 671
						has_full_control_of_state = 286
						has_full_control_of_state = 741
						has_full_control_of_state = 924
						has_full_control_of_state = 925
						has_full_control_of_state = 926
						has_full_control_of_state = 927
						has_full_control_of_state = 928
					}
				}
			}
		}

		fire_only_once = yes


		modifier = {

		}

		days_remove = 0
		days_re_enable = 0

		cost = 50

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			if = {
				limit = {
					FRI = {
						is_puppet_of = FRA
					}	
				}
				FRA = { country_event = { id = wtt_japan.1 } }
			}
			
		}
	}
}
JAP_seek_alliances = {
	JAP_nordic_strategy = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_in_faction = no
			any_country = {
				OR = {
					original_tag = DEN
					original_tag = SWE
					original_tag = NOR
					original_tag = FIN
					original_tag = KAR
					original_tag = ICE
				}
				OR = {
					has_government = fascism
					has_government = neutrality
				}
				OR = {
					is_faction_leader = yes
					is_in_faction = no
				}
				is_major = yes
				has_capitulated = no				
				OR = {
					has_government = fascism
					is_ai = no
					has_war_with = SOV
					AND = {
						is_neighbor_of = SOV
						OR = {
							146 = {
								OWNER = {
									original_tag = SOV
								}
							}
							SOV = {
								has_completed_focus = SOV_claims_in_baltic
							}
							SOV = {
								has_completed_focus = SOV_secure_leningrad
							}
							SOV = {
								has_wargoal_against = PREV
							}							
						}
						
					}
					
				}
				if = {
					limit = {
						GER = {
							has_government = fascism
							is_faction_leader = yes
						}
					}
					NOT = {
						has_war_with = GER
					}
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			has_completed_focus = JAP_seek_alliances
		}

		target_trigger = {
			FROM = {
				OR = {
					original_tag = DEN
					original_tag = SWE
					original_tag = NOR
					original_tag = FIN
					original_tag = KAR
					original_tag = ICE
				}
				OR = {
					has_government = fascism
					has_government = neutrality
				}
				OR = {
					is_faction_leader = yes
					is_in_faction = no
				}
				is_major = yes
				has_capitulated = no				
				OR = {
					has_government = fascism
					is_ai = no
					has_war_with = SOV
					AND = {
						is_neighbor_of = SOV
						OR = {
							146 = {
								OWNER = {
									original_tag = SOV
								}
							}
							SOV = {
								has_completed_focus = SOV_claims_in_baltic
							}
							SOV = {
								has_completed_focus = SOV_secure_leningrad
							}
							SOV = {
								has_wargoal_against = PREV
							}							
						}
						
					}
					
				}
				if = {
					limit = {
						GER = {
							has_government = fascism
							is_faction_leader = yes
						}
					}
					NOT = {
						has_war_with = GER
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		ai_will_do = {
			factor = 2
			modifier = {
				GER = {
					NOT = {
						has_government = fascism
					}
				}
				factor = 4
			}
		}

		days_remove = 45

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			if = {
				limit = {
					any_other_country = {
						OR = {
							original_tag = DEN
							original_tag = SWE
							original_tag = NOR
							original_tag = FIN
							original_tag = KAR
							original_tag = ICE
						}
						OR = {
							has_government = fascism
							has_government = neutrality
						}
						is_faction_leader = yes
						is_major = yes
						has_capitulated = no
						NOT = { has_war_with = ROOT }
						NOT = {
							any_other_country = {
								is_in_faction_with = PREV
								has_war_with = ROOT
							}
						}
					}
				}
				random_other_country = {
					limit = {
						OR = {
							original_tag = DEN
							original_tag = SWE
							original_tag = NOR
							original_tag = FIN
							original_tag = KAR
							original_tag = ICE
						}
						
						OR = {
							has_government = fascism
							has_government = neutrality
						}
						is_faction_leader = yes
						is_major = yes
						has_capitulated = no
						NOT = { has_war_with = ROOT }
						NOT = {
							any_other_country = {
								is_in_faction_with = PREV
								has_war_with = ROOT
							}
						}
					}
					country_event = generic.2
				}								
			}
			if = {
				limit = {
					any_other_country = {
						OR = {
							original_tag = DEN
							original_tag = SWE
							original_tag = NOR
							original_tag = FIN
							original_tag = KAR
							original_tag = ICE
						}
						
						OR = {
							has_government = fascism
							has_government = neutrality
						}
						is_in_faction = no
						is_major = yes
						has_capitulated = no
						NOT = { has_war_with = ROOT }
						NOT = {
							any_other_country = {
								is_in_faction_with = PREV
								has_war_with = ROOT
							}
						}
					}
				}
				create_faction = JAP_nippon_nordic_friendship_treaty
				random_other_country = {
					limit = {
						OR = {
							original_tag = DEN
							original_tag = SWE
							original_tag = NOR
							original_tag = FIN
							original_tag = KAR
							original_tag = ICE
						}
						OR = {
							has_government = fascism
							has_government = neutrality
						}
						is_in_faction = no
						is_major = yes
						has_capitulated = no
						NOT = { has_war_with = ROOT }
						NOT = {
							any_other_country = {
								is_in_faction_with = PREV
								has_war_with = ROOT
							}
						}
					}
					country_event = generic.5
					add_opinion_modifier = { target = ROOT modifier = huge_increase }
					reverse_add_opinion_modifier = {
						target = ROOT
						modifier = huge_increase
					}
				}	
			}					
			else = {
				set_rule = { can_create_factions = yes }
			}
		}
	}
	
	JAP_technological_exchange = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_in_faction = no
			any_other_country = {
				has_government = fascism
				is_faction_leader = yes
				is_major = yes
				has_capitulated = no
				NOT = { has_war_with = ROOT }
				NOT = {
					any_other_country = {
						is_in_faction_with = PREV
						has_war_with = ROOT
					}
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			has_completed_focus = JAP_seek_alliances
		}

		target_trigger = {
			FROM = {
				OR = {	#previously allowed any ideology including communist when Germany was alt-hist
					has_government = fascism
					has_government = neutrality
				}
				is_faction_leader = yes
				is_major = yes
				has_capitulated = no
				NOT = { has_war_with = ROOT }
				NOT = {
					any_other_country = {
						is_in_faction_with = PREV
						has_war_with = ROOT
					}
				}
				OR = {	#alliance borders SOV if SOV is still a valid enemy

					#SOV is not valid enemy, ignore bordering them as a condition
					is_in_faction_with = SOV
					SOV = {
						exists = no
					}
					NOT = {
						any_neighbor_country = {
							original_tag = SOV
						}
					}

					#SOV is a valid enemy (otherwise OR already evaluated as true), check if the target can reach them
					any_owned_state = {
						any_neighbor_state = {
							owner = {
								OR = {
									original_tag = SOV
									is_ally_with = SOV
								}
							}
						}
					}
					any_allied_country = {
						any_owned_state = {
							any_neighbor_state = {
								owner = {
									OR = {
										original_tag = SOV
										is_ally_with = SOV
									}
								}
							}
						}
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		ai_will_do = {
			factor = 5
		}

		days_remove = 45

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			FROM = {
				country_event = generic.2
			}
		}
	}
	
	JAP_side_with_the_balkan_league_against_the_ussr = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_in_faction = no
			any_country = {
				OR = {
					original_tag = TUR
					original_tag = YUG
					original_tag = ROM
				}
				AND = {
					is_faction_leader = yes
					has_war_with = SOV
					NOT = {
						has_war_with = ROOT
					}
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			has_completed_focus = JAP_seek_alliances
		}

		target_trigger = {
			FROM = {
				OR = {
					original_tag = TUR
					original_tag = YUG
					original_tag = ROM
				}
				AND = {
					is_faction_leader = yes
					has_war_with = SOV
					NOT = {
						has_war_with = ROOT
					}
				}
			}
		}

		fire_only_once = yes
		cost = 50

		ai_will_do = {
			factor = 5
			modifier = {
				GER = {
					NOT = {
						has_government = fascism
					}
				}
				factor = 4
			}
		}

		days_remove = 45

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			if = {
				limit = {
					YUG = {
						is_faction_leader = yes
						has_war_with = SOV
						NOT = {
							has_war_with = ROOT
						}
					}
				}
				YUG = {
					country_event = generic.2
				}								
			}						
			else_if = {
				limit = {
					ROM = {
						is_faction_leader = yes
						has_war_with = SOV
						NOT = {
							has_war_with = ROOT
						}						
					}
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						OR = {
							is_in_faction_with = TUR
							is_in_faction_with = ROM
							is_in_faction_with = YUG
						}
						NOT = {
							has_war_with = ROOT
						}						
					}
					country_event = generic.2
				}
			}
			else_if = {
				limit = {
					TUR = {
						is_faction_leader = yes
						has_war_with = SOV
						NOT = {
							has_war_with = ROOT
						}						
					}
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						OR = {
							is_in_faction_with = TUR
							is_in_faction_with = ROM
							is_in_faction_with = YUG
						}
						NOT = {
							has_war_with = ROOT
						}						
					}
					country_event = generic.2
				}
			}
		}
	}
	
	JAP_a_new_spirit_for_an_old_alliance = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_in_faction = no
			ENG = {
				is_faction_leader = yes
				OR = {
					has_government = neutrality
					has_government = fascism
				}
				
				is_puppet = no
				has_capitulated = no
				NOT = {
					has_war_with = ROOT
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			has_completed_focus = JAP_seek_alliances
		}

		target_trigger = {
			FROM = {
				original_tag = ENG
				is_faction_leader = yes
				OR = {
					has_government = neutrality
					has_government = fascism
				}
				has_capitulated = no
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		fire_only_once = yes
		cost = 50

		ai_will_do = {
			factor = 5
			modifier = {
				GER = {
					NOT = {
						has_government = fascism
					}
				}
				factor = 10
			}
		}

		days_remove = 45

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			if = {
				limit = {
					ENG = {
						is_faction_leader = yes
					}
				}
				ENG = {
					country_event = generic.2
				}								
			}	
			if = {
				limit = {
					any_other_country = {
						original_tag = ENG
						
						OR = {
							has_government = fascism
							has_government = neutrality
						}
						is_in_faction = no
						is_major = yes
						has_capitulated = no
						NOT = { has_war_with = ROOT }
						NOT = {
							any_other_country = {
								is_in_faction_with = PREV
								has_war_with = ROOT
							}
						}
					}
				}
				create_faction = "Anglo-Japanese Friendship Treaty"
			}
		}
	}
	
	JAP_reinforce_cooperation_with_poland = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_in_faction = no
			POL = {
				is_faction_leader = yes
				has_war_with = SOV
				is_subject = no
				has_capitulated = no
				NOT = {
					has_war_with = ROOT
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			has_completed_focus = JAP_seek_alliances
		}

		target_trigger = {
			FROM = {
				original_tag = POL
				is_faction_leader = yes
				has_war_with = SOV
				is_subject = no
				has_capitulated = no
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		fire_only_once = yes
		cost = 50

		ai_will_do = {
			factor = 5
			modifier = {
				GER = {
					NOT = {
						has_government = fascism
					}
				}
				factor = 10
			}
		}

		days_remove = 45

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			if = {
				limit = {
					POL = {
						is_faction_leader = yes
					}
				}
				POL = {
					country_event = generic.2
				}								
			}	
		}
	}
}

JAP_alliance_expansion_plan = {
	JAP_invite_malaysia = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_faction_leader = yes
			MAL = {
				is_subject = no
				has_capitulated = no
				is_in_faction = no
				exists = yes				
				NOT = {
					has_war_with = ROOT
				}
				OR = {
					has_government = democratic
					has_government = neutrality
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			is_faction_leader = yes
			has_completed_focus = JAP_expand_the_alliance
			NOT = {
				is_in_faction_with = MAL
			}
		}

		target_trigger = {
			FROM = {
				original_tag = MAL
			}
		}

		fire_only_once = yes
		cost = 25

		ai_will_do = {
			factor = 10
		}

		days_remove = 30

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			MAL = {
				country_event = generic.5
			}
		}
	}

	JAP_invite_canada = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_faction_leader = yes
			CAN = {
				is_subject = no
				has_capitulated = no
				is_in_faction = no
				exists = yes				
				NOT = {
					has_war_with = ROOT
				}
				has_government = democratic
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			is_faction_leader = yes
			has_completed_focus = JAP_expand_the_alliance
			NOT = {
				is_in_faction_with = CAN
			}
		}

		target_trigger = {
			FROM = {
				original_tag = CAN
			}
		}

		fire_only_once = yes
		cost = 25

		ai_will_do = {
			factor = 10
		}

		days_remove = 30

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			CAN = {
				country_event = generic.5
			}
		}
	}

	JAP_invite_new_zealand = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_faction_leader = yes
			NZL = {
				has_government = democratic
				is_subject = no
				has_capitulated = no
				is_in_faction = no
				exists = yes				
				NOT = {
					has_war_with = ROOT
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			is_faction_leader = yes
			has_completed_focus = JAP_expand_the_alliance
			NOT = {
				is_in_faction_with = NZL
			}
		}

		target_trigger = {
			FROM = {
				original_tag = NZL
			}
		}

		fire_only_once = yes
		cost = 25

		ai_will_do = {
			factor = 10
		}

		days_remove = 30

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			NZL = {
				country_event = generic.5
			}
		}
	}

	JAP_invite_the_philippines = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_faction_leader = yes
			PHI = {
				is_subject = no
				has_capitulated = no
				is_in_faction = no
				exists = yes				
				NOT = {
					has_war_with = ROOT
				}
				OR = {
					has_government = democratic
					has_government = neutrality
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			is_faction_leader = yes
			has_completed_focus = JAP_expand_the_alliance
			NOT = {
				is_in_faction_with = PHI
			}
		}

		target_trigger = {
			FROM = {
				original_tag = PHI
			}
		}

		fire_only_once = yes
		cost = 25

		ai_will_do = {
			factor = 10
		}

		days_remove = 30

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			PHI = {
				country_event = generic.5
			}
		}
	}

	JAP_invite_indonesia = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_faction_leader = yes
			INS = {
				is_subject = no
				has_capitulated = no
				is_in_faction = no
				exists = yes				
				NOT = {
					has_war_with = ROOT
				}
				OR = {
					has_government = democratic
					has_government = neutrality
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			is_faction_leader = yes
			has_completed_focus = JAP_expand_the_alliance
			NOT = {
				is_in_faction_with = INS
			}
		}

		target_trigger = {
			FROM = {
				original_tag = INS
			}
		}

		fire_only_once = yes
		cost = 25

		ai_will_do = {
			factor = 10
		}

		days_remove = 30

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			INS = {
				country_event = generic.5
			}
		}
	}

	JAP_invite_australia = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_faction_leader = yes
			AST = {
				has_government = democratic
				is_subject = no
				has_capitulated = no
				is_in_faction = no
				exists = yes				
				NOT = {
					has_war_with = ROOT
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			is_faction_leader = yes
			has_completed_focus = JAP_expand_the_alliance
			NOT = {
				is_in_faction_with = AST
			}
		}

		target_trigger = {
			FROM = {
				original_tag = AST
			}
		}

		fire_only_once = yes
		cost = 25

		ai_will_do = {
			factor = 10
		}

		days_remove = 30

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			AST = {
				country_event = generic.5
			}
		}
	}

	JAP_alliance_with_siam = {

		icon = hol_exchange_intelligence_data

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_faction_leader = yes
			SIA = {
				is_subject = no
				has_capitulated = no
				is_in_faction = no
				exists = yes				
				NOT = {
					has_war_with = ROOT
				}
				OR = {
					has_government = democratic
					has_government = neutrality
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			is_faction_leader = yes
			has_completed_focus = JAP_expand_the_alliance
			NOT = {
				is_in_faction_with = SIA
			}
		}

		target_trigger = {
			FROM = {
				original_tag = SIA
			}
		}

		fire_only_once = yes
		cost = 25

		ai_will_do = {
			factor = 10
		}

		days_remove = 30

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			SIA = {
				country_event = generic.5
			}
			add_ai_strategy = {
				type = protect
				id = "SIA"
				value = 100
			}
		}
	}

	JAP_invite_the_pacific_states = {

		icon = generic_decision

		allowed = {
			original_tag = JAP
		}

		available = {
			has_capitulated = no
			is_subject = no
			is_faction_leader = yes
			any_other_country = {
				OR = {
					original_tag = PNG
					original_tag = GUM
					original_tag = HAW
					original_tag = SOL
					original_tag = FSM
					original_tag = TAH
					original_tag = SAM
					original_tag = TON
				}
				exists = yes
				is_subject = no
				has_capitulated = no
				is_in_faction = no
				NOT = {
					has_war_with = ROOT
				}
				OR = {
					has_government = democratic
					has_government = neutrality
				}
			}
			NOT = {
				has_idea = ROOT_diplomatic_effort
			}
		}

		visible = {
			is_subject = no
			is_faction_leader = yes
			has_completed_focus = JAP_expand_the_alliance
			NOT = {
				AND = {
					is_in_faction_with = PNG
					is_in_faction_with = GUM
					is_in_faction_with = HAW
					is_in_faction_with = SOL
					is_in_faction_with = FSM
					is_in_faction_with = TAH
					is_in_faction_with = SAM
					is_in_faction_with = TON
				}
			}
		}

		fire_only_once = yes
		cost = 50

		ai_will_do = {
			factor = 5
		}

		days_remove = 60

		complete_effect = {
			add_ideas = ROOT_diplomatic_effort
		}

		remove_effect = {
			remove_ideas = ROOT_diplomatic_effort
			every_other_country = {
				limit = {
					OR = {
						original_tag = PNG
						original_tag = GUM
						original_tag = HAW
						original_tag = SOL
						original_tag = FSM
						original_tag = TAH
						original_tag = SAM
						original_tag = TON
					}
					exists = yes
					is_subject = no
					has_capitulated = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
					}
					OR = {
						has_government = democratic
						has_government = neutrality
					}
				}
				country_event = generic.5
			}
		}
	}
}

JAP_colonial_independence = {
	JAP_return_manchuria = {

		icon = generic_independence

		allowed = {
			original_tag = JAP
		}

		available = {
			609 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			610 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			716 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			715 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			328 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			717 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			714 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			941 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			942 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			943 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			944 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			945 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			946 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			947 = {
				is_fully_controlled_by = controller
				CONTROLLER = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
		}

		visible = {
			has_completed_focus = JAP_liberate_manchuria
			609 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			610 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			716 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			715 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			328 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			717 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			714 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			941 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			942 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			943 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			944 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			945 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			946 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
			947 = {
				owner = {
					OR = {
						is_puppet_of = JAP
						original_tag = JAP
					}
				}
			}
		}

		fire_only_once = yes


		modifier = {

		}

		days_remove = 0
		days_re_enable = 0

		cost = 0

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			if = {
				limit = {
					country_exists = event_target:WTT_current_china_leader
				}
				event_target:WTT_current_china_leader = { 
					transfer_state = 609
					transfer_state = 610
					transfer_state = 716
					transfer_state = 715
					transfer_state = 328
					transfer_state = 717
					transfer_state = 714
					transfer_state = 761
					transfer_state = 745
					transfer_state = 612
					transfer_state = 611
					transfer_state = 941
					transfer_state = 942
					transfer_state = 943
					transfer_state = 944
					transfer_state = 945
					transfer_state = 946
					transfer_state = 947
					country_event = { id = wtt_japan.101 days = 1 }
					custom_effect_tooltip = JAP_liberate_manchuria_alliance_tt
				}
			}
			if = {
				limit = {
					country_exists = event_target:WTT_communist_china
					NOT = { country_exists = event_target:WTT_current_china_leader }
				}
				event_target:WTT_communist_china = { 
					transfer_state = 609
					transfer_state = 610
					transfer_state = 716
					transfer_state = 715
					transfer_state = 328
					transfer_state = 717
					transfer_state = 714
					transfer_state = 761
					transfer_state = 745
					transfer_state = 612
					transfer_state = 611
					transfer_state = 941
					transfer_state = 942
					transfer_state = 943
					transfer_state = 944
					transfer_state = 945
					transfer_state = 946
					transfer_state = 947
					country_event = { id = wtt_japan.101 days = 1 }
				}
			}
			if = {
				limit = {
					NOT = { country_exists = event_target:WTT_communist_china }
					NOT = { country_exists = event_target:WTT_current_china_leader }
				}
				random_other_country = {
					limit = {
						OR = {
							original_tag = GXC
							original_tag = YUN
							original_tag = XSM
							original_tag = SIK
							original_tag = SHX
							original_tag = MEN
						}
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
					transfer_state = 609
					transfer_state = 610
					transfer_state = 716
					transfer_state = 715
					transfer_state = 328
					transfer_state = 717
					transfer_state = 714
					transfer_state = 761
					transfer_state = 745
					transfer_state = 612
					transfer_state = 611
					transfer_state = 941
					transfer_state = 942
					transfer_state = 943
					transfer_state = 944
					transfer_state = 945
					transfer_state = 946
					transfer_state = 947
					country_event = { id = wtt_japan.101 days = 1 }
					custom_effect_tooltip = JAP_liberate_manchuria_alliance_tt
				}
			}
		}
	}
}

political_actions = {
	JAP_break_the_london_naval_treaty = {

		icon = generic_break_treaty

		allowed = {
			original_tag = JAP
		}

		available = {

		}

		visible = {
			has_idea = JAP_the_london_naval_treaty
			has_completed_focus = JAP_join_the_london_naval_treaty
		}

		fire_only_once = yes


		modifier = {

		}

		days_remove = 0
		days_re_enable = 0

		cost = 25

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
			remove_ideas = JAP_the_london_naval_treaty
			FRA = { add_opinion_modifier = { target = ROOT modifier = JAP_broke_the_london_naval_treaty } }
			USA = { add_opinion_modifier = { target = ROOT modifier = JAP_broke_the_london_naval_treaty } }
			ENG = { add_opinion_modifier = { target = ROOT modifier = JAP_broke_the_london_naval_treaty } }
			FRA = { remove_opinion_modifier = { target = ROOT modifier = JAP_join_the_london_naval_treaty } }
			USA = { remove_opinion_modifier = { target = ROOT modifier = JAP_join_the_london_naval_treaty } }
			ENG = { remove_opinion_modifier = { target = ROOT modifier = JAP_join_the_london_naval_treaty } }
			remove_opinion_modifier = { target = FRA modifier = JAP_join_the_london_naval_treaty }
			remove_opinion_modifier = { target = USA modifier = JAP_join_the_london_naval_treaty }
			remove_opinion_modifier = { target = ENG modifier = JAP_join_the_london_naval_treaty }
		}
	}
}

operations = {
	
	JAP_tora_tora_tora = {
		allowed = {
			original_tag = JAP
		}
		
		icon = decision_generic_naval

		available = {
			OR = {
				has_war_with = HOL
				has_war_with = ENG
				has_war_with = USA
				has_war_with = FRA
			}
		}

		is_good = no
	
		fire_only_once = yes
	
		days_mission_timeout = 180
	
		activation = {
			has_completed_focus = JAP_strike_on_the_southern_resource_area
		}
		
		visible = {
			has_completed_focus = JAP_strike_on_the_southern_resource_area
		}
	
		complete_effect = {
			add_timed_idea = { idea = JAP_tora_tora_tora_idea days = 180 }
		}
	}


	#first border incident
	JAP_test_the_soviets = {
		icon = border_war
		allowed = {
			original_tag = JAP
		}

		available = {
			OR = {
				has_completed_focus = JAP_purge_the_kodoha_faction
				has_completed_focus = JAP_support_the_kodoha_faction
			}
			NOT = {
				has_war_with = SOV
				is_in_faction_with = SOV
			}
			918 = {
				any_neighbor_state = {
					is_controlled_by = SOV
				}
			}
		}

		visible = {
			NOT = {	#don't show if completed
				has_completed_focus = JAP_strengthen_civilian_government
				has_completed_focus = JAP_the_unthinkable_option
			}
			#NOT = {
			#	has_global_flag = JAP_kalkin_gol
			#}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 408
				state = 918
			} 
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 1
			modifier = {
				is_historical_focus_on = yes
				date < 1939.1.1
				factor = 0
			}
		}
		cost = 25
		days_remove = 30
		war_with_on_remove = SOV
		complete_effect = {
			JAP = {
				remove_resource_rights = 655
				remove_opinion_modifier = { target = SOV modifier = JAP_SOV_sakhalin_oil_agreement }
			}
			set_global_flag = JAP_test_soviet		
			918 = {
				save_event_target_as = JAP_SOV_attacker_state
				set_state_flag = border_incident_active
			}
			408 = {
				save_event_target_as = JAP_SOV_defender_state
				set_state_flag = border_incident_active
			}
			SOV = {
				country_event = { id = japan_border_conflict.1 days = 1 }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_warning_SOV }
			}
		}
		remove_effect = {
			activate_targeted_decision = { target = SOV decision = JAP_border_incident_forgotten }
			activate_targeted_decision = { target = SOV decision = JAP_escalate_incident_to_border_conflict_SOV }
		}
	}

	#Mission for defender warning that a conflict with FROM is coming
	JAP_border_conflict_warning_SOV = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			hidden_trigger = { always = no }
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			custom_effect_tooltip = escalation_possible_tooltip_for_defender
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				JAP = {
					add_doctrine_cost_reduction = {
						name = sov_jap_border_conflict_won
						category = land_doctrine
						cost_reduction = 0.5
					}
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						category = armor
						bonus = 1.0
					}
				}
			}
			hidden_effect = {
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_warning_SOV }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_escalation_warning_SOV }
			}
		}
	}

	#Mission for defender warning FROM can escalate to war at any point is coming
	JAP_border_conflict_escalation_warning_SOV = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			#var:ROOT.defender_state_vs_@FROM = {
			#	has_ROOT_at_least_1_div_in_current_state_scope = yes
			#}
			hidden_trigger = { always = no }
		}
		
		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no

		timeout_effect = {
			custom_effect_tooltip = from_cannot_escalate
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				JAP = {
					add_doctrine_cost_reduction = {
						name = sov_jap_border_conflict_won
						category = land_doctrine
						cost_reduction = 0.5
					}
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						category = armor
						bonus = 1.0
					}
				}
			}
		}
	}
	#Mission for attacker to escalate or incident is forgotten
	JAP_border_incident_forgotten = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			#var:ROOT.defender_state_vs_@FROM = {
			#	has_ROOT_at_least_1_div_in_current_state_scope = yes
			#}
			hidden_trigger = { always = no }
		}

		highlight_states = {
			highlight_state_targets = {
				state = 408
				state = 918
			} 
		}
		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			remove_targeted_decision = { target = SOV decision = JAP_escalate_incident_to_border_conflict_SOV }
			add_political_power = -100
			add_war_support = -0.1 #Shameful Display
			hidden_effect = {
				SOV = { remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalation_warning_SOV } }
				SOV = {
					918 = {
						clr_state_flag = border_incident_active
					}
					408 = {
						clr_state_flag = border_incident_active
					}
				}
			}
		}
	}

	#Decision to escalate incident on border with SOV to border conflict
	JAP_escalate_incident_to_border_conflict_SOV = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			918 = {
				OR = {
					is_fully_controlled_by = ROOT
					CONTROLLER = {
						is_subject_of = ROOT
					}
					CONTROLLER = {
						is_in_faction_with = ROOT
					}
				}
			}
			divisions_in_border_state = {
				state = 918
				border_state = 408
				size > 0
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 408
				state = 918
			} 
		}

		ai_will_do = {
			base = 10
			modifier = { 
				has_war = no
				factor = 10
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			remove_targeted_decision = { target = SOV decision = JAP_border_incident_forgotten }
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 918
					num_provinces = 4
					on_win = japan_border_conflict.2
					on_lose = japan_border_conflict.3
					on_cancel = japan_border_conflict.4
				}
				
				defender = {
					state = 408
					num_provinces = 4
					on_win = japan_border_conflict.3
					on_lose = japan_border_conflict.2
					on_cancel = japan_border_conflict.4
				}
			}
			SOV = {
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_time_until_cancelled }
			}
			activate_targeted_decision = { target = SOV decision = JAP_border_conflict_escalate_conflict }
			activate_targeted_decision = { target = SOV decision = JAP_border_conflict_time_until_cancelled }
		}
	}
	#Mission for attacker to win border war against FROM in X days
	JAP_border_conflict_time_until_cancelled = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			918 = { has_border_war = no }
			408 = { has_border_war = no }
		}
		
		highlight_states = {
			highlight_state_targets = {
				state = 408
				state = 918
			} 
		}

		ai_will_do = {
			base = 0
		}

		days_mission_timeout = 90
		is_good = no

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {

		}

		timeout_effect = {
			cancel_border_war = {
				defender = 408
				attacker = 918
			}
			hidden_effect = {
				remove_targeted_decision = { target = SOV decision = JAP_border_conflict_escalate_conflict }
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict }
			}
		}
	}

	#Decision to escalate conflict further
	JAP_border_conflict_escalate_conflict = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_states = {
			highlight_state_targets = {
				state = 408
				state = 918
			} 
		}

		cost = 200

		ai_will_do = {
			base = 0
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				set_border_war_data = {
					attacker = 918
					defender = 408
					defender_modifier = 0.15
					combat_width = 100
				}
			}
			else = {
				set_border_war_data = {
					attacker = 918
					defender = 408
					attacker_modifier = 0.15
					combat_width = 100
				}
			}
			SOV = {
				set_country_flag = {
					flag = WTT_border_conflict_escalate_to_war_cooldown_@ROOT
					days = 60
					value = 1
				}
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict }
			}
			set_country_flag = {
				flag = WTT_border_conflict_escalate_to_war_cooldown_@SOV
				days = 60
				value = 1
			}
			custom_effect_tooltip = in_60_days
			activate_targeted_decision = { target = SOV decision = JAP_border_conflict_escalate_to_war }
		}
	}

	#Decision to escalate conflict further
	JAP_border_conflict_escalate_to_war = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			NOT = { has_country_flag = WTT_border_conflict_escalate_to_war_cooldown_@FROM }
			has_border_war_with = FROM
		}

		highlight_states = {
			highlight_state_targets = {
				state = 408
				state = 918
			} 
		}

		cost = 150

		ai_will_do = {
			base = 0
		}

		days_remove = 15

		fire_only_once = yes #Reactivation handled in effect

		war_with_target_on_remove = yes

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				408 = { save_event_target_as = their_state }
				918 = { save_event_target_as = our_state }
			}
			else = {
				918 = { save_event_target_as = our_state }
				408 = { save_event_target_as = their_state }
			}
			SOV = {
				country_event = { id = japan_border_conflict.5 }
				hidden_effect = {
					remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_to_war }
				}
		 	}
		}

		remove_effect = {
			cancel_border_war = {
				dont_fire_events = yes
				defender = 408
				attacker = 918
			}
			declare_war_on = { target = FROM type = annex_everything }
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				918 = {
					clr_state_flag = border_incident_active
				}
				408 = {
					clr_state_flag = border_incident_active
				}
				
			}
			else = {
				FROM = {
					918 = {
						clr_state_flag = border_incident_active
					}
					408 = {
						clr_state_flag = border_incident_active
					}
				}
			}
		}
	}

	#Decision to back down from conflict
	JAP_border_conflict_back_out_of_conflict = {

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}
		highlight_states = {
			highlight_state_targets = {
				state = 408
				state = 918
			} 
		}

		ai_will_do = {
			base = 0
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				finalize_border_war = {
					attacker_win = yes
					attacker = 918
					defender = 408
				}
			}
			else = {
				finalize_border_war = {
					attacker = 918
					defender = 408
					defender_win = yes
				}
			}
		}
	}

	JAP_war_with_soviet_union = {

		icon = generic_ignite_civil_war

		allowed = {
			original_tag = JAP
		}

		available = {

		}

		visible = {
			is_in_faction_with = GER
			GER = { OR = { has_completed_focus = GER_mol_rib_pact has_completed_focus = GER_mol_rib_pact_vanilla } }
			GER = { NOT = { has_war_with = SOV } }
			NOT = { has_war_with = SOV }
			has_completed_focus = JAP_preemptive_war
		}
		fire_only_once = yes


		modifier = {

		}

		days_remove = 0
		days_re_enable = 0

		cost = 25

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
			declare_war_on = { target = SOV type = annex_everything }
			GER = { country_event = { id = wtt_japan.115 hours = 6 } }
		}
	}
}

prospect_for_resources = {

#  #  ##  ###  ### #  # ### ###  #  #     ###  ###  ##  ##  #  # ###   ##  ###      ##  ###  ###  ##  
## # #  # #  #  #  #  # #   #  # ## #     #  # #   #   #  # #  # #  # #  # #       #  # #  # #   #  # 
# ## #  # ###   #  #### ##  ###  # ##     ###  ##   #  #  # #  # ###  #    ##      #### ###  ##  #### 
#  # #  # #  #  #  #  # #   #  # #  #     #  # #     # #  # #  # #  # #  # #       #  # #  # #   #  # 
#  #  ##  #  #  #  #  # ### #  # #  #     #  # ### ##   ##   ##  #  #  ##  ###     #  # #  # ### #  # 

	#Below is visible when JAP_establish_the_northern_resource_area is completed
	JAP_develop_north_sakhalin_oil_deposits = { #655
		icon = oil

		highlight_states = {
			highlight_state_targets = {
				state = 655
			} 
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 655
			has_tech = excavation2
		}

		visible = {
			has_completed_focus = JAP_establish_the_northern_resource_area
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			655 = {
				add_resource = {
					type = oil
					amount = 8
				}
			}
		}
	}


 ##  ##  #  # ### #  # ### ###  #  #     ###  ###  ##  ##  #  # ###   ##  ###      ##  ###  ###  ##  
#   #  # #  #  #  #  # #   #  # ## #     #  # #   #   #  # #  # #  # #  # #       #  # #  # #   #  # 
 #  #  # #  #  #  #### ##  ###  # ##     ###  ##   #  #  # #  # ###  #    ##      #### ###  ##  #### 
  # #  # #  #  #  #  # #   #  # #  #     #  # #     # #  # #  # #  # #  # #       #  # #  # #   #  # 
##   ##   ##   #  #  # ### #  # #  #     #  # ### ##   ##   ##  #  #  ##  ###     #  # #  # ### #  # 

#623:0 "Luzon"
#627:0 "Mindanao"
#625:0 "Samar"
#725:0 "Nauru"

	#Below is visible when JAP_exploit_the_southern_resource_area is completed
	JAP_develop_luzon_chromium_deposits = { #623
		icon = chromium
		highlight_states = {
			highlight_state_targets = {
				state = 623
			} 
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 623
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			623 = {
				NOT = {
					has_state_flag = luzon_chromium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			623 = {
				add_resource = {
					type = chromium
					amount = 12
				}
				set_state_flag = luzon_chromium_developed
			}
		}
	}

	JAP_develop_mindanao_steel_deposits = { #627
		icon = steel

		highlight_states = {
			highlight_state_targets = {
				state = 627
			} 
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 627
			has_tech = excavation4
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			627 = {
				NOT = {
					has_state_flag = mindanao_steel_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			627 = {
				add_resource = {
					type = steel
					amount = 8
				}
				set_state_flag = mindanao_steel_developed
			}
		}
	}

	JAP_develop_samar_steel_deposits = { #625
		icon = steel

		highlight_states = {
			highlight_state_targets = {
				state = 625
			} 
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 625
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			625 = {
				NOT = {
					has_state_flag = samar_steel_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			625 = {
				add_resource = {
					type = steel
					amount = 6
				}
				set_state_flag = samar_steel_developed
			}
		}
	}

	JAP_develop_nauru_tungsten_deposits = { #725
		icon = tungsten

		allowed = {
			original_tag = JAP
		}

		highlight_states = {
			highlight_state_targets = {
				state = 725
			} 
		}

		available = {
			has_full_control_of_state = 725
			has_tech = excavation4
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			725 = {
				NOT = {
					has_state_flag = nauru_tungsten_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			725 = {
				add_resource = {
					type = tungsten
					amount = 4
				}
				set_state_flag = nauru_tungsten_developed
			}
		}
	}
	JAP_develop_tonkin_aluminium_deposits = { #671
		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 671
			has_tech = excavation4
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			671 = {
				NOT = {
					has_state_flag = tonkin_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			671 = {
				add_resource = {
					type = aluminium
					amount = 6
				}
				set_state_flag = tonkin_aluminium_developed
			}
		}
	}
	JAP_develop_singapore_aluminium_deposits = { #336
		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 336
			has_tech = excavation2
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			336 = {
				NOT = {
					has_state_flag = singapore_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			336 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
				set_state_flag = singapore_aluminium_developed
			}
		}
	}

 ##  #  # ### #  # ###  ## ###     ###  ###  ##  ##  #  # ###   ##  ###  ## 
#  # #  #  #  ## # #   #   #       #  # #   #   #  # #  # #  # #  # #   #   
#    ####  #  # ## ##   #  ##      ###  ##   #  #  # #  # ###  #    ##   #  
#  # #  #  #  #  # #     # #       #  # #     # #  # #  # #  # #  # #     # 
 ##  #  # ### #  # ### ##  ###     #  # ### ##   ##   ##  #  #  ##  ### ##  

#597:0 "Shandong"
#621:0 "Suiyuan"

	#Below is visible when JAP_develop_chinese_resources is completed
	JAP_develop_shandong_aluminium_deposits = { #597
		
		icon = aluminium

		highlight_states = {
			highlight_state_targets = {
				state = 597
			} 
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 597
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_develop_chinese_resources
			597 = {
				NOT = {
					has_state_flag = shandong_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			597 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
				set_state_flag = shandong_aluminium_developed
			}
		}
	}

	JAP_develop_suiyuan_steel_deposits = { #621
		
		icon = steel

		highlight_states = {
			highlight_state_targets = {
				state = 621
			} 
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 621
			has_tech = excavation2
		}

		visible = {
			has_completed_focus = JAP_develop_chinese_resources
			621 = {
				NOT = {
					has_state_flag = suiyuan_steel_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			621 = {
				add_resource = {
					type = steel
					amount = 8
				}
				set_state_flag = suiyuan_steel_developed
			}
		}
	}

	JAP_develop_yunnan_aluminium_deposits = { #325

		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 325
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_develop_chinese_resources
			325 = {
				NOT = {
					has_state_flag = yunnan_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			325 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
				set_state_flag = yunnan_aluminium_developed
			}
		}
	}
	JAP_develop_sichuan_aluminium_deposits = { #605

		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			has_full_control_of_state = 605
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_develop_chinese_resources
			605 = {
				NOT = {
					has_state_flag = sichuan_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			605 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
				set_state_flag = sichuan_aluminium_developed
			}
		}
	}
}
JAP_civilian_investment = {
	JAP_island_colonization = {
		icon = GFX_decision_generic_construction
		allowed = {
			original_tag = JAP
		}
	
		available = {
			num_of_civilian_factories_available_for_projects > 0
		}
	
		state_target = yes
	
		target_array = ROOT.owned_states
	
		target_trigger = {
			FROM = {
				is_fully_controlled_by = ROOT
				OR = {
					has_state_category = tiny_island
					has_state_category = small_island
				}
				impassable = no
			}
		}
	
		target_root_trigger = {
			original_tag = JAP
			has_completed_focus = JAP_island_investment
		}
	
		cost = 5
	
		days_remove = 120
	
		modifier = {
			civilian_factory_use = 1
		}
		complete_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = {			#no colonization from other island
						has_state_category = tiny_island
						has_state_category = small_island
					}
				}
				add_manpower = -1000
			}
			
		}
	
		remove_effect = {
			FROM = {
				add_manpower = 1000
				add_extra_state_shared_building_slots = 1
				if = {	#the order matters, otherwise category is improved twice
					limit = {
						has_state_category = small_island
					}
					set_state_category = rural
				}
				else_if = {
					limit = {
						has_state_category = tiny_island
					}
					set_state_category = small_island
				}
			}
		}
		
	}
}
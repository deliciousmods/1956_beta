YUG_yugoslav_reunification_category = {
	r56_unite_puppet_with_yug = {
	
		icon = generic_form_nation
	
		cost = 25

		ai_will_do = {
			factor = 0 
		}

		#days_remove = 1

        fire_only_once = yes
		
		priority = 1
		
		allowed = {
			always = yes
		}
		target_array = subjects

		target_trigger = {
			FROM = {
				is_puppet_of = ROOT
				OR = {
					original_tag = SER
					original_tag = CRO
					original_tag = BOS
					original_tag = HRZ
					original_tag = MNT
					original_tag = KOS
					original_tag = MAC
					original_tag = SLV
				}
			}
		}
		available = {
			YUG = {
				exists = yes
				is_puppet_of = ROOT
			}
			FROM = {

			}			
		}
		
		visible = {
			NOT = {
				tag = YUG
			}
			if = {
				limit = {
					original_tag = CRO
				}
				NOT = {
					YUG = {
						OR = {
							has_completed_focus = YUG_united_autonomous_croatia
							has_completed_focus = YUG_devolved_croatia
						}
					}
				}
			}
			if = {
				limit = {
					original_tag = CRO
				}
				NOT = {
					YUG = {
						OR = {
							has_completed_focus = YUG_united_autonomous_croatia
							has_completed_focus = YUG_devolved_croatia
						}
					}
				}
			}
			if = {
				limit = {
					OR = {
						original_tag = BOS
						original_tag = HRZ
					}
				}
				NOT = {
					YUG = {
						OR = {
							has_completed_focus = YUG_safeguard_bosnia
							has_completed_focus = YUG_divide_bosnia
						}
					}
				}
			}	
			if = {
				limit = {
					OR = {
						original_tag = MAC
						original_tag = KOS
						original_tag = MNT

					}
				}
				NOT = {
					YUG = {
						OR = {
							has_completed_focus = YUG_safeguard_bosnia
							has_completed_focus = YUG_divide_bosnia
						}
					}
				}
			}												
		}
		
		complete_effect = {
			YUG = {
				annex_country = {
					target = FROM
					transfer_troops = yes		
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = large_increase
				}				
			}
		}		
	}
}
r56_YUG_internal_political_tensions = {

	r56_YUG_utilize_the_armys_loyalty = {

		icon = generic_army_support

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_war = no
			OR = {
				custom_trigger_tooltip = {
					tooltip = r56_YUG_military_is_cooperative
					check_variable = { r56_YUG_military_loyalty = 3 }
				}
				custom_trigger_tooltip = {
					tooltip = r56_YUG_military_is_loyal
					check_variable = { r56_YUG_military_loyalty = 4 }
				}
			}
			custom_trigger_tooltip = {
				tooltip = r56_YUG_military_popularity
				check_variable = { r56_YUG_military_popularity > 0.75 }
			}
		}

		visible = {
			has_completed_focus = r56_YUG_the_approaching_storm
		}

		cost = 50

		days_re_enable = 180

		complete_effect = {
			add_popularity = {
				ideology = neutrality
				popularity = 0.05
			}
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_neutrality_loyalty = 4 }
					}
				}
				custom_effect_tooltip = r56_YUG_JRZ_loyalty_effect_good
				add_to_variable = {
					var = r56_YUG_neutrality_loyalty
					value = 1
				}
				custom_effect_tooltip = r56_YUG_IT_good_JRZ
			}
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_democratic_loyalty = 0 }
					}
				}
				random_list = {
					75 = {
						#
					}
					25 = {
						custom_effect_tooltip = r56_YUG_UO_loyalty_effect_bad
							add_to_variable = {
								var = r56_YUG_democratic_loyalty
								value = -1
							}
							custom_effect_tooltip = r56_YUG_IT_bad_UO
					}
				}
			}
			custom_effect_tooltip = MPL_newline
			custom_effect_tooltip = AFG_reactivates_in_180_days
		}
	}	
	r56_YUG_arrest_communist_sympathisers = {

		icon = generic_arrest

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_civil_war = no
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				SPR_scw_in_progress = yes
				if = {
					limit = {
						NOT = { has_global_flag = spanish_civil_war }
					}
					country_exists = SPR
					NOT = { has_war_with = SPR }
				}
			}
			else = {
				NOT = {
					has_global_flag = scw_over
				}
				any_other_country = {
					original_tag = SPR
					has_civil_war = yes
					NOT = { has_war_with = ROOT }
					OR = {
						has_government = democratic
						has_government = communism
					}
				}
			}
		}

		visible = {
			has_completed_focus = r56_YUG_ban_spanish_intervention
			has_civil_war = no
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				SPR_scw_in_progress = yes
				if = {
					limit = {
						NOT = { has_global_flag = spanish_civil_war }
					}
					country_exists = SPR
					NOT = { has_war_with = SPR }
				}
			}
			else = {
				NOT = {
					has_global_flag = scw_over
				}
				any_other_country = {
					original_tag = SPR
					has_civil_war = yes
					NOT = { has_war_with = ROOT }
					OR = {
						has_government = democratic
						has_government = communism
					}
				}
			}
		}

		cost = 35

		days_re_enable = 180

		complete_effect = {
			add_popularity = {
				ideology = neutrality
				popularity = 0.02
			}
			add_popularity = {
				ideology = fascism
				popularity = 0.01
			}
			add_popularity = {
				ideology = communism
				popularity = -0.03
			}
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_neutrality_loyalty = 4 }
					}
				}
				custom_effect_tooltip = r56_YUG_JRZ_loyalty_effect_good
				add_to_variable = {
					var = r56_YUG_neutrality_loyalty
					value = 1
				}
				custom_effect_tooltip = r56_YUG_IT_good_JRZ
			}
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_communism_loyalty = 0 }
					}
				}
				random_list = {
					75 = {
						#
					}
					25 = {
						custom_effect_tooltip = r56_YUG_KPJ_loyalty_effect_bad
						add_to_variable = {
							var = r56_YUG_communism_loyalty
							value = -1
						}
						custom_effect_tooltip = r56_YUG_IT_bad_KPJ
					}
				}
			}
			custom_effect_tooltip = MPL_newline
			custom_effect_tooltip = AFG_reactivates_in_180_days
		}
	}	
	r56_YUG_imprison_political_oppnenets = {

		icon = generic_arrest

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_government = neutrality
		}

		visible = {
			has_completed_focus = r56_YUG_silence_the_opposition
			has_civil_war = no
			has_government = neutrality
		}

		cost = 35

		days_re_enable = 180

		complete_effect = {
			add_popularity = {
				ideology = neutrality
				popularity = 0.05
			}
			add_stability = -0.05
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_neutrality_loyalty = 4 }
					}
				}
				custom_effect_tooltip = r56_YUG_JRZ_loyalty_effect_good
				add_to_variable = {
					var = r56_YUG_neutrality_loyalty
					value = 1
				}
				custom_effect_tooltip = r56_YUG_IT_good_JRZ
			}
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_democratic_loyalty = 0 }
					}
				}
				random_list = {
					75 = {
						#
					}
					25 = {
						custom_effect_tooltip = r56_YUG_UO_loyalty_effect_bad
						add_to_variable = {
							var = r56_YUG_democratic_loyalty
							value = -1
						}
						custom_effect_tooltip = r56_YUG_IT_bad_UO
					}
				}
			}
			custom_effect_tooltip = MPL_newline
			custom_effect_tooltip = AFG_reactivates_in_180_days
		}
	}	
	r56_YUG_coalition_with_the_fascists = {

		icon = generic_political_address

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_government = neutrality
		}

		visible = {
			has_completed_focus = r56_YUG_found_the_green_shirts
			has_civil_war = no
			has_government = neutrality
		}

		cost = 100

		fire_only_once = yes

		complete_effect = {
			add_popularity = {
				ideology = neutrality
				popularity = YUG.party_popularity@fascism
			}
			add_stability = -0.05
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_neutrality_loyalty = 4 }
					}
				}
				custom_effect_tooltip = r56_YUG_JRZ_loyalty_effect_good
				add_to_variable = {
					var = r56_YUG_neutrality_loyalty
					value = 1
				}
				custom_effect_tooltip = r56_YUG_IT_good_JRZ
			}
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_fascism_loyalty = 0 }
					}
				}
				random_list = {
					50 = {
						#
					}
					50 = {
						custom_effect_tooltip = r56_YUG_ZBOR_loyalty_effect_good
						add_to_variable = {
							var = r56_YUG_fascism_loyalty
							value = 1
						}
						custom_effect_tooltip = r56_YUG_IT_good_ZBOR
					}
				}
			}
		}
	}	
	r56_YUG_combat_chetnik_influence = {

		icon = generic_police_action

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_government = neutrality
		}

		visible = {
			has_completed_focus = r56_YUG_form_the_croatian_peasants_protection
			has_civil_war = no
			has_government = neutrality
		}

		custom_cost_text = r56_15_command_power_cost

		custom_cost_trigger = {
			command_power > 14
		}

		days_re_enable = 180

		complete_effect = {
			add_popularity = {
				ideology = neutrality
				popularity = -0.05
			}
			add_stability = -0.05
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
				producer = YUG
			}
			custom_effect_tooltip = MPL_newline
			custom_effect_tooltip = AFG_reactivates_in_180_days
		}
	}	
	r56_YUG_anti_fascist_propaganda = {

		icon = eng_propaganda_campaigns

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_government = neutrality
		}

		visible = {
			has_completed_focus = r56_YUG_cultivate_anti_fascism
			has_civil_war = no
			has_government = neutrality
		}

		cost = 50

		days_re_enable = 180

		complete_effect = {
			add_popularity = {
				ideology = neutrality
				popularity = -0.03
			}
			add_popularity = {
				ideology = fascism
				popularity = -0.03
			}
			custom_effect_tooltip = MPL_newline
			custom_effect_tooltip = AFG_reactivates_in_180_days
		}
	}	
	###### MISSIONS FOR UNITED OPPOSITION RESISTANCE #####
	r56_YUG_croatian_peasant_defence_forms = {

		icon = generic_military

		activation = {
			always = no
		}
		
		available = {
			always = no
		}

		visible = {
			NOT = {
				has_country_flag = YUG_elections_happened
				has_civil_war = yes
			}
		}
		
		cancel_trigger = {
			has_country_flag = YUG_elections_happened
			OR = {
				has_government = fascism
				has_government = communism
			}
		}
	
		is_good = no

		fire_only_once = yes
		
		priority = 15
	
		days_mission_timeout = 70
	
		timeout_effect = {
			activate_mission = r56_YUG_combating_serb_hegemony_mission
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
			add_ideas = r56_YUG_croatian_peasant_defence
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_democratic_loyalty = 0 }
					}
				}
				custom_effect_tooltip = MPL_newline
				random_list = {
					75 = {
						#
					}
					25 = {
						custom_effect_tooltip = r56_YUG_UO_loyalty_effect_bad
						add_to_variable = {
							var = r56_YUG_democratic_loyalty
							value = -1
						}
						custom_effect_tooltip = r56_YUG_IT_bad_UO
					}
				}
			}
		}
	}
	r56_YUG_combating_serb_hegemony_mission = {

		icon = generic_nationalism

		activation = {
			always = no
		}
		
		available = {
			always = no
		}

		visible = {
			NOT = {
				has_country_flag = YUG_elections_happened
				has_civil_war = yes
			}
		}
		
		cancel_trigger = {
			has_country_flag = YUG_elections_happened
			OR = {
				has_government = fascism
				has_government = communism
			}
		}
	
		is_good = no

		fire_only_once = yes
		
		priority = 15
	
		days_mission_timeout = 70
	
		timeout_effect = {
			activate_mission = r56_YUG_cultivate_anti_fascism
			add_popularity = {
				ideology = neutrality
				popularity = -0.05
			}
			add_ideas = r56_YUG_combating_serb_hegemony
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_democratic_loyalty = 0 }
					}
				}
				custom_effect_tooltip = MPL_newline
				random_list = {
					75 = {
						#
					}
					25 = {
						custom_effect_tooltip = r56_YUG_UO_loyalty_effect_bad
						add_to_variable = {
							var = r56_YUG_democratic_loyalty
							value = -1
						}
						custom_effect_tooltip = r56_YUG_IT_bad_UO
					}
				}
			}
		}
	}
	r56_YUG_cultivate_anti_fascism = {

		icon = generic_political_discourse

		activation = {
			always = no
		}
		
		available = {
			always = no
		}

		visible = {
			NOT = {
				has_country_flag = YUG_elections_happened
				has_civil_war = yes
			}
		}
		
		cancel_trigger = {
			has_country_flag = YUG_elections_happened
			OR = {
				has_government = fascism
				has_government = communism
			}
		}
	
		is_good = no

		fire_only_once = yes
		
		priority = 15
	
		days_mission_timeout = 70
	
		timeout_effect = {
			activate_mission = r56_YUG_the_bloc_of_national_agreement_forms
			add_popularity = {
				ideology = fascism
				popularity = -0.05
			}
			add_ideas = r56_YUG_anti_fascism
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_democratic_loyalty = 0 }
					}
				}
				custom_effect_tooltip = MPL_newline
				random_list = {
					75 = {
						#
					}
					25 = {
						custom_effect_tooltip = r56_YUG_UO_loyalty_effect_bad
						add_to_variable = {
							var = r56_YUG_democratic_loyalty
							value = -1
						}
						custom_effect_tooltip = r56_YUG_IT_bad_UO
					}
				}
			}
		}
	}
	r56_YUG_the_bloc_of_national_agreement_forms = {

		icon = generic_political_discourse

		activation = {
			always = no
		}
		
		available = {
			always = no
		}

		visible = {
			NOT = {
				has_country_flag = YUG_elections_happened
				has_civil_war = yes
			}
		}
		
		cancel_trigger = {
			has_country_flag = YUG_elections_happened
			OR = {
				has_government = fascism
				has_government = communism
			}
		}
	
		is_good = no

		fire_only_once = yes
		
		priority = 15
	
		days_mission_timeout = 140
	
		timeout_effect = {
			activate_mission = r56_YUG_foreign_political_pressure
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			add_ideas = r56_YUG_bloc_of_national_agreement
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_democratic_loyalty = 0 }
					}
				}
				custom_effect_tooltip = MPL_newline
				random_list = {
					50 = {
						#
					}
					50 = {
						custom_effect_tooltip = r56_YUG_UO_loyalty_effect_bad
						add_to_variable = {
							var = r56_YUG_democratic_loyalty
							value = -1
						}
						custom_effect_tooltip = r56_YUG_IT_bad_UO
					}
				}
			}
		}
	}
	r56_YUG_foreign_political_pressure = {

		icon = SWI_swiss_democratic_tradition_campaign

		activation = {
			always = no
		}
		
		available = {
			always = no
		}

		visible = {
			NOT = {
				has_country_flag = YUG_elections_happened
				has_civil_war = yes
			}
		}
		
		cancel_trigger = {
			has_country_flag = YUG_elections_happened
			OR = {
				has_government = fascism
				has_government = communism
			}
		}
	
		is_good = no

		fire_only_once = yes
		
		priority = 15
	
		days_mission_timeout = 70
	
		timeout_effect = {
			activate_mission = r56_YUG_pro_federal_protests_in_capital
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_democratic_loyalty = 0 }
					}
				}
				custom_effect_tooltip = MPL_newline
				random_list = {
					50 = {
						#
					}
					50 = {
						custom_effect_tooltip = r56_YUG_UO_loyalty_effect_bad
						add_to_variable = {
							var = r56_YUG_democratic_loyalty
							value = -1
						}
						custom_effect_tooltip = r56_YUG_IT_bad_UO
					}
				}
			}
		}
	}
	r56_YUG_pro_federal_protests_in_capital = {

		icon = SWI_swiss_democratic_tradition_campaign

		activation = {
			always = no
		}
		
		available = {
			always = no
		}

		visible = {
			NOT = {
				has_country_flag = YUG_elections_happened
				has_civil_war = yes
			}
		}
		
		cancel_trigger = {
			has_country_flag = YUG_elections_happened
			OR = {
				has_government = fascism
				has_government = communism
			}
		}
	
		is_good = no

		fire_only_once = yes
		
		priority = 15
	
		days_mission_timeout = 70
	
		timeout_effect = {
			add_stability = -0.05
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
			if = {
				limit = {
					NOT = {
						check_variable = { r56_YUG_democratic_loyalty = 0 }
					}
				}
				custom_effect_tooltip = MPL_newline
				random_list = {
					50 = {
						#
					}
					50 = {
						custom_effect_tooltip = r56_YUG_UO_loyalty_effect_bad
						add_to_variable = {
							var = r56_YUG_democratic_loyalty
							value = -1
						}
						custom_effect_tooltip = r56_YUG_IT_bad_UO
					}
				}
			}
		}
	}
}

r56_YUG_new_economic_policy_decisions = {

	r56_YUG_public_work_programs = {

		icon = generic_shovels

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0.15
				check_variable = { YUG_PW_program_cost > 40 } #Less likely to do it when it costs this much
			}
			modifier = {
				factor = 0.1
				check_variable = { YUG_PW_program_cost > 60 } #Even less likely to do it when it costs this much
			}
			modifier = {
				factor = 0
				check_variable = { YUG_PW_program_cost > 70 } #Shouldn't even considered to do it when it costs this much
			}
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_war = no
			has_country_leader = {
				character = YUG_milan_stojadinovic
				ruling_only = yes
			}
		}

		visible = {
			has_country_leader = {
				character = YUG_milan_stojadinovic
				ruling_only = yes
			}
		}

		days_remove = 60 

		cost = YUG_PW_program_cost

		complete_effect = {
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_dynamic_modifier = {
					modifier = r56_YUG_PW_project
					days = 60
				}
				set_state_flag = YUG_PW_project_state
			}
		}

		modifier = {
			production_speed_buildings_factor = 0.01
			consumer_goods_factor = -0.05
		}

		remove_effect = {
			if = {
				limit = {
					any_controlled_state = {
						has_state_flag = YUG_PW_project_state
					}
				}
				random_list = {
					90 = {
						# Nothing happens
					}
					10 = {
						if = {
							limit = {
								any_controlled_state = {
									NOT = {
										has_state_flag = YUG_PW_project_state
									}
								}
							}
						}
						random_owned_controlled_state = {
							limit = {
								is_core_of = ROOT
								has_state_flag = YUG_PW_project_state
								free_building_slots = {
									building = arms_factory
									size > 1
									include_locked = yes
								}
							}
							add_extra_state_shared_building_slots = 1
							clr_state_flag = YUG_PW_project_state
						}
					}
				}
			}
			add_to_variable = {
				var = YUG_PW_program_cost
				value = 5
			}
		}
	}	
	r56_YUG_liquidate_farmers_debts = {

		icon = generic_fundraising

		ai_will_do = {
			base = 10
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_war = no
		}

		visible = {

		}

		days_remove = 90

		cost = 75

		modifier = {
			consumer_goods_factor = 0.15
		}

		complete_effect = {
			add_to_variable = {
				var = r56_YUG_democratic_loyalty
				value = 1
			}
			add_to_variable = {
				var = r56_YUG_democratic_effect
				value = 0.1
			}
			custom_effect_tooltip = r56_YUG_UO_loyalty_effect_good
			custom_effect_tooltip = r56_YUG_IT_good_UO
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = r56_YUG_great_depression_1
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_1
					add_idea = r56_YUG_great_depression_2
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_2
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_2
					add_idea = r56_YUG_great_depression_3
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_3
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_3
					add_idea = r56_YUG_great_depression_4
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_4
				}
				remove_ideas = r56_YUG_great_depression_4
			}
		}
	}	
	r56_YUG_price_regulation_schemes = {

		icon = gre_paying_ifc_debt

		ai_will_do = {
			base = 10
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			has_war = no
		}

		visible = {

		}

		days_remove = 120

		cost = 50

		modifier = {
			consumer_goods_factor = 0.15
			political_power_factor = -0.1
		}

		complete_effect = {
			#
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = r56_YUG_great_depression_1
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_1
					add_idea = r56_YUG_great_depression_2
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_2
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_2
					add_idea = r56_YUG_great_depression_3
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_3
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_3
					add_idea = r56_YUG_great_depression_4
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_4
				}
				remove_ideas = r56_YUG_great_depression_4
			}
		}
	}	
	r56_YUG_paying_off_our_debts = {

		icon = hol_attract_foreign_investors

		ai_will_do = {
			base = 10
		}

		allowed = {
			original_tag = YUG
		}

		available = {
			NOT = {
				has_war_with = FRA
			}
		}

		visible = {
			NOT = {
				has_war_with = FRA
			}
		}

		days_remove = 60

		cost = 35

		modifier = {
			consumer_goods_factor = 0.05
			political_power_factor = -0.05
		}

		targeted_modifier = {
			tag = FRA
			cic_to_target_factor = 0.1
		}

		complete_effect = {
			#
		}

		remove_effect = {
			if = {
				limit = {
					has_idea = r56_YUG_great_depression_1
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_1
					add_idea = r56_YUG_great_depression_2
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_2
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_2
					add_idea = r56_YUG_great_depression_3
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_3
				}
				swap_ideas = {
					remove_idea = r56_YUG_great_depression_3
					add_idea = r56_YUG_great_depression_4
				}
			}
			else_if = {
				limit = {
					has_idea = r56_YUG_great_depression_4
				}
				remove_ideas = r56_YUG_great_depression_4
			}
		}
	}	
}

r56_YUG_partisan_resistance = {

	r56_YUG_intensify_resistance = {

		icon = generic_civil_support

        state_target = yes

		available = {
			has_manpower > 500
			has_equipment = {
                infantry_equipment > 499
            }
        }

		target_array = YUG.YUG_yugoslav_partisan_state

		target_trigger = {
			FROM = {
				YUG_yugoslav_core_state = yes
				NOT = {
					has_dynamic_modifier = {
						modifier = r56_YUG_major_partisan_resistance
					}
				}
				controller = {
					has_war_with = YUG
					NOT = {
						tag = YUG
					}
				}
			}
		}

        custom_cost_text = r56_15_command_power_cost

        custom_cost_trigger = {
            command_power > 14
        }        

        complete_effect = {
			add_manpower = -500
			add_command_power = -15
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = -500
                producer = YUG
            }                 
        }

        days_remove = 30

        on_map_mode = map_only

        remove_effect = {
			add_manpower = 250
			add_popularity = {
				ideology = communism
				popularity = 0.005
			}
			hidden_effect = {
				if = {
					limit = {
						FROM = {
							NOT = {
								has_resistance = yes
							}
						}
					}
					FROM = {
						force_enable_resistance = FROM.controller
						start_resistance = yes
					}
				}
				if = {
					limit = {
						FROM = {
							controller = {
								any_core_state = {
									state = FROM
								}
							}
						}
					}
					if = {
						limit = {
							any_state = {
								FROM = {
									any_country_with_core = {
										controls_state = FROM
									}
								}
							}
						}
						FROM = {
							set_compliance = 75
							set_garrison_strength = 0.75
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						has_dynamic_modifier = {
							modifier = r56_YUG_minor_partisan_resistance
						}
					}
				}
				FROM = {
					remove_dynamic_modifier = { modifier = r56_YUG_minor_partisan_resistance }
					add_dynamic_modifier = { modifier = r56_YUG_moderate_partisan_resistance }
				}
			}
			else_if = {
				limit = {
					FROM = {
						has_dynamic_modifier = {
							modifier = r56_YUG_moderate_partisan_resistance
						}
					}
				}
				FROM = {
					remove_dynamic_modifier = { modifier = r56_YUG_moderate_partisan_resistance }
					add_dynamic_modifier = { modifier = r56_YUG_major_partisan_resistance }
				}
			}
			else_if = {
				limit = {
					NOT = {
						FROM = {
							has_dynamic_modifier = {
								modifier = r56_YUG_major_partisan_resistance
							}
						}
					}
				}
				FROM = {
					add_dynamic_modifier = { modifier = r56_YUG_minor_partisan_resistance }
				}
			}
        }

		ai_will_do = {
			base = 3
        } 
	}

	r56_YUG_sabotage_enemy_factories = {

		icon = generic_wreckers

        state_target = yes

		available = {
			has_manpower > 250
			has_equipment = {
                infantry_equipment > 249
            }
        }

		visible = {
			has_completed_focus = r56_YUG_organized_sabotage_missions
		}

		target_trigger = {
			FROM = {
				YUG_yugoslav_core_state = yes
				OR = {
					industrial_complex > 0
					arms_factory > 0
				}
				controller = {
					has_war_with = YUG
					NOT = {
						tag = YUG
					}
				}
			}
		}

        custom_cost_text = r56_15_command_power_cost

        custom_cost_trigger = {
            command_power > 14
        }        

        complete_effect = {
			add_manpower = -250
			add_command_power = -15
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = -250
                producer = YUG
            }                 
        }

        days_remove = 60

        on_map_mode = map_only

        remove_effect = {
			FROM = { 
				add_resistance = 5
				if = {
					limit = {
						arms_factory > 0
					}
					damage_building = {
						type = arms_factory
						damage = 0.8
					}
					random_list = {
						75 = {
							#
						}
						25 = {
							YUG = {
								add_offsite_building = { type = arms_factory level = 1 }
							}
						}
					}
				}
				else_if = {
					limit = {
						industrial_complex > 0 
					}
					damage_building = {
						type = industrial_complex
						damage = 0.8
					}
					random_list = {
						75 = {
							#
						}
						25 = {
							YUG = {
								add_offsite_building = { type = industrial_complex level = 1 }
							}
						}
					}
				}
            }
        }

		ai_will_do = {
			base = 3
        } 
	}

	r56_YUG_communist_war_propaganda = {

		icon = eng_propaganda_campaigns   

        days_remove = 60

		cost = 50

        on_map_mode = map_only

		complete_effect = {
			add_popularity = {
				ideology = communism
				popularity = 0.02
			}
		}

		modifier = {
			political_power_factor = -0.1
			industrial_capacity_factory = -0.05
		}

        remove_effect = {
			add_war_support = 0.05
			add_manpower = 2500
        }

		ai_will_do = {
			base = 3
        } 
	}
}

r56_YUG_partisan_resistance_for_controller = {

	r56_YUG_crack_down_on_FROM_resistance = {

		icon = GFX_decision_oppression

        state_target = yes

		available = {
			has_manpower > 750
			has_equipment = {
                infantry_equipment > 749
            }
        }

		target_array = YUG.YUG_yugoslav_partisan_state

		target_trigger = {
			FROM = {
				is_controlled_by = ROOT
				YUG_yugoslav_core_state = yes
				OR = {
					has_dynamic_modifier = {
						modifier = r56_YUG_minor_partisan_resistance
					}
					has_dynamic_modifier = {
						modifier = r56_YUG_moderate_partisan_resistance
					}
					has_dynamic_modifier = {
						modifier = r56_YUG_major_partisan_resistance
					}
				}
				controller = {
					has_war_with = YUG
					NOT = {
						tag = YUG
					}
				}
			}
		}

        custom_cost_text = r56_10_command_power_cost

        custom_cost_trigger = {
            command_power > 9
        }

        complete_effect = {
			add_manpower = -750
			add_command_power = -10
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = -749
                producer = YUG
            }                 
        }

        days_remove = 60

        on_map_mode = map_only

        remove_effect = {
			if = {
				limit = {
					FROM = {
						has_dynamic_modifier = {
							modifier = r56_YUG_major_partisan_resistance
						}
					}
				}
				FROM = {
					remove_dynamic_modifier = { modifier = r56_YUG_major_partisan_resistance }
					add_dynamic_modifier = { modifier = r56_YUG_moderate_partisan_resistance }
				}
			}
			else_if = {
				limit = {
					FROM = {
						has_dynamic_modifier = {
							modifier = r56_YUG_moderate_partisan_resistance
						}
					}
				}
				FROM = {
					remove_dynamic_modifier = { modifier = r56_YUG_moderate_partisan_resistance }
					add_dynamic_modifier = { modifier = r56_YUG_minor_partisan_resistance }
				}
			}
			else_if = {
				limit = {
					FROM = {
						has_dynamic_modifier = {
							modifier = r56_YUG_minor_partisan_resistance
						}
					}
				}
				FROM = {
					remove_dynamic_modifier = { modifier = r56_YUG_minor_partisan_resistance }
				}
			}
        }

		ai_will_do = {
			base = 3
        } 
	}
}
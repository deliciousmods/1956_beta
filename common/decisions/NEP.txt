political_actions = {

	NEP_growing_opposition = {

		priority = 10

		icon = generic_ignite_civil_war

		allowed = {
			tag = NEP
		}

		available = {
			has_country_flag = NEP_contained_the_opposition		
			#hidden_trigger = { always = no }
		}

		days_mission_timeout = 728

		fire_only_once = yes

		activation = {
			OR = {
				has_idea = NEP_rana_stratocracy
				has_idea = NEP_rana_stratocracy_2
			}
			
		}

		visible = {

		}

		cancel_if_not_visible = yes

		is_good = no

		timeout_effect = {
			#country_event = lar_spain.2
			if = {
				limit = {
					NOT = {
						has_idea = LIT_peasant_strikes
					}
					
				}
				add_ideas = LIT_peasant_strikes
				add_popularity = {
					ideology = democratic
					popularity = 0.15
				}				
			}
		}
	}
}

NEP_rana_clan_vs_crown_decision_category = {
	NEP_recruit_court_servants = {

		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_control_the_king
			has_power_balance = {
				id = NEP_rana_clan_vs_crown_power_balance
			}			
		}


		visible = {
			has_completed_focus = NEP_control_the_king
			has_power_balance = {
				id = NEP_rana_clan_vs_crown_power_balance
			}			
		}
		cost = 50
		fire_only_once = yes
		days_remove = 30

		modifier = {
		}
		complete_effect = { #
		}
				

		remove_effect = { # needs tooltip as remove_unit_leader_trait works but is not displayed. A version about removing old guard is also necessary
			if = {
				limit = {
					has_power_balance = {
						id = NEP_rana_clan_vs_crown_power_balance
					}
				}
				add_power_balance_value = {
					id = NEP_rana_clan_vs_crown_power_balance
					value = -0.05
				}					
			}				
		
		}

		ai_will_do = {
			factor = 2
		}
	}
	
	NEP_spread_monarchist_leaflets = {

		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_contact_the_opposition
			has_power_balance = {
				id = NEP_rana_clan_vs_crown_power_balance
			}			
		}


		visible = {
			has_completed_focus = NEP_contact_the_opposition
			has_power_balance = {
				id = NEP_rana_clan_vs_crown_power_balance
			}			
		}
		cost = 50
		fire_only_once = yes
		days_remove = 30

		modifier = {
		}
		complete_effect = { #
		}
				

		remove_effect = { # needs tooltip as remove_unit_leader_trait works but is not displayed. A version about removing old guard is also necessary
			if = {
				limit = {
					has_power_balance = {
						id = NEP_rana_clan_vs_crown_power_balance
					}
				}
				add_power_balance_value = {
					id = NEP_rana_clan_vs_crown_power_balance
					value = 0.05
				}					
			}				
		
		}

		ai_will_do = {
			factor = 2
		}
	}	
}

NEP_nepali_army = {
	NEP_train_rudra_rana = {

		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_prepare_the_rana_generals
		}


		visible = {
			has_completed_focus = NEP_prepare_the_rana_generals
			has_character = NEP_rudra_rana
			NEP_rudra_rana= {
				has_trait = army_chief_offensive_1
			}
			
		}
		custom_cost_text = ETH_reorganize_staff_of_general_cost
		custom_cost_trigger = {
			command_power > 24
			has_army_experience > 9
			has_political_power > 24
		}
		fire_only_once = yes
		days_remove = 80

		modifier = {
		}
		complete_effect = { #need to be replaced with leader IDs because the game don't retarget another valid general
            #random_army_leader = {
            #    limit = { has_id = 5620 }
			#	if = {
			#		limit = {
			#			has_trait = bad_staffer
			#		}
			#		add_unit_leader_trait = retraining
			#		#custom_effect_tooltip = combat_skill_drop_tt
			#	}
            #}

            add_command_power = -25
            army_experience = -10
            add_political_power = -25		
		}
				

		remove_effect = { # needs tooltip as remove_unit_leader_trait works but is not displayed. A version about removing old guard is also necessary
            #ETH_kassa_haile_darge = {
			#	if = {
			#		limit = {
			#			has_trait = retraining
			#		}
			#		remove_unit_leader_trait = bad_staffer
			#		remove_unit_leader_trait = retraining
			#	}
			#	custom_effect_tooltip = remove_bad_staffer_trait_tt
			#	gain_xp = 150
			#}
			remove_trait = {
		    	character = NEP_rudra_rana
     			slot = army_chief
     			trait = army_chief_offensive_1
			}			
			add_trait = {
		    	character = NEP_rudra_rana
     			slot = army_chief
     			trait = army_chief_offensive_2
			}			
            NEP_rudra_rana = {

				#custom_effect_tooltip = remove_bad_staffer_trait_tt
				gain_xp = 150
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}	
	NEP_train_mohan_rana = {

		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_prepare_the_rana_generals
		}


		visible = {
			has_completed_focus = NEP_prepare_the_rana_generals
			has_character = NEP_mohan_rana
			NEP_mohan_rana= {
				has_trait = army_chief_planning_1
			}
			
		}
		custom_cost_text = ETH_reorganize_staff_of_general_cost
		custom_cost_trigger = {
			command_power > 24
			has_army_experience > 9
			has_political_power > 24
		}
		fire_only_once = yes
		days_remove = 80

		modifier = {
		}
		complete_effect = { #need to be replaced with leader IDs because the game don't retarget another valid general
            #random_army_leader = {
            #    limit = { has_id = 5620 }
			#	if = {
			#		limit = {
			#			has_trait = bad_staffer
			#		}
			#		add_unit_leader_trait = retraining
			#		#custom_effect_tooltip = combat_skill_drop_tt
			#	}
            #}

            add_command_power = -25
            army_experience = -10
            add_political_power = -25		
		}
				

		remove_effect = { # needs tooltip as remove_unit_leader_trait works but is not displayed. A version about removing old guard is also necessary
            #ETH_kassa_haile_darge = {
			#	if = {
			#		limit = {
			#			has_trait = retraining
			#		}
			#		remove_unit_leader_trait = bad_staffer
			#		remove_unit_leader_trait = retraining
			#	}
			#	custom_effect_tooltip = remove_bad_staffer_trait_tt
			#	gain_xp = 150
			#}
			remove_trait = {
		    	character = NEP_mohan_rana
     			slot = army_chief
     			trait = army_chief_planning_1
			}			
			add_trait = {
		    	character = NEP_mohan_rana
     			slot = army_chief
     			trait = army_chief_planning_2
			}			
            NEP_mohan_rana = {

				#custom_effect_tooltip = remove_bad_staffer_trait_tt
				gain_xp = 150
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}

	NEP_train_baber_rana = {

		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_prepare_the_rana_generals
		}


		visible = {
			has_completed_focus = NEP_prepare_the_rana_generals
			has_character = NEP_baber_rana
			NEP_baber_rana= {
				has_trait = army_regrouping_1
			}
			
		}
		custom_cost_text = ETH_reorganize_staff_of_general_cost
		custom_cost_trigger = {
			command_power > 24
			has_army_experience > 9
			has_political_power > 24
		}
		fire_only_once = yes
		days_remove = 80

		modifier = {
		}
		complete_effect = { #need to be replaced with leader IDs because the game don't retarget another valid general
            #random_army_leader = {
            #    limit = { has_id = 5620 }
			#	if = {
			#		limit = {
			#			has_trait = bad_staffer
			#		}
			#		add_unit_leader_trait = retraining
			#		#custom_effect_tooltip = combat_skill_drop_tt
			#	}
            #}

            add_command_power = -25
            army_experience = -10
            add_political_power = -25		
		}
				

		remove_effect = { # needs tooltip as remove_unit_leader_trait works but is not displayed. A version about removing old guard is also necessary
            #ETH_kassa_haile_darge = {
			#	if = {
			#		limit = {
			#			has_trait = retraining
			#		}
			#		remove_unit_leader_trait = bad_staffer
			#		remove_unit_leader_trait = retraining
			#	}
			#	custom_effect_tooltip = remove_bad_staffer_trait_tt
			#	gain_xp = 150
			#}
			remove_trait = {
		    	character = NEP_baber_rana
     			slot = high_command
     			trait = army_regrouping_1
			}			
			add_trait = {
		    	character = NEP_baber_rana
     			slot = high_command
     			trait = army_regrouping_2
			}		
            NEP_baber_rana = {

				#custom_effect_tooltip = remove_bad_staffer_trait_tt
				gain_xp = 150
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}
	NEP_train_brahma_rana = {

		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_prepare_the_rana_generals
		}


		visible = {
			has_completed_focus = NEP_prepare_the_rana_generals
			has_character = NEP_brahma_rana
			NEP_brahma_rana= {
				has_trait = army_entrenchment_1
			}
			
		}
		custom_cost_text = ETH_reorganize_staff_of_general_cost
		custom_cost_trigger = {
			command_power > 24
			has_army_experience > 9
			has_political_power > 24
		}
		fire_only_once = yes
		days_remove = 80

		modifier = {
		}
		complete_effect = { 

			NEP_brahma_rana = {
				add_unit_leader_trait = retraining
					
			}
            add_command_power = -25
            army_experience = -10
            add_political_power = -25		
		}
				

		remove_effect = { 
			remove_trait = {
		    	character = NEP_brahma_rana
     			slot = army_chief
     			trait = army_entrenchment_1
			}			
			add_trait = {
		    	character = NEP_brahma_rana
     			slot = army_chief
     			trait = army_entrenchment_2
			}			
            NEP_brahma_rana = {
				remove_unit_leader_trait = retraining
				gain_xp = 150
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}

	NEP_train_kiran_rana = {

		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_prepare_the_rana_generals
		}


		visible = {
			has_completed_focus = NEP_prepare_the_rana_generals
			has_character = NEP_kiran_rana
			NEP_kiran_rana= {
				has_trait = army_infantry_1
			}
			
		}
		custom_cost_text = ETH_reorganize_staff_of_general_cost
		custom_cost_trigger = {
			command_power > 24
			has_army_experience > 9
			has_political_power > 24
		}
		fire_only_once = yes
		days_remove = 80

		modifier = {
		}
		complete_effect = { 

			NEP_kiran_rana = {
				add_unit_leader_trait = retraining
					
			}
            add_command_power = -25
            army_experience = -10
            add_political_power = -25		
		}
				

		remove_effect = { 
			remove_trait = {
		    	character = NEP_kiran_rana
     			slot = army_chief
     			trait = army_infantry_1
			}			
			add_trait = {
		    	character = NEP_kiran_rana
     			slot = army_chief
     			trait = army_infantry_2
			}			
            NEP_kiran_rana = {
				remove_unit_leader_trait = retraining
				gain_xp = 150
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}	
	NEP_train_nir_rana = {

		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_prepare_the_rana_generals
		}


		visible = {
			has_completed_focus = NEP_prepare_the_rana_generals
			has_character = NEP_nir_rana
			NEP_nir_rana= {
				has_trait = army_commando_1
			}
			
		}
		custom_cost_text = ETH_reorganize_staff_of_general_cost
		custom_cost_trigger = {
			command_power > 24
			has_army_experience > 9
			has_political_power > 24
		}
		fire_only_once = yes
		days_remove = 80

		modifier = {
		}
		complete_effect = { 

			NEP_nir_rana = {
				add_unit_leader_trait = retraining
					
			}
            add_command_power = -25
            army_experience = -10
            add_political_power = -25		
		}
				

		remove_effect = { 
			remove_trait = {
		    	character = NEP_nir_rana
     			slot = army_chief
     			trait = army_commando_1
			}			
			add_trait = {
		    	character = NEP_nir_rana
     			slot = army_chief
     			trait = army_commando_2
			}			
            NEP_nir_rana = {
				remove_unit_leader_trait = retraining
				gain_xp = 150
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}
}

NEP_family_politics_decision_category = {
	NEP_pose_an_ultimatum_to_juddha_rana = {
		icon = eng_trade_unions_demand

		allowed = { # to be replaced by leader ID

		}

		available = {
			fascism > 0.5
			has_country_flag = NEP_convinced_mohan_rana
		}


		visible = {
			has_completed_focus = NEP_family_politics
			
		}
		cost = 70
		fire_only_once = yes
		
		modifier = { 
			#civilian_factory_use = 1 #basically a bribe
		}
		complete_effect = { 
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
			#	long_name = TAG_party_long
			#	name = TAG_party
			}			
			add_stability = -0.1
		}
				

		remove_effect = { 
			
		}

		ai_will_do = {
			factor = 2
		}
	}	
	NEP_spread_panasianism_to_the_regiments = {
		icon = GFX_decision_eng_propaganda_campaigns

		allowed = { # to be replaced by leader ID

		}

		available = {
			fascism > 0.05
			OR = {
				has_country_flag = NEP_convinced_mohan_rana
				has_country_flag = NEP_convinced_nir_rana
				has_country_flag = NEP_convinced_brahma_rana
				has_country_flag = NEP_convinced_baber_rana
				has_country_flag = NEP_convinced_kiran_rana
			}
		}


		visible = {
			has_completed_focus = NEP_family_politics
			
		}
		cost = 100
		fire_only_once = yes
		days_remove = 20

		modifier = { 
			#civilian_factory_use = 1 #basically a bribe
		}
		complete_effect = { 
		
			add_stability = -0.05
		}
				

		remove_effect = { 
			add_timed_idea = { idea = nationalism days = 720 }	
		}

		ai_will_do = {
			factor = 2
		}
	}	
	NEP_recall_rudra_rana_to_kathmandu = {
		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_family_politics
			NOT = {
				has_country_flag = NEP_recalled_rudra_rana
			}
			has_government = fascism
		}


		visible = {
			has_completed_focus = NEP_family_politics
			has_character = NEP_rudra_rana

			
		}
		cost = 30
		fire_only_once = yes
		days_remove = 20
		
		modifier = { 

		}
		complete_effect = { 
			
		}
				

		remove_effect = { 
			set_country_flag = NEP_recalled_rudra_rana		
			
		}

		ai_will_do = {
			factor = 5
		}
	}	
	NEP_convince_mohan_rana = {
		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_family_politics
			NOT = {
				has_country_flag = NEP_convincing_clan_members
			}
			fascism > 0.1
			has_country_flag = NEP_convinced_nir_rana
			has_country_flag = NEP_convinced_baber_rana
			has_country_flag = NEP_convinced_kiran_rana
			has_country_flag = NEP_convinced_brahma_rana
		}


		visible = {
			has_completed_focus = NEP_family_politics
			has_character = NEP_mohan_rana
			NEP_mohan_rana= {
				NOT = {
					has_unit_leader_trait = hidden_sympathies
				}
			}
			
		}
		cost = 30
		fire_only_once = yes
		days_remove = 30
		
		modifier = { 
			civilian_factory_use = 1 #basically a bribe
		}
		complete_effect = { 
			set_country_flag = NEP_convincing_clan_members
		}
				

		remove_effect = { 
			NEP_mohan_rana = {
				add_unit_leader_trait = hidden_sympathies
			}		
			clr_country_flag = NEP_convincing_clan_members
			set_country_flag = NEP_convinced_mohan_rana
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}		
	NEP_convince_baber_rana = {
		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_family_politics
			NOT = {
				has_country_flag = NEP_convincing_clan_members
			}
		#	fascism > 0.1
		}


		visible = {
			has_completed_focus = NEP_family_politics
			has_character = NEP_baber_rana
			NEP_baber_rana= {
				NOT = {
					has_unit_leader_trait = hidden_sympathies
				}
			}
			
		}
		cost = 20
		fire_only_once = yes
		days_remove = 30

		modifier = {
		}
		complete_effect = { 
			set_country_flag = NEP_convincing_clan_members
		}
				

		remove_effect = { 
			NEP_baber_rana = {
				add_unit_leader_trait = hidden_sympathies
			}		
			clr_country_flag = NEP_convincing_clan_members
			set_country_flag = NEP_convinced_baber_rana
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}	

	NEP_convince_brahma_rana = {
		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_family_politics
			NOT = {
				has_country_flag = NEP_convincing_clan_members
			}
			#fascism > 0.1
		}


		visible = {
			has_completed_focus = NEP_family_politics
			has_character = NEP_brahma_rana
			NEP_brahma_rana= {
				NOT = {
					has_unit_leader_trait = hidden_sympathies
				}
			}
			
		}
		cost = 20
		fire_only_once = yes
		days_remove = 30

		modifier = {
		}
		complete_effect = { 
			set_country_flag = NEP_convincing_clan_members
		}
				

		remove_effect = { 
			NEP_brahma_rana = {
				add_unit_leader_trait = hidden_sympathies
			}		
			clr_country_flag = NEP_convincing_clan_members
			set_country_flag = NEP_convinced_brahma_rana
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}

		}

		ai_will_do = {
			factor = 2
		}
	}
	NEP_convince_kiran_rana = {
		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_family_politics
			NOT = {
				has_country_flag = NEP_convincing_clan_members
			}
			#fascism > 0.1
		}


		visible = {
			has_completed_focus = NEP_family_politics
			has_character = NEP_kiran_rana
			NEP_kiran_rana= {
				NOT = {
					has_unit_leader_trait = hidden_sympathies
				}
			}
			
		}
		cost = 20
		fire_only_once = yes
		days_remove = 30

		modifier = {
		}
		complete_effect = { 
			set_country_flag = NEP_convincing_clan_members
		}
				

		remove_effect = { 
			NEP_kiran_rana = {
				add_unit_leader_trait = hidden_sympathies
			}		
			clr_country_flag = NEP_convincing_clan_members
			set_country_flag = NEP_convinced_kiran_rana
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}


	NEP_convinced_nir_rana = {
		icon = attache

		allowed = { # to be replaced by leader ID

		}

		available = {
			has_completed_focus = NEP_family_politics
			NOT = {
				has_country_flag = NEP_convincing_clan_members
			}
			#fascism > 0.1
		}


		visible = {
			has_completed_focus = NEP_family_politics
			has_character = NEP_nir_rana
			NEP_nir_rana= {
				NOT = {
					has_unit_leader_trait = hidden_sympathies
				}
			}
			
		}
		cost = 20
		fire_only_once = yes
		days_remove = 30

		modifier = {
		}
		complete_effect = { 
			set_country_flag = NEP_convincing_clan_members
		}
				

		remove_effect = { 
			NEP_nir_rana = {
				add_unit_leader_trait = hidden_sympathies
			}		
			clr_country_flag = NEP_convincing_clan_members
			set_country_flag = NEP_convinced_nir_rana
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}			
		}

		ai_will_do = {
			factor = 2
		}
	}
}

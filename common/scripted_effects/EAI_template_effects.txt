############################################################################################################
#	Expert AI mod - scripted template AI effects
############################################################################################################

### AI template flags
#
#	-enables the correct template scripts for AI countries
#
#	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = AB }
#	A = doctrine
#	B = width
#
#	set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = ABCD }
#	A = doctrine
#	B = width
#	C = design
#	D = variant

EAI_set_template_flags = {

	EAI_set_infantry_template_flags = yes
	EAI_set_marine_template_flags = yes
	EAI_set_mountaineer_template_flags = yes
	EAI_set_anti_tank_template_flags = yes
	EAI_set_motorized_template_flags = yes
	EAI_set_light_armor_template_flags = yes
	EAI_set_medium_armor_template_flags = yes
	EAI_set_heavy_armor_template_flags = yes
	EAI_set_modern_armor_template_flags = yes
	EAI_set_suppression_template_flags = yes
}

##################################################
# 	INFANTRY
##################################################

EAI_set_infantry_template_flags = {

	clr_country_flag = EAI_INFANTRY_ROLE
	clr_country_flag = EAI_INFANTRY_TEMPLATE

	if = {
		limit = { 
			EAI_use_cheap_infantry = yes

			NOT = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } }
		}

		set_country_flag = { flag = EAI_INFANTRY_ROLE value = -1 }
		set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = -1 }
	}

	else = {

		# DOCTRINE: GENERIC
		if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }

			if = { 		limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } } Generic_20w_infantry_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Generic_26w_infantry_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Generic_40w_infantry_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } Generic_10w_infantry_role = yes }
		}

		# DOCTRINE: MA
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }

			if = { 		limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } } Mass_assault_20w_infantry_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Mass_assault_40w_infantry_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } Generic_10w_infantry_role = yes }
		}
	}
}

###

Generic_20w_infantry_role = {

	set_country_flag = { flag = EAI_INFANTRY_ROLE value = 1 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 110 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 111 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 120 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 121 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 130 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 131 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 132 }
		}
	}
}
Generic_26w_infantry_role = {

	set_country_flag = { flag = EAI_INFANTRY_ROLE value = 2 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 210 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 211 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 220 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 221 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 230 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 231 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 232 }
		}
	}
}
Generic_40w_infantry_role = {

	set_country_flag = { flag = EAI_INFANTRY_ROLE value = 3 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 310 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 311 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 320 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 321 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: CHEAP
		if = { limit = { EAI_infantry_variant_focus_CHEAP = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 330 }
		}

		### VARIANT: REGULAR
		else_if = { limit = { EAI_infantry_variant_focus_REGULAR = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 331 }
		}

		### VARIANT: ANTIAIR
		else_if = { limit = { EAI_infantry_variant_focus_AA = yes }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 332 }
		}
	}
}
Generic_10w_infantry_role = {

	set_country_flag = { flag = EAI_INFANTRY_ROLE value = 4 }

	### DESIGN: CHEAP
	if = { limit = { num_of_military_factories < 75 }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = human_wave_offensive has_tech = vast_offensives } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 411 }
		}

		### VARIANT: LARGE
		else = {

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 412 }
		}
	}

	### DESIGN: UPGRADE
	else_if = { limit = { NOT = { num_of_military_factories < 75 } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = human_wave_offensive has_tech = vast_offensives } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 421 }
		}

		### VARIANT: LARGE
		else = {

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 422 }
		}
	}
}

###

Mass_assault_20w_infantry_role = {

	set_country_flag = { flag = EAI_INFANTRY_ROLE value = 41 }

	### SIZE: REGULAR
	if = { limit = { NOT = { has_tech = human_wave_offensive has_tech = vast_offensives } }

		### DESIGN: A
		if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4111 }
		}

		### DESIGN: B
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4121 }
		}

		### DESIGN: C
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4131 }
		}
	}

	### SIZE: LARGE
	else = {

		### DESIGN: A
		if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4112 }
		}

		### DESIGN: B
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4122 }
		}

		### DESIGN: C
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4132 }
		}
	}
}
Mass_assault_40w_infantry_role = {

	set_country_flag = { flag = EAI_INFANTRY_ROLE value = 43 }

	### SIZE: REGULAR
	if = { limit = { NOT = { has_tech = human_wave_offensive has_tech = vast_offensives } }

		### DESIGN: A
		if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4311 }
		}

		### DESIGN: B
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4321 }
		}

		### DESIGN: C
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4331 }
		}
	}

	### SIZE: LARGE
	else = {

		### DESIGN: A
		if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4312 }
		}

		### DESIGN: B
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4322 }
		}

		### DESIGN: C
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

			set_country_flag = { flag = EAI_INFANTRY_TEMPLATE value = 4332 }
		}
	}
}

##################################################
# 	MARINES
##################################################

EAI_set_marine_template_flags = {

	clr_country_flag = EAI_MARINE_ROLE
	clr_country_flag = EAI_MARINE_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_marine_template_upgrade

			check_variable = { EAI_FOCUS/LAND/spec_ops = global.EAI_MAR_SPEC_OPS }
		}

		# DOCTRINE: GENERIC
		if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Generic_20w_marine_role = yes }
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Generic_26w_marine_role = yes }
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Generic_40w_marine_role = yes }
	}
}

###

Generic_20w_marine_role = {

	set_country_flag = { flag = EAI_MARINE_ROLE value = 1 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 111 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 121 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 131 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 132 }
		}
	}
}
Generic_26w_marine_role = {

	set_country_flag = { flag = EAI_MARINE_ROLE value = 2 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 211 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 221 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 231 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 232 }
		}
	}
}
Generic_40w_marine_role = {

	set_country_flag = { flag = EAI_MARINE_ROLE value = 3 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 311 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 321 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 331 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MARINE_TEMPLATE value = 332 }
		}
	}
}

##################################################
# 	MOUNTAINEERS
##################################################

EAI_set_mountaineer_template_flags = {

	clr_country_flag = EAI_MOUNTAINEER_ROLE
	clr_country_flag = EAI_MOUNTAINEER_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_mountaineer_template_upgrade

			check_variable = { EAI_FOCUS/LAND/spec_ops = global.EAI_MNT_SPEC_OPS }
		}

		# DOCTRINE: GENERIC
		if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Generic_20w_mountaineer_role = yes }
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Generic_26w_mountaineer_role = yes }
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Generic_40w_mountaineer_role = yes }
	}
}

###

Generic_20w_mountaineer_role = {

	set_country_flag = { flag = EAI_MOUNTAINEER_ROLE value = 1 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 111 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 121 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 131 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 132 }
		}
	}
}
Generic_26w_mountaineer_role = {

	set_country_flag = { flag = EAI_MOUNTAINEER_ROLE value = 2 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 211 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 221 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 231 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 232 }
		}
	}
}
Generic_40w_mountaineer_role = {

	set_country_flag = { flag = EAI_MOUNTAINEER_ROLE value = 3 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_A_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 311 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_B_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 321 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_design = global.EAI_C_INF_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_anti_air_design_focus } }

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 331 }
		}

		### VARIANT: ANTIAIR
		else = {

			set_country_flag = { flag = EAI_MOUNTAINEER_TEMPLATE value = 332 }
		}
	}
}

##################################################
# 	ANTI TANK
##################################################

EAI_set_anti_tank_template_flags = {

	clr_country_flag = EAI_ANTI_TANK_ROLE
	clr_country_flag = EAI_ANTI_TANK_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_anti_tank_template_upgrade
		}

		# Generic
		# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }

			if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Generic_20w_anti_tank_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Generic_26w_anti_tank_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Generic_40w_anti_tank_role = yes }
		# }

		# # DOCTRINE: MW
		# if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }

		# 	if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Mobile_warfare_20w_anti_tank_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Mobile_warfare_26w_anti_tank_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Mobile_warfare_40w_anti_tank_role = yes }
		# }

		# # DOCTRINE: SF
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }

		# 	if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Superior_firepower_20w_anti_tank_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Superior_firepower_26w_anti_tank_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Superior_firepower_40w_anti_tank_role = yes }
		# }

		# # DOCTRINE: GB
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }

		# 	if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Grand_battleplan_20w_anti_tank_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Grand_battleplan_26w_anti_tank_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Grand_battleplan_40w_anti_tank_role = yes }
		# }

		# # DOCTRINE: MA
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }

		# 	if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Mass_assault_20w_anti_tank_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Mass_assault_40w_anti_tank_role = yes }
		# }
	}
}

###

Generic_20w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 11 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1111 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1112 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1113 }
		}
	}

	### DESIGN: MSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1121 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1141 }
		}
	}

	### DESIGN: HSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1131 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1141 }
		}
	}
}
Generic_26w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 12 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1211 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1212 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1213 }
		}
	}

	### DESIGN: MSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1221 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1241 }
		}
	}

	### DESIGN: HSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1231 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1241 }
		}
	}
}
Generic_40w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 13 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1311 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1312 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1313 }
		}
	}

	### DESIGN: MSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1321 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1341 }
		}
	}

	### DESIGN: HSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1331 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1341 }
		}
	}
}

###

Mobile_warfare_20w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 11 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1111 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1112 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1113 }
		}
	}

	### DESIGN: MSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1121 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1141 }
		}
	}

	### DESIGN: HSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1131 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1141 }
		}
	}
}
Mobile_warfare_26w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 12 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1211 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1212 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1213 }
		}
	}

	### DESIGN: MSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1221 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1241 }
		}
	}

	### DESIGN: HSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1231 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1241 }
		}
	}
}
Mobile_warfare_40w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 13 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1311 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1312 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1313 }
		}
	}

	### DESIGN: MSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1321 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1341 }
		}
	}

	### DESIGN: HSPAA
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_spaa } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1331 }
		}

		### VARIANT: MODSPAA
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 1341 }
		}
	}
}

###

Superior_firepower_20w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 21 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2111 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2112 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2113 }
		}
	}

	### DESIGN: MTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2121 }
			}

			### PIERCING: 2
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2122 }
			}
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2151 }
		}
	}

	### DESIGN: HTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2131 }
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2141 }
		}
	}
}
Superior_firepower_26w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 22 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2211 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2212 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2213 }
		}
	}

	### DESIGN: MTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2221 }
			}

			### PIERCING: 2
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2222 }
			}
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2251 }
		}
	}

	### DESIGN: HTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2231 }
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2241 }
		}
	}
}
Superior_firepower_40w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 23 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2311 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2312 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2313 }
		}
	}

	### DESIGN: MTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2321 }
			}

			### PIERCING: 2
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2322 }
			}
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2351 }
		}
	}

	### DESIGN: HTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2331 }
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 2341 }
		}
	}
}

###

Grand_battleplan_20w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 31 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3111 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3112 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3113 }
		}
	}

	### DESIGN: MTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3121 }
			}

			### PIERCING: 2
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3122 }
			}
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3151 }
		}
	}

	### DESIGN: HTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3131 }
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3141 }
		}
	}
}
Grand_battleplan_26w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 32 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3211 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3212 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3213 }
		}
	}

	### DESIGN: MTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3221 }
			}

			### PIERCING: 2
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3222 }
			}
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3251 }
		}
	}

	### DESIGN: HTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3231 }
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3241 }
		}
	}
}
Grand_battleplan_40w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 33 }

	### DESIGN: LINE AT
	if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

		### PIERCING: 1
		if = { limit = { EAI_armor_intel_tier_0 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3311 }
		}

		### PIERCING: 2
		else_if = { limit = { EAI_armor_intel_tier_1 = yes }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3312 }
		}
		
		### PIERCING: 3
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3313 }
		}
	}

	### DESIGN: MTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3321 }
			}

			### PIERCING: 2
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3322 }
			}
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3351 }
		}
	}

	### DESIGN: HTD
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_tech = modern_td } }

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3331 }
		}

		### VARIANT: MODTD
		else = {

			set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 3341 }
		}
	}
}

###

Mass_assault_20w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 41 }

	### SIZE: REGULAR
	if = { limit = { NOT = { has_tech = human_wave_offensive has_tech = vast_offensives } }

		### DESIGN: LINE AT
		if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4111 }
			}

			### PIERCING: 2
			else_if = { limit = { EAI_armor_intel_tier_1 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4112 }
			}
			
			### PIERCING: 3
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4113 }
			}
		}

		### DESIGN: MTD
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { has_tech = modern_td } }

				### PIERCING: 1
				if = { limit = { EAI_armor_intel_tier_0 = yes }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4121 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4122 }
				}
			}

			### VARIANT: MODTD
			else = {

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4141 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4142 }
				}
			}
		}

		### DESIGN: HTD
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { has_tech = modern_td } }

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4131 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4132 }
				}
			}

			### VARIANT: MODTD
			else = {

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4141 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4142 }
				}
			}
		}
	}

	### SIZE: LARGE
	else = {

		### DESIGN: LINE AT
		if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4151 }
			}

			### PIERCING: 2
			else_if = { limit = { EAI_armor_intel_tier_1 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4152 }
			}
			
			### PIERCING: 3
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4153 }
			}
		}

		### DESIGN: MTD
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { has_tech = modern_td } }

				### PIERCING: 1
				if = { limit = { EAI_armor_intel_tier_0 = yes }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4161 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4162 }
				}
			}

			### VARIANT: MODTD
			else = {

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4181 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4182 }
				}
			}
		}

		### DESIGN: HTD
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { has_tech = modern_td } }

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4171 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4172 }
				}
			}

			### VARIANT: MODTD
			else = {

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4181 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4182 }
				}
			}
		}
	}
}
Mass_assault_40w_anti_tank_role = {

	set_country_flag = { flag = EAI_ANTI_TANK_ROLE value = 43 }

	### SIZE: REGULAR
	if = { limit = { NOT = { has_tech = human_wave_offensive has_tech = vast_offensives } }

		### DESIGN: LINE AT
		if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4311 }
			}

			### PIERCING: 2
			else_if = { limit = { EAI_armor_intel_tier_1 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4312 }
			}
			
			### PIERCING: 3
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4313 }
			}
		}

		### DESIGN: MTD
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { has_tech = modern_td } }

				### PIERCING: 1
				if = { limit = { EAI_armor_intel_tier_0 = yes }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4321 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4322 }
				}
			}

			### VARIANT: MODTD
			else = {

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4341 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4342 }
				}
			}
		}

		### DESIGN: HTD
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { has_tech = modern_td } }

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4331 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4332 }
				}
			}

			### VARIANT: MODTD
			else = {

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4341 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4342 }
				}
			}
		}
	}

	### SIZE: LARGE
	else = {

		### DESIGN: LINE AT
		if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }

			### PIERCING: 1
			if = { limit = { EAI_armor_intel_tier_0 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4351 }
			}

			### PIERCING: 2
			else_if = { limit = { EAI_armor_intel_tier_1 = yes }

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4352 }
			}
			
			### PIERCING: 3
			else = {

				set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4353 }
			}
		}

		### DESIGN: MTD
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { has_tech = modern_td } }

				### PIERCING: 1
				if = { limit = { EAI_armor_intel_tier_0 = yes }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4361 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4362 }
				}
			}

			### VARIANT: MODTD
			else = {

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4381 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4382 }
				}
			}
		}

		### DESIGN: HTD
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { has_tech = modern_td } }

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4371 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4372 }
				}
			}

			### VARIANT: MODTD
			else = {

				### PIERCING: 1
				if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4381 }
				}

				### PIERCING: 2
				else = {

					set_country_flag = { flag = EAI_ANTI_TANK_TEMPLATE value = 4382 }
				}
			}
		}
	}
}

##################################################
# 	MOTORIZED
##################################################

EAI_set_motorized_template_flags = {

	clr_country_flag = EAI_MOTORIZED_ROLE
	clr_country_flag = EAI_MOTORIZED_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_mot_template_upgrade

			check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MOT_ATTACHMENT }
		}

		# GENERIC
		# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }

			if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Generic_20w_motorized_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Generic_26w_motorized_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Generic_40w_motorized_role = yes }
		# }

		# # DOCTRINE: MW
		# if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }

		# 	if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Mobile_warfare_20w_motorized_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Mobile_warfare_26w_motorized_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Mobile_warfare_40w_motorized_role = yes }
		# }

		# # DOCTRINE: SF
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }

		# 	if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Superior_firepower_20w_motorized_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Superior_firepower_26w_motorized_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Superior_firepower_40w_motorized_role = yes }
		# }

		# # DOCTRINE: GB
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }

		# 	if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Grand_battleplan_20w_motorized_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } } Grand_battleplan_26w_motorized_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Grand_battleplan_40w_motorized_role = yes }
		# }

		# # DOCTRINE: MA
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }

		# 	if = { 		limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } } Mass_assault_20w_motorized_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } } Mass_assault_40w_motorized_role = yes }
		# }
	}
}

###

Generic_20w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1111 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1121 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1131 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1132 }
		}
	}
}
Generic_26w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1211 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1221 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1231 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1232 }
		}
	}
}
Generic_40w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1311 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1321 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1331 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1332 }
		}
	}
}

###

Mobile_warfare_20w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1111 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1121 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1131 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1132 }
		}
	}
}
Mobile_warfare_26w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1211 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1221 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1231 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1232 }
		}
	}
}
Mobile_warfare_40w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1311 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1321 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1331 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 1332 }
		}
	}
}

###

Superior_firepower_20w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 21 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2111 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2121 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2131 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2132 }
		}
	}
}
Superior_firepower_26w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 22 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2211 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2221 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2231 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2232 }
		}
	}
}
Superior_firepower_40w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 23 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2311 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2321 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2331 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 2332 }
		}
	}
}

###

Grand_battleplan_20w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 31 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3111 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3121 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3131 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3132 }
		}
	}
}
Grand_battleplan_26w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 32 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3211 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3221 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3231 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3232 }
		}
	}
}
Grand_battleplan_40w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 33 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3311 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3321 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3331 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 3332 }
		}
	}
}

###

Mass_assault_20w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 41 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4111 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4121 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4131 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4132 }
		}
	}
}
Mass_assault_40w_motorized_role = {

	set_country_flag = { flag = EAI_MOTORIZED_ROLE value = 43 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4311 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4321 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { has_country_flag = EAI_mech_template_upgrade } }

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4331 }
		}

		### VARIANT: MECH
		else = {

			set_country_flag = { flag = EAI_MOTORIZED_TEMPLATE value = 4332 }
		}
	}
}

##################################################
# 	LIGHT ARMOR
##################################################

EAI_set_light_armor_template_flags = {

	clr_country_flag = EAI_LIGHT_ARMOR_ROLE
	clr_country_flag = EAI_LIGHT_ARMOR_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_larm_template_upgrade

			OR = {
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_LARM_FOCUS }
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_LARM_ATTACHMENT }
			}
		}

		# GENERIC
		# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }

			if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Generic_20w_light_armor_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Generic_26w_light_armor_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Generic_40w_light_armor_role = yes }
		# }

		# # DOCTRINE: MW
		# if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }

		# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Mobile_warfare_20w_light_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Mobile_warfare_26w_light_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Mobile_warfare_40w_light_armor_role = yes }
		# }

		# # DOCTRINE: SF
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }

		# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Superior_firepower_20w_light_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Superior_firepower_26w_light_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Superior_firepower_40w_light_armor_role = yes }
		# }

		# # DOCTRINE: GB
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }

		# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Grand_battleplan_20w_light_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Grand_battleplan_26w_light_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Grand_battleplan_40w_light_armor_role = yes }
		# }

		# # DOCTRINE: MA
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }

		# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Mass_assault_20w_light_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Mass_assault_40w_light_armor_role = yes }
		# }
	}
}

###

Generic_20w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1131 }
	}
}
Generic_26w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1211 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1221 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1231 }
	}
}
Generic_40w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1331 }
	}
}

###

Mobile_warfare_20w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1131 }
	}
}
Mobile_warfare_26w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1211 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1221 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1231 }
	}
}
Mobile_warfare_40w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 1331 }
	}
}

###

Superior_firepower_20w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 21 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2131 }
	}
}
Superior_firepower_26w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 22 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2211 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2221 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2231 }
	}
}
Superior_firepower_40w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 23 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 2331 }
	}
}

###

Grand_battleplan_20w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 31 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3131 }
	}
}
Grand_battleplan_26w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 32 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3211 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3221 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3231 }
	}
}
Grand_battleplan_40w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 33 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 3331 }
	}
}

###

Mass_assault_20w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 41 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 4111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 4121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 4131 }
	}
}
Mass_assault_40w_light_armor_role = {

	set_country_flag = { flag = EAI_LIGHT_ARMOR_ROLE value = 43 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_A_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 4311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_B_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 4321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_design = global.EAI_C_ARM_DESIGN } }

		set_country_flag = { flag = EAI_LIGHT_ARMOR_TEMPLATE value = 4331 }
	}
}

##################################################
# 	MEDIUM ARMOR
##################################################

EAI_set_medium_armor_template_flags = {

	clr_country_flag = EAI_MEDIUM_ARMOR_ROLE
	clr_country_flag = EAI_MEDIUM_ARMOR_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_marm_template_upgrade

			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } 
			}
		}

		### BASIC

		if = {
			limit = { 
				NOT = {
					AND = {
						has_design_based_on = medium_tank_aa_chassis

						if = {
							limit = {
								OR = {
									check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN }
									check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN }
								}
							}

							has_design_based_on = medium_tank_artillery_chassis
						}
					}
				}
			}

			Generic_medium_armor_basic_template = yes
		}

		###

		else = {

			# GENERIC
			# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }

				if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Generic_20w_medium_armor_role = yes }
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Generic_26w_medium_armor_role = yes }
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Generic_40w_medium_armor_role = yes }
			# }

			# # DOCTRINE: MW
			# if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }

			# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Mobile_warfare_20w_medium_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Mobile_warfare_26w_medium_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Mobile_warfare_40w_medium_armor_role = yes }
			# }

			# # DOCTRINE: SF
			# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }

			# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Superior_firepower_20w_medium_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Superior_firepower_26w_medium_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Superior_firepower_40w_medium_armor_role = yes }
			# }

			# # DOCTRINE: GB
			# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }

			# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Grand_battleplan_20w_medium_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Grand_battleplan_26w_medium_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Grand_battleplan_40w_medium_armor_role = yes }
			# }

			# # DOCTRINE: MA
			# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }

			# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Mass_assault_20w_medium_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Mass_assault_40w_medium_armor_role = yes }
			# }
		}
	}
}

###

Generic_medium_armor_basic_template = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 1 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } }

		set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } }

		set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 211 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } }

		set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 311 }
	}
}

###

Generic_20w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1111 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1121 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1131 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1132 }
		}
	}
}
Generic_26w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1211 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1221 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1231 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1232 }
		}
	}
}
Generic_40w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1311 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1321 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1331 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1332 }
		}
	}
}

###

Mobile_warfare_20w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1111 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1121 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1131 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1132 }
		}
	}
}
Mobile_warfare_26w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1211 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1221 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1231 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1232 }
		}
	}
}
Mobile_warfare_40w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1311 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1321 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1331 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 1332 }
		}
	}
}

###

Superior_firepower_20w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 21 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2111 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2121 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2131 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2132 }
		}
	}
}
Superior_firepower_26w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 22 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2211 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2221 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2231 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2232 }
		}
	}
}
Superior_firepower_40w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 23 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2311 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2321 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2331 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 2332 }
		}
	}
}

###

Grand_battleplan_20w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 31 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3111 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3121 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3131 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3132 }
		}
	}
}
Grand_battleplan_26w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 32 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3211 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3221 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3231 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3232 }
		}
	}
}
Grand_battleplan_40w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 33 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3311 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3321 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3331 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 3332 }
		}
	}
}

###

Mass_assault_20w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 41 }

	if = {
		limit = {
			NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
		}

		### DESIGN: BASIC
		set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4100 }
	}
	else = {

		### DESIGN: A
		if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4111 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4112 }
			}
		}

		### DESIGN: B
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4121 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4122 }
			}
		}

		### DESIGN: C
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4131 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4132 }
			}
		}
	}
}
Mass_assault_40w_medium_armor_role = {

	set_country_flag = { flag = EAI_MEDIUM_ARMOR_ROLE value = 43 }

	if = {
		limit = {
			NOT = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
		}

		### DESIGN: BASIC
		set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4300 }
	}
	else = {

		### DESIGN: A
		if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4311 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4312 }
			}
		}

		### DESIGN: B
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4321 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4322 }
			}
		}

		### DESIGN: C
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_medium_tank_TD_design = yes } } }

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4331 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_MEDIUM_ARMOR_TEMPLATE value = 4332 }
			}
		}
	}
}

##################################################
# 	HEAVY ARMOR
##################################################

EAI_set_heavy_armor_template_flags = {

	clr_country_flag = EAI_HEAVY_ARMOR_ROLE
	clr_country_flag = EAI_HEAVY_ARMOR_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_harm_template_upgrade

			OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_HARM_ATTACHMENT } 
			}
		}

		### BASIC

		if = {
			limit = {
				NOT = {
					AND = {
						has_design_based_on = heavy_tank_aa_chassis
						has_design_based_on = heavy_tank_artillery_chassis
					}
				}
			}

			Generic_heavy_armor_basic_template = yes
		}

		###

		else = {

			# Generic
			# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }

				if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Generic_20w_heavy_armor_role = yes }
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Generic_26w_heavy_armor_role = yes }
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Generic_40w_heavy_armor_role = yes }
			# }

			# # DOCTRINE: MW
			# if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }

			# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Mobile_warfare_20w_heavy_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Mobile_warfare_26w_heavy_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Mobile_warfare_40w_heavy_armor_role = yes }
			# }

			# # DOCTRINE: SF
			# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }

			# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Superior_firepower_20w_heavy_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Superior_firepower_26w_heavy_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Superior_firepower_40w_heavy_armor_role = yes }
			# }

			# # DOCTRINE: GB
			# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }

			# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Grand_battleplan_20w_heavy_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Grand_battleplan_26w_heavy_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Grand_battleplan_40w_heavy_armor_role = yes }
			# }

			# # DOCTRINE: MA
			# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }

			# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Mass_assault_20w_heavy_armor_role = yes }
			# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Mass_assault_40w_heavy_armor_role = yes }
			# }
		}
	}
}

###

Generic_heavy_armor_basic_template = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 1 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } }

		set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } }

		set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 211 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } }

		set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 311 }
	}
}

###

Generic_20w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1111 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1121 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1131 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1132 }
		}
	}
}
Generic_26w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1211 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1221 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1231 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1232 }
		}
	}
}
Generic_40w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1311 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1321 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { OR = { EAI_armor_intel_tier_0 = yes NOT = { EAI_has_heavy_tank_TD_design = yes } } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1331 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1332 }
		}
	}
}

###

Mobile_warfare_20w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1111 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1121 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1131 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1132 }
		}
	}
}
Mobile_warfare_26w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1211 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1221 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1231 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1232 }
		}
	}
}
Mobile_warfare_40w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1311 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1321 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1331 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 1332 }
		}
	}
}

###

Superior_firepower_20w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 21 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2111 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2121 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2131 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2132 }
		}
	}
}
Superior_firepower_26w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 22 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2211 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2221 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2231 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2232 }
		}
	}
}
Superior_firepower_40w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 23 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2311 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2321 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2331 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 2332 }
		}
	}
}

###

Grand_battleplan_20w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 31 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3111 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3112 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3121 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3122 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3131 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3132 }
		}
	}
}
Grand_battleplan_26w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 32 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3211 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3212 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3221 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3222 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3231 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3232 }
		}
	}
}
Grand_battleplan_40w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 33 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3311 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3312 }
		}
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3321 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3322 }
		}
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

		### VARIANT: REGULAR
		if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3331 }
		}

		### VARIANT: AP
		else = {

			set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 3332 }
		}
	}
}

###

Mass_assault_20w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 41 }

	if = {
		limit = {
			NOT = { has_tech = basic_heavy_spaa has_tech = improved_heavy_spaa has_tech = advanced_heavy_spaa }
		}

		### DESIGN: BASIC
		set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4100 }
	}
	else = {

		### DESIGN: A
		if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4111 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4112 }
			}
		}

		### DESIGN: B
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4121 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4122 }
			}
		}

		### DESIGN: C
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4131 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4132 }
			}
		}
	}
}
Mass_assault_40w_heavy_armor_role = {

	set_country_flag = { flag = EAI_HEAVY_ARMOR_ROLE value = 43 }

	if = {
		limit = {
			NOT = { has_tech = basic_heavy_spaa has_tech = improved_heavy_spaa has_tech = advanced_heavy_spaa }
		}

		### DESIGN: BASIC
		set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4300 }
	}
	else = {

		### DESIGN: A
		if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_A_HARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4311 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4312 }
			}
		}

		### DESIGN: B
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_B_HARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4322 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4321 }
			}
		}

		### DESIGN: C
		else_if = { limit = { check_variable = { EAI_FOCUS/LAND/heavy_armor_design = global.EAI_C_HARM_DESIGN } }

			### VARIANT: REGULAR
			if = { limit = { NOT = { EAI_armor_intel_tier_2 = yes } }

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4331 }
			}

			### VARIANT: AP
			else = {

				set_country_flag = { flag = EAI_HEAVY_ARMOR_TEMPLATE value = 4332 }
			}
		}
	}
}

##################################################
# 	MODERN ARMOR
##################################################

EAI_set_modern_armor_template_flags = {

	clr_country_flag = EAI_MODERN_ARMOR_ROLE
	clr_country_flag = EAI_MODERN_ARMOR_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_mod_template_upgrade

			OR = {
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT }

				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_HARM_ATTACHMENT }
			}
		}

		# GENERIC
		# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }

			if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Generic_20w_modern_armor_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Generic_26w_modern_armor_role = yes }
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Generic_40w_modern_armor_role = yes }
		# }

		# # DOCTRINE: MW
		# if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }

		# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Mobile_warfare_20w_modern_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Mobile_warfare_26w_modern_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Mobile_warfare_40w_modern_armor_role = yes }
		# }

		# # DOCTRINE: SF
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }

		# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Superior_firepower_20w_modern_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Superior_firepower_26w_modern_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Superior_firepower_40w_modern_armor_role = yes }
		# }

		# # DOCTRINE: GB
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }

		# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Grand_battleplan_20w_modern_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_26W_ARM_WIDTH } } Grand_battleplan_26w_modern_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Grand_battleplan_40w_modern_armor_role = yes }
		# }

		# DOCTRINE: MA
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }

		# 	if = { 		limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_20W_ARM_WIDTH } } Mass_assault_20w_modern_armor_role = yes }
		# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } Mass_assault_40w_modern_armor_role = yes }
		# }
	}
}

###

Generic_20w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1131 }
	}
}
Generic_26w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1211 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1221 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1231 }
	}
}
Generic_40w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1331 }
	}
}

###

Mobile_warfare_20w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 11 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1131 }
	}
}
Mobile_warfare_26w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 12 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1211 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1221 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1231 }
	}
}
Mobile_warfare_40w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 13 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 1331 }
	}
}

###

Superior_firepower_20w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 21 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2131 }
	}
}
Superior_firepower_26w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 22 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2211 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2221 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2231 }
	}
}
Superior_firepower_40w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 23 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 2331 }
	}
}

###

Grand_battleplan_20w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 31 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3131 }
	}
}
Grand_battleplan_26w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 32 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3211 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3221 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3231 }
	}
}
Grand_battleplan_40w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 33 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 3331 }
	}
}

###

Mass_assault_20w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 41 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 4111 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 4121 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 4131 }
	}
}
Mass_assault_40w_modern_armor_role = {

	set_country_flag = { flag = EAI_MODERN_ARMOR_ROLE value = 43 }

	### DESIGN: A
	if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_A_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 4311 }
	}

	### DESIGN: B
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_B_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 4321 }
	}

	### DESIGN: C
	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/medium_armor_design = global.EAI_C_MARM_DESIGN } }

		set_country_flag = { flag = EAI_MODERN_ARMOR_TEMPLATE value = 4331 }
	}
}

##################################################
# 	SUPPRESSION
##################################################

EAI_set_suppression_template_flags = {

	# clr_country_flag = EAI_SUPPRESSION_TEMPLATE

	if = {
		limit = {
			has_country_flag = EAI_suppression_template_upgrade
			NOT = { has_country_flag = { flag = EAI_SUPPRESSION_TEMPLATE value = 2 } }
		}

		set_country_flag = { flag = EAI_SUPPRESSION_TEMPLATE value = 1 } 

		if = { 
			limit = { 
				has_war = yes
				has_army_experience > 100
				OR = {
					num_occupied_states > 25
					has_army_experience > 200
				}
			}
 			
			set_country_flag = { flag = EAI_SUPPRESSION_TEMPLATE value = 2 } 
		}
	}
}

############################################################################################################

### These control the upgrade priorities of the AI's division role templates
# Certain template types require a base template created for the AI which it can use as a starting point for upgrades

EAI_template_upgrades = {
	army_experience = EAI_army_xp # needs to check stored + game xp for these scripts
	set_variable = { EAI_army_xp = 0 }

    EAI_garrison_template_upgrade = yes
    EAI_marine_template_upgrade = yes
    EAI_mountaineer_template_upgrade = yes
    EAI_antitank_template_upgrade = yes
    EAI_light_armor_template_upgrade = yes
    EAI_medium_armor_template_upgrade = yes
    EAI_heavy_armor_template_upgrade = yes
    EAI_modern_armor_template_upgrade = yes
    EAI_motorized_template_upgrade = yes
    EAI_mechanized_template_upgrade = yes
	EAI_suppression_template_upgrade = yes

	EAI_manage_xp = yes # return game xp back to stored xp
}

EAI_marine_template_upgrade = {
    if = {
        limit = {
            has_country_flag = EAI_military_focus_config_finished

		    NOT = { has_country_flag = EAI_marine_template_upgrade }

		    ############ industry req

		    num_of_military_factories > 10

		    ############ focus req

		    check_variable = { EAI_FOCUS/LAND/spec_ops = global.EAI_MAR_SPEC_OPS }
    
		    ############ tech req

		    has_tech = marines

		    ############ template priorities

		    has_army_experience > 30
    
		    if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } }
		    	OR = { has_country_flag = EAI_marm_template_upgrade has_army_experience > 400 }
		    }
		    else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS } }
		    	OR = { has_country_flag = EAI_harm_template_upgrade has_army_experience > 400 }
		    }
		    else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_LARM_FOCUS } }
		    	OR = { has_country_flag = EAI_larm_template_upgrade has_army_experience > 400 }
		    }
		    else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_AT_FOCUS } }
		    	OR = { has_country_flag = EAI_anti_tank_template_upgrade has_army_experience > 400 }
		    }
        }

        set_country_flag = EAI_marine_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading marine" } 
    }
}

EAI_mountaineer_template_upgrade = {
    if = {
        limit = {
            has_country_flag = EAI_military_focus_config_finished

		    NOT = { has_country_flag = EAI_mountaineer_template_upgrade }

		    ############ industry req

		    num_of_military_factories > 10

		    ############ focus req

		    check_variable = { EAI_FOCUS/LAND/spec_ops = global.EAI_MNT_SPEC_OPS }
    
		    ############ tech req

		    has_tech = tech_mountaineers

		    ############ template priorities

		    has_army_experience > 200
    
		    if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } }
		    	OR = { has_country_flag = EAI_marm_template_upgrade has_army_experience > 400 }
		    }
		    else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS } }
		    	OR = { has_country_flag = EAI_harm_template_upgrade has_army_experience > 400 }
		    }
		    else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_LARM_FOCUS } }
		    	OR = { has_country_flag = EAI_larm_template_upgrade has_army_experience > 400 }
		    }
		    else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_AT_FOCUS } }
		    	OR = { has_country_flag = EAI_anti_tank_template_upgrade has_army_experience > 400 }
		    }
        }

        set_country_flag = EAI_mountaineer_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading mountaineer" } 
    }
}

EAI_antitank_template_upgrade = {
    if = {
        limit = {
		    has_country_flag = EAI_military_focus_config_finished

		    NOT = { has_country_flag = EAI_anti_tank_template_upgrade }

		    ############ industry req

		    num_of_military_factories > 10

			if = { # MTD divisions are pretty useless
				limit = { 
					has_global_flag = EAI_challenging_mode 
					check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS }
					NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }
				} 
				num_of_military_factories > 300
			}

		    ############ tech req
    
		    OR = {
		    	AND = {
		    		check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE }

		    		OR = {
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }
    
		    				has_tech = interwar_antitank
    
		    				OR = { has_tech = basic_light_spaa has_tech = improved_light_spaa has_tech = advanced_light_spaa }
		    			}
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }
    
		    				OR = { has_tech = basic_medium_spaa has_tech = improved_medium_spaa has_tech = advanced_medium_spaa }
		    			}
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }
    
		    				OR = { has_tech = basic_heavy_spaa has_tech = improved_heavy_spaa has_tech = advanced_heavy_spaa }
		    			}
		    		}
		    	}
		    	AND = {
		    		check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE }

		    		OR = {
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }
    
		    				has_tech = interwar_antitank
    
		    				OR = { has_tech = basic_light_spaa has_tech = improved_light_spaa has_tech = advanced_light_spaa }
		    			}
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }
    
		    				has_tech = motorised_infantry
    
		    				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }
		    			}
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }
    
		    				OR = { has_tech = basic_heavy_td has_tech = improved_heavy_td has_tech = advanced_heavy_td }
		    			}
		    		}
		    	}
		    	AND = {
		    		check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE }

		    		OR = {
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }
    
		    				has_tech = interwar_antitank
    
		    				OR = { has_tech = basic_light_spaa has_tech = improved_light_spaa has_tech = advanced_light_spaa }
		    			}
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }
    
		    				has_tech = motorised_infantry
    
		    				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }
		    			}
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }
    
		    				OR = { has_tech = basic_heavy_td has_tech = improved_heavy_td has_tech = advanced_heavy_td }
		    			}
		    		}
		    	}
		    	AND = {
		    		check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE }

		    		OR = {
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN }
    
		    				has_tech = interwar_antitank
		    			}
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN }
    
		    				OR = { has_tech = basic_medium_td has_tech = improved_medium_td has_tech = advanced_medium_td }
		    			}
		    			AND = {
		    				check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN }
    
		    				OR = { has_tech = basic_heavy_td has_tech = improved_heavy_td has_tech = advanced_heavy_td }
		    			}
		    		}
		    	}
		    }

		    ############ template priorities
    
		    has_army_experience > 25
    
		    if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } }
		    	OR = { has_country_flag = EAI_marm_template_upgrade has_army_experience > 400 }
		    }
		    else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS } }
		    	OR = { has_country_flag = EAI_harm_template_upgrade has_army_experience > 400 }
		    }
		    else_if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_LARM_FOCUS } }
		    	OR = { has_country_flag = EAI_larm_template_upgrade has_army_experience > 400 }
		    }
        }

		set_country_flag = EAI_anti_tank_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading anti-tank" } 
		
		############################################################################################################################

		if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_26W_INF_WIDTH } }
			
			army_experience = -20
			
			if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							anti_tank_brigade = { x = 1 y = 3 }
							anti_tank_brigade = { x = 1 y = 4 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							infantry = { x = 2 y = 3 }
				
							light_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 1 y = 3 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							infantry = { x = 2 y = 3 }
				
							medium_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 1 y = 3 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							infantry = { x = 2 y = 3 }
				
							heavy_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
			}
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							anti_tank_brigade = { x = 1 y = 3 }
							anti_tank_brigade = { x = 1 y = 4 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							infantry = { x = 2 y = 3 }
				
							light_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							motorized = { x = 0 y = 0 }
							motorized = { x = 0 y = 1 }
							motorized = { x = 0 y = 2 }
							motorized = { x = 0 y = 3 }
							motorized = { x = 0 y = 4 }
						
							motorized = { x = 1 y = 0 }
							motorized = { x = 1 y = 1 }
							motorized = { x = 1 y = 2 }
							motorized = { x = 1 y = 3 }
				
							medium_tank_destroyer_brigade = { x = 2 y = 0 }
							
							medium_tank_destroyer_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
				
							heavy_tank_destroyer_brigade = { x = 3 y = 0 }
						}
					}
				}
			}
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							anti_tank_brigade = { x = 1 y = 3 }
							anti_tank_brigade = { x = 1 y = 4 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							infantry = { x = 2 y = 3 }
				
							light_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							motorized = { x = 0 y = 0 }
							motorized = { x = 0 y = 1 }
							motorized = { x = 0 y = 2 }
							motorized = { x = 0 y = 3 }
							motorized = { x = 0 y = 4 }
						
							motorized = { x = 1 y = 0 }
							motorized = { x = 1 y = 1 }
							motorized = { x = 1 y = 2 }
							motorized = { x = 1 y = 3 }
				
							medium_tank_destroyer_brigade = { x = 2 y = 0 }
							
							medium_tank_destroyer_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
				
							heavy_tank_destroyer_brigade = { x = 3 y = 0 }
						}
					}
				}
			}
		}
		
		############################################################################################################################
		
		if = { limit = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_40W_INF_WIDTH } }
			
			army_experience = -20
			
			if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							anti_tank_brigade = { x = 0 y = 3 }
							artillery_brigade = { x = 0 y = 4 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							anti_tank_brigade = { x = 1 y = 3 }
							artillery_brigade = { x = 1 y = 4 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							anti_tank_brigade = { x = 2 y = 3 }
							artillery_brigade = { x = 2 y = 4 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							infantry = { x = 3 y = 2 }
							infantry = { x = 3 y = 3 }
				
							light_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							artillery_brigade = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							artillery_brigade = { x = 1 y = 3 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							artillery_brigade = { x = 2 y = 3 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							infantry = { x = 3 y = 2 }
							artillery_brigade = { x = 3 y = 3 }
				
							medium_sp_anti_air_brigade = { x = 4 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							artillery_brigade = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							artillery_brigade = { x = 1 y = 3 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							artillery_brigade = { x = 2 y = 3 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							infantry = { x = 3 y = 2 }
							artillery_brigade = { x = 3 y = 3 }
				
							heavy_sp_anti_air_brigade = { x = 4 y = 0 }
						}
					}
				}
			}
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							anti_tank_brigade = { x = 0 y = 3 }
							artillery_brigade = { x = 0 y = 4 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							anti_tank_brigade = { x = 1 y = 3 }
							artillery_brigade = { x = 1 y = 4 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							anti_tank_brigade = { x = 2 y = 3 }
							artillery_brigade = { x = 2 y = 4 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							infantry = { x = 3 y = 2 }
							infantry = { x = 3 y = 3 }
				
							light_sp_anti_air_brigade = { x = 4 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							motorized = { x = 0 y = 0 }
							motorized = { x = 0 y = 1 }
							motorized = { x = 0 y = 2 }
							motorized = { x = 0 y = 3 }
							motorized = { x = 0 y = 4 }
						
							motorized = { x = 1 y = 0 }
							motorized = { x = 1 y = 1 }
							motorized = { x = 1 y = 2 }
							motorized = { x = 1 y = 3 }
							motorized = { x = 1 y = 4 }
				
							motorized = { x = 2 y = 0 }
							motorized = { x = 2 y = 1 }
							motorized = { x = 2 y = 2 }
							motorized = { x = 2 y = 3 }
							
							medium_tank_destroyer_brigade = { x = 3 y = 0 }
				
							medium_tank_destroyer_brigade = { x = 4 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							artillery_brigade = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							artillery_brigade = { x = 1 y = 3 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							artillery_brigade = { x = 2 y = 3 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							artillery_brigade = { x = 3 y = 2 }
							artillery_brigade = { x = 3 y = 3 }
				
							heavy_tank_destroyer_brigade = { x = 4 y = 0 }
						}
					}
				}
			}
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							anti_tank_brigade = { x = 0 y = 3 }
							artillery_brigade = { x = 0 y = 4 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							anti_tank_brigade = { x = 1 y = 3 }
							artillery_brigade = { x = 1 y = 4 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							anti_tank_brigade = { x = 2 y = 3 }
							artillery_brigade = { x = 2 y = 4 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							infantry = { x = 3 y = 2 }
							infantry = { x = 3 y = 3 }
				
							light_sp_anti_air_brigade = { x = 4 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							motorized = { x = 0 y = 0 }
							motorized = { x = 0 y = 1 }
							motorized = { x = 0 y = 2 }
							motorized = { x = 0 y = 3 }
							motorized = { x = 0 y = 4 }
						
							motorized = { x = 1 y = 0 }
							motorized = { x = 1 y = 1 }
							motorized = { x = 1 y = 2 }
							motorized = { x = 1 y = 3 }
							motorized = { x = 1 y = 4 }
				
							motorized = { x = 2 y = 0 }
							motorized = { x = 2 y = 1 }
							motorized = { x = 2 y = 2 }
							motorized = { x = 2 y = 3 }
							
							medium_tank_destroyer_brigade = { x = 3 y = 0 }
				
							medium_tank_destroyer_brigade = { x = 4 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							artillery_brigade = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							artillery_brigade = { x = 1 y = 3 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							artillery_brigade = { x = 2 y = 3 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							artillery_brigade = { x = 3 y = 2 }
							artillery_brigade = { x = 3 y = 3 }
				
							heavy_tank_destroyer_brigade = { x = 4 y = 0 }
						}
					}
				}
			}
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							anti_tank_brigade = { x = 0 y = 3 }
							artillery_brigade = { x = 0 y = 4 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							anti_tank_brigade = { x = 1 y = 3 }
							artillery_brigade = { x = 1 y = 4 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							anti_tank_brigade = { x = 2 y = 3 }
							artillery_brigade = { x = 2 y = 4 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							infantry = { x = 3 y = 2 }
							infantry = { x = 3 y = 3 }
							artillery_brigade = { x = 3 y = 4 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							artillery_brigade = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							artillery_brigade = { x = 1 y = 3 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							artillery_brigade = { x = 2 y = 3 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							artillery_brigade = { x = 3 y = 2 }
							
							medium_tank_destroyer_brigade = { x = 4 y = 0 }
							medium_tank_destroyer_brigade = { x = 4 y = 1 }
							medium_tank_destroyer_brigade = { x = 4 y = 2 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							artillery_brigade = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							artillery_brigade = { x = 1 y = 3 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							artillery_brigade = { x = 2 y = 3 }
							
							infantry = { x = 3 y = 0 }
							infantry = { x = 3 y = 1 }
							infantry = { x = 3 y = 2 }
							infantry = { x = 3 y = 3 }
							artillery_brigade = { x = 3 y = 4 }
							
							heavy_tank_destroyer_brigade = { x = 4 y = 0 }
						}
					}
				}
			}
		}
		
		############################################################################################################################

		if = { limit = { OR = { check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_20W_INF_WIDTH } check_variable = { EAI_FOCUS/LAND/infantry_width = global.EAI_10W_INF_WIDTH } } }
			
			army_experience = -20
			
			if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MW_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 1 y = 3 }
				
							anti_tank_brigade = { x = 2 y = 0 }
				
							light_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
				
							medium_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
				
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
				
							heavy_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
			}
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_SF_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 1 y = 3 }
				
							anti_tank_brigade = { x = 2 y = 0 }
				
							light_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							motorized = { x = 0 y = 0 }
							motorized = { x = 0 y = 1 }
							motorized = { x = 0 y = 2 }
							motorized = { x = 0 y = 3 }
						
							motorized = { x = 1 y = 0 }
							motorized = { x = 1 y = 1 }
							motorized = { x = 1 y = 2 }
				
							medium_tank_destroyer_brigade = { x = 2 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
				
							heavy_tank_destroyer_brigade = { x = 3 y = 0 }
						}
					}
				}
			}
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_GB_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 0 y = 3 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 1 y = 3 }
				
							anti_tank_brigade = { x = 2 y = 0 }
				
							light_sp_anti_air_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							motorized = { x = 0 y = 0 }
							motorized = { x = 0 y = 1 }
							motorized = { x = 0 y = 2 }
							motorized = { x = 0 y = 3 }
						
							motorized = { x = 1 y = 0 }
							motorized = { x = 1 y = 1 }
							motorized = { x = 1 y = 2 }
				
							medium_tank_destroyer_brigade = { x = 2 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
				
							heavy_tank_destroyer_brigade = { x = 3 y = 0 }
						}
					}
				}
			}
			else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } }
				
				if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_LINE_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
				
							anti_tank_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_MTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
						
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
				
							medium_tank_destroyer_brigade = { x = 3 y = 0 }
						}
					}
				}
				else_if = { limit = { check_variable = { EAI_FOCUS/LAND/antitank_design = global.EAI_HTD_AT_DESIGN } }
				
					division_template = {
						name = "Anti-Tank Template"
				
						priority = 3
				
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
						
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
				
							heavy_tank_destroyer_brigade = { x = 3 y = 0 }
						}
					}
				}
			}
		}
    }
}

EAI_light_armor_template_upgrade = {
    if = {
        limit = {
		    has_country_flag = EAI_military_focus_config_finished

		    NOT = { has_country_flag = EAI_larm_template_upgrade }

		    ############ industry req

		    num_of_military_factories > 20

		    ############ focus req

		   	OR = {
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_LARM_FOCUS }
		   		check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_LARM_ATTACHMENT }
			}

		    ############ tech req
    
		    has_tech = motorised_infantry

			if = { limit = { has_dlc = "No Step Back" }

				has_design_based_on = light_tank_chassis
			}
			else = {

				OR = { has_tech = basic_light_tank has_tech = improved_light_tank has_tech = advanced_light_tank }
			}

		    ############ template priorities

		    has_army_experience > 25
        }

      	set_country_flag = EAI_larm_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading light_armor" } 

		if = { limit = { NOT = { ai_has_role_template = light_armor } }

			army_experience = -25
		}

		division_template = {
			name = "Light Armor Template"

			priority = 6

			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }

				motorized = { x = 1 y = 0 }
				
				light_armor = { x = 2 y = 0 }
				light_armor = { x = 2 y = 1 }

				light_armor = { x = 3 y = 0 }

				light_armor = { x = 4 y = 0 }
			}
		} 
    }
}

EAI_medium_armor_template_upgrade = {
    if = {
        limit = {
	    	has_country_flag = EAI_military_focus_config_finished

	    	NOT = { has_country_flag = EAI_marm_template_upgrade }

	    	############ industry req
    
	    	num_of_military_factories > 20

	    	############ focus req

	    	OR = { 
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT }
			}

	    	############ tech req
    
	    	has_tech = motorised_infantry

			if = { limit = { has_dlc = "No Step Back" }
				
				has_design_based_on = medium_tank_chassis
			}
			else = {
				
				OR = { has_tech = basic_medium_tank has_tech = improved_medium_tank has_tech = advanced_medium_tank }
			}

	    	############ template priorities

			if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } }
				
				has_army_experience > 40
			}

	    	OR = {
	    		AND = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } has_army_experience > 25 }
    
	    		AND = { check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MARM_ATTACHMENT } has_army_experience > 100 } 
    
	    		has_army_experience > 450
	    	}
        }

		set_country_flag = EAI_marm_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading medium_armor" } 

		####################################################################

		# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }

			army_experience = -25

			division_template = {
				name = "Medium Armor Template"

				priority = 6

				regiments = {
					motorized = { x = 0 y = 0 }
					motorized = { x = 0 y = 1 }

					motorized = { x = 1 y = 0 }
					
					medium_armor = { x = 2 y = 0 }
					medium_armor = { x = 2 y = 1 }

					medium_armor = { x = 3 y = 0 }

					medium_armor = { x = 4 y = 0 }
				}
			}
		# }

		####################################################################

		# if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } NOT = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } }

		# 	army_experience = -25
			
		# 	division_template = {
		# 		name = "Medium Armor Template"

		# 		priority = 6

		# 		regiments = {
		# 			infantry = { x = 0 y = 0 }

		# 			infantry = { x = 1 y = 0 }
					
		# 			infantry = { x = 2 y = 0 }

		# 			medium_armor = { x = 3 y = 0 }
		# 			medium_armor = { x = 3 y = 1 }

		# 			medium_armor = { x = 4 y = 0 }
		# 			medium_armor = { x = 4 y = 1 }
		# 		}
		# 	}
		# }
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } }

		# 	army_experience = -40
			
		# 	division_template = {
		# 		name = "Medium Armor Template"

		# 		priority = 6

		# 		regiments = {
		# 			infantry = { x = 0 y = 0 }
		# 			infantry = { x = 0 y = 1 }

		# 			infantry = { x = 1 y = 0 }
		# 			infantry = { x = 1 y = 1 }
					
		# 			infantry = { x = 2 y = 0 }
		# 			infantry = { x = 2 y = 1 }

		# 			medium_armor = { x = 3 y = 0 }
		# 			medium_armor = { x = 3 y = 1 }

		# 			medium_armor = { x = 4 y = 0 }
		# 			medium_armor = { x = 4 y = 1 }
		# 		}
		# 	}
		# }
    }
}

EAI_heavy_armor_template_upgrade = {
    if = {
        limit = {
		    has_country_flag = EAI_military_focus_config_finished

		    NOT = { has_country_flag = EAI_harm_template_upgrade }

		    ############ industry req

		    num_of_military_factories > 20

		    ############ focus req

		    OR = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS } check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_HARM_ATTACHMENT } }

		    ############ tech req

			if = { limit = { has_dlc = "No Step Back" }

				has_design_based_on = heavy_tank_chassis
			}
			else = {

				OR = { has_tech = basic_heavy_tank has_tech = improved_heavy_tank has_tech = advanced_heavy_tank }
			}

			has_tech = motorised_infantry

		    ############ template priorities

			if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } }
				
				has_army_experience > 40
			}

		    OR = {
		    	AND = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS } has_army_experience > 25 }
    
		    	AND = { check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_HARM_ATTACHMENT } has_army_experience > 100 }
    
		    	has_army_experience > 450
		    }
        }

		set_country_flag = EAI_harm_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading heavy_armor" } 

		####################################################################

		# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }
			
			army_experience = -25

			division_template = {
				name = "Heavy Armor Template"
	
				priority = 6

				regiments = {
					motorized = { x = 0 y = 0 }
					motorized = { x = 0 y = 1 }

					motorized = { x = 1 y = 0 }
					
					heavy_armor = { x = 2 y = 0 }
					heavy_armor = { x = 2 y = 1 }

					heavy_armor = { x = 3 y = 0 }

					heavy_armor = { x = 4 y = 0 }
				}
			}
		# }
		
		####################################################################
		
		# if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } NOT = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } }
			
		# 	army_experience = -25

		# 	division_template = {
		# 		name = "Heavy Armor Template"
	
		# 		priority = 6
	
		# 		regiments = {
		# 			motorized = { x = 0 y = 0 }
					
		# 			motorized = { x = 1 y = 0 }
					
		# 			motorized = { x = 2 y = 0 }
					
		# 			heavy_armor = { x = 3 y = 0 }
		# 			heavy_armor = { x = 3 y = 1 }
	
		# 			heavy_armor = { x = 4 y = 0 }
		# 			heavy_armor = { x = 4 y = 1 }
		# 		}
		# 	}
		# }
		# else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } }
			
		# 	army_experience = -40

		# 	division_template = {
		# 		name = "Heavy Armor Template"
	
		# 		priority = 6
	
		# 		regiments = {
		# 			motorized = { x = 0 y = 0 }
		# 			motorized = { x = 0 y = 1 }
					
		# 			motorized = { x = 1 y = 0 }
		# 			motorized = { x = 1 y = 1 }
					
		# 			motorized = { x = 2 y = 0 }
		# 			motorized = { x = 2 y = 1 }
					
		# 			heavy_armor = { x = 3 y = 0 }
		# 			heavy_armor = { x = 3 y = 1 }
	
		# 			heavy_armor = { x = 4 y = 0 }
		# 			heavy_armor = { x = 4 y = 1 }
		# 		}
		# 	}
		# }
    }
}

EAI_modern_armor_template_upgrade = {
    if = {
        limit = {
		    has_country_flag = EAI_military_focus_config_finished

		    NOT = { has_country_flag = EAI_mod_template_upgrade }

		    ############ industry req

		    num_of_military_factories > 35

		    ############ tech req
    
		    has_tech = motorised_infantry
    
		    OR = { has_tech = main_battle_tank has_design_based_on = modern_tank_chassis }
    
		    ############ xp req
    
		    if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } }
				
				has_army_experience > 40
			}
			else = {
				
				has_army_experience > 25
			}
        }

		set_country_flag = EAI_mod_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading modern_armor" } 

		####################################################################

		# if = { limit = { NOT = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } } }
			
			army_experience = -25

			division_template = {
				name = "Medium Armor Template"

				priority = 6

				regiments = {
					motorized = { x = 0 y = 0 }
					motorized = { x = 0 y = 1 }

					motorized = { x = 1 y = 0 }
					
					modern_armor = { x = 2 y = 0 }
					modern_armor = { x = 2 y = 1 }

					modern_armor = { x = 3 y = 0 }

					modern_armor = { x = 4 y = 0 }
				}
			}
		# }

		####################################################################

	# 	if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } NOT = { check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } } }
			
	# 		army_experience = -25
			
	# 		division_template = {
	# 			name = "Modern Armor Template"

	# 			priority = 6

	# 			regiments = {
	# 				infantry = { x = 0 y = 0 }

	# 				infantry = { x = 1 y = 0 }
					
	# 				infantry = { x = 2 y = 0 }

	# 				modern_armor = { x = 3 y = 0 }
	# 				modern_armor = { x = 3 y = 1 }

	# 				modern_armor = { x = 4 y = 0 }
	# 				modern_armor = { x = 4 y = 1 }
	# 			}
	# 		}
	# 	}
	# 	else_if = { limit = { check_variable = { EAI_FOCUS/LAND/land_doctrine = global.EAI_MA_DOCTRINE } check_variable = { EAI_FOCUS/LAND/armor_width = global.EAI_40W_ARM_WIDTH } }
			
	# 		army_experience = -40
			
	# 		division_template = {
	# 			name = "Modern Armor Template"

	# 			priority = 6

	# 			regiments = {
	# 				infantry = { x = 0 y = 0 }
	# 				infantry = { x = 0 y = 1 }

	# 				infantry = { x = 1 y = 0 }
	# 				infantry = { x = 1 y = 1 }
					
	# 				infantry = { x = 2 y = 0 }
	# 				infantry = { x = 2 y = 1 }

	# 				modern_armor = { x = 3 y = 0 }
	# 				modern_armor = { x = 3 y = 1 }

	# 				modern_armor = { x = 4 y = 0 }
	# 				modern_armor = { x = 4 y = 1 }
	# 			}
	# 		}
	# 	}
    }
}

EAI_motorized_template_upgrade = {
    if = {
        limit = {
	    	has_country_flag = EAI_military_focus_config_finished

	    	NOT = { has_country_flag = EAI_mot_template_upgrade }

	    	############ industry req

	    	num_of_military_factories > 15

			if = { 
				limit = { 
					has_global_flag = EAI_challenging_mode 
					check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MOT_ATTACHMENT }
					NOT = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_AT_FOCUS } } 
				} 
				
				num_of_military_factories > 350
			}

	    	############ focus req

	    	OR = {
				check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MOT_FOCUS }
				check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MOT_ATTACHMENT }
			}

	    	############ tech req
    
	    	has_tech = motorised_infantry

	    	OR = {
	    		AND = {
	    			check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN }
	    			
					if = { limit = { has_dlc = "No Step Back" }
				
						has_design_based_on = medium_tank_artillery_chassis
						has_design_based_on = medium_tank_aa_chassis
					}
					else = {
						
						OR = { has_tech = basic_medium_art has_tech = improved_medium_art has_tech = advanced_medium_art }
					}
	    		}

	    		AND = {
	    			check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN }

	    			has_tech = motorized_rocket_unit
	    		}

	    		AND = {
	    			check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN }

					if = { limit = { has_dlc = "No Step Back" }
				
						has_design_based_on = light_tank_artillery_chassis
						has_design_based_on = light_tank_aa_chassis
					}
					else = {
						
						OR = { has_tech = basic_light_art has_tech = improved_light_art has_tech = advanced_light_art }
					}
	    		}
	    	}

	    	############ template priorities

			if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MOT_FOCUS } }

	    		has_army_experience > 25
	    	}
			else = {
				
				has_army_experience > 50
			}
    
	    	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } }

	    		OR = { has_country_flag = EAI_marm_template_upgrade has_army_experience > 400 }
	    	}
    
	    	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS } }

	    		OR = { has_country_flag = EAI_harm_template_upgrade has_army_experience > 400 }
	    	}
    
	    	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_LARM_Focus } }

	    		OR = { has_country_flag = EAI_larm_template_upgrade has_army_experience > 400 }
	    	}
    
	    	if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_AT_FOCUS } }

	    		OR = { has_country_flag = EAI_anti_tank_template_upgrade has_army_experience > 400 }
	    	}
        }

		set_country_flag = EAI_mot_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading motorized" } 

		# ai gets stuck without these

		if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_A_MOT_DESIGN } }

			army_experience = -25

			division_template = {
				name = "Motorized Template"

				priority = 5

				regiments = {
					motorized = { x = 0 y = 0 }
					motorized = { x = 0 y = 1 }

					motorized = { x = 1 y = 0 }
					motorized = { x = 1 y = 1 }

					motorized = { x = 2 y = 0 }
					motorized = { x = 2 y = 1 }

					medium_sp_artillery_brigade = { x = 3 y = 0 }

					medium_sp_artillery_brigade = { x = 4 y = 0 }
				}
			}
		}

		if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_B_MOT_DESIGN } }

			army_experience = -25

			division_template = {
				name = "Motorized Template"

				priority = 5

				regiments = {
					motorized = { x = 0 y = 0 }
					motorized = { x = 0 y = 1 }
					motorized = { x = 0 y = 2 }

					motorized = { x = 1 y = 0 }
					motorized = { x = 1 y = 1 }
					motorized = { x = 1 y = 2 }
				}
			}
		}
			
		if = { limit = { check_variable = { EAI_FOCUS/LAND/motorized_design = global.EAI_C_MOT_DESIGN } }

			army_experience = -25

			division_template = {
				name = "Motorized Template"

				priority = 5

				regiments = {
					motorized = { x = 0 y = 0 }
					motorized = { x = 0 y = 1 }

					motorized = { x = 1 y = 0 }
					motorized = { x = 1 y = 1 }

					motorized = { x = 2 y = 0 }
					motorized = { x = 2 y = 1 }

					light_sp_artillery_brigade = { x = 3 y = 0 }
					
					light_sp_artillery_brigade = { x = 4 y = 0 }
				}
			}
		}
    }
}

EAI_mechanized_template_upgrade = {
    if = {
        limit = {
	    	has_country_flag = EAI_military_focus_config_finished

	    	NOT = { has_country_flag = EAI_mech_template_upgrade }

	    	############ industry req

	    	num_of_military_factories > 50

	    	############ focus req

	    	check_variable = { EAI_FOCUS/LAND/attachment = global.EAI_MOT_ATTACHMENT }

	    	############ tech req

	    	has_tech = mechanised_infantry

	    	has_country_flag = EAI_mot_template_upgrade
        }

		set_country_flag = EAI_mech_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading mechanized" } 
    }
}

EAI_garrison_template_upgrade = {
    if = {
        limit = {
	    	has_country_flag = EAI_military_focus_config_finished

	    	NOT = { has_country_flag = EAI_garrison_template_upgrade }

	    	date > 1938.1.1
    
	    	has_tech = gw_artillery
    
	    	has_tech = tech_engineers

			OR = { is_major = yes has_war = yes }

	    	OR = {
	    		AND = {
	    			has_army_experience > 50
    
	    			if = { limit = { check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_AT_FOCUS } }

	    				has_country_flag = EAI_anti_tank_template_upgrade
	    			}
    
	    			if = { 
						limit = { 
							EAI_armor_tech_focus = yes 
							OR = { 
								check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_LARM_FOCUS } 
								check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_MARM_FOCUS } 
								check_variable = { EAI_FOCUS/LAND/armor_focus = global.EAI_HARM_FOCUS }
							}
						}
	    				
						OR = {
	    					has_country_flag = EAI_larm_template_upgrade
	    					has_country_flag = EAI_marm_template_upgrade
	    					has_country_flag = EAI_harm_template_upgrade
	    				}
	    			}
	    		}
    
	    		has_army_experience > 100

				AND = { original_tag = USA has_army_experience > 20 }
	    	}
        }

		set_country_flag = EAI_garrison_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading garrison" } 
		
		army_experience = -20
		
		division_template = {
			name = "Garrison Template"

			priority = 0

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				infantry = { x = 0 y = 4 }
			}

			support = {
				engineer = { x = 0 y = 0 }
				artillery = { x = 0 y = 1 }
			}
		}
    }
}

EAI_suppression_template_upgrade = {
    if = {
        limit = {
	    	has_country_flag = EAI_military_focus_config_finished

	    	NOT = { has_country_flag = EAI_suppression_template_upgrade }

			has_army_experience > 5

	    	OR = {
				date > 1938.1.1
				has_war = yes
			}
        }

		set_country_flag = EAI_suppression_template_upgrade

		if = { limit = { has_country_flag = EAI_template_upgrade_logging } log = "[GetYear} [GetMonth} | AI | [Root.GetName} | TEMPLATES: upgrading suppression" } 
		
		army_experience = -5
		
		division_template = {
			name = "Suppression Template"
	
			priority = 1
	
			regiments = {
				cavalry = { x = 0 y = 0 }
			}
		}
    }
}
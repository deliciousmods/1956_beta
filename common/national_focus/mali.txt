focus_tree = {
    id = mali_focus
    country = {
        factor = 0
        modifier = {
            add = 10
            tag = MLI
             }
    }
    default = no
	continuous_focus_position = { x = 650 y = 1350 }

    shared_focus = ABC_establish_a_general_staff	
    shared_focus = GEN_Aviation_Effort
    shared_focus = GEN_Naval_Effort
    shared_focus = GEN_begin_industrial_buildup
    shared_focus = GEN_industrial_boom
    shared_focus = AFR_african_unification
    focus = {
        id = MLI_the_sudan_of_west_africa
        icon = GFX_focus_generic_self_management
        x = 52
        y = 0
        cost = 5
        available_if_capitulated = yes
        search_filters = {FOCUS_FILTER_POLITICAL}
        ai_will_do = {
            factor = 10
        }
        completion_reward = { 
            add_political_power = 120
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 700
				producer = FRA
			}
        }    
    }
	focus = {
		id = MLI_collectivist_thinking
		icon = GFX_goal_generic_national_unity #icon = GFX_goal_tripartite_pact
		prerequisite = { focus = MLI_the_sudan_of_west_africa }
		mutually_exclusive = { focus = MLI_reinforce_the_presidency focus = MLI_build_democratic_institutions }

		available = {
		}

		x = -4
		y = 1
		relative_position_id = MLI_the_sudan_of_west_africa

		cost = 5

		available_if_capitulated = yes


		ai_will_do = {
			factor = 10
			modifier = {
				has_global_flag = rt56_old_school
				add = 0.1
			}
			modifier = {
				factor = 0
				AND = {
					is_historical_focus_on = yes
					is_puppet = yes
					NOT = {
						OVERLORD = {
							OR = {
								has_government = fascism
								has_government = communism
							}
						}
					}
				}
			}
			modifier = {
				factor = 11
				AND = {
					is_historical_focus_on = yes
					original_tag = MON
				}
			}
			modifier = {
				factor = 11
				AND = {
					is_historical_focus_on = yes
					original_tag = TAN
				}
			}
			modifier = {
				factor = 11
				AND = {
					is_historical_focus_on = yes
					original_tag = PAR
				}
			}
			modifier = {
				factor = 0
				AND = {
					is_historical_focus_on = yes
					NOT = {
						OR = {
							has_government = communism
							has_government = fascism
						}
					}
				}
			}
			modifier = {
				factor = 0
				has_civil_war = yes
				OR = {
					has_government = democratic
					has_government = neutrality
				}
			}
			modifier = {
				factor = 0.01
				AND = {
					is_historical_focus_on = no
					is_puppet = yes
					NOT = {
						OVERLORD = {
							OR = {
								has_government = fascism
								has_government = communism
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.02
				AND = {
					is_historical_focus_on = no
					is_puppet = no
					OR = {
						has_government = fascism
						has_government = communism
					}
				}
			}
			modifier = {
				factor = 10
				AND = {
					is_historical_focus_on = no
					is_puppet = no
					OR = {
						AND = {
							is_in_faction_with = SOV
							SOV = {
								has_government = communism
							}
						}
						tag = DDR
					}
				}
			}

		}

		completion_reward = {
		# As AI uses ideological politicians this is useless
		#	add_popularity = {
		#		ideology = communism
		#		popularity = 0.03
		#	}
		#	add_popularity = {
		#		ideology = fascism
		#		popularity = 0.03
		#	}
			add_political_power = 25
			add_timed_idea = { idea = collectivist_ethos_focus days = 1395 }
		}
	}
	focus = {
		id = MLI_everything_for_the_nation
		icon = GFX_goal_support_fascism #icon = GFX_goal_tripartite_pact
		prerequisite = { focus = MLI_collectivist_thinking }
		mutually_exclusive = { focus = MLI_propagate_marxist_ideas }


		available = {
			OR = {
				fascism > 0.15
				has_government = neutrality
			}
		}

		x = 2
		y = 1
		relative_position_id = MLI_collectivist_thinking

		cost = 10

		available_if_capitulated = yes


		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				is_historical_focus_on = no
			}
			modifier = {
				factor = 10
				AND = {
					is_puppet = yes
					OVERLORD = {
						has_government = fascism
					}
				}
			}
			modifier = {
				factor = 0
				AND = {
					is_historical_focus_on = yes
					NOT = { has_government = fascism }
				}
			}
			modifier = {
				factor = 11
				AND = {
					is_historical_focus_on = yes
					original_tag = PAR
				}
			}
		}

		completion_reward = {

		# As AI uses ideological politicians this is useless
		#	add_popularity = {
		#		ideology = fascism
		#		popularity = 0.04
		#	}
			add_timed_idea = { idea = nationalism days = 1395 }
		}

	}
	focus = {
		id = MLI_mobilization_of_the_masses
		icon = GFX_focus_SOV_mobilization_plan
		prerequisite = { focus = MLI_everything_for_the_nation }
		relative_position_id = MLI_everything_for_the_nation		
		x = 0
		y = 1
		cost = 10

		available = {
			fascism > 0.4
		}
		
		ai_will_do = {
			factor = 20
		}		
		
		completion_reward = {
			add_war_support = 0.1
			add_ideas = militarism_focus	
		}
		search_filters = {  FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT }
	}	

	focus = {
		id = MLI_organise_the_youth
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = MLI_mobilization_of_the_masses }
		x = 1
		y = 1
		relative_position_id = MLI_mobilization_of_the_masses

		cost = 10

		available_if_capitulated = yes

		available = {
			OR = {
				has_government = fascism
				has_government = communism
			}
		}

		completion_reward = {
			add_political_power = 25

			if = {
				limit = {
					has_completed_focus = nationalism_focus
				}
				ROOT = {
					add_ideas = GEN_Organise_Youth_Fas_I
				}
			}

			if = {
				limit = {
					has_completed_focus = internationalism_focus
				}
				ROOT = {
					add_ideas = GEN_Organise_Youth_Com_I
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }
	}	
	focus = {
		id = MLI_armament_program
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = MLI_mobilization_of_the_masses }
		relative_position_id = MLI_mobilization_of_the_masses		
		x = 2
		y = 2
		cost = 10			
		
		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
			}
		}

		ai_will_do = {
			factor = 5
		}		
		
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = MLI_propagate_marxist_ideas
		icon = GFX_goal_support_communism #icon = GFX_goal_tripartite_pact
		prerequisite = { focus = MLI_collectivist_thinking }
		mutually_exclusive = { focus = MLI_everything_for_the_nation }


		available = {
			NOT  = {
				original_tag = SOV
			}
			if = {
				limit = { original_tag = CHI }
				has_government = communism
			}
			else = {
				OR = {
					communism > 0.15
					has_government = neutrality
				}
			}
		}

		x = -1
		y = 1
		relative_position_id = MLI_collectivist_thinking

		cost = 10

		available_if_capitulated = yes


		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				OR = {
					AND = {
						is_puppet = yes
						OVERLORD = {
							has_government = communism
						}
					}
					AND = {
						is_in_faction_with = SOV
						SOV = {
							has_government = communism
						}
					}
					tag = DDR
				}
			}
			modifier = {
				factor = 0.2
				AND = {
					is_in_faction = yes
					faction_leader = {
						has_government = fascism
					}
				}
			}
			modifier = {
				factor = 0.2
				any_enemy_country = {
					is_faction_leader = yes
					has_government = communism
				}
			}						
			modifier = {
				factor = 11
				is_historical_focus_on = yes
				OR = {
					original_tag = MON
					original_tag = TAN
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				NOT = { has_government = communism }
			}
			modifier = {
				factor = 2
				is_historical_focus_on = no
			}
		}

		completion_reward = {
		# As IA uses ideological politicians this is useless
		#	add_popularity = {
		#		ideology = communism
		#		popularity = 0.05
		#	}
			add_timed_idea = { idea = internationalism days = 1395 }
			if = {
				limit = {
					has_idea = rt56_far_left_suppression
				}
				remove_ideas = rt56_far_left_suppression
			}
		}
	}
    focus = {
        id = MLI_political_batallions
        icon = GFX_focus_generic_manpower
        prerequisite = { focus = MLI_propagate_marxist_ideas }
        x = 0
        y = 1
        relative_position_id = MLI_propagate_marxist_ideas
    
        cost = 10
    
        ai_will_do = {
            factor = 15
        }
    
        available = {
			has_government = communism
        }
    
        search_filters = { FOCUS_FILTER_MANPOWER }
        completion_reward = {
            division_template = { 
                name = "Red Riflemen"
                is_locked = no
                regiments = { 
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 1 y = 0 }
                    infantry = { x = 2 y = 0 }
                    infantry = { x = 3 y = 0 }
    
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 1 y = 1 }
                    infantry = { x = 2 y = 1 }
                    infantry = { x = 3 y = 1 }
    
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 1 y = 2 }
                    infantry = { x = 2 y = 2 }
                    infantry = { x = 3 y = 2 }
                }
                support = {
                    recon = { x = 0 y = 0 }
                    engineer = { x = 0 y = 1 }
                    artillery = { x = 0 y = 2 }
                }
            }
            capital_scope = {
                create_unit = { 
                    division = "name = \"1. Red Riflemen\" division_template = \"Red Riflemen\" start_experience_factor = 0.5" 
                    owner = ROOT
                }
                create_unit = { 
                    division = "name = \"2. Red Riflemen\" division_template = \"Red Riflemen\" start_experience_factor = 0.5" 
                    owner = ROOT
                }
                create_unit = { 
                    division = "name = \"3. Red Riflemen\" division_template = \"Red Riflemen\" start_experience_factor = 0.5" 
                    owner = ROOT
                }
				create_unit = { 
					division = "name = \"4. Red Riflemen\" division_template = \"Red Riflemen\" start_experience_factor = 0.5" 
					owner = ROOT
				}				
            #    create_unit = { 
            #        division = "name = \"4. Red Riflemen\" division_template = \"Red Riflemen\" start_experience_factor = 0.5" 
            #        owner = ROOT
            #    }
            #    create_unit = { 
            #        division = "name = \"5. Red Riflemen\" division_template = \"Red Riflemen\" start_experience_factor = 0.5" 
            #        owner = ROOT
            #    }
            }
        }
    }    
	focus = {
		id = MLI_revolutionary_guards
		icon = GFX_goal_HON_nkvd_assistance
		cost = 10
		prerequisite = {
			focus = MLI_political_batallions
		}
        x = 0
        y = 1
        relative_position_id = MLI_political_batallions
		ai_will_do = {
			factor = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 0.5
			}
		}
		available = {
			has_government = communism
		}
		completion_reward = {			
			
			if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = {
						has_intelligence_agency = yes
					}
				}
				create_intelligence_agency = yes
				add_ideas = GER_abwehr_contacts
			}
			else_if = {
				limit = {
					NOT = {	
						has_dlc = "La Resistance"
					}			
				}
				add_tech_bonus = {
					name = MLI_revolutionary_guards
					bonus = 1
					uses = 1
					category = encryption_tech
				}
			}			
			add_tech_bonus = {
				name = mp_tech_bonus_name
				bonus = 1
				uses = 1
				category = military_police_tech
			}	
			remove_ideas = MLI_azawad_divide
			add_political_power = -50									
		}
	}	
	focus = {
		id = MLI_prepare_expansion
		icon = GFX_goal_generic_major_war
		x = 2
		y = 1
		prerequisite = {
			focus = MLI_revolutionary_guards focus = MLI_mobilization_of_the_masses
		}
		relative_position_id = MLI_revolutionary_guards
		cost = 10
		available = {
			r56_script_i_am_sane = yes
			is_subject = no
			has_army_manpower = { size > 39999 }
			OR = {
				has_government = fascism
				has_government = communism
			}
		}	
		ai_will_do = {
			factor = 4
		}
		will_lead_to_war_with = GNB
		will_lead_to_war_with = VOL
		will_lead_to_war_with = GAM
		will_lead_to_war_with = SEN
		
		bypass = {
			has_war_with = GNB
			has_war_with = VOL
			has_war_with = GAM
			has_war_with = SEN
		}

		completion_reward = {
			every_state = {
				limit = {
					OR = {
						is_core_of = GNB
						is_core_of = VOL
						is_core_of = GAM
						is_core_of = SEN
					}
				}
				
				add_claim_by = ROOT
			}
			if = {
				limit = {
					GNB = {
						exists = yes
					}
				}
				create_wargoal = {
					target = GNB
					type = annex_everything
					expire = 0
				}
			}
			else = {
				if = {
					limit = {
						296 = {
							OWNER = {
								NOT = {
									tag = ROOT
								}
							}
						}
					}				
					296 = {
						OWNER = {
							ROOT = {
								create_wargoal = {
									target = PREV
									expire = 0
									type = take_state_focus
									generator = { 296 }
								}
								add_ai_strategy = {
									type = conquer
									id = PREV
									value = 10
								}
							}
						}
					}
				}
			}				
			if = {
				limit = {
					VOL = {
						exists = yes
					}
				}
				create_wargoal = {
					target = VOL
					type = annex_everything
					expire = 0
				}
			}
			else = {
				if = {
					limit = {
						778 = {
							OWNER = {
								NOT = {
									tag = ROOT
								}
							}
						}
					}
					778 = {
						OWNER = {
							ROOT = {
								create_wargoal = {
									target = PREV
									expire = 0
									type = take_state_focus
									generator = { 778 }
								}
								add_ai_strategy = {
									type = conquer
									id = PREV
									value = 10
								}
							}
						}
					}
				}
			}			
			if = {
				limit = {
					GAM = {
						exists = yes
					}
				}
				create_wargoal = {
					target = GAM
					type = annex_everything
					expire = 0
				}
			}		
			else = {
				if = {
					limit = {
						701 = {
							OWNER = {
								NOT = {
									tag = ROOT
								}
							}
						}
					}
					701 = {
						OWNER = {
							ROOT = {
								create_wargoal = {
									target = PREV
									expire = 0
									type = take_state_focus
									generator = { 701 }
								}
								add_ai_strategy = {
									type = conquer
									id = PREV
									value = 10
								}
							}
						}
					}
				}	
			}										
			if = {
				limit = {
					SEN = {
						exists = yes
					}
				}
				create_wargoal = {
					target = SEN
					type = annex_everything
					expire = 0
				}
			}
			else = {
				if = {
					limit = {
						272 = {
							OWNER = {
								NOT = {
									tag = ROOT
								}
							}
						}
					}				
					272 = {
						OWNER = {
							ROOT = {
								create_wargoal = {
									target = PREV
									expire = 0
									type = take_state_focus
									generator = { 272 }
								}
								add_ai_strategy = {
									type = conquer
									id = PREV
									value = 10
								}
							}
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}	
	focus = {
		id = MLI_march_down_stream
		icon = GFX_goal_generic_occupy_states_ongoing_war
		x = 0
		y = 1
		prerequisite = {
			focus = MLI_prepare_expansion
		}
		relative_position_id = MLI_prepare_expansion
		cost = 10
		available = {
			r56_script_i_am_sane = yes
			is_subject = no
			has_army_manpower = { size > 79999 }
			OR = {
				has_government = fascism
				has_government = communism
			}
		}	
		ai_will_do = {
			factor = 4
		}
		will_lead_to_war_with = NGR
		will_lead_to_war_with = NGA
		will_lead_to_war_with = DAH
		
		bypass = {
			has_war_with = NGR
			has_war_with = NGA
			has_war_with = DAH
		}

		completion_reward = {
			every_state = {
				limit = {
					OR = {
						is_core_of = NGR
						is_core_of = NGA
						is_core_of = DAH
					}
				}
				
				add_claim_by = ROOT
			}
			if = {
				limit = {
					NGR = {
						exists = yes
					}
				}
				create_wargoal = {
					target = NGR
					type = annex_everything
					expire = 0
				}
			}
			else = {
				if = {
					limit = {
						781 = {
							OWNER = {
								NOT = {
									tag = ROOT
								}
							}
						}
					}				
					781 = {
						OWNER = {
							ROOT = {
								create_wargoal = {
									target = PREV
									expire = 0
									type = take_state_focus
									generator = { 781 }
								}
								add_ai_strategy = {
									type = conquer
									id = PREV
									value = 10
								}
							}
						}
					}
				}
			}				
			if = {
				limit = {
					NGA = {
						exists = yes
					}
				}
				create_wargoal = {
					target = NGA
					type = annex_everything
					expire = 0
				}
			}
			else = {
				every_other_country = {
					limit = {
						NOT = { is_in_faction_with = ROOT }
						NOT = { is_subject_of = ROOT }
						any_owned_state = {
							OR = {
								state = 558
								state = 900
								state = 902
								state = 901
							}
						}
					}
					if = {
						limit = {
							has_non_aggression_pact_with = ROOT
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
					}
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
					}
				}
			}			
			if = {
				limit = {
					DAH = {
						exists = yes
					}
				}
				create_wargoal = {
					target = DAH
					type = annex_everything
					expire = 0
				}
			}		
			else = {
				if = {
					limit = {
						776 = {
							OWNER = {
								NOT = {
									tag = ROOT
								}
							}
						}
					}
					776 = {
						OWNER = {
							ROOT = {
								create_wargoal = {
									target = PREV
									expire = 0
									type = take_state_focus
									generator = { 776 }
								}
								add_ai_strategy = {
									type = conquer
									id = PREV
									value = 10
								}
							}
						}
					}
				}	
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}			
    focus = {
        id = MLI_red_army
        icon = GFX_postive_heroism
        prerequisite = { focus = MLI_revolutionary_guards }
        x = 0
        y = 2
        relative_position_id = MLI_revolutionary_guards
    
        cost = 10
    
        ai_will_do = {
            factor = 12
        }
    
        available = {
			has_government = communism
        }
    
        search_filters = { FOCUS_FILTER_MANPOWER }
        completion_reward = {
			add_ideas = GEN_red_army
        }
    }
	focus = {
		id = MLI_lead_the_african_communist_movements
		icon = GFX_goal_generic_peasant_army
		prerequisite = { focus = MLI_revolutionary_guards }
		mutually_exclusive = { focus = MLI_join_the_comintern }
		available = {  
			is_subject = no
			is_in_faction = no
			has_government = communism
		}
		relative_position_id = MLI_revolutionary_guards
		x = -4
		y = 1
		cost = 5
		ai_will_do = {
			factor = 15 #if we commie rush this
		}
		completion_reward = {
			if = {
				limit = {
					any_other_country = {
						NOT = {
							original_tag = SOV
						}
						is_faction_leader = yes
						has_government = communism
						NOT = {
							has_war_with = ROOT
						}
					}
				}
				r56_other_faction_invite_communism_NOT_SOV = yes
			}
			else = {
				set_rule = { can_create_factions = yes }
				create_faction = "Anti-Imperialist Revolutionary League"
				#if = {
				#	limit = {
				#		SEN = {
				#			has_government = communism
				#			NOT = { is_in_faction = yes }
				#		}
				#	}
				#	SEN = {
				#		country_event = { id = generic.5 hours = 24 }
				#	}
				#}
			}

			add_opinion_modifier = { target = SOV modifier = bra_comercio_inimigo_modifier }
			add_opinion_modifier = { target = SOV modifier = bra_inimigo_modifier }
			SOV = { add_opinion_modifier = { target = ROOT modifier = bra_inimigo_outro_modifier } }
		}
		search_filters = { FOCUS_FILTER_ALLIANCE FOCUS_FILTER_POLITICAL }
	}	
	focus = {
		id = MLI_find_close_allies
		icon = GFX_goal_african_diplomacy
		prerequisite = { focus = MLI_lead_the_african_communist_movements }
		x = 0
		y = 1
		relative_position_id = MLI_lead_the_african_communist_movements

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			
		}

		available = {
			is_faction_leader = yes
			has_capitulated = no
		}

		completion_reward = {
			every_country = {
				limit = {
					OR = {
						original_tag = NGR
						original_tag = NGA
						original_tag = VOL
						original_tag = DAH
						original_tag = SEN
						original_tag = GAM
						original_tag = GNB
						original_tag = GNA
						original_tag = SIE
						original_tag = LIB
						original_tag = IVO
						original_tag = GHA
						original_tag = TOG
					}
					NOT = { is_in_faction = yes }
					has_government = communism
					has_opinion = {
						target = ROOT
						value > 4

					}
					NOT = {
						has_war_with = ROOT
					}
				}
				country_event = { id = generic.5 hours = 24 }
			}			
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}	
	focus = {
		id = MLI_common_armament_program
		icon = GFX_goal_generic_industrial_planning
		prerequisite = { focus = MLI_find_close_allies }
		x = 0
		y = 1
		relative_position_id = MLI_find_close_allies

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			
		}

		available = {
			is_faction_leader = yes
			has_capitulated = no
			num_faction_members > 1
		}

		completion_reward = {
			every_country = {
				limit = {
					OR = {
						original_tag = NGR
						original_tag = NGA
						original_tag = VOL
						original_tag = DAH
						original_tag = SEN
						original_tag = GAM
						original_tag = GNB
						original_tag = GNA
						original_tag = SIE
						original_tag = LIB
						original_tag = IVO
						original_tag = GHA
						original_tag = TOG
					}
					is_in_faction_with = ROOT
					has_government = communism
					
					has_opinion = {
						target = ROOT
						value > 0
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = arms_factory
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}				
			}			
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}	
	focus = {
		id = MLI_join_the_comintern
		icon = GFX_focus_chi_mission_to_the_soviet_union
		prerequisite = { focus = MLI_revolutionary_guards }
		mutually_exclusive = { focus = MLI_lead_the_african_communist_movements }
		relative_position_id = MLI_revolutionary_guards
		x = -2
		y = 1
		cost = 5

		available = {
			is_subject = no
			is_in_faction = no
			OR = {
				communism > 0.5
				has_government = communism
			}
			OR = {
				SOV = {
					NOT = { has_war_with = ROOT }
					has_government = communism
					has_capitulated = no
					is_faction_leader = yes
					has_opinion = {
						target = ROOT
						value > -11
					}						
				}
				any_other_country = {
					is_major = yes
					has_government = communism
					is_faction_leader = yes
					NOT = { has_war_with = ROOT }
					has_opinion = {
						target = ROOT
						value > -11
					}						
				}
			}
		}

		completion_reward = {
			if = {
				limit = {
					SOV = {
						has_government = communism
						is_faction_leader = yes
						has_capitulated = no
						NOT = { has_war_with = ROOT }
					}
					NOT = {
						any_other_country = {
							is_in_faction_with = SOV
							has_war_with = ROOT
						}
					}
				}
				
				SOV = { country_event = { days = 1 id = generic.2 } }
				add_opinion_modifier = { target = SOV modifier = bra_comercio_modifier }
				add_opinion_modifier = { target = SOV modifier = bra_amigo_modifier }
				SOV = { add_opinion_modifier = { target = ROOT modifier = bra_amigo_outro_modifier } }
			}

			else = {
				get_best_alliance_match_communism_effect = yes
				var:best_leader = {
					country_event = generic.2
				}
			}
		}
		search_filters = { FOCUS_FILTER_ALLIANCE FOCUS_FILTER_POLITICAL }
	}	
	focus = {
		id = MLI_to_the_bitter_end
		icon = GFX_goal_generic_army_elite
		prerequisite = { focus = MLI_red_army focus = MLI_organise_the_youth }
		x = 3
		y = 1
		relative_position_id = MLI_red_army

		cost = 10

		available_if_capitulated = yes

		available = {
			OR = {
				has_government = fascism
				has_government = communism
			}
		}

		completion_reward = {
			add_ideas = ideological_fanaticism_focus
			hidden_effect = {
				set_rule = { can_use_kamikaze_pilots = yes }
			}
			custom_effect_tooltip = kamikaze_focus_tooltip
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT }
	}
    focus = {
        id = MLI_seize_the_means_of_production
        icon = GFX_goal_generic_communist_industries
        prerequisite = { focus = MLI_propagate_marxist_ideas }
        x = -2
        y = 1
        relative_position_id = MLI_propagate_marxist_ideas
    
        cost = 10
    
        ai_will_do = {
            factor = 5
        }
    
        available = {
            has_government = communism
            num_of_factories > 5
        }
    
        search_filters = { FOCUS_FILTER_INDUSTRY }
        completion_reward = {
            add_ideas = { baltic_siezed_means_of_production_idea }
            random_owned_controlled_state = {
                limit = {
                    free_building_slots = {
                        building = industrial_complex
                        size > 0
                        include_locked = yes
                    }
                    OR = {
                        is_in_home_area = yes
                        NOT = {
                            owner = {
                                any_owned_state = {
                                    free_building_slots = {
                                        building = industrial_complex
                                        size > 0
                                        include_locked = yes
                                    }
                                    is_in_home_area = yes
                                }
                            }
                        }
                    }
                }
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
                    type = industrial_complex
                    level = 1
                    instant_build = yes
                }
            }
        }
    }    
	focus = {
		id = MLI_reinforce_the_presidency
		icon = GFX_focus_generic_military_dictatorship
		prerequisite = { focus = MLI_the_sudan_of_west_africa }
		mutually_exclusive = { focus = MLI_build_democratic_institutions focus = MLI_collectivist_thinking  }
		x = 3
		y = 1
		relative_position_id = MLI_the_sudan_of_west_africa

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				is_puppet = yes
				NOT = {
					OVERLORD = {
						has_government = neutrality
					}
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				NOT = {
					has_government = neutrality
				}
			}
			modifier = {
				factor = 0.1
				is_historical_focus_on = no
				is_puppet = no
				NOT = {
					has_government = neutrality
				}
			}
			modifier = {
				factor = 6
				has_government = neutrality
			}
		}

		available = {

		}

		completion_reward = {
			add_stability = 0.05
			add_popularity = {
				ideology = neutrality
				popularity = 0.1
			}
			add_timed_idea = { idea = GEN_Strenghten_Monarchy_I days = 1395 }
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
	}  
	focus = {
		id = MLI_gather_close_advisors
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = MLI_reinforce_the_presidency }
		x = 1
		y = 1
		relative_position_id = MLI_reinforce_the_presidency

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 3

		}

		available = {
			has_government = neutrality
		}

		completion_reward = {
			add_country_leader_trait = camarilla_leader
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}   
	focus = {
		id = MLI_religious_political_justifications
		icon = GFX_focus_TUR_loosen_the_laws_on_secularism
		prerequisite = { focus = MLI_gather_close_advisors }
		x = 0
		y = 1
		relative_position_id = MLI_gather_close_advisors

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 3

		}

		available = {
			NOT = {
				has_government = communism
			}		
		}

		completion_reward = {
			add_ideas = SUD_religious_militarism
			add_war_support = 0.05
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}  	     
	focus = {
		id = MLI_build_democratic_institutions
		icon = GFX_goal_generic_liberty
		prerequisite = { focus = MLI_the_sudan_of_west_africa }
		mutually_exclusive = { focus = MLI_collectivist_thinking focus = MLI_reinforce_the_presidency  }
		x = 7
		y = 1
		relative_position_id = MLI_the_sudan_of_west_africa

		cost = 5

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				is_puppet = yes
				OVERLORD = {
					OR = {
						has_government = fascism
						has_government = communism
					}
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				NOT = {
					OR = {
						has_government = democratic
						has_government = neutrality
					}
				}
			}
			modifier = {
				factor = 0.01
				AND = {
					is_historical_focus_on = no
					is_puppet = yes
					OVERLORD = {
						OR = {
							has_government = fascism
							has_government = communism
						}
					}
				}
			}
			modifier = {
				factor = 0.15
				AND = {
					is_historical_focus_on = no
					is_puppet = no
					OR = {
						has_government = fascism
						has_government = communism
					}
				}
			}
			modifier = {
				factor = 0
				has_civil_war = yes
				OR = {
					has_government = fascism
					has_government = communism
				}
			}
			modifier = {
				factor = 10
				is_historical_focus_on = no
				is_puppet = no
				tag = WGR
			}
		}

		available = {

		}

		completion_reward = {
			add_stability = 0.05
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			add_timed_idea = { idea = GEN_Strenghten_Democracy_I days = 1395 }
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = MLI_control_extremists
		icon = GFX_goal_decryption
		prerequisite = { focus = MLI_build_democratic_institutions focus = MLI_reinforce_the_presidency }
		x = -5
		y = 1
		relative_position_id = MLI_build_democratic_institutions

		cost = 5

		available_if_capitulated = yes

		ai_will_do = {
			factor = 2
		}

		available = {
			OR = {
				has_government = neutrality
				has_government = democratic
			}
		}

		completion_reward = {
			add_popularity = { ideology = fascism popularity = -0.05 }
			add_popularity = { ideology = communism popularity = -0.05 }

			add_ideas = GEN_Defence_Act_I
			add_stability = 0.05
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = MLI_secret_police
		icon = GFX_goal_generic_secret_police #icon = GFX_goal_tripartite_pact
		prerequisite = { focus = MLI_everything_for_the_nation focus = MLI_control_extremists }


		available = {
			num_of_factories > 12
		}

		x = -1
		y = 1
		relative_position_id = MLI_control_extremists

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				is_historical_focus_on = no
			}

		}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = {
						has_intelligence_agency = yes
					}
				}
				create_intelligence_agency = yes
				add_ideas = GER_abwehr_contacts
			}
			else = {
				add_tech_bonus = {
					name = MLI_secret_police
					bonus = 1
					uses = 2
					category = encryption_tech
				}
			}			
			add_tech_bonus = {
				name = mp_tech_bonus_name
				bonus = 1
				uses = 2
				category = military_police_tech
			}	
		}
		
	}
	focus = {
		id = MLI_police_the_north
		icon = GFX_goal_arrests
		prerequisite = { focus = MLI_secret_police }
		x = 0
		y = 1
		relative_position_id = MLI_secret_police

		cost = 5

		available_if_capitulated = yes

		ai_will_do = {
			factor = 2
		}

		available = {
			NOT = {
				has_government = democratic
			}
		}

		completion_reward = {
			remove_ideas = MLI_azawad_divide
			add_political_power = -50
			add_stability = -0.05
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = MLI_fund_the_defense_industry
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = MLI_build_democratic_institutions focus = MLI_reinforce_the_presidency }
		x = -1
		y = 1
		relative_position_id = MLI_build_democratic_institutions

		cost = 10

		available_if_capitulated = yes

		available = {

		}

		completion_reward = {
			add_ideas = GEN_Military_Build_I
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}     
	focus = {
		id = MLI_concessions_to_the_azawad_berbers
		icon = GFX_focus_generic_concessions
		prerequisite = { focus = MLI_build_democratic_institutions }
		x = 1
		y = 1
		relative_position_id = MLI_build_democratic_institutions

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			
		}

		available = {

		}

		completion_reward = {
			remove_ideas = MLI_azawad_divide
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}  
	focus = {
		id = MLI_consider_foreign_intervention
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = MLI_concessions_to_the_azawad_berbers }
		x = -2
		y = 1
		relative_position_id = MLI_concessions_to_the_azawad_berbers

		cost = 10

		available_if_capitulated = yes
		
		available = {
			has_war = no # useless while at war.
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_idea = neutrality_idea
			}
		}

		completion_reward = {
			if = {
				limit = { has_idea = neutrality_idea }
				remove_ideas = neutrality_idea
			}

            add_ideas = BEL_volunteer_corps
            set_rule = { can_send_volunteers = yes }
            
			#AI Stuff
			if = {
				limit = {
					is_historical_focus_on = yes
					has_country_flag = monroe_doctrine
					ROOT = {
						NOT = {
							has_government = fascism
						}
						has_war = no
					}
					USA = {
						has_government = democratic
						has_war = yes
						has_capitulated = no
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = support
						id = USA
						value = 50
					}
					add_ai_strategy = {
						type = send_volunteers_desire
						id = USA
						value = 1
					}
				}
			}
			if = {
				limit = {
					is_historical_focus_on = no
					has_country_flag = monroe_doctrine
					ROOT = {
						NOT = {
							has_government = fascism
						}
						has_war = no
					}
					USA = {
						has_government = democratic
						has_war = yes
						has_capitulated = no
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = support
						id = USA
						value = 125
					}
					add_ai_strategy = {
						type = send_volunteers_desire
						id = USA
						value = 100
					}
				}
			}
			if = {
				limit = {
					is_historical_focus_on = no
					NOT = {
						has_country_flag = monroe_doctrine
					}
					ROOT = {
						has_government = democratic
						has_war = no
					}
					ENG = {
						has_government = democratic
						has_war = yes
						has_capitulated = no
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = support
						id = ENG
						value = 25
					}
					add_ai_strategy = {
						type = send_volunteers_desire
						id = ENG
						value = 25
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT }
	}   
     
	focus = {
		id = MLI_push_for_a_west_african_federation
		icon = GFX_goal_african_diplomacy
		prerequisite = { focus = MLI_concessions_to_the_azawad_berbers }
		x = 0
		y = 1
		relative_position_id = MLI_concessions_to_the_azawad_berbers

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			
		}

		available = {
			has_capitulated = no
			is_subject = no	
		}

		completion_reward = {
			add_political_power = 75
			every_country = {
				limit = {
					OR = {
						original_tag = NGR
						original_tag = NGA
						original_tag = VOL
						original_tag = DAH
						original_tag = SEN
						original_tag = GAM
						original_tag = GNB
						original_tag = GNA
						original_tag = SIE
						original_tag = LIB
						original_tag = IVO
						original_tag = GHA
						original_tag = TOG
					}
					OR = {
						has_government = neutrality
						has_government = democratic
					}
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = huge_increase
				}
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}   
	focus = {
		id = MLI_west_african_defense_treaty
		icon = GFX_goal_generic_alliance
		prerequisite = { focus = MLI_push_for_a_west_african_federation }
		x = -1
		y = 1
        mutually_exclusive = { focus = MLI_propose_the_federation_of_mali }
		relative_position_id = MLI_push_for_a_west_african_federation

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			
		}

		available = {
			is_in_faction = no
			has_capitulated = no
			is_subject = no
		}

		completion_reward = {
			set_rule = { can_create_factions = yes }
			create_faction = "West African Defense Treaty"
			every_country = {
				limit = {
					OR = {
						original_tag = NGR
						original_tag = NGA
						original_tag = VOL
						original_tag = DAH
						original_tag = SEN
						original_tag = GAM
						original_tag = GNB
						original_tag = GNA
						original_tag = SIE
						original_tag = LIB
						original_tag = IVO
						original_tag = GHA
						original_tag = TOG
					}
					NOT = { is_in_faction = yes }
					OR = {
						has_government = neutrality
						has_government = democratic
					}
					has_opinion = {
						target = ROOT
						value > 4

					}
					NOT = {
						has_war_with = ROOT
					}
				}
				country_event = { id = generic.5 hours = 24 }
			}			
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = MLI_reinforce_the_treaty_members
		icon = GFX_goal_generic_industrial_planning
		prerequisite = { focus = MLI_west_african_defense_treaty }
		x = 0
		y = 1
		relative_position_id = MLI_west_african_defense_treaty

		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			
		}

		available = {
			is_faction_leader = yes
			has_capitulated = no
			num_faction_members > 1
		}

		completion_reward = {
			every_country = {
				limit = {
					OR = {
						original_tag = NGR
						original_tag = NGA
						original_tag = VOL
						original_tag = DAH
						original_tag = SEN
						original_tag = GAM
						original_tag = GNB
						original_tag = GNA
						original_tag = SIE
						original_tag = LIB
						original_tag = IVO
						original_tag = GHA
						original_tag = TOG
					}
					is_in_faction_with = ROOT
					OR = {
						has_government = neutrality
						has_government = democratic
					}
					has_opinion = {
						target = ROOT
						value > 0
					}
				}
				add_stability = 0.05
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = industrial_complex
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}				
			}			
		}
		search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
	}	
	focus = {
		id = MLI_propose_the_federation_of_mali
		icon = GFX_goal_morale_bonus
		prerequisite = { focus = MLI_push_for_a_west_african_federation }
		x = 1
		y = 1
        mutually_exclusive = { focus = MLI_west_african_defense_treaty }
		relative_position_id = MLI_push_for_a_west_african_federation

		cost = 5

		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			
		}

		available = {
			NOT = {
				NGA = {
					has_completed_focus = NGA_propose_a_west_african_federation
				}
			}

			has_capitulated = no
			is_subject = no
			any_country = {
				
					OR = {
						original_tag = NGR
						original_tag = VOL
						original_tag = DAH
						original_tag = SEN
						original_tag = GAM
						original_tag = GNB
						original_tag = GNA
						original_tag = SIE
						original_tag = IVO
						original_tag = GHA
						original_tag = TOG
					}
					exists = yes
					has_opinion = {
						target = ROOT
						value > 49
					}
					OR = {
						has_government = neutrality
						has_government = democratic
					}					
				
			}			
		}

		completion_reward = {
			every_country = {
				limit = {
					OR = {
						original_tag = NGR
						original_tag = VOL
						original_tag = DAH
						original_tag = SEN
						original_tag = GAM
						original_tag = GNB
						original_tag = GNA
						original_tag = SIE
						original_tag = IVO
						original_tag = GHA
						original_tag = TOG
					}
					exists = yes
					has_opinion = {
						target = ROOT
						value > 49
					}
					NOT = {
						has_war_with = ROOT
					}
					OR = {
						has_government = neutrality
						has_government = democratic
					}					
				}
				country_event = {
					id = r56_mali.1 hours = 6
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_POLITICAL }
	}                              
}

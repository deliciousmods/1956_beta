focus_tree = {
	id = Spain_focus
	country = {
		factor = 0
        
        modifier = {
            add = 10
			tag = SPR
			OR = {
				has_dlc = "La Resistance"
				has_global_flag = SPR_R56_focus_tree
			}
			#if set to original_tag
        }
	}
	shared_focus = SPR_republican_victory
	shared_focus = SPR_nationalist_victory

	continuous_focus_position = {
		x = 100 y = 1405
	}

	reset_on_civilwar = yes

	default = no

	#Prelude Tree
	#Some ideas shared by both sides. These shared country ideas are in r56_spain_republic - SpicyAlfredo 
	#SPR NAT Foci
	focus = {
		id = SPR_back_the_ceda
		icon = GFX_goal_SPR_una_grande_y_libre
		mutually_exclusive = { focus = SPR_maintain_the_popular_front }

		
		allow_branch = {
			OR = {
				NOT = { has_completed_focus = SPR_maintain_the_popular_front }
				has_country_flag = r56_i_am_the_nat_start_up_and_bypass
			}
		}

		x = 2
		y = 0

		bypass = {
			OR = {
				has_country_flag = r56_SPR_nationalist_check
				has_country_flag = r56_i_am_the_nat_start_up_and_bypass
			}
		}

		cost = 5

		ai_will_do = {
			factor = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 500
			}
		}

		available = {
			NOT = { has_country_flag = spanish_civil_war_started_flag }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			set_country_flag = SPR_back_the_ceda_finished 
			custom_effect_tooltip = SPR_back_the_ceda_2_tt
			custom_effect_tooltip = SPR_back_the_ceda_tt
			custom_effect_tooltip = SPR_civil_war_load_tt
			hidden_effect = {
				add_popularity = {
					ideology = fascism
					popularity = 0.01
				}
				mark_focus_tree_layout_dirty = yes
			}
			#loads branches
			
		}
	}


	focus = {
		id = SPR_establish_a_conspiracy
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = SPR_back_the_ceda }
		relative_position_id = SPR_back_the_ceda
		x = 0
		y = 1

		cost = 5

		ai_will_do = {
			factor = 10
		}

		available = {
			NOT = { 
				has_country_flag = spanish_civil_war_started_flag
			}
		}

		bypass = {
			OR = {
				has_country_flag = r56_SPR_nationalist_check
				has_country_flag = r56_i_am_the_nat_start_up_and_bypass
			}
		}
		

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			custom_effect_tooltip = SPR_establish_a_conspiracy_tt
		}

		completion_reward = {
			every_unit_leader = {
				limit = {
					has_id = 6008
				}
				add_unit_leader_trait = trait_SPA_nationalist_sympathies
			}
			custom_effect_tooltip = SPR_establish_a_conspiracy_tt
			if = {
				limit = {
					is_ai = yes
				}
				set_global_flag = scw_is_ai_driven
			}
		}
	}


	focus = {
		id = SPR_the_army_of_africa_connection
		icon = GFX_goal_EGY_suspend
		prerequisite = { focus = SPR_establish_a_conspiracy }
		relative_position_id = SPR_back_the_ceda
		x = 0
		y = 2
		
		cost = 10

		ai_will_do = {
			factor = 10
		}

		available = {
			NOT = { has_country_flag = spanish_civil_war_started_flag }
		}

		bypass = {
			OR = {
				has_country_flag = r56_SPR_nationalist_check
				has_country_flag = r56_i_am_the_nat_start_up_and_bypass
			}
		}


		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			custom_effect_tooltip = SPR_the_army_of_africa_connection_tt
		}

		completion_reward = {
			custom_effect_tooltip = SPR_the_army_of_africa_connection_tt
		}
	}

	focus = {
		id = SPR_strike_first_nat

		text = SPR_strike_first
		
		available = {
			NOT = { has_country_flag = spanish_civil_war_started_flag }
		}
		cancel_if_invalid = yes

		allow_branch = {
			OR = {
				has_completed_focus = SPR_back_the_ceda
				has_country_flag = SPR_back_the_ceda_finished 
			}
		}

		bypass = {
			OR = {
				has_global_flag = spanish_civil_war
				has_country_flag = r56_SPR_nationalist_check
				has_country_flag = r56_i_am_the_nat_start_up_and_bypass
			}
			
		}


	
		icon = GFX_goal_generic_spanish_civil_war_soldier
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_the_army_of_africa_connection }
		x = 0
		y = 3
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 5

		ai_will_do = {
			factor = 10
		}

		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			custom_effect_tooltip = SPR_strike_first_tt
			effect_tooltip = {
				add_timed_idea = {
					idea = SPR_r56_strike_first
					days = 70 #two foci
				}
			}
			custom_effect_tooltip = SPR_r56_civil_war_tt
			hidden_effect = {
				if = {
					limit = {
						is_ai = no
					}
					country_event = { id = spain.1 hours = 3 }
				}
			}
		}
	}
	#SPR Foci
	focus = {
		id = SPR_maintain_the_popular_front


		cancel_if_invalid = yes

		available = {
			NOT = {
				has_country_flag = SPR_back_the_ceda_finished
			}
		}

		bypass = {
			NOT = {
				has_country_flag = SPR_back_the_ceda_finished
			}
			OR = {
				has_global_flag = spanish_civil_war
				has_country_flag = r56_i_am_the_spr_start_up_and_bypass
			}
		}
	
		mutually_exclusive = { focus = SPR_back_the_ceda }

		allow_branch = {
			OR = { 
				NOT = { has_completed_focus = SPR_back_the_ceda }
				NOT = { has_country_flag = SPR_back_the_ceda_finished }
				has_country_flag = r56_i_am_the_spr_start_up_and_bypass
			}
		}

	

		icon = GFX_goal_spr_democracy_in_our_country

		x = 4
		y = 0
		offset = {
			trigger = { 
				has_completed_focus =  SPR_maintain_the_popular_front
			}	
			x = -1
			y = 0
		}
		
		cost = 5

		ai_will_do = {
			factor = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}

		available_if_capitulated = no

		completion_reward = {
			custom_effect_tooltip = SPR_maintain_the_popular_front_2_tt
			custom_effect_tooltip = SPR_maintain_the_popular_front_tt
			custom_effect_tooltip = SPR_civil_war_load_tt
			set_country_flag = SPR_maintain_the_popular_front_finished 
			if = {
				limit = {
					is_ai = yes
				}
				set_global_flag = scw_is_ai_driven
			}
			mark_focus_tree_layout_dirty = yes
		}
	}

	focus = {
		id = SPR_maintain_the_civil_guards_loyality
		icon = GFX_goal_molotov_ribbentrop_pact
		prerequisite = { focus = SPR_maintain_the_popular_front }
		x = 0
		y = 1
		relative_position_id = SPR_maintain_the_popular_front
		

		cost = 5

		ai_will_do = {
			factor = 10
		}


		available = {
			NOT = { has_country_flag = spanish_civil_war_started_flag }
		}

		bypass = {
			OR = {
				has_global_flag = spanish_civil_war
				has_country_flag = r56_i_am_the_spr_start_up_and_bypass
				has_country_flag =r56_SPR_republican_check	
			}
		}


		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			custom_effect_tooltip = SPR_maintain_the_popular_front_tt
		}

		completion_reward = {
			every_unit_leader = {
				limit = {
					has_id = 6008
				}
				add_unit_leader_trait = trait_SPR_republican_loyalties
			}
			custom_effect_tooltip = SPR_maintain_the_civil_guards_loyality_tt
		}
	}

	focus = {
		id = SPR_proclaim_a_general_strike
		icon = GFX_goal_generic_citizens
		prerequisite = { focus = SPR_maintain_the_civil_guards_loyality }
		x = 0
		y = 2
		relative_position_id = SPR_maintain_the_popular_front

		bypass = {
			OR = {
				has_global_flag = spanish_civil_war
				has_country_flag = r56_i_am_the_spr_start_up_and_bypass
				has_country_flag =r56_SPR_republican_check	
			}
		}
	

		cost = 10

		ai_will_do = {
			factor = 10
		}

		available = {
			NOT = { has_country_flag = spanish_civil_war_started_flag }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			custom_effect_tooltip = SPR_proclaim_a_general_strike_tt
		}

		completion_reward = {
			custom_effect_tooltip = SPR_proclaim_a_general_strike_tt
		}
	}

	focus = {
		id = SPR_strike_first_spr

		text = SPR_strike_first
		
		available = {
			NOT = { has_country_flag = spanish_civil_war_started_flag }
		}
		cancel_if_invalid = yes

		
		bypass = {
			OR = {
				has_global_flag = spanish_civil_war
				has_country_flag = r56_i_am_the_spr_start_up_and_bypass
				has_country_flag = r56_SPR_republican_check	
			}
		}

		allow_branch = {
			OR = {
				has_completed_focus = SPR_maintain_the_popular_front
				has_country_flag = SPR_maintain_the_popular_front_finished 
			}
		}

	
		icon = GFX_goal_generic_spanish_civil_war_soldier
		relative_position_id = SPR_maintain_the_popular_front
		prerequisite = { focus = SPR_proclaim_a_general_strike }
		x = 0
		y = 3
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 5

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			custom_effect_tooltip = SPR_strike_first_tt
			effect_tooltip = {
				add_timed_idea = {
					idea = SPR_r56_strike_first
					days = 70 #two foci
				}
			}
			if = {
				limit = {
					is_ai = no
				}
				country_event = { id = spain.1 hours = 3 }
			}
		}	
	}
	#Prelude ends
	#Civil War Foci. #Focus are copies of each other. Nats first
	focus = {
		id = SPR_unionify_the_faction_nat


		text = SPR_unionify_the_faction
		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
		}

		cancel_if_invalid = yes

	
		icon = GFX_goal_generic_military_deal
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_strike_first_nat }
		x = 0
		y = 4
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 5

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_ideas = SPR_unionify_the_faction_idea
		}	
	}
	focus = {
		id = SPR_solidify_the_fronts_nat


		text = SPR_solidify_the_fronts
		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
		}

		cancel_if_invalid = yes

	
		icon = GFX_focus_GRE_a_land_of_mountains
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_unionify_the_faction_nat }
		x = 0
		y = 5
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 5

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_timed_idea = {
				idea = SPR_solidify_the_fronts_idea 
				days = 730
			}
			if = {
				limit = {
					ROOT = {
						has_full_control_of_state = 176
					}
				}
				176 = {
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = 957
					}
				}
			}
		}
	}
	focus = {
		id = SPR_equipment_shipments_r56_nat


		text = SPR_equipment_shipments_r56
		
		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
			has_civil_war = yes
		}

		cancel_if_invalid = yes


		icon = GFX_focus_secret_rearmament
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_solidify_the_fronts_nat }
		x = 0
		y = 6
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 10

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
				producer = GER
			}
			add_equipment_to_stockpile = { 
				type = support_equipment
				amount = 100
				producer = POR
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 75
				producer = ITA
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 50
				producer = GER
			}
		}	
	}
	focus = {
		id = SPR_new_approach_nat


		text = SPR_new_approach_r56
		
		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
			has_civil_war = yes
		}

		cancel_if_invalid = yes


	
		icon = GFX_goal_generic_occupy_states_ongoing_war
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_equipment_shipments_r56_nat }
		x = -1
		y = 7
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 10

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SPR_Doc_Bonus
				cost_reduction = 0.75
				uses = 1
				category = land_doctrine
			}
		}	
	}
	###SPR Clones
	focus = {
		id = SPR_unionify_the_faction_spr


		text = SPR_unionify_the_faction
		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
		}

		cancel_if_invalid = yes

	
		icon = GFX_goal_generic_military_deal
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_strike_first_spr }
		x = 1
		y = 4
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 5

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_ideas = SPR_unionify_the_faction_idea
		}	
	}
	focus = {
		id = SPR_solidify_the_fronts_spr


		text = SPR_solidify_the_fronts
		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
		}

		cancel_if_invalid = yes

	
		icon = GFX_focus_GRE_a_land_of_mountains
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_unionify_the_faction_spr }
		x = 1
		y = 5
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 5

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_timed_idea = {
				idea = SPR_solidify_the_fronts_idea 
				days = 730
			}
			if = {
				limit = {
					ROOT = {
						has_full_control_of_state = 41
					}
				}
				41 = {
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = 3938
					}
				}
			}
		}
	}
	focus = {
		id = SPR_equipment_shipments_r56_spr


		text = SPR_equipment_shipments_r56
		
		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
			has_civil_war = yes
		}

		cancel_if_invalid = yes


		icon = GFX_focus_secret_rearmament
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_solidify_the_fronts_spr }
		x = 1
		y = 6
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 10

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 1000
				producer = SOV
			}
			add_equipment_to_stockpile = { 
				type = support_equipment
				amount = 100
				producer = SOV
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 75
				producer = SOV
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 50
				producer = POL
			}
		}	
	}
	focus = {
		id = SPR_new_approach_spr


		text = SPR_new_approach_r56
		
		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
			has_civil_war = yes
		}

		cancel_if_invalid = yes


	
		icon = GFX_goal_generic_occupy_states_ongoing_war
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_equipment_shipments_r56_spr }
		x = 0
		y = 7
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 10

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SPR_Doc_Bonus
				cost_reduction = 0.75
				uses = 1
				category = land_doctrine
			}
		}	
	}
	#End of Clone focues
	focus = {
		id = SPR_tackle_the_weak_fronts_r56

		cancel_if_invalid = yes

		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
			has_civil_war = yes
		}

	
		icon = GFX_focus_generic_provoke_border_clashes
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_equipment_shipments_r56_nat }
		x = 1
		y = 7
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 10

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_ideas = SPR_weak_fronts 
		}	
	}
	focus = {
		id = SPR_international_brigdes_r56

		cancel_if_invalid = yes

		
		available = {
			has_country_flag = spanish_civil_war_started_flag 
			has_civil_war = yes
		}

	
		icon = GFX_goal_generic_army
		relative_position_id = SPR_back_the_ceda
		prerequisite = { focus = SPR_equipment_shipments_r56_spr }
		x = 2
		y = 7
		
		
		#allow_branch = {
		#	is_ai = no
	   	#}

		cost = 10

		ai_will_do = {
			factor = 10
		}
	
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_ideas = SPR_international_brigdes_r56_idea
		}	
	}
	###Civil War Focues End###
	focus = {
		id = SPR_Mil
		icon = GFX_goal_generic_build_tank
		cost = 10.00
		x = 8
		y = 0
		available = {
			NOT = {
				has_idea = SPR_the_black_years
			}
			has_civil_war = no
		}
			ai_will_do = {
					factor = 10
				}
			completion_reward = {
				army_experience = 10
				add_doctrine_cost_reduction = {
					name = SPR_Doc_Bonus
					cost_reduction = 0.5
					uses = 1
					category = land_doctrine
				}
			}
			search_filters = { FOCUS_FILTER_RESEARCH }

	}

	focus = {
		id = SPR_Naval
		icon = GFX_goal_generic_build_navy
		cost = 10.00
		x = 15
		y = 0
			ai_will_do = {
					factor = 5
				}
			available = {
				NOT = {
					has_idea = SPR_the_black_years
				}
				has_civil_war = no
					any_state = {
							is_coastal = yes
							is_controlled_by = ROOT
						}
						AND = {
							171 = {
								is_controlled_by = ROOT
							}
							168 = {
								is_controlled_by = ROOT
							}
						}
				}
			completion_reward = {
					171 = {
							add_extra_state_shared_building_slots = 2
							add_building_construction = {
									type = dockyard
									level = 2
									instant_build = yes
								}
						}
					168 = {
							add_extra_state_shared_building_slots = 2
							add_building_construction = {
									type = dockyard
									level = 2
									instant_build = yes
								}
						}
				}
				search_filters = { FOCUS_FILTER_INDUSTRY }
	}
	focus = {
		id = SPR_Air_Officers
		icon = GFX_goal_spr_expand_airforce_academies
		cost = 10.00
		x = 20
		y = 0
		available = {
			NOT = {
				has_idea = SPR_the_black_years
			}
			has_civil_war = no
		}
			ai_will_do = {
					factor = 8
				}
			completion_reward = {
					air_experience = 10
					add_doctrine_cost_reduction = {
						name = SPR_Air_bonus
						cost_reduction = 0.5
						uses = 1
						category = air_doctrine
					}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_post_depression_recovery
		icon = GFX_goal_generic_construction
		cost = 10.00
		ai_will_do = {
			factor = 40
		}
		available = {
			NOT = {
				has_idea = SPR_the_black_years
			}
			has_civil_war = no
		}
		

		bypass = {
			any_other_country = {
				has_completed_focus = SPR_post_depression_recovery
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 1.0
				uses = 2
				category = industry
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
		x = 26
		y = 0


	}
	focus = {
		id = SPR_increase_public_investments
		icon = GFX_goal_generic_construct_civ_factory
		cost = 10.00
		prerequisite = {
			focus = SPR_post_depression_recovery
		}
		ai_will_do = {
			factor = 40
		}

		bypass = {
			any_other_country = {
				has_completed_focus = SPR_increase_public_investments
			}
		}		

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = industrial_complex
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = industrial_complex
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		relative_position_id = SPR_post_depression_recovery
		x = -1
		y = 1

	}
	focus = {
		id = SPR_create_the_ini
		icon = GFX_goal_generic_intelligence_exchange
		cost = 10.00
		prerequisite = {
			focus = SPR_increase_public_investments
		}
		ai_will_do = {
			factor = 30
		}

		bypass = {
		#	any_other_country = {
		#		limit = {
		#			original_tag = SPR
		#		}
		#		has_completed_focus = SPR_create_the_ini
		#	}
			has_idea = SPR_ini
		}

		completion_reward = {
			add_ideas = SPR_ini
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		x = -2
		y = 2
		relative_position_id = SPR_post_depression_recovery
	}
	focus = {
		id = SPR_create_instalaza
		icon = GFX_goal_spr_fund_instalaza
		cost = 10.00
		ai_will_do = {
			factor = 30
		}
		prerequisite = {
			focus = SPR_create_the_ini
		}


		bypass = {
		#	any_other_country = {
		#		has_completed_focus = SPR_create_instalaza
		#	}
		}		

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		x = -1
		y = 3
		relative_position_id = SPR_post_depression_recovery
	}
	focus = {
		id = SPR_surevaluate_the_peseta
		icon = GFX_focus_GRE_Combat_depression
		cost = 10.00
		ai_will_do = {
			factor = 35
		}
		prerequisite = {
			focus = SPR_post_depression_recovery
		}


		bypass = {
		#	any_other_country = {
		#		has_completed_focus = SPR_surevaluate_the_peseta
		#	}
		}

		completion_reward = {
			add_ideas = SPR_peseta_surevaluated
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		x = 1
		y = 1
		relative_position_id = SPR_post_depression_recovery
	}
	focus = {
		id = SPR_save_the_education_budget
		icon = GFX_goal_generic_scientific_exchange
		cost = 10.00
		prerequisite = {
			focus = SPR_increase_public_investments
		}
		ai_will_do = {
			factor = 50
		}
		prerequisite = {
			focus = SPR_surevaluate_the_peseta
		}
		completion_reward = {
			add_research_slot = 1
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
		x = 0
		y = 2
		relative_position_id = SPR_post_depression_recovery
	}
	focus = {
		id = SPR_repair_the_national_roads
		icon = GFX_goal_generic_construct_infrastructure
		cost = 10.00
		prerequisite = {
			focus = SPR_surevaluate_the_peseta
		}
		available = {
			has_civil_war = no
		}
		ai_will_do = {
			factor = 45
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 0
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 0
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 0
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 0
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		x = 2
		y = 2
		relative_position_id = SPR_post_depression_recovery

	}
	focus = {
		id = SPR_expand_the_mines
		icon = GFX_goal_generic_construction2
		cost = 10.00
		ai_will_do = {
			factor = 20
		}

		available = {
			controls_state = 171
			controls_state = 166
			controls_state = 173

		}

		bypass = {
			any_other_country = {
				has_completed_focus = SPR_expand_the_mines
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = excavation_tech_bonus
				bonus = 1.5
				uses = 2
				category = excavation_tech
			}			
		#	add_resource = {
		#	    type = tungsten
		#	    amount = 21
		#	    state = 171
		#	}
		#	add_resource = {
		#	    type = steel
		#	    amount = 13
		#	    state = 166
		#	}
		#	add_resource = {
		#	    type = steel
		#	    amount = 13
		#	    state = 173
		#	}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		prerequisite = {
			focus = SPR_repair_the_national_roads
		}
		x = 1
		y = 3
		relative_position_id = SPR_post_depression_recovery
	}
	focus = {
		id = SPR_support_the_heavy_industry
		icon = GFX_goal_generic_construct_mil_factory
		cost = 10.00
		prerequisite = {
			focus = SPR_create_instalaza
		}
		ai_will_do = {
			factor = 50
		}

		bypass = {
		#	any_other_country = {
		#		has_completed_focus = SPR_support_the_heavy_industry
		#	}
		}

		prerequisite = {
			focus = SPR_expand_the_mines
		}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = industrial_complex
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
		x = 0
		y = 4
		relative_position_id = SPR_post_depression_recovery
	}
	focus = {
		id = SPR_Equipment
		icon = GFX_goal_generic_army
		cost = 10.00
		prerequisite = {
			focus = SPR_Mil
		}
		x = 6
		y = 1
			ai_will_do = {
					factor = 10
				}
		completion_reward = {
			army_experience = 10
			add_tech_bonus = {
				name = SPR_eq_bonus
				uses = 2
				bonus = 1
				category = infantry_weapons
				category = artillery
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Mot
		icon = GFX_goal_generic_army_motorized
		cost = 10.00
		prerequisite = {
			focus = SPR_Equipment
		}
		x = 6
		y = 2
			bypass = {
					has_tech = motorised_infantry
				}
			ai_will_do = {
					factor = 10
				}
			completion_reward = {
					army_experience = 10
					add_tech_bonus = {
							name = SPR_Mot
							bonus = 1
							uses = 1
							technology = motorised_infantry
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Mech
		icon = GFX_goal_mechanized_offensive
		cost = 10.00
		prerequisite = {
			focus = SPR_Mot
		}
		x = 6
		y = 3
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
					add_tech_bonus = {
							name = mech_army_bonus
							bonus = 1
							uses = 1
							technology = mechanised_infantry
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Domestic_Tanks
		icon = GFX_goal_generic_army_tanks
		cost = 10.00
		prerequisite = {
			focus = SPR_Mech
		}
		mutually_exclusive = {
			focus = SPR_Foreign_Tanks
		}
		x = 5
		y = 4
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
					add_tech_bonus = {
							name = SPR_Tanks
							bonus = 1
							uses = 1
							category = armor
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Foreign_Tanks
		icon = GFX_goal_generic_military_deal
		cost = 10.00
		prerequisite = {
			focus = SPR_Mech
		}
		mutually_exclusive = {
			focus = SPR_Domestic_Tanks
		}
		x = 7
		y = 4
			ai_will_do = {
					factor = 5
				}
			available = {
					OR = {
							is_in_faction_with = SOV
							is_in_faction_with = GER
							is_in_faction_with = USA
							is_in_faction_with = ENG
						}
				}
			completion_reward = {
					add_tech_bonus = {
							name = SPR_Tanks
							bonus = 1
							uses = 2
							ahead_reduction = 1
							category = armor
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Exercises
		icon = GFX_goal_generic_position_armies
		cost = 10.00
		prerequisite = {
			focus = SPR_Domestic_Tanks
			focus = SPR_Foreign_Tanks
		}
		x = 6
		y = 5
			available = {
					has_war = no
				}
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
				army_experience = 40
				add_doctrine_cost_reduction = {
					name = SPR_Doc_Bonus
					cost_reduction = 0.5
					uses = 1
					category = land_doctrine
				}
			}
			search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Expand
		icon = GFX_goal_generic_army_doctrines
		cost = 10.00
		prerequisite = {
			focus = SPR_Mil
		}
		x = 10
		y = 1
			ai_will_do = {
					factor = 10
				}
			completion_reward = {
				army_experience = 10
				if = {
					limit = {
						TAG = N56
					}
					show_unit_leaders_tooltip = SPR_andres_saliquet 
					show_unit_leaders_tooltip = SPR_luis_orgaz_yoldi
					show_unit_leaders_tooltip = SPR_jose_moscardo_ituarte
				}
				add_doctrine_cost_reduction = {
					name = SPR_Doc_Bonus
					cost_reduction = 0.5
					uses = 1
					category = land_doctrine
				}
			}
			search_filters = { FOCUS_FILTER_RESEARCH }
	}
	focus = {
		id = SPR_Fortify_Islands
		icon = GFX_goal_generic_construct_military
		cost = 10.00
		prerequisite = {
			focus = SPR_Expand
		}
		x = 10
		y = 2
			ai_will_do = {
					factor = 5
				}
			available = {
					controls_state = 177
					controls_state = 178
					controls_state = 297
				}
			completion_reward = {
					custom_effect_tooltip = SPR_Island_Forts
					hidden_effect = {
							177 = {
									add_building_construction = {
											type = coastal_bunker
											level = 3
											province = 7114
											instant_build = yes
										}
									add_building_construction = {
											type = coastal_bunker
											level = 3
											province = 9793
											instant_build = yes
										}
								}
							178 = {
									add_building_construction = {
											type = coastal_bunker
											level = 3
											province = 13071
											instant_build = yes
										}
								}
							297 = {
									add_building_construction = {
											type = coastal_bunker
											level = 3
											province = 1903
											instant_build = yes
										}
									add_building_construction = {
											type = bunker
											level = 3
											province = 8244
											instant_build = yes
										}
								}
						}
				}
				search_filters = { FOCUS_FILTER_INDUSTRY }

	}
	focus = {
		id = SPR_Doctrine
		icon = GFX_goal_generic_army_doctrines
		cost = 10.00
		prerequisite = {
			focus = SPR_Fortify_Islands
		}
		x = 10
		y = 3
			ai_will_do = {
					factor = 10
				}
			completion_reward = {
				army_experience = 10
				add_doctrine_cost_reduction = {
					name = SPR_Doc_Bonus
					cost_reduction = 0.5
					uses = 1
					category = land_doctrine
				}
			}
			search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Doc_Bonus_2
		icon = GFX_goal_generic_army_artillery
		cost = 10.00
		prerequisite = {
			focus = SPR_Doctrine
		}
		x = 10
		y = 4
			ai_will_do = {
					factor = 10
				}
			completion_reward = {
					add_tech_bonus = {
							name = SPR_Art_bonus
							bonus = 1
							uses = 2
							category = artillery
							category = cat_anti_tank
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Doc_Wep
		icon = GFX_goal_generic_military_sphere
		cost = 10.00
		prerequisite = {
			focus = SPR_Doc_Bonus_2
		}
		x = 10
		y = 5
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
				add_tech_bonus = {
					name = SPR_Comb_Bonus
					bonus = 1
					uses = 1
					category = infantry_weapons
					category = artillery
				}
				add_doctrine_cost_reduction = {
					name = SPR_Doc_Bonus
					cost_reduction = 0.5
					uses = 2
					category = land_doctrine
				}
			}
			search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Naval_2
		icon = GFX_goal_spr_expand_secn
		cost = 10.00
		prerequisite = {
			focus = SPR_Naval
		}
		x = 15
		y = 1
			ai_will_do = {
					factor = 5
				}
			available = {
					any_state = {
							is_coastal = yes
							is_controlled_by = ROOT
						}
				}
			completion_reward = {
					navy_experience = 10
					169 = {
							add_extra_state_shared_building_slots = 2
							add_building_construction = {
									type = dockyard
									level = 2
									instant_build = yes
								}
						}
					172 = {
							add_extra_state_shared_building_slots = 2
							add_building_construction = {
									type = dockyard
									level = 2
									instant_build = yes
								}
						}
					add_doctrine_cost_reduction = {
						name = SPR_Nav_Doc
						cost_reduction = 0.5
						uses = 2
						category = naval_doctrine
					}
				}
				search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Subs
		icon = GFX_goal_generic_navy_submarine
		cost = 10.00
		prerequisite = {
			focus = SPR_Naval_2
		}
		x = 13
		y = 2
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
					navy_experience = 10
					add_tech_bonus = {
							name = SRP_Sub_bonus
							bonus = 1
							uses = 1
							category = ss_tech
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Screens
		icon = GFX_goal_generic_navy_cruiser
		cost = 10.00
		prerequisite = {
			focus = SPR_Naval_2
		}
		x = 15
		y = 2
			ai_will_do = {
					factor = 8
				}
			completion_reward = {
					navy_experience = 10
					add_tech_bonus = {
							name = SRP_Ship_Bonus
							bonus = 1
							uses = 2
							category = ca_tech
							category = dd_tech
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Capitals
		icon = GFX_goal_generic_navy_battleship
		cost = 10.00
		prerequisite = {
			focus = SPR_Naval_2
		}
		x = 17
		y = 2
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
					navy_experience = 10
					add_tech_bonus = {
							name = SRP_Ship_Bonus
							bonus = 1
							uses = 1
							category = bb_tech
							category = bc_tech
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Carriers
		icon = GFX_goal_generic_navy_carrier
		cost = 10.00
		prerequisite = {
			focus = SPR_Capitals
			focus = SPR_Subs
			focus = SPR_Screens
		}
		x = 15
		y = 3
			ai_will_do = {
					factor = 4
				}
			completion_reward = {
					navy_experience = 10
					add_tech_bonus = {
							name = SRP_Carrier_Bonus
							bonus = 1
							uses = 1
							category = cv_tech
						}
					169 = {
							add_extra_state_shared_building_slots = 2
							add_building_construction = {
									type = dockyard
									level = 2
									instant_build = yes
								}
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

	}
	focus = {
		id = SPR_Nav_Air
		icon = GFX_goal_generic_air_fighter
		cost = 10.00
		prerequisite = {
			focus = SPR_Carriers
		}
		x = 15
		y = 4
			ai_will_do = {
					factor = 4
				}
			completion_reward = {
					air_experience = 10
					add_tech_bonus = {
							name = SPR_Nav_Air_Bonus
							bonus = 1
							uses = 1
							category = naval_bomber
						}
					add_doctrine_cost_reduction = {
						name = SPR_Nav_Doc
						cost_reduction = 0.5
						uses = 2
						category = naval_doctrine
					}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Air_Factories
		icon = GFX_goal_generic_air_production
		cost = 10.00
		prerequisite = {
			focus = SPR_Air_Officers
		}
		x = 20
		y = 1
			ai_will_do = {
					factor = 8
				}
			available = {
					controls_state = 41
				}
			completion_reward = {
					41 = {
							add_extra_state_shared_building_slots = 2
							add_building_construction = {
									type = arms_factory
									level = 2
									instant_build = yes
								}
						}
					air_experience = 5
				}
				search_filters = { FOCUS_FILTER_INDUSTRY }

	}
	focus = {
		id = SPR_Fighters
		icon = GFX_goal_generic_air_fighter2
		cost = 10.00
		prerequisite = {
			focus = SPR_Air_Factories
		}
		x = 20
		y = 2
			ai_will_do = {
					factor = 6
				}
			completion_reward = {
					add_tech_bonus = {
							name = SPR_Fighters
							bonus = 1
							uses = 1
							technology = fighter1
							technology = fighter2
							technology = fighter3
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_CAS
		icon = GFX_goal_generic_CAS
		cost = 10.00
		prerequisite = {
			focus = SPR_Fighters
		}
		mutually_exclusive = {
			focus = SPR_Tac_Bomber
			focus = SPR_Strat
		}
		x = 18
		y = 3
			ai_will_do = {
					factor = 8
				}
			completion_reward = {
					add_tech_bonus = {
							name = SPR_CAS_Bonus
							bonus = 1
							uses = 1
							technology = CAS1
							technology = CAS2
							technology = CAS3
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Tac_Bomber
		icon = GFX_goal_generic_air_naval_bomber
		cost = 10.00
		prerequisite = {
			focus = SPR_Fighters
		}
		mutually_exclusive = {
			focus = SPR_CAS
			focus = SPR_Strat
		}
		x = 20
		y = 3
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
					add_tech_bonus = {
							name = SPR_Tac_Bonus
							bonus = 1
							uses = 1
							category = tactical_bomber
							category = naval_bomber
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Air_Doctrine_2
		icon = GFX_goal_generic_air_doctrine
		cost = 10.00
		prerequisite = {
			focus = SPR_Tac_Bomber
		}
		x = 20
		y = 4
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
					air_experience = 10
					add_tech_bonus = {
							name = SPR_Air_bonus_2
							bonus = 1
							uses = 2
							category = operational_integrity_tree
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Strat
		icon = GFX_goal_generic_air_bomber
		cost = 10.00
		prerequisite = {
			focus = SPR_Fighters
		}
		mutually_exclusive = {
			focus = SPR_CAS
			focus = SPR_Tac_Bomber
		}
		x = 22
		y = 3
			ai_will_do = {
					factor = 3
				}
			completion_reward = {
					add_tech_bonus = {
							name = SPR_Tac_Bonus
							bonus = 1
							uses = 1
							technology = strategic_bomber1
							technology = strategic_bomber2
							technology = strategic_bomber3
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Air_Doctrine_3
		icon = GFX_goal_generic_air_doctrine
		cost = 10.00
		prerequisite = {
			focus = SPR_Strat
		}
		x = 22
		y = 4
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
					air_experience = 10
					add_tech_bonus = {
							name = SPR_Air_bonus_3
							bonus = 1
							uses = 2
							category = strategic_destruction_tree
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
	focus = {
		id = SPR_Air_Doctrine
		icon = GFX_goal_generic_air_doctrine
		cost = 10.00
		prerequisite = {
			focus = SPR_CAS
		}
		x = 18
		y = 4
			ai_will_do = {
					factor = 5
				}
			completion_reward = {
					air_experience = 10
					add_tech_bonus = {
							name = SPR_Air_bonus
							bonus = 1
							uses = 2
							category = battlefield_support_tree
						}
				}
				search_filters = { FOCUS_FILTER_RESEARCH }

	}
}
